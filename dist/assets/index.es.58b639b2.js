import{b0 as ve,a$ as Jw,a_ as bi,b3 as sr,b as Ee,b4 as Ln,b1 as xu,b5 as Eu,b6 as Yr,b7 as zr,b8 as su,b9 as lr,ba as Xw,bb as od,e as Qw}from"./index.4868755f.js";import{t as wi,e as qr,a as qe,r as Nv,b as t5,d as e5,f as r5,h as i5,i as n5,j as s5,k as a5,l as o5,s as Su}from"./index.df8df608.js";var qo={},ra={};Object.defineProperty(ra,"__esModule",{value:!0});function f5(l){if(typeof l!="string")throw new Error(`Cannot safe json parse value of type ${typeof l}`);try{return JSON.parse(l)}catch{return l}}ra.safeJsonParse=f5;function h5(l){return typeof l=="string"?l:JSON.stringify(l,(i,a)=>typeof a>"u"?null:a)}ra.safeJsonStringify=h5;var Ns={exports:{}},fd;function u5(){return fd||(fd=1,function(){let l;function i(){}l=i,l.prototype.getItem=function(a){return this.hasOwnProperty(a)?String(this[a]):null},l.prototype.setItem=function(a,f){this[a]=String(f)},l.prototype.removeItem=function(a){delete this[a]},l.prototype.clear=function(){const a=this;Object.keys(a).forEach(function(f){a[f]=void 0,delete a[f]})},l.prototype.key=function(a){return a=a||0,Object.keys(this)[a]},l.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ve<"u"&&ve.localStorage?Ns.exports=ve.localStorage:typeof window<"u"&&window.localStorage?Ns.exports=window.localStorage:Ns.exports=new i}()),Ns.exports}var ah={},Ds={},hd;function c5(){if(hd)return Ds;hd=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.IKeyValueStorage=void 0;class l{}return Ds.IKeyValueStorage=l,Ds}var Ls={},ud;function l5(){if(ud)return Ls;ud=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.parseEntry=void 0;const l=ra;function i(a){var f;return[a[0],l.safeJsonParse((f=a[1])!==null&&f!==void 0?f:"")]}return Ls.parseEntry=i,Ls}var cd;function d5(){return cd||(cd=1,function(l){Object.defineProperty(l,"__esModule",{value:!0});const i=wi.exports;i.__exportStar(c5(),l),i.__exportStar(l5(),l)}(ah)),ah}Object.defineProperty(qo,"__esModule",{value:!0});qo.KeyValueStorage=void 0;const os=wi.exports,ld=ra,p5=os.__importDefault(u5()),v5=d5();class Dv{constructor(){this.localStorage=p5.default}getKeys(){return os.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return os.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(v5.parseEntry)})}getItem(i){return os.__awaiter(this,void 0,void 0,function*(){const a=this.localStorage.getItem(i);if(a!==null)return ld.safeJsonParse(a)})}setItem(i,a){return os.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(i,ld.safeJsonStringify(a))})}removeItem(i){return os.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(i)})}}qo.KeyValueStorage=Dv;var g5=qo.default=Dv,cs={},ks={},re={},oh={},Us={},dd;function m5(){if(dd)return Us;dd=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.delay=void 0;function l(i){return new Promise(a=>{setTimeout(()=>{a(!0)},i)})}return Us.delay=l,Us}var On={},fh={},Tn={},pd;function b5(){return pd||(pd=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.ONE_THOUSAND=Tn.ONE_HUNDRED=void 0,Tn.ONE_HUNDRED=100,Tn.ONE_THOUSAND=1e3),Tn}var hh={},vd;function y5(){return vd||(vd=1,function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.ONE_YEAR=l.FOUR_WEEKS=l.THREE_WEEKS=l.TWO_WEEKS=l.ONE_WEEK=l.THIRTY_DAYS=l.SEVEN_DAYS=l.FIVE_DAYS=l.THREE_DAYS=l.ONE_DAY=l.TWENTY_FOUR_HOURS=l.TWELVE_HOURS=l.SIX_HOURS=l.THREE_HOURS=l.ONE_HOUR=l.SIXTY_MINUTES=l.THIRTY_MINUTES=l.TEN_MINUTES=l.FIVE_MINUTES=l.ONE_MINUTE=l.SIXTY_SECONDS=l.THIRTY_SECONDS=l.TEN_SECONDS=l.FIVE_SECONDS=l.ONE_SECOND=void 0,l.ONE_SECOND=1,l.FIVE_SECONDS=5,l.TEN_SECONDS=10,l.THIRTY_SECONDS=30,l.SIXTY_SECONDS=60,l.ONE_MINUTE=l.SIXTY_SECONDS,l.FIVE_MINUTES=l.ONE_MINUTE*5,l.TEN_MINUTES=l.ONE_MINUTE*10,l.THIRTY_MINUTES=l.ONE_MINUTE*30,l.SIXTY_MINUTES=l.ONE_MINUTE*60,l.ONE_HOUR=l.SIXTY_MINUTES,l.THREE_HOURS=l.ONE_HOUR*3,l.SIX_HOURS=l.ONE_HOUR*6,l.TWELVE_HOURS=l.ONE_HOUR*12,l.TWENTY_FOUR_HOURS=l.ONE_HOUR*24,l.ONE_DAY=l.TWENTY_FOUR_HOURS,l.THREE_DAYS=l.ONE_DAY*3,l.FIVE_DAYS=l.ONE_DAY*5,l.SEVEN_DAYS=l.ONE_DAY*7,l.THIRTY_DAYS=l.ONE_DAY*30,l.ONE_WEEK=l.SEVEN_DAYS,l.TWO_WEEKS=l.ONE_WEEK*2,l.THREE_WEEKS=l.ONE_WEEK*3,l.FOUR_WEEKS=l.ONE_WEEK*4,l.ONE_YEAR=l.ONE_DAY*365}(hh)),hh}var gd;function Lv(){return gd||(gd=1,function(l){Object.defineProperty(l,"__esModule",{value:!0});const i=wi.exports;i.__exportStar(b5(),l),i.__exportStar(y5(),l)}(fh)),fh}var md;function w5(){if(md)return On;md=1,Object.defineProperty(On,"__esModule",{value:!0}),On.fromMiliseconds=On.toMiliseconds=void 0;const l=Lv();function i(f){return f*l.ONE_THOUSAND}On.toMiliseconds=i;function a(f){return Math.floor(f/l.ONE_THOUSAND)}return On.fromMiliseconds=a,On}var bd;function _5(){return bd||(bd=1,function(l){Object.defineProperty(l,"__esModule",{value:!0});const i=wi.exports;i.__exportStar(m5(),l),i.__exportStar(w5(),l)}(oh)),oh}var ss={},yd;function M5(){if(yd)return ss;yd=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.Watch=void 0;class l{constructor(){this.timestamps=new Map}start(a){if(this.timestamps.has(a))throw new Error(`Watch already started for label: ${a}`);this.timestamps.set(a,{started:Date.now()})}stop(a){const f=this.get(a);if(typeof f.elapsed<"u")throw new Error(`Watch already stopped for label: ${a}`);const g=Date.now()-f.started;this.timestamps.set(a,{started:f.started,elapsed:g})}get(a){const f=this.timestamps.get(a);if(typeof f>"u")throw new Error(`No timestamp found for label: ${a}`);return f}elapsed(a){const f=this.get(a);return f.elapsed||Date.now()-f.started}}return ss.Watch=l,ss.default=l,ss}var uh={},Fs={},wd;function x5(){if(wd)return Fs;wd=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.IWatch=void 0;class l{}return Fs.IWatch=l,Fs}var _d;function E5(){return _d||(_d=1,function(l){Object.defineProperty(l,"__esModule",{value:!0}),wi.exports.__exportStar(x5(),l)}(uh)),uh}(function(l){Object.defineProperty(l,"__esModule",{value:!0});const i=wi.exports;i.__exportStar(_5(),l),i.__exportStar(M5(),l),i.__exportStar(E5(),l),i.__exportStar(Lv(),l)})(re);var ch={},$s={};class kn{}const S5=Object.freeze(Object.defineProperty({__proto__:null,IEvents:kn},Symbol.toStringTag,{value:"Module"})),A5=Jw(S5);var Md;function I5(){if(Md)return $s;Md=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.IHeartBeat=void 0;const l=A5;class i extends l.IEvents{constructor(f){super()}}return $s.IHeartBeat=i,$s}var xd;function kv(){return xd||(xd=1,function(l){Object.defineProperty(l,"__esModule",{value:!0}),wi.exports.__exportStar(I5(),l)}(ch)),ch}var lh={},Cn={},Ed;function R5(){if(Ed)return Cn;Ed=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.HEARTBEAT_EVENTS=Cn.HEARTBEAT_INTERVAL=void 0;const l=re;return Cn.HEARTBEAT_INTERVAL=l.FIVE_SECONDS,Cn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Cn}var Sd;function Uv(){return Sd||(Sd=1,function(l){Object.defineProperty(l,"__esModule",{value:!0}),wi.exports.__exportStar(R5(),l)}(lh)),lh}var Ad;function P5(){if(Ad)return ks;Ad=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.HeartBeat=void 0;const l=wi.exports,i=qr.exports,a=re,f=kv(),g=Uv();class n extends f.IHeartBeat{constructor(M){super(M),this.events=new i.EventEmitter,this.interval=g.HEARTBEAT_INTERVAL,this.interval=(M==null?void 0:M.interval)||g.HEARTBEAT_INTERVAL}static init(M){return l.__awaiter(this,void 0,void 0,function*(){const _=new n(M);return yield _.init(),_})}init(){return l.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(M,_){this.events.on(M,_)}once(M,_){this.events.once(M,_)}off(M,_){this.events.off(M,_)}removeListener(M,_){this.events.removeListener(M,_)}initialize(){return l.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),a.toMiliseconds(this.interval))})}pulse(){this.events.emit(g.HEARTBEAT_EVENTS.pulse)}}return ks.HeartBeat=n,ks}(function(l){Object.defineProperty(l,"__esModule",{value:!0});const i=wi.exports;i.__exportStar(P5(),l),i.__exportStar(kv(),l),i.__exportStar(Uv(),l)})(cs);var Te={},dh,Id;function O5(){if(Id)return dh;Id=1;function l(a){try{return JSON.stringify(a)}catch{return'"[Circular]"'}}dh=i;function i(a,f,g){var n=g&&g.stringify||l,x=1;if(typeof a=="object"&&a!==null){var M=f.length+x;if(M===1)return a;var _=new Array(M);_[0]=n(a);for(var w=1;w<M;w++)_[w]=n(f[w]);return _.join(" ")}if(typeof a!="string")return a;var b=f.length;if(b===0)return a;for(var A="",E=1-x,I=-1,R=a&&a.length||0,T=0;T<R;){if(a.charCodeAt(T)===37&&T+1<R){switch(I=I>-1?I:0,a.charCodeAt(T+1)){case 100:case 102:if(E>=b||f[E]==null)break;I<T&&(A+=a.slice(I,T)),A+=Number(f[E]),I=T+2,T++;break;case 105:if(E>=b||f[E]==null)break;I<T&&(A+=a.slice(I,T)),A+=Math.floor(Number(f[E])),I=T+2,T++;break;case 79:case 111:case 106:if(E>=b||f[E]===void 0)break;I<T&&(A+=a.slice(I,T));var B=typeof f[E];if(B==="string"){A+="'"+f[E]+"'",I=T+2,T++;break}if(B==="function"){A+=f[E].name||"<anonymous>",I=T+2,T++;break}A+=n(f[E]),I=T+2,T++;break;case 115:if(E>=b)break;I<T&&(A+=a.slice(I,T)),A+=String(f[E]),I=T+2,T++;break;case 37:I<T&&(A+=a.slice(I,T)),A+="%",I=T+2,T++,E--;break}++E}++T}return I===-1?a:(I<R&&(A+=a.slice(I)),A)}return dh}var ph,Rd;function T5(){if(Rd)return ph;Rd=1;const l=O5();ph=g;const i=K().console||{},a={mapHttpRequest:R,mapHttpResponse:R,wrapRequestSerializer:T,wrapResponseSerializer:T,wrapErrorSerializer:T,req:R,res:R,err:E};function f($,P){return Array.isArray($)?$.filter(function(Y){return Y!=="!stdSerializers.err"}):$===!0?Object.keys(P):!1}function g($){$=$||{},$.browser=$.browser||{};const P=$.browser.transmit;if(P&&typeof P.send!="function")throw Error("pino: transmit option must have a send function");const z=$.browser.write||i;$.browser.write&&($.browser.asObject=!0);const Y=$.serializers||{},nt=f($.browser.serialize,Y);let v=$.browser.serialize;Array.isArray($.browser.serialize)&&$.browser.serialize.indexOf("!stdSerializers.err")>-1&&(v=!1);const t=["error","fatal","warn","info","debug","trace"];typeof z=="function"&&(z.error=z.fatal=z.warn=z.info=z.debug=z.trace=z),$.enabled===!1&&($.level="silent");const r=$.level||"info",s=Object.create(z);s.log||(s.log=B),Object.defineProperty(s,"levelVal",{get:d}),Object.defineProperty(s,"level",{get:m,set:y});const h={transmit:P,serialize:nt,asObject:$.browser.asObject,levels:t,timestamp:I($)};s.levels=g.levels,s.level=r,s.setMaxListeners=s.getMaxListeners=s.emit=s.addListener=s.on=s.prependListener=s.once=s.prependOnceListener=s.removeListener=s.removeAllListeners=s.listeners=s.listenerCount=s.eventNames=s.write=s.flush=B,s.serializers=Y,s._serialize=nt,s._stdErrSerialize=v,s.child=u,P&&(s._logEvent=A());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function m(){return this._level}function y(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,n(h,s,"error","log"),n(h,s,"fatal","error"),n(h,s,"warn","error"),n(h,s,"info","log"),n(h,s,"debug","log"),n(h,s,"trace","log")}function u(e,c){if(!e)throw new Error("missing bindings for child Pino");c=c||{},nt&&e.serializers&&(c.serializers=e.serializers);const F=c.serializers;if(nt&&F){var L=Object.assign({},Y,F),H=$.browser.serialize===!0?Object.keys(L):nt;delete e.serializers,_([e],H,L,this._stdErrSerialize)}function G(tt){this._childLevel=(tt._childLevel|0)+1,this.error=w(tt,e,"error"),this.fatal=w(tt,e,"fatal"),this.warn=w(tt,e,"warn"),this.info=w(tt,e,"info"),this.debug=w(tt,e,"debug"),this.trace=w(tt,e,"trace"),L&&(this.serializers=L,this._serialize=H),P&&(this._logEvent=A([].concat(tt._logEvent.bindings,e)))}return G.prototype=this,new G(this)}return s}g.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},g.stdSerializers=a,g.stdTimeFunctions=Object.assign({},{nullTime:D,epochTime:q,unixTime:k,isoTime:N});function n($,P,z,Y){const nt=Object.getPrototypeOf(P);P[z]=P.levelVal>P.levels.values[z]?B:nt[z]?nt[z]:i[z]||i[Y]||B,x($,P,z)}function x($,P,z){!$.transmit&&P[z]===B||(P[z]=function(Y){return function(){const v=$.timestamp(),t=new Array(arguments.length),r=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var s=0;s<t.length;s++)t[s]=arguments[s];if($.serialize&&!$.asObject&&_(t,this._serialize,this.serializers,this._stdErrSerialize),$.asObject?Y.call(r,M(this,z,t,v)):Y.apply(r,t),$.transmit){const h=$.transmit.level||P.level,d=g.levels.values[h],m=g.levels.values[z];if(m<d)return;b(this,{ts:v,methodLevel:z,methodValue:m,transmitLevel:h,transmitValue:g.levels.values[$.transmit.level||P.level],send:$.transmit.send,val:P.levelVal},t)}}}(P[z]))}function M($,P,z,Y){$._serialize&&_(z,$._serialize,$.serializers,$._stdErrSerialize);const nt=z.slice();let v=nt[0];const t={};Y&&(t.time=Y),t.level=g.levels.values[P];let r=($._childLevel|0)+1;if(r<1&&(r=1),v!==null&&typeof v=="object"){for(;r--&&typeof nt[0]=="object";)Object.assign(t,nt.shift());v=nt.length?l(nt.shift(),nt):void 0}else typeof v=="string"&&(v=l(nt.shift(),nt));return v!==void 0&&(t.msg=v),t}function _($,P,z,Y){for(const nt in $)if(Y&&$[nt]instanceof Error)$[nt]=g.stdSerializers.err($[nt]);else if(typeof $[nt]=="object"&&!Array.isArray($[nt]))for(const v in $[nt])P&&P.indexOf(v)>-1&&v in z&&($[nt][v]=z[v]($[nt][v]))}function w($,P,z){return function(){const Y=new Array(1+arguments.length);Y[0]=P;for(var nt=1;nt<Y.length;nt++)Y[nt]=arguments[nt-1];return $[z].apply(this,Y)}}function b($,P,z){const Y=P.send,nt=P.ts,v=P.methodLevel,t=P.methodValue,r=P.val,s=$._logEvent.bindings;_(z,$._serialize||Object.keys($.serializers),$.serializers,$._stdErrSerialize===void 0?!0:$._stdErrSerialize),$._logEvent.ts=nt,$._logEvent.messages=z.filter(function(h){return s.indexOf(h)===-1}),$._logEvent.level.label=v,$._logEvent.level.value=t,Y(v,$._logEvent,r),$._logEvent=A(s)}function A($){return{ts:0,messages:[],bindings:$||[],level:{label:"",value:0}}}function E($){const P={type:$.constructor.name,msg:$.message,stack:$.stack};for(const z in $)P[z]===void 0&&(P[z]=$[z]);return P}function I($){return typeof $.timestamp=="function"?$.timestamp:$.timestamp===!1?D:q}function R(){return{}}function T($){return $}function B(){}function D(){return!1}function q(){return Date.now()}function k(){return Math.round(Date.now()/1e3)}function N(){return new Date(Date.now()).toISOString()}function K(){function $(P){return typeof P<"u"&&P}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return $(self)||$(window)||$(this)||{}}}return ph}var Bn={},Pd;function Fv(){return Pd||(Pd=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.PINO_CUSTOM_CONTEXT_KEY=Bn.PINO_LOGGER_DEFAULTS=void 0,Bn.PINO_LOGGER_DEFAULTS={level:"info"},Bn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Bn}var Ur={},Od;function C5(){if(Od)return Ur;Od=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.generateChildLogger=Ur.formatChildLoggerContext=Ur.getLoggerContext=Ur.setBrowserLoggerContext=Ur.getBrowserLoggerContext=Ur.getDefaultLoggerOptions=void 0;const l=Fv();function i(M){return Object.assign(Object.assign({},M),{level:(M==null?void 0:M.level)||l.PINO_LOGGER_DEFAULTS.level})}Ur.getDefaultLoggerOptions=i;function a(M,_=l.PINO_CUSTOM_CONTEXT_KEY){return M[_]||""}Ur.getBrowserLoggerContext=a;function f(M,_,w=l.PINO_CUSTOM_CONTEXT_KEY){return M[w]=_,M}Ur.setBrowserLoggerContext=f;function g(M,_=l.PINO_CUSTOM_CONTEXT_KEY){let w="";return typeof M.bindings>"u"?w=a(M,_):w=M.bindings().context||"",w}Ur.getLoggerContext=g;function n(M,_,w=l.PINO_CUSTOM_CONTEXT_KEY){const b=g(M,w);return b.trim()?`${b}/${_}`:_}Ur.formatChildLoggerContext=n;function x(M,_,w=l.PINO_CUSTOM_CONTEXT_KEY){const b=n(M,_,w),A=M.child({context:b});return f(A,b,w)}return Ur.generateChildLogger=x,Ur}(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.pino=void 0;const i=wi.exports,a=i.__importDefault(T5());Object.defineProperty(l,"pino",{enumerable:!0,get:function(){return a.default}}),i.__exportStar(Fv(),l),i.__exportStar(C5(),l)})(Te);class B5 extends kn{constructor(i){super(),this.opts=i,this.protocol="wc",this.version=2}}class q5 extends kn{constructor(i,a){super(),this.core=i,this.logger=a,this.records=new Map}}class N5{constructor(i,a){this.logger=i,this.core=a}}class D5 extends kn{constructor(i,a){super(),this.relayer=i,this.logger=a}}class L5 extends kn{constructor(i){super()}}class k5{constructor(i,a,f,g){this.core=i,this.logger=a,this.name=f}}class U5 extends kn{constructor(i,a){super(),this.relayer=i,this.logger=a}}class F5 extends kn{constructor(i,a){super(),this.core=i,this.logger=a}}class $5{constructor(i,a){this.projectId=i,this.logger=a}}class z5{constructor(i){this.opts=i,this.protocol="wc",this.version=2}}class H5{constructor(i){this.client=i}}const K5=l=>JSON.stringify(l,(i,a)=>typeof a=="bigint"?a.toString()+"n":a),j5=l=>{const i=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,a=l.replace(i,'$1"$2n"$3');return JSON.parse(a,(f,g)=>typeof g=="string"&&g.match(/^\d+n$/)?BigInt(g.substring(0,g.length-1)):g)};function Au(l){if(typeof l!="string")throw new Error(`Cannot safe json parse value of type ${typeof l}`);try{return j5(l)}catch{return l}}function Js(l){return typeof l=="string"?l:K5(l)||""}var Iu={},ls={},No={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.BrowserRandomSource=void 0;const Td=65536;class V5{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const i=typeof self<"u"?self.crypto||self.msCrypto:null;i&&i.getRandomValues!==void 0&&(this._crypto=i,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(i){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const a=new Uint8Array(i);for(let f=0;f<a.length;f+=Td)this._crypto.getRandomValues(a.subarray(f,f+Math.min(a.length-f,Td)));return a}}Do.BrowserRandomSource=V5;function G5(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lo={},si={};Object.defineProperty(si,"__esModule",{value:!0});function Z5(l){for(var i=0;i<l.length;i++)l[i]=0;return l}si.wipe=Z5;var ye={},lo={exports:{}},Cd;function ds(){if(Cd)return lo.exports;Cd=1;var l=65536,i=4294967295;function a(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var f=qe().Buffer,g=ve.crypto||ve.msCrypto;g&&g.getRandomValues?lo.exports=n:lo.exports=a;function n(x,M){if(x>i)throw new RangeError("requested too many random bytes");var _=f.allocUnsafe(x);if(x>0)if(x>l)for(var w=0;w<x;w+=l)g.getRandomValues(_.slice(w,w+l));else g.getRandomValues(_);return typeof M=="function"?bi.exports.nextTick(function(){M(null,_)}):_}return lo.exports}var vh,Bd;function $v(){if(Bd)return vh;Bd=1;var l=qe().Buffer,i=Nv().Transform,a=sr();function f(n,x){if(!l.isBuffer(n)&&typeof n!="string")throw new TypeError(x+" must be a string or a buffer")}function g(n){i.call(this),this._block=l.allocUnsafe(n),this._blockSize=n,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return a(g,i),g.prototype._transform=function(n,x,M){var _=null;try{this.update(n,x)}catch(w){_=w}M(_)},g.prototype._flush=function(n){var x=null;try{this.push(this.digest())}catch(M){x=M}n(x)},g.prototype.update=function(n,x){if(f(n,"Data"),this._finalized)throw new Error("Digest already called");l.isBuffer(n)||(n=l.from(n,x));for(var M=this._block,_=0;this._blockOffset+n.length-_>=this._blockSize;){for(var w=this._blockOffset;w<this._blockSize;)M[w++]=n[_++];this._update(),this._blockOffset=0}for(;_<n.length;)M[this._blockOffset++]=n[_++];for(var b=0,A=n.length*8;A>0;++b)this._length[b]+=A,A=this._length[b]/4294967296|0,A>0&&(this._length[b]-=4294967296*A);return this},g.prototype._update=function(){throw new Error("_update is not implemented")},g.prototype.digest=function(n){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var x=this._digest();n!==void 0&&(x=x.toString(n)),this._block.fill(0),this._blockOffset=0;for(var M=0;M<4;++M)this._length[M]=0;return x},g.prototype._digest=function(){throw new Error("_digest is not implemented")},vh=g,vh}var gh,qd;function Ru(){if(qd)return gh;qd=1;var l=sr(),i=$v(),a=qe().Buffer,f=new Array(16);function g(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}l(g,i),g.prototype._update=function(){for(var b=f,A=0;A<16;++A)b[A]=this._block.readInt32LE(A*4);var E=this._a,I=this._b,R=this._c,T=this._d;E=x(E,I,R,T,b[0],3614090360,7),T=x(T,E,I,R,b[1],3905402710,12),R=x(R,T,E,I,b[2],606105819,17),I=x(I,R,T,E,b[3],3250441966,22),E=x(E,I,R,T,b[4],4118548399,7),T=x(T,E,I,R,b[5],1200080426,12),R=x(R,T,E,I,b[6],2821735955,17),I=x(I,R,T,E,b[7],4249261313,22),E=x(E,I,R,T,b[8],1770035416,7),T=x(T,E,I,R,b[9],2336552879,12),R=x(R,T,E,I,b[10],4294925233,17),I=x(I,R,T,E,b[11],2304563134,22),E=x(E,I,R,T,b[12],1804603682,7),T=x(T,E,I,R,b[13],4254626195,12),R=x(R,T,E,I,b[14],2792965006,17),I=x(I,R,T,E,b[15],1236535329,22),E=M(E,I,R,T,b[1],4129170786,5),T=M(T,E,I,R,b[6],3225465664,9),R=M(R,T,E,I,b[11],643717713,14),I=M(I,R,T,E,b[0],3921069994,20),E=M(E,I,R,T,b[5],3593408605,5),T=M(T,E,I,R,b[10],38016083,9),R=M(R,T,E,I,b[15],3634488961,14),I=M(I,R,T,E,b[4],3889429448,20),E=M(E,I,R,T,b[9],568446438,5),T=M(T,E,I,R,b[14],3275163606,9),R=M(R,T,E,I,b[3],4107603335,14),I=M(I,R,T,E,b[8],1163531501,20),E=M(E,I,R,T,b[13],2850285829,5),T=M(T,E,I,R,b[2],4243563512,9),R=M(R,T,E,I,b[7],1735328473,14),I=M(I,R,T,E,b[12],2368359562,20),E=_(E,I,R,T,b[5],4294588738,4),T=_(T,E,I,R,b[8],2272392833,11),R=_(R,T,E,I,b[11],1839030562,16),I=_(I,R,T,E,b[14],4259657740,23),E=_(E,I,R,T,b[1],2763975236,4),T=_(T,E,I,R,b[4],1272893353,11),R=_(R,T,E,I,b[7],4139469664,16),I=_(I,R,T,E,b[10],3200236656,23),E=_(E,I,R,T,b[13],681279174,4),T=_(T,E,I,R,b[0],3936430074,11),R=_(R,T,E,I,b[3],3572445317,16),I=_(I,R,T,E,b[6],76029189,23),E=_(E,I,R,T,b[9],3654602809,4),T=_(T,E,I,R,b[12],3873151461,11),R=_(R,T,E,I,b[15],530742520,16),I=_(I,R,T,E,b[2],3299628645,23),E=w(E,I,R,T,b[0],4096336452,6),T=w(T,E,I,R,b[7],1126891415,10),R=w(R,T,E,I,b[14],2878612391,15),I=w(I,R,T,E,b[5],4237533241,21),E=w(E,I,R,T,b[12],1700485571,6),T=w(T,E,I,R,b[3],2399980690,10),R=w(R,T,E,I,b[10],4293915773,15),I=w(I,R,T,E,b[1],2240044497,21),E=w(E,I,R,T,b[8],1873313359,6),T=w(T,E,I,R,b[15],4264355552,10),R=w(R,T,E,I,b[6],2734768916,15),I=w(I,R,T,E,b[13],1309151649,21),E=w(E,I,R,T,b[4],4149444226,6),T=w(T,E,I,R,b[11],3174756917,10),R=w(R,T,E,I,b[2],718787259,15),I=w(I,R,T,E,b[9],3951481745,21),this._a=this._a+E|0,this._b=this._b+I|0,this._c=this._c+R|0,this._d=this._d+T|0},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var b=a.allocUnsafe(16);return b.writeInt32LE(this._a,0),b.writeInt32LE(this._b,4),b.writeInt32LE(this._c,8),b.writeInt32LE(this._d,12),b};function n(b,A){return b<<A|b>>>32-A}function x(b,A,E,I,R,T,B){return n(b+(A&E|~A&I)+R+T|0,B)+A|0}function M(b,A,E,I,R,T,B){return n(b+(A&I|E&~I)+R+T|0,B)+A|0}function _(b,A,E,I,R,T,B){return n(b+(A^E^I)+R+T|0,B)+A|0}function w(b,A,E,I,R,T,B){return n(b+(E^(A|~I))+R+T|0,B)+A|0}return gh=g,gh}var mh,Nd;function Pu(){if(Nd)return mh;Nd=1;var l=Ee.Buffer,i=sr(),a=$v(),f=new Array(16),g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],x=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],M=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],_=[0,1518500249,1859775393,2400959708,2840853838],w=[1352829926,1548603684,1836072691,2053994217,0];function b(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}i(b,a),b.prototype._update=function(){for(var D=f,q=0;q<16;++q)D[q]=this._block.readInt32LE(q*4);for(var k=this._a|0,N=this._b|0,K=this._c|0,$=this._d|0,P=this._e|0,z=this._a|0,Y=this._b|0,nt=this._c|0,v=this._d|0,t=this._e|0,r=0;r<80;r+=1){var s,h;r<16?(s=E(k,N,K,$,P,D[g[r]],_[0],x[r]),h=B(z,Y,nt,v,t,D[n[r]],w[0],M[r])):r<32?(s=I(k,N,K,$,P,D[g[r]],_[1],x[r]),h=T(z,Y,nt,v,t,D[n[r]],w[1],M[r])):r<48?(s=R(k,N,K,$,P,D[g[r]],_[2],x[r]),h=R(z,Y,nt,v,t,D[n[r]],w[2],M[r])):r<64?(s=T(k,N,K,$,P,D[g[r]],_[3],x[r]),h=I(z,Y,nt,v,t,D[n[r]],w[3],M[r])):(s=B(k,N,K,$,P,D[g[r]],_[4],x[r]),h=E(z,Y,nt,v,t,D[n[r]],w[4],M[r])),k=P,P=$,$=A(K,10),K=N,N=s,z=t,t=v,v=A(nt,10),nt=Y,Y=h}var d=this._b+K+v|0;this._b=this._c+$+t|0,this._c=this._d+P+z|0,this._d=this._e+k+Y|0,this._e=this._a+N+nt|0,this._a=d},b.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var D=l.alloc?l.alloc(20):new l(20);return D.writeInt32LE(this._a,0),D.writeInt32LE(this._b,4),D.writeInt32LE(this._c,8),D.writeInt32LE(this._d,12),D.writeInt32LE(this._e,16),D};function A(D,q){return D<<q|D>>>32-q}function E(D,q,k,N,K,$,P,z){return A(D+(q^k^N)+$+P|0,z)+K|0}function I(D,q,k,N,K,$,P,z){return A(D+(q&k|~q&N)+$+P|0,z)+K|0}function R(D,q,k,N,K,$,P,z){return A(D+((q|~k)^N)+$+P|0,z)+K|0}function T(D,q,k,N,K,$,P,z){return A(D+(q&N|k&~N)+$+P|0,z)+K|0}function B(D,q,k,N,K,$,P,z){return A(D+(q^(k|~N))+$+P|0,z)+K|0}return mh=b,mh}var bh,Dd;function W5(){if(Dd)return bh;Dd=1,bh=a;var l=qr.exports.EventEmitter,i=sr();i(a,l),a.Readable=t5(),a.Writable=e5(),a.Duplex=r5(),a.Transform=i5(),a.PassThrough=n5(),a.finished=s5(),a.pipeline=a5(),a.Stream=a;function a(){l.call(this)}return a.prototype.pipe=function(f,g){var n=this;function x(I){f.writable&&f.write(I)===!1&&n.pause&&n.pause()}n.on("data",x);function M(){n.readable&&n.resume&&n.resume()}f.on("drain",M),!f._isStdio&&(!g||g.end!==!1)&&(n.on("end",w),n.on("close",b));var _=!1;function w(){_||(_=!0,f.end())}function b(){_||(_=!0,typeof f.destroy=="function"&&f.destroy())}function A(I){if(E(),l.listenerCount(this,"error")===0)throw I}n.on("error",A),f.on("error",A);function E(){n.removeListener("data",x),f.removeListener("drain",M),n.removeListener("end",w),n.removeListener("close",b),n.removeListener("error",A),f.removeListener("error",A),n.removeListener("end",E),n.removeListener("close",E),f.removeListener("close",E)}return n.on("end",E),n.on("close",E),f.on("close",E),f.emit("pipe",n),f},bh}var yh,Ld;function dn(){if(Ld)return yh;Ld=1;var l=qe().Buffer,i=W5().Transform,a=o5().StringDecoder,f=sr();function g(n){i.call(this),this.hashMode=typeof n=="string",this.hashMode?this[n]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return f(g,i),g.prototype.update=function(n,x,M){typeof n=="string"&&(n=l.from(n,x));var _=this._update(n);return this.hashMode?this:(M&&(_=this._toString(_,M)),_)},g.prototype.setAutoPadding=function(){},g.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},g.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},g.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},g.prototype._transform=function(n,x,M){var _;try{this.hashMode?this._update(n):this.push(this._update(n))}catch(w){_=w}finally{M(_)}},g.prototype._flush=function(n){var x;try{this.push(this.__final())}catch(M){x=M}n(x)},g.prototype._finalOrDigest=function(n){var x=this.__final()||l.alloc(0);return n&&(x=this._toString(x,n,!0)),x},g.prototype._toString=function(n,x,M){if(this._decoder||(this._decoder=new a(x),this._encoding=x),this._encoding!==x)throw new Error("can't switch encodings");var _=this._decoder.write(n);return M&&(_+=this._decoder.end()),_},yh=g,yh}var wh,kd;function ia(){if(kd)return wh;kd=1;var l=sr(),i=Ru(),a=Pu(),f=Su.exports,g=dn();function n(x){g.call(this,"digest"),this._hash=x}return l(n,g),n.prototype._update=function(x){this._hash.update(x)},n.prototype._final=function(){return this._hash.digest()},wh=function(M){return M=M.toLowerCase(),M==="md5"?new i:M==="rmd160"||M==="ripemd160"?new a:new n(f(M))},wh}var _h,Ud;function Y5(){if(Ud)return _h;Ud=1;var l=sr(),i=qe().Buffer,a=dn(),f=i.alloc(128),g=64;function n(x,M){a.call(this,"digest"),typeof M=="string"&&(M=i.from(M)),this._alg=x,this._key=M,M.length>g?M=x(M):M.length<g&&(M=i.concat([M,f],g));for(var _=this._ipad=i.allocUnsafe(g),w=this._opad=i.allocUnsafe(g),b=0;b<g;b++)_[b]=M[b]^54,w[b]=M[b]^92;this._hash=[_]}return l(n,a),n.prototype._update=function(x){this._hash.push(x)},n.prototype._final=function(){var x=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,x]))},_h=n,_h}var Mh,Fd;function zv(){if(Fd)return Mh;Fd=1;var l=Ru();return Mh=function(i){return new l().update(i).digest()},Mh}var xh,$d;function Hv(){if($d)return xh;$d=1;var l=sr(),i=Y5(),a=dn(),f=qe().Buffer,g=zv(),n=Pu(),x=Su.exports,M=f.alloc(128);function _(w,b){a.call(this,"digest"),typeof b=="string"&&(b=f.from(b));var A=w==="sha512"||w==="sha384"?128:64;if(this._alg=w,this._key=b,b.length>A){var E=w==="rmd160"?new n:x(w);b=E.update(b).digest()}else b.length<A&&(b=f.concat([b,M],A));for(var I=this._ipad=f.allocUnsafe(A),R=this._opad=f.allocUnsafe(A),T=0;T<A;T++)I[T]=b[T]^54,R[T]=b[T]^92;this._hash=w==="rmd160"?new n:x(w),this._hash.update(I)}return l(_,a),_.prototype._update=function(w){this._hash.update(w)},_.prototype._final=function(){var w=this._hash.digest(),b=this._alg==="rmd160"?new n:x(this._alg);return b.update(this._opad).update(w).digest()},xh=function(b,A){return b=b.toLowerCase(),b==="rmd160"||b==="ripemd160"?new _("rmd160",A):b==="md5"?new i(g,A):new _(b,A)},xh}var Eh={exports:{}};const J5={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},X5={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},Q5={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},t4={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},e4={sign:"ecdsa",hash:"sha256",id:""},r4={sign:"ecdsa",hash:"sha224",id:""},i4={sign:"ecdsa",hash:"sha384",id:""},n4={sign:"ecdsa",hash:"sha512",id:""},s4={sign:"dsa",hash:"sha1",id:""},a4={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},o4={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},Kv={sha224WithRSAEncryption:J5,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:X5,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:Q5,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:t4,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:e4,sha224:r4,sha384:i4,sha512:n4,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:s4,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:a4,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:o4,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var zd;function f4(){return zd||(zd=1,function(l){l.exports=Kv}(Eh)),Eh.exports}var po={},Sh,Hd;function jv(){if(Hd)return Sh;Hd=1;var l=Math.pow(2,30)-1;return Sh=function(i,a){if(typeof i!="number")throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if(typeof a!="number")throw new TypeError("Key length not a number");if(a<0||a>l||a!==a)throw new TypeError("Bad key length")},Sh}var Ah,Kd;function Vv(){if(Kd)return Ah;Kd=1;var l;if(ve.process&&ve.process.browser)l="utf-8";else if(ve.process&&ve.process.version){var i=parseInt(bi.exports.version.split(".")[0].slice(1),10);l=i>=6?"utf-8":"binary"}else l="utf-8";return Ah=l,Ah}var Ih,jd;function Gv(){if(jd)return Ih;jd=1;var l=qe().Buffer;return Ih=function(i,a,f){if(l.isBuffer(i))return i;if(typeof i=="string")return l.from(i,a);if(ArrayBuffer.isView(i))return l.from(i.buffer);throw new TypeError(f+" must be a string, a Buffer, a typed array or a DataView")},Ih}var Rh,Vd;function Zv(){if(Vd)return Rh;Vd=1;var l=zv(),i=Pu(),a=Su.exports,f=qe().Buffer,g=jv(),n=Vv(),x=Gv(),M=f.alloc(128),_={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function w(E,I,R){var T=b(E),B=E==="sha512"||E==="sha384"?128:64;I.length>B?I=T(I):I.length<B&&(I=f.concat([I,M],B));for(var D=f.allocUnsafe(B+_[E]),q=f.allocUnsafe(B+_[E]),k=0;k<B;k++)D[k]=I[k]^54,q[k]=I[k]^92;var N=f.allocUnsafe(B+R+4);D.copy(N,0,0,B),this.ipad1=N,this.ipad2=D,this.opad=q,this.alg=E,this.blocksize=B,this.hash=T,this.size=_[E]}w.prototype.run=function(E,I){E.copy(I,this.blocksize);var R=this.hash(I);return R.copy(this.opad,this.blocksize),this.hash(this.opad)};function b(E){function I(T){return a(E).update(T).digest()}function R(T){return new i().update(T).digest()}return E==="rmd160"||E==="ripemd160"?R:E==="md5"?l:I}function A(E,I,R,T,B){g(R,T),E=x(E,n,"Password"),I=x(I,n,"Salt"),B=B||"sha1";var D=new w(B,E,I.length),q=f.allocUnsafe(T),k=f.allocUnsafe(I.length+4);I.copy(k,0,0,I.length);for(var N=0,K=_[B],$=Math.ceil(T/K),P=1;P<=$;P++){k.writeUInt32BE(P,I.length);for(var z=D.run(k,D.ipad1),Y=z,nt=1;nt<R;nt++){Y=D.run(Y,D.ipad2);for(var v=0;v<K;v++)z[v]^=Y[v]}z.copy(q,N),N+=K}return q}return Rh=A,Rh}var Ph,Gd;function h4(){if(Gd)return Ph;Gd=1;var l=qe().Buffer,i=jv(),a=Vv(),f=Zv(),g=Gv(),n,x=ve.crypto&&ve.crypto.subtle,M={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},_=[];function w(R){if(ve.process&&!ve.process.browser||!x||!x.importKey||!x.deriveBits)return Promise.resolve(!1);if(_[R]!==void 0)return _[R];n=n||l.alloc(8);var T=E(n,n,10,128,R).then(function(){return!0}).catch(function(){return!1});return _[R]=T,T}var b;function A(){return b||(ve.process&&ve.process.nextTick?b=ve.process.nextTick:ve.queueMicrotask?b=ve.queueMicrotask:ve.setImmediate?b=ve.setImmediate:b=ve.setTimeout,b)}function E(R,T,B,D,q){return x.importKey("raw",R,{name:"PBKDF2"},!1,["deriveBits"]).then(function(k){return x.deriveBits({name:"PBKDF2",salt:T,iterations:B,hash:{name:q}},k,D<<3)}).then(function(k){return l.from(k)})}function I(R,T){R.then(function(B){A()(function(){T(null,B)})},function(B){A()(function(){T(B)})})}return Ph=function(R,T,B,D,q,k){typeof q=="function"&&(k=q,q=void 0),q=q||"sha1";var N=M[q.toLowerCase()];if(!N||typeof ve.Promise!="function"){A()(function(){var K;try{K=f(R,T,B,D,q)}catch($){return k($)}k(null,K)});return}if(i(B,D),R=g(R,a,"Password"),T=g(T,a,"Salt"),typeof k!="function")throw new Error("No callback provided to pbkdf2");I(w(N).then(function(K){return K?E(R,T,B,D,N):f(R,T,B,D,q)}),k)},Ph}var Zd;function Wv(){return Zd||(Zd=1,po.pbkdf2=h4(),po.pbkdf2Sync=Zv()),po}var pi={},qn={},ii={},Wd;function Yv(){if(Wd)return ii;Wd=1,ii.readUInt32BE=function(g,n){var x=g[0+n]<<24|g[1+n]<<16|g[2+n]<<8|g[3+n];return x>>>0},ii.writeUInt32BE=function(g,n,x){g[0+x]=n>>>24,g[1+x]=n>>>16&255,g[2+x]=n>>>8&255,g[3+x]=n&255},ii.ip=function(g,n,x,M){for(var _=0,w=0,b=6;b>=0;b-=2){for(var A=0;A<=24;A+=8)_<<=1,_|=n>>>A+b&1;for(var A=0;A<=24;A+=8)_<<=1,_|=g>>>A+b&1}for(var b=6;b>=0;b-=2){for(var A=1;A<=25;A+=8)w<<=1,w|=n>>>A+b&1;for(var A=1;A<=25;A+=8)w<<=1,w|=g>>>A+b&1}x[M+0]=_>>>0,x[M+1]=w>>>0},ii.rip=function(g,n,x,M){for(var _=0,w=0,b=0;b<4;b++)for(var A=24;A>=0;A-=8)_<<=1,_|=n>>>A+b&1,_<<=1,_|=g>>>A+b&1;for(var b=4;b<8;b++)for(var A=24;A>=0;A-=8)w<<=1,w|=n>>>A+b&1,w<<=1,w|=g>>>A+b&1;x[M+0]=_>>>0,x[M+1]=w>>>0},ii.pc1=function(g,n,x,M){for(var _=0,w=0,b=7;b>=5;b--){for(var A=0;A<=24;A+=8)_<<=1,_|=n>>A+b&1;for(var A=0;A<=24;A+=8)_<<=1,_|=g>>A+b&1}for(var A=0;A<=24;A+=8)_<<=1,_|=n>>A+b&1;for(var b=1;b<=3;b++){for(var A=0;A<=24;A+=8)w<<=1,w|=n>>A+b&1;for(var A=0;A<=24;A+=8)w<<=1,w|=g>>A+b&1}for(var A=0;A<=24;A+=8)w<<=1,w|=g>>A+b&1;x[M+0]=_>>>0,x[M+1]=w>>>0},ii.r28shl=function(g,n){return g<<n&268435455|g>>>28-n};var l=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];ii.pc2=function(g,n,x,M){for(var _=0,w=0,b=l.length>>>1,A=0;A<b;A++)_<<=1,_|=g>>>l[A]&1;for(var A=b;A<l.length;A++)w<<=1,w|=n>>>l[A]&1;x[M+0]=_>>>0,x[M+1]=w>>>0},ii.expand=function(g,n,x){var M=0,_=0;M=(g&1)<<5|g>>>27;for(var w=23;w>=15;w-=4)M<<=6,M|=g>>>w&63;for(var w=11;w>=3;w-=4)_|=g>>>w&63,_<<=6;_|=(g&31)<<1|g>>>31,n[x+0]=M>>>0,n[x+1]=_>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];ii.substitute=function(g,n){for(var x=0,M=0;M<4;M++){var _=g>>>18-M*6&63,w=i[M*64+_];x<<=4,x|=w}for(var M=0;M<4;M++){var _=n>>>18-M*6&63,w=i[4*64+M*64+_];x<<=4,x|=w}return x>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return ii.permute=function(g){for(var n=0,x=0;x<a.length;x++)n<<=1,n|=g>>>a[x]&1;return n>>>0},ii.padSplit=function(g,n,x){for(var M=g.toString(2);M.length<n;)M="0"+M;for(var _=[],w=0;w<n;w+=x)_.push(M.slice(w,w+x));return _.join(" ")},ii}var Oh,Yd;function Ou(){if(Yd)return Oh;Yd=1;var l=Ln;function i(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}return Oh=i,i.prototype._init=function(){},i.prototype.update=function(f){return f.length===0?[]:this.type==="decrypt"?this._updateDecrypt(f):this._updateEncrypt(f)},i.prototype._buffer=function(f,g){for(var n=Math.min(this.buffer.length-this.bufferOff,f.length-g),x=0;x<n;x++)this.buffer[this.bufferOff+x]=f[g+x];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(f,g){return this._update(this.buffer,0,f,g),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(f){var g=0,n=0,x=(this.bufferOff+f.length)/this.blockSize|0,M=new Array(x*this.blockSize);this.bufferOff!==0&&(g+=this._buffer(f,g),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(M,n)));for(var _=f.length-(f.length-g)%this.blockSize;g<_;g+=this.blockSize)this._update(f,g,M,n),n+=this.blockSize;for(;g<f.length;g++,this.bufferOff++)this.buffer[this.bufferOff]=f[g];return M},i.prototype._updateDecrypt=function(f){for(var g=0,n=0,x=Math.ceil((this.bufferOff+f.length)/this.blockSize)-1,M=new Array(x*this.blockSize);x>0;x--)g+=this._buffer(f,g),n+=this._flushBuffer(M,n);return g+=this._buffer(f,g),M},i.prototype.final=function(f){var g;f&&(g=this.update(f));var n;return this.type==="encrypt"?n=this._finalEncrypt():n=this._finalDecrypt(),g?g.concat(n):n},i.prototype._pad=function(f,g){if(g===0)return!1;for(;g<f.length;)f[g++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var f=new Array(this.blockSize);return this._update(this.buffer,0,f,0),f},i.prototype._unpad=function(f){return f},i.prototype._finalDecrypt=function(){l.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var f=new Array(this.blockSize);return this._flushBuffer(f,0),this._unpad(f)},Oh}var Th,Jd;function Jv(){if(Jd)return Th;Jd=1;var l=Ln,i=sr(),a=Yv(),f=Ou();function g(){this.tmp=new Array(2),this.keys=null}function n(M){f.call(this,M);var _=new g;this._desState=_,this.deriveKeys(_,M.key)}i(n,f),Th=n,n.create=function(_){return new n(_)};var x=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return n.prototype.deriveKeys=function(_,w){_.keys=new Array(16*2),l.equal(w.length,this.blockSize,"Invalid key length");var b=a.readUInt32BE(w,0),A=a.readUInt32BE(w,4);a.pc1(b,A,_.tmp,0),b=_.tmp[0],A=_.tmp[1];for(var E=0;E<_.keys.length;E+=2){var I=x[E>>>1];b=a.r28shl(b,I),A=a.r28shl(A,I),a.pc2(b,A,_.keys,E)}},n.prototype._update=function(_,w,b,A){var E=this._desState,I=a.readUInt32BE(_,w),R=a.readUInt32BE(_,w+4);a.ip(I,R,E.tmp,0),I=E.tmp[0],R=E.tmp[1],this.type==="encrypt"?this._encrypt(E,I,R,E.tmp,0):this._decrypt(E,I,R,E.tmp,0),I=E.tmp[0],R=E.tmp[1],a.writeUInt32BE(b,I,A),a.writeUInt32BE(b,R,A+4)},n.prototype._pad=function(_,w){if(this.padding===!1)return!1;for(var b=_.length-w,A=w;A<_.length;A++)_[A]=b;return!0},n.prototype._unpad=function(_){if(this.padding===!1)return _;for(var w=_[_.length-1],b=_.length-w;b<_.length;b++)l.equal(_[b],w);return _.slice(0,_.length-w)},n.prototype._encrypt=function(_,w,b,A,E){for(var I=w,R=b,T=0;T<_.keys.length;T+=2){var B=_.keys[T],D=_.keys[T+1];a.expand(R,_.tmp,0),B^=_.tmp[0],D^=_.tmp[1];var q=a.substitute(B,D),k=a.permute(q),N=R;R=(I^k)>>>0,I=N}a.rip(R,I,A,E)},n.prototype._decrypt=function(_,w,b,A,E){for(var I=b,R=w,T=_.keys.length-2;T>=0;T-=2){var B=_.keys[T],D=_.keys[T+1];a.expand(I,_.tmp,0),B^=_.tmp[0],D^=_.tmp[1];var q=a.substitute(B,D),k=a.permute(q),N=I;I=(R^k)>>>0,R=N}a.rip(I,R,A,E)},Th}var Ch={},Xd;function u4(){if(Xd)return Ch;Xd=1;var l=Ln,i=sr(),a={};function f(n){l.equal(n.length,8,"Invalid IV length"),this.iv=new Array(8);for(var x=0;x<this.iv.length;x++)this.iv[x]=n[x]}function g(n){function x(b){n.call(this,b),this._cbcInit()}i(x,n);for(var M=Object.keys(a),_=0;_<M.length;_++){var w=M[_];x.prototype[w]=a[w]}return x.create=function(A){return new x(A)},x}return Ch.instantiate=g,a._cbcInit=function(){var x=new f(this.options.iv);this._cbcState=x},a._update=function(x,M,_,w){var b=this._cbcState,A=this.constructor.super_.prototype,E=b.iv;if(this.type==="encrypt"){for(var I=0;I<this.blockSize;I++)E[I]^=x[M+I];A._update.call(this,E,0,_,w);for(var I=0;I<this.blockSize;I++)E[I]=_[w+I]}else{A._update.call(this,x,M,_,w);for(var I=0;I<this.blockSize;I++)_[w+I]^=E[I];for(var I=0;I<this.blockSize;I++)E[I]=x[M+I]}},Ch}var Bh,Qd;function c4(){if(Qd)return Bh;Qd=1;var l=Ln,i=sr(),a=Ou(),f=Jv();function g(x,M){l.equal(M.length,24,"Invalid key length");var _=M.slice(0,8),w=M.slice(8,16),b=M.slice(16,24);x==="encrypt"?this.ciphers=[f.create({type:"encrypt",key:_}),f.create({type:"decrypt",key:w}),f.create({type:"encrypt",key:b})]:this.ciphers=[f.create({type:"decrypt",key:b}),f.create({type:"encrypt",key:w}),f.create({type:"decrypt",key:_})]}function n(x){a.call(this,x);var M=new g(this.type,this.options.key);this._edeState=M}return i(n,a),Bh=n,n.create=function(M){return new n(M)},n.prototype._update=function(M,_,w,b){var A=this._edeState;A.ciphers[0]._update(M,_,w,b),A.ciphers[1]._update(w,b,w,b),A.ciphers[2]._update(w,b,w,b)},n.prototype._pad=f.prototype._pad,n.prototype._unpad=f.prototype._unpad,Bh}var tp;function l4(){return tp||(tp=1,qn.utils=Yv(),qn.Cipher=Ou(),qn.DES=Jv(),qn.CBC=u4(),qn.EDE=c4()),qn}var qh,ep;function d4(){if(ep)return qh;ep=1;var l=dn(),i=l4(),a=sr(),f=qe().Buffer,g={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};g.des=g["des-cbc"],g.des3=g["des-ede3-cbc"],qh=n,a(n,l);function n(x){l.call(this);var M=x.mode.toLowerCase(),_=g[M],w;x.decrypt?w="decrypt":w="encrypt";var b=x.key;f.isBuffer(b)||(b=f.from(b)),(M==="des-ede"||M==="des-ede-cbc")&&(b=f.concat([b,b.slice(0,8)]));var A=x.iv;f.isBuffer(A)||(A=f.from(A)),this._des=_.create({key:b,iv:A,type:w})}return n.prototype._update=function(x){return f.from(this._des.update(x))},n.prototype._final=function(){return f.from(this._des.final())},qh}var vi={},vo={},go={},rp;function p4(){return rp||(rp=1,go.encrypt=function(l,i){return l._cipher.encryptBlock(i)},go.decrypt=function(l,i){return l._cipher.decryptBlock(i)}),go}var mo={},Nh,ip;function na(){return ip||(ip=1,Nh=function(i,a){for(var f=Math.min(i.length,a.length),g=new Ee.Buffer(f),n=0;n<f;++n)g[n]=i[n]^a[n];return g}),Nh}var np;function v4(){if(np)return mo;np=1;var l=na();return mo.encrypt=function(i,a){var f=l(a,i._prev);return i._prev=i._cipher.encryptBlock(f),i._prev},mo.decrypt=function(i,a){var f=i._prev;i._prev=a;var g=i._cipher.decryptBlock(a);return l(g,f)},mo}var Dh={},sp;function g4(){if(sp)return Dh;sp=1;var l=qe().Buffer,i=na();function a(f,g,n){var x=g.length,M=i(g,f._cache);return f._cache=f._cache.slice(x),f._prev=l.concat([f._prev,n?g:M]),M}return Dh.encrypt=function(f,g,n){for(var x=l.allocUnsafe(0),M;g.length;)if(f._cache.length===0&&(f._cache=f._cipher.encryptBlock(f._prev),f._prev=l.allocUnsafe(0)),f._cache.length<=g.length)M=f._cache.length,x=l.concat([x,a(f,g.slice(0,M),n)]),g=g.slice(M);else{x=l.concat([x,a(f,g,n)]);break}return x},Dh}var Lh={},ap;function m4(){if(ap)return Lh;ap=1;var l=qe().Buffer;function i(a,f,g){var n=a._cipher.encryptBlock(a._prev),x=n[0]^f;return a._prev=l.concat([a._prev.slice(1),l.from([g?f:x])]),x}return Lh.encrypt=function(a,f,g){for(var n=f.length,x=l.allocUnsafe(n),M=-1;++M<n;)x[M]=i(a,f[M],g);return x},Lh}var kh={},op;function b4(){if(op)return kh;op=1;var l=qe().Buffer;function i(f,g,n){for(var x,M=-1,_=8,w=0,b,A;++M<_;)x=f._cipher.encryptBlock(f._prev),b=g&1<<7-M?128:0,A=x[0]^b,w+=(A&128)>>M%8,f._prev=a(f._prev,n?b:A);return w}function a(f,g){var n=f.length,x=-1,M=l.allocUnsafe(f.length);for(f=l.concat([f,l.from([g])]);++x<n;)M[x]=f[x]<<1|f[x+1]>>7;return M}return kh.encrypt=function(f,g,n){for(var x=g.length,M=l.allocUnsafe(x),_=-1;++_<x;)M[_]=i(f,g[_],n);return M},kh}var Uh={},fp;function y4(){if(fp)return Uh;fp=1;var l=na();function i(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}return Uh.encrypt=function(a,f){for(;a._cache.length<f.length;)a._cache=Ee.Buffer.concat([a._cache,i(a)]);var g=a._cache.slice(0,f.length);return a._cache=a._cache.slice(f.length),l(f,g)},Uh}var Fh={},$h,hp;function Xv(){if(hp)return $h;hp=1;function l(i){for(var a=i.length,f;a--;)if(f=i.readUInt8(a),f===255)i.writeUInt8(0,a);else{f++,i.writeUInt8(f,a);break}}return $h=l,$h}var up;function cp(){if(up)return Fh;up=1;var l=na(),i=qe().Buffer,a=Xv();function f(n){var x=n._cipher.encryptBlockRaw(n._prev);return a(n._prev),x}var g=16;return Fh.encrypt=function(n,x){var M=Math.ceil(x.length/g),_=n._cache.length;n._cache=i.concat([n._cache,i.allocUnsafe(M*g)]);for(var w=0;w<M;w++){var b=f(n),A=_+w*g;n._cache.writeUInt32BE(b[0],A+0),n._cache.writeUInt32BE(b[1],A+4),n._cache.writeUInt32BE(b[2],A+8),n._cache.writeUInt32BE(b[3],A+12)}var E=n._cache.slice(0,x.length);return n._cache=n._cache.slice(x.length),l(x,E)},Fh}const w4={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},_4={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},M4={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},Qv={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:w4,aes192:_4,aes256:M4,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var zh,lp;function Tu(){if(lp)return zh;lp=1;var l={ECB:p4(),CBC:v4(),CFB:g4(),CFB8:m4(),CFB1:b4(),OFB:y4(),CTR:cp(),GCM:cp()},i=Qv;for(var a in i)i[a].module=l[i[a].mode];return zh=i,zh}var Hh={},dp;function ko(){if(dp)return Hh;dp=1;var l=qe().Buffer;function i(M){l.isBuffer(M)||(M=l.from(M));for(var _=M.length/4|0,w=new Array(_),b=0;b<_;b++)w[b]=M.readUInt32BE(b*4);return w}function a(M){for(var _=0;_<M.length;M++)M[_]=0}function f(M,_,w,b,A){for(var E=w[0],I=w[1],R=w[2],T=w[3],B=M[0]^_[0],D=M[1]^_[1],q=M[2]^_[2],k=M[3]^_[3],N,K,$,P,z=4,Y=1;Y<A;Y++)N=E[B>>>24]^I[D>>>16&255]^R[q>>>8&255]^T[k&255]^_[z++],K=E[D>>>24]^I[q>>>16&255]^R[k>>>8&255]^T[B&255]^_[z++],$=E[q>>>24]^I[k>>>16&255]^R[B>>>8&255]^T[D&255]^_[z++],P=E[k>>>24]^I[B>>>16&255]^R[D>>>8&255]^T[q&255]^_[z++],B=N,D=K,q=$,k=P;return N=(b[B>>>24]<<24|b[D>>>16&255]<<16|b[q>>>8&255]<<8|b[k&255])^_[z++],K=(b[D>>>24]<<24|b[q>>>16&255]<<16|b[k>>>8&255]<<8|b[B&255])^_[z++],$=(b[q>>>24]<<24|b[k>>>16&255]<<16|b[B>>>8&255]<<8|b[D&255])^_[z++],P=(b[k>>>24]<<24|b[B>>>16&255]<<16|b[D>>>8&255]<<8|b[q&255])^_[z++],N=N>>>0,K=K>>>0,$=$>>>0,P=P>>>0,[N,K,$,P]}var g=[0,1,2,4,8,16,32,64,128,27,54],n=function(){for(var M=new Array(256),_=0;_<256;_++)_<128?M[_]=_<<1:M[_]=_<<1^283;for(var w=[],b=[],A=[[],[],[],[]],E=[[],[],[],[]],I=0,R=0,T=0;T<256;++T){var B=R^R<<1^R<<2^R<<3^R<<4;B=B>>>8^B&255^99,w[I]=B,b[B]=I;var D=M[I],q=M[D],k=M[q],N=M[B]*257^B*16843008;A[0][I]=N<<24|N>>>8,A[1][I]=N<<16|N>>>16,A[2][I]=N<<8|N>>>24,A[3][I]=N,N=k*16843009^q*65537^D*257^I*16843008,E[0][B]=N<<24|N>>>8,E[1][B]=N<<16|N>>>16,E[2][B]=N<<8|N>>>24,E[3][B]=N,I===0?I=R=1:(I=D^M[M[M[k^D]]],R^=M[M[R]])}return{SBOX:w,INV_SBOX:b,SUB_MIX:A,INV_SUB_MIX:E}}();function x(M){this._key=i(M),this._reset()}return x.blockSize=4*4,x.keySize=256/8,x.prototype.blockSize=x.blockSize,x.prototype.keySize=x.keySize,x.prototype._reset=function(){for(var M=this._key,_=M.length,w=_+6,b=(w+1)*4,A=[],E=0;E<_;E++)A[E]=M[E];for(E=_;E<b;E++){var I=A[E-1];E%_===0?(I=I<<8|I>>>24,I=n.SBOX[I>>>24]<<24|n.SBOX[I>>>16&255]<<16|n.SBOX[I>>>8&255]<<8|n.SBOX[I&255],I^=g[E/_|0]<<24):_>6&&E%_===4&&(I=n.SBOX[I>>>24]<<24|n.SBOX[I>>>16&255]<<16|n.SBOX[I>>>8&255]<<8|n.SBOX[I&255]),A[E]=A[E-_]^I}for(var R=[],T=0;T<b;T++){var B=b-T,D=A[B-(T%4?0:4)];T<4||B<=4?R[T]=D:R[T]=n.INV_SUB_MIX[0][n.SBOX[D>>>24]]^n.INV_SUB_MIX[1][n.SBOX[D>>>16&255]]^n.INV_SUB_MIX[2][n.SBOX[D>>>8&255]]^n.INV_SUB_MIX[3][n.SBOX[D&255]]}this._nRounds=w,this._keySchedule=A,this._invKeySchedule=R},x.prototype.encryptBlockRaw=function(M){return M=i(M),f(M,this._keySchedule,n.SUB_MIX,n.SBOX,this._nRounds)},x.prototype.encryptBlock=function(M){var _=this.encryptBlockRaw(M),w=l.allocUnsafe(16);return w.writeUInt32BE(_[0],0),w.writeUInt32BE(_[1],4),w.writeUInt32BE(_[2],8),w.writeUInt32BE(_[3],12),w},x.prototype.decryptBlock=function(M){M=i(M);var _=M[1];M[1]=M[3],M[3]=_;var w=f(M,this._invKeySchedule,n.INV_SUB_MIX,n.INV_SBOX,this._nRounds),b=l.allocUnsafe(16);return b.writeUInt32BE(w[0],0),b.writeUInt32BE(w[3],4),b.writeUInt32BE(w[2],8),b.writeUInt32BE(w[1],12),b},x.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},Hh.AES=x,Hh}var Kh,pp;function x4(){if(pp)return Kh;pp=1;var l=qe().Buffer,i=l.alloc(16,0);function a(n){return[n.readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)]}function f(n){var x=l.allocUnsafe(16);return x.writeUInt32BE(n[0]>>>0,0),x.writeUInt32BE(n[1]>>>0,4),x.writeUInt32BE(n[2]>>>0,8),x.writeUInt32BE(n[3]>>>0,12),x}function g(n){this.h=n,this.state=l.alloc(16,0),this.cache=l.allocUnsafe(0)}return g.prototype.ghash=function(n){for(var x=-1;++x<n.length;)this.state[x]^=n[x];this._multiply()},g.prototype._multiply=function(){for(var n=a(this.h),x=[0,0,0,0],M,_,w,b=-1;++b<128;){for(_=(this.state[~~(b/8)]&1<<7-b%8)!==0,_&&(x[0]^=n[0],x[1]^=n[1],x[2]^=n[2],x[3]^=n[3]),w=(n[3]&1)!==0,M=3;M>0;M--)n[M]=n[M]>>>1|(n[M-1]&1)<<31;n[0]=n[0]>>>1,w&&(n[0]=n[0]^225<<24)}this.state=f(x)},g.prototype.update=function(n){this.cache=l.concat([this.cache,n]);for(var x;this.cache.length>=16;)x=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(x)},g.prototype.final=function(n,x){return this.cache.length&&this.ghash(l.concat([this.cache,i],16)),this.ghash(f([0,n,0,x])),this.state},Kh=g,Kh}var jh,vp;function tg(){if(vp)return jh;vp=1;var l=ko(),i=qe().Buffer,a=dn(),f=sr(),g=x4(),n=na(),x=Xv();function M(b,A){var E=0;b.length!==A.length&&E++;for(var I=Math.min(b.length,A.length),R=0;R<I;++R)E+=b[R]^A[R];return E}function _(b,A,E){if(A.length===12)return b._finID=i.concat([A,i.from([0,0,0,1])]),i.concat([A,i.from([0,0,0,2])]);var I=new g(E),R=A.length,T=R%16;I.update(A),T&&(T=16-T,I.update(i.alloc(T,0))),I.update(i.alloc(8,0));var B=R*8,D=i.alloc(8);D.writeUIntBE(B,0,8),I.update(D),b._finID=I.state;var q=i.from(b._finID);return x(q),q}function w(b,A,E,I){a.call(this);var R=i.alloc(4,0);this._cipher=new l.AES(A);var T=this._cipher.encryptBlock(R);this._ghash=new g(T),E=_(this,E,T),this._prev=i.from(E),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=I,this._alen=0,this._len=0,this._mode=b,this._authTag=null,this._called=!1}return f(w,a),w.prototype._update=function(b){if(!this._called&&this._alen){var A=16-this._alen%16;A<16&&(A=i.alloc(A,0),this._ghash.update(A))}this._called=!0;var E=this._mode.encrypt(this,b);return this._decrypt?this._ghash.update(b):this._ghash.update(E),this._len+=b.length,E},w.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var b=n(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&M(b,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=b,this._cipher.scrub()},w.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},w.prototype.setAuthTag=function(A){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=A},w.prototype.setAAD=function(A){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(A),this._alen+=A.length},jh=w,jh}var Vh,gp;function eg(){if(gp)return Vh;gp=1;var l=ko(),i=qe().Buffer,a=dn(),f=sr();function g(n,x,M,_){a.call(this),this._cipher=new l.AES(x),this._prev=i.from(M),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=_,this._mode=n}return f(g,a),g.prototype._update=function(n){return this._mode.encrypt(this,n,this._decrypt)},g.prototype._final=function(){this._cipher.scrub()},Vh=g,Vh}var Gh,mp;function Uo(){if(mp)return Gh;mp=1;var l=qe().Buffer,i=Ru();function a(f,g,n,x){if(l.isBuffer(f)||(f=l.from(f,"binary")),g&&(l.isBuffer(g)||(g=l.from(g,"binary")),g.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var M=n/8,_=l.alloc(M),w=l.alloc(x||0),b=l.alloc(0);M>0||x>0;){var A=new i;A.update(b),A.update(f),g&&A.update(g),b=A.digest();var E=0;if(M>0){var I=_.length-M;E=Math.min(M,b.length),b.copy(_,I,0,E),M-=E}if(E<b.length&&x>0){var R=w.length-x,T=Math.min(x,b.length-E);b.copy(w,R,E,E+T),x-=T}}return b.fill(0),{key:_,iv:w}}return Gh=a,Gh}var bp;function E4(){if(bp)return vo;bp=1;var l=Tu(),i=tg(),a=qe().Buffer,f=eg(),g=dn(),n=ko(),x=Uo(),M=sr();function _(I,R,T){g.call(this),this._cache=new b,this._cipher=new n.AES(R),this._prev=a.from(T),this._mode=I,this._autopadding=!0}M(_,g),_.prototype._update=function(I){this._cache.add(I);for(var R,T,B=[];R=this._cache.get();)T=this._mode.encrypt(this,R),B.push(T);return a.concat(B)};var w=a.alloc(16,16);_.prototype._final=function(){var I=this._cache.flush();if(this._autopadding)return I=this._mode.encrypt(this,I),this._cipher.scrub(),I;if(!I.equals(w))throw this._cipher.scrub(),new Error("data not multiple of block length")},_.prototype.setAutoPadding=function(I){return this._autopadding=!!I,this};function b(){this.cache=a.allocUnsafe(0)}b.prototype.add=function(I){this.cache=a.concat([this.cache,I])},b.prototype.get=function(){if(this.cache.length>15){var I=this.cache.slice(0,16);return this.cache=this.cache.slice(16),I}return null},b.prototype.flush=function(){for(var I=16-this.cache.length,R=a.allocUnsafe(I),T=-1;++T<I;)R.writeUInt8(I,T);return a.concat([this.cache,R])};function A(I,R,T){var B=l[I.toLowerCase()];if(!B)throw new TypeError("invalid suite type");if(typeof R=="string"&&(R=a.from(R)),R.length!==B.key/8)throw new TypeError("invalid key length "+R.length);if(typeof T=="string"&&(T=a.from(T)),B.mode!=="GCM"&&T.length!==B.iv)throw new TypeError("invalid iv length "+T.length);return B.type==="stream"?new f(B.module,R,T):B.type==="auth"?new i(B.module,R,T):new _(B.module,R,T)}function E(I,R){var T=l[I.toLowerCase()];if(!T)throw new TypeError("invalid suite type");var B=x(R,!1,T.key,T.iv);return A(I,B.key,B.iv)}return vo.createCipheriv=A,vo.createCipher=E,vo}var bo={},yp;function S4(){if(yp)return bo;yp=1;var l=tg(),i=qe().Buffer,a=Tu(),f=eg(),g=dn(),n=ko(),x=Uo(),M=sr();function _(I,R,T){g.call(this),this._cache=new w,this._last=void 0,this._cipher=new n.AES(R),this._prev=i.from(T),this._mode=I,this._autopadding=!0}M(_,g),_.prototype._update=function(I){this._cache.add(I);for(var R,T,B=[];R=this._cache.get(this._autopadding);)T=this._mode.decrypt(this,R),B.push(T);return i.concat(B)},_.prototype._final=function(){var I=this._cache.flush();if(this._autopadding)return b(this._mode.decrypt(this,I));if(I)throw new Error("data not multiple of block length")},_.prototype.setAutoPadding=function(I){return this._autopadding=!!I,this};function w(){this.cache=i.allocUnsafe(0)}w.prototype.add=function(I){this.cache=i.concat([this.cache,I])},w.prototype.get=function(I){var R;if(I){if(this.cache.length>16)return R=this.cache.slice(0,16),this.cache=this.cache.slice(16),R}else if(this.cache.length>=16)return R=this.cache.slice(0,16),this.cache=this.cache.slice(16),R;return null},w.prototype.flush=function(){if(this.cache.length)return this.cache};function b(I){var R=I[15];if(R<1||R>16)throw new Error("unable to decrypt data");for(var T=-1;++T<R;)if(I[T+(16-R)]!==R)throw new Error("unable to decrypt data");if(R!==16)return I.slice(0,16-R)}function A(I,R,T){var B=a[I.toLowerCase()];if(!B)throw new TypeError("invalid suite type");if(typeof T=="string"&&(T=i.from(T)),B.mode!=="GCM"&&T.length!==B.iv)throw new TypeError("invalid iv length "+T.length);if(typeof R=="string"&&(R=i.from(R)),R.length!==B.key/8)throw new TypeError("invalid key length "+R.length);return B.type==="stream"?new f(B.module,R,T,!0):B.type==="auth"?new l(B.module,R,T,!0):new _(B.module,R,T)}function E(I,R){var T=a[I.toLowerCase()];if(!T)throw new TypeError("invalid suite type");var B=x(R,!1,T.key,T.iv);return A(I,B.key,B.iv)}return bo.createDecipher=E,bo.createDecipheriv=A,bo}var wp;function Cu(){if(wp)return vi;wp=1;var l=E4(),i=S4(),a=Qv;function f(){return Object.keys(a)}return vi.createCipher=vi.Cipher=l.createCipher,vi.createCipheriv=vi.Cipheriv=l.createCipheriv,vi.createDecipher=vi.Decipher=i.createDecipher,vi.createDecipheriv=vi.Decipheriv=i.createDecipheriv,vi.listCiphers=vi.getCiphers=f,vi}var Zh={},_p;function A4(){return _p||(_p=1,function(l){l["des-ecb"]={key:8,iv:0},l["des-cbc"]=l.des={key:8,iv:8},l["des-ede3-cbc"]=l.des3={key:24,iv:8},l["des-ede3"]={key:24,iv:0},l["des-ede-cbc"]={key:16,iv:8},l["des-ede"]={key:16,iv:0}}(Zh)),Zh}var Mp;function I4(){if(Mp)return pi;Mp=1;var l=d4(),i=Cu(),a=Tu(),f=A4(),g=Uo();function n(b,A){b=b.toLowerCase();var E,I;if(a[b])E=a[b].key,I=a[b].iv;else if(f[b])E=f[b].key*8,I=f[b].iv;else throw new TypeError("invalid suite type");var R=g(A,!1,E,I);return M(b,R.key,R.iv)}function x(b,A){b=b.toLowerCase();var E,I;if(a[b])E=a[b].key,I=a[b].iv;else if(f[b])E=f[b].key*8,I=f[b].iv;else throw new TypeError("invalid suite type");var R=g(A,!1,E,I);return _(b,R.key,R.iv)}function M(b,A,E){if(b=b.toLowerCase(),a[b])return i.createCipheriv(b,A,E);if(f[b])return new l({key:A,iv:E,mode:b});throw new TypeError("invalid suite type")}function _(b,A,E){if(b=b.toLowerCase(),a[b])return i.createDecipheriv(b,A,E);if(f[b])return new l({key:A,iv:E,mode:b,decrypt:!0});throw new TypeError("invalid suite type")}function w(){return Object.keys(f).concat(i.getCiphers())}return pi.createCipher=pi.Cipher=n,pi.createCipheriv=pi.Cipheriv=M,pi.createDecipher=pi.Decipher=x,pi.createDecipheriv=pi.Decipheriv=_,pi.listCiphers=pi.getCiphers=w,pi}var Nn={},Wh={exports:{}},xp;function rg(){return xp||(xp=1,function(l){(function(i,a){function f(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function n(v,t,r){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=n:a.BN=n,n.BN=n,n.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=Ee.Buffer}catch{}n.isBN=function(t){return t instanceof n?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,r){return t.cmp(r)>0?t:r},n.min=function(t,r){return t.cmp(r)<0?t:r},n.prototype._init=function(t,r,s){if(typeof t=="number")return this._initNumber(t,r,s);if(typeof t=="object")return this._initArray(t,r,s);r==="hex"&&(r=16),f(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&(h++,this.negative=1),h<t.length&&(r===16?this._parseHex(t,h,s):(this._parseBase(t,r,h),s==="le"&&this._initArray(this.toArray(),r,s)))},n.prototype._initNumber=function(t,r,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(f(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),r,s)},n.prototype._initArray=function(t,r,s){if(f(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,m,y=0;if(s==="be")for(h=t.length-1,d=0;h>=0;h-=3)m=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(s==="le")for(h=0,d=0;h<t.length;h+=3)m=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function M(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var s=M(v,r);return r-1>=t&&(s|=M(v,r-1)<<4),s}n.prototype._parseHex=function(t,r,s){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d=0,m=0,y;if(s==="be")for(h=t.length-1;h>=r;h-=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(h=u%2===0?r+1:r;h<t.length;h+=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function w(v,t,r,s){for(var h=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;h*=s,y>=49?h+=y-49+10:y>=17?h+=y-17+10:h+=y}return h}n.prototype._parseBase=function(t,r,s){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=r)h++;h--,d=d/r|0;for(var m=t.length-s,y=m%h,u=Math.min(m,m-y)+s,e=0,c=s;c<u;c+=h)e=w(t,c,c+h,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var F=1;for(e=w(t,c,t.length,r),c=0;c<y;c++)F*=r;this.imuln(F),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,r){t=t||10,r=r|0||1;var s;if(t===16||t==="hex"){s="";for(var h=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<h|d)&16777215).toString(16);d=y>>>24-h&16777215,d!==0||m!==this.length-1?s=b[6-u.length]+u+s:s=u+s,h+=2,h>=26&&(h-=26,m--)}for(d!==0&&(s=d.toString(16)+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(t===(t|0)&&t>=2&&t<=36){var e=A[t],c=E[t];s="";var F=this.clone();for(F.negative=0;!F.isZero();){var L=F.modn(c).toString(t);F=F.idivn(c),F.isZero()?s=L+s:s=b[e-L.length]+L+s}for(this.isZero()&&(s="0"+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}f(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,r){return f(typeof x<"u"),this.toArrayLike(x,t,r)},n.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},n.prototype.toArrayLike=function(t,r,s){var h=this.byteLength(),d=s||Math.max(1,h);f(h<=d,"byte array longer than desired length"),f(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,c=this.clone();if(m){for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-h;e++)y[e]=0;for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[d-e-1]=u}return y},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var r=t,s=0;return r>=4096&&(s+=13,r>>>=13),r>=64&&(s+=7,r>>>=7),r>=8&&(s+=4,r>>>=4),r>=2&&(s+=2,r>>>=2),s+r},n.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,s=0;return(r&8191)===0&&(s+=13,r>>>=13),(r&127)===0&&(s+=7,r>>>=7),(r&15)===0&&(s+=4,r>>>=4),(r&3)===0&&(s+=2,r>>>=2),(r&1)===0&&s++,s},n.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function I(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var s=r/26|0,h=r%26;t[r]=(v.words[s]&1<<h)>>>h}return t}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var s=this._zeroBits(this.words[r]);if(t+=s,s!==26)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},n.prototype.ior=function(t){return f((this.negative|t.negative)===0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=r.length,this.strip()},n.prototype.iand=function(t){return f((this.negative|t.negative)===0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var r,s;this.length>t.length?(r=this,s=t):(r=t,s=this);for(var h=0;h<s.length;h++)this.words[h]=r.words[h]^s.words[h];if(this!==r)for(;h<r.length;h++)this.words[h]=r.words[h];return this.length=r.length,this.strip()},n.prototype.ixor=function(t){return f((this.negative|t.negative)===0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){f(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,s=t%26;this._expand(r),s>0&&r--;for(var h=0;h<r;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,r){f(typeof t=="number"&&t>=0);var s=t/26|0,h=t%26;return this._expand(s+1),r?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},n.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var s,h;this.length>t.length?(s=this,h=t):(s=t,h=this);for(var d=0,m=0;m<h.length;m++)r=(s.words[m]|0)+(h.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<s.length;m++)r=(s.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=s.length,d!==0)this.words[this.length]=d,this.length++;else if(s!==this)for(;m<s.length;m++)this.words[m]=s.words[m];return this},n.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var s=this.cmp(t);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;s>0?(h=this,d=t):(h=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(h.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<h.length;y++)r=(h.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<h.length&&h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=Math.max(this.length,y),h!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};function R(v,t,r){r.negative=t.negative^v.negative;var s=v.length+t.length|0;r.length=s,s=s-1|0;var h=v.words[0]|0,d=t.words[0]|0,m=h*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<s;e++){for(var c=u>>>26,F=u&67108863,L=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=L;H++){var G=e-H|0;h=v.words[G]|0,d=t.words[H]|0,m=h*d+F,c+=m/67108864|0,F=m&67108863}r.words[e]=F|0,u=c|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var T=function(t,r,s){var h=t.words,d=r.words,m=s.words,y=0,u,e,c,F=h[0]|0,L=F&8191,H=F>>>13,G=h[1]|0,tt=G&8191,Z=G>>>13,et=h[2]|0,j=et&8191,O=et>>>13,Q=h[3]|0,rt=Q&8191,st=Q>>>13,Jt=h[4]|0,gt=Jt&8191,mt=Jt>>>13,ee=h[5]|0,_t=ee&8191,Mt=ee>>>13,ie=h[6]|0,ut=ie&8191,pt=ie>>>13,Xt=h[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=h[8]|0,ht=Qt&8191,dt=Qt>>>13,ne=h[9]|0,ct=ne&8191,bt=ne>>>13,se=d[0]|0,yt=se&8191,wt=se>>>13,ae=d[1]|0,qt=ae&8191,Lt=ae>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Ut=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,me=d[5]|0,xt=me&8191,Ot=me>>>13,xe=d[6]|0,It=xe&8191,Tt=xe>>>13,we=d[7]|0,Pt=we&8191,Rt=we>>>13,ue=d[8]|0,Ct=ue&8191,Bt=ue>>>13,pr=d[9]|0,Ft=pr&8191,$t=pr>>>13;s.negative=t.negative^r.negative,s.length=19,u=Math.imul(L,yt),e=Math.imul(L,wt),e=e+Math.imul(H,yt)|0,c=Math.imul(H,wt);var Ae=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,c=Math.imul(Z,wt),u=u+Math.imul(L,qt)|0,e=e+Math.imul(L,Lt)|0,e=e+Math.imul(H,qt)|0,c=c+Math.imul(H,Lt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(j,yt),e=Math.imul(j,wt),e=e+Math.imul(O,yt)|0,c=Math.imul(O,wt),u=u+Math.imul(tt,qt)|0,e=e+Math.imul(tt,Lt)|0,e=e+Math.imul(Z,qt)|0,c=c+Math.imul(Z,Lt)|0,u=u+Math.imul(L,Nt)|0,e=e+Math.imul(L,kt)|0,e=e+Math.imul(H,Nt)|0,c=c+Math.imul(H,kt)|0;var je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(je>>>26)|0,je&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,c=Math.imul(st,wt),u=u+Math.imul(j,qt)|0,e=e+Math.imul(j,Lt)|0,e=e+Math.imul(O,qt)|0,c=c+Math.imul(O,Lt)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,c=c+Math.imul(Z,kt)|0,u=u+Math.imul(L,Ut)|0,e=e+Math.imul(L,Et)|0,e=e+Math.imul(H,Ut)|0,c=c+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,c=Math.imul(mt,wt),u=u+Math.imul(rt,qt)|0,e=e+Math.imul(rt,Lt)|0,e=e+Math.imul(st,qt)|0,c=c+Math.imul(st,Lt)|0,u=u+Math.imul(j,Nt)|0,e=e+Math.imul(j,kt)|0,e=e+Math.imul(O,Nt)|0,c=c+Math.imul(O,kt)|0,u=u+Math.imul(tt,Ut)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Ut)|0,c=c+Math.imul(Z,Et)|0,u=u+Math.imul(L,St)|0,e=e+Math.imul(L,At)|0,e=e+Math.imul(H,St)|0,c=c+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,c=Math.imul(Mt,wt),u=u+Math.imul(gt,qt)|0,e=e+Math.imul(gt,Lt)|0,e=e+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Lt)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,c=c+Math.imul(st,kt)|0,u=u+Math.imul(j,Ut)|0,e=e+Math.imul(j,Et)|0,e=e+Math.imul(O,Ut)|0,c=c+Math.imul(O,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,c=c+Math.imul(Z,At)|0,u=u+Math.imul(L,xt)|0,e=e+Math.imul(L,Ot)|0,e=e+Math.imul(H,xt)|0,c=c+Math.imul(H,Ot)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,c=Math.imul(pt,wt),u=u+Math.imul(_t,qt)|0,e=e+Math.imul(_t,Lt)|0,e=e+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Lt)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,c=c+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Ut)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Ut)|0,c=c+Math.imul(st,Et)|0,u=u+Math.imul(j,St)|0,e=e+Math.imul(j,At)|0,e=e+Math.imul(O,St)|0,c=c+Math.imul(O,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,xt)|0,c=c+Math.imul(Z,Ot)|0,u=u+Math.imul(L,It)|0,e=e+Math.imul(L,Tt)|0,e=e+Math.imul(H,It)|0,c=c+Math.imul(H,Tt)|0;var Ce=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,c=Math.imul(lt,wt),u=u+Math.imul(ut,qt)|0,e=e+Math.imul(ut,Lt)|0,e=e+Math.imul(pt,qt)|0,c=c+Math.imul(pt,Lt)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,c=c+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Ut)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,c=c+Math.imul(st,At)|0,u=u+Math.imul(j,xt)|0,e=e+Math.imul(j,Ot)|0,e=e+Math.imul(O,xt)|0,c=c+Math.imul(O,Ot)|0,u=u+Math.imul(tt,It)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,It)|0,c=c+Math.imul(Z,Tt)|0,u=u+Math.imul(L,Pt)|0,e=e+Math.imul(L,Rt)|0,e=e+Math.imul(H,Pt)|0,c=c+Math.imul(H,Rt)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,c=Math.imul(dt,wt),u=u+Math.imul(vt,qt)|0,e=e+Math.imul(vt,Lt)|0,e=e+Math.imul(lt,qt)|0,c=c+Math.imul(lt,Lt)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Ut)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Ut)|0,c=c+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,c=c+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,xt)|0,c=c+Math.imul(st,Ot)|0,u=u+Math.imul(j,It)|0,e=e+Math.imul(j,Tt)|0,e=e+Math.imul(O,It)|0,c=c+Math.imul(O,Tt)|0,u=u+Math.imul(tt,Pt)|0,e=e+Math.imul(tt,Rt)|0,e=e+Math.imul(Z,Pt)|0,c=c+Math.imul(Z,Rt)|0,u=u+Math.imul(L,Ct)|0,e=e+Math.imul(L,Bt)|0,e=e+Math.imul(H,Ct)|0,c=c+Math.imul(H,Bt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,c=Math.imul(bt,wt),u=u+Math.imul(ht,qt)|0,e=e+Math.imul(ht,Lt)|0,e=e+Math.imul(dt,qt)|0,c=c+Math.imul(dt,Lt)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,c=c+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Ut)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Ut)|0,c=c+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,c=c+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,xt)|0,c=c+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,It)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,It)|0,c=c+Math.imul(st,Tt)|0,u=u+Math.imul(j,Pt)|0,e=e+Math.imul(j,Rt)|0,e=e+Math.imul(O,Pt)|0,c=c+Math.imul(O,Rt)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Bt)|0,e=e+Math.imul(Z,Ct)|0,c=c+Math.imul(Z,Bt)|0,u=u+Math.imul(L,Ft)|0,e=e+Math.imul(L,$t)|0,e=e+Math.imul(H,Ft)|0,c=c+Math.imul(H,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,qt),e=Math.imul(ct,Lt),e=e+Math.imul(bt,qt)|0,c=Math.imul(bt,Lt),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Ut)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Ut)|0,c=c+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,c=c+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,xt)|0,c=c+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,It)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,It)|0,c=c+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Pt)|0,e=e+Math.imul(rt,Rt)|0,e=e+Math.imul(st,Pt)|0,c=c+Math.imul(st,Rt)|0,u=u+Math.imul(j,Ct)|0,e=e+Math.imul(j,Bt)|0,e=e+Math.imul(O,Ct)|0,c=c+Math.imul(O,Bt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,c=c+Math.imul(Z,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,c=Math.imul(bt,kt),u=u+Math.imul(ht,Ut)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Ut)|0,c=c+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,c=c+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,It)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,It)|0,c=c+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Pt)|0,e=e+Math.imul(gt,Rt)|0,e=e+Math.imul(mt,Pt)|0,c=c+Math.imul(mt,Rt)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Bt)|0,e=e+Math.imul(st,Ct)|0,c=c+Math.imul(st,Bt)|0,u=u+Math.imul(j,Ft)|0,e=e+Math.imul(j,$t)|0,e=e+Math.imul(O,Ft)|0,c=c+Math.imul(O,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Ut),e=Math.imul(ct,Et),e=e+Math.imul(bt,Ut)|0,c=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,c=c+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,xt)|0,c=c+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,It)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,It)|0,c=c+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Pt)|0,e=e+Math.imul(_t,Rt)|0,e=e+Math.imul(Mt,Pt)|0,c=c+Math.imul(Mt,Rt)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Bt)|0,e=e+Math.imul(mt,Ct)|0,c=c+Math.imul(mt,Bt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,c=c+Math.imul(st,$t)|0;var Le=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,c=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,It)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,It)|0,c=c+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Pt)|0,e=e+Math.imul(ut,Rt)|0,e=e+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Rt)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Bt)|0,e=e+Math.imul(Mt,Ct)|0,c=c+Math.imul(Mt,Bt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,xt)|0,c=Math.imul(bt,Ot),u=u+Math.imul(ht,It)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,It)|0,c=c+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Pt)|0,e=e+Math.imul(vt,Rt)|0,e=e+Math.imul(lt,Pt)|0,c=c+Math.imul(lt,Rt)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Bt)|0,e=e+Math.imul(pt,Ct)|0,c=c+Math.imul(pt,Bt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,It),e=Math.imul(ct,Tt),e=e+Math.imul(bt,It)|0,c=Math.imul(bt,Tt),u=u+Math.imul(ht,Pt)|0,e=e+Math.imul(ht,Rt)|0,e=e+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Rt)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Bt)|0,e=e+Math.imul(lt,Ct)|0,c=c+Math.imul(lt,Bt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,c=c+Math.imul(pt,$t)|0;var Re=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Re>>>26)|0,Re&=67108863,u=Math.imul(ct,Pt),e=Math.imul(ct,Rt),e=e+Math.imul(bt,Pt)|0,c=Math.imul(bt,Rt),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Bt)|0,e=e+Math.imul(dt,Ct)|0,c=c+Math.imul(dt,Bt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,c=c+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Bt),e=e+Math.imul(bt,Ct)|0,c=Math.imul(bt,Bt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,c=c+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,c=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(c+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Ae,m[1]=Ke,m[2]=je,m[3]=Ve,m[4]=Ge,m[5]=Ze,m[6]=Ce,m[7]=Ne,m[8]=We,m[9]=De,m[10]=Ye,m[11]=Je,m[12]=Le,m[13]=$e,m[14]=ze,m[15]=Re,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,s.length++),s};Math.imul||(T=R);function B(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var s=0,h=0,d=0;d<r.length-1;d++){var m=h;h=0;for(var y=s&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var c=d-e,F=v.words[c]|0,L=t.words[e]|0,H=F*L,G=H&67108863;m=m+(H/67108864|0)|0,G=G+y|0,y=G&67108863,m=m+(G>>>26)|0,h+=m>>>26,m&=67108863}r.words[d]=y,s=m,m=h}return s!==0?r.words[d]=s:r.length--,r.strip()}function D(v,t,r){var s=new q;return s.mulp(v,t,r)}n.prototype.mulTo=function(t,r){var s,h=this.length+t.length;return this.length===10&&t.length===10?s=T(this,t,r):h<63?s=R(this,t,r):h<1024?s=B(this,t,r):s=D(this,t,r),s};function q(v,t){this.x=v,this.y=t}q.prototype.makeRBT=function(t){for(var r=new Array(t),s=n.prototype._countBits(t)-1,h=0;h<t;h++)r[h]=this.revBin(h,s,t);return r},q.prototype.revBin=function(t,r,s){if(t===0||t===s-1)return t;for(var h=0,d=0;d<r;d++)h|=(t&1)<<r-d-1,t>>=1;return h},q.prototype.permute=function(t,r,s,h,d,m){for(var y=0;y<m;y++)h[y]=r[t[y]],d[y]=s[t[y]]},q.prototype.transform=function(t,r,s,h,d,m){this.permute(m,t,r,s,h,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),F=0;F<d;F+=u)for(var L=e,H=c,G=0;G<y;G++){var tt=s[F+G],Z=h[F+G],et=s[F+G+y],j=h[F+G+y],O=L*et-H*j;j=L*j+H*et,et=O,s[F+G]=tt+et,h[F+G]=Z+j,s[F+G+y]=tt-et,h[F+G+y]=Z-j,G!==u&&(O=e*L-c*H,H=e*H+c*L,L=O)}},q.prototype.guessLen13b=function(t,r){var s=Math.max(r,t)|1,h=s&1,d=0;for(s=s/2|0;s;s=s>>>1)d++;return 1<<d+1+h},q.prototype.conjugate=function(t,r,s){if(!(s<=1))for(var h=0;h<s/2;h++){var d=t[h];t[h]=t[s-h-1],t[s-h-1]=d,d=r[h],r[h]=-r[s-h-1],r[s-h-1]=-d}},q.prototype.normalize13b=function(t,r){for(var s=0,h=0;h<r/2;h++){var d=Math.round(t[2*h+1]/r)*8192+Math.round(t[2*h]/r)+s;t[h]=d&67108863,d<67108864?s=0:s=d/67108864|0}return t},q.prototype.convert13b=function(t,r,s,h){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),s[2*m]=d&8191,d=d>>>13,s[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<h;++m)s[m]=0;f(d===0),f((d&-8192)===0)},q.prototype.stub=function(t){for(var r=new Array(t),s=0;s<t;s++)r[s]=0;return r},q.prototype.mulp=function(t,r,s){var h=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(h),m=this.stub(h),y=new Array(h),u=new Array(h),e=new Array(h),c=new Array(h),F=new Array(h),L=new Array(h),H=s.words;H.length=h,this.convert13b(t.words,t.length,y,h),this.convert13b(r.words,r.length,c,h),this.transform(y,m,u,e,h,d),this.transform(c,m,F,L,h,d);for(var G=0;G<h;G++){var tt=u[G]*F[G]-e[G]*L[G];e[G]=u[G]*L[G]+e[G]*F[G],u[G]=tt}return this.conjugate(u,e,h),this.transform(u,e,H,m,h,d),this.conjugate(H,m,h),this.normalize13b(H,h),s.negative=t.negative^r.negative,s.length=t.length+r.length,s.strip()},n.prototype.mul=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},n.prototype.mulf=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),D(this,t,r)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){f(typeof t=="number"),f(t<67108864);for(var r=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,d=(h&67108863)+(r&67108863);r>>=26,r+=h/67108864|0,r+=d>>>26,this.words[s]=d&67108863}return r!==0&&(this.words[s]=r,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var r=I(t);if(r.length===0)return new n(1);for(var s=this,h=0;h<r.length&&r[h]===0;h++,s=s.sqr());if(++h<r.length)for(var d=s.sqr();h<r.length;h++,d=d.sqr())r[h]!==0&&(s=s.mul(d));return s},n.prototype.iushln=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&h,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(s!==0){for(d=this.length-1;d>=0;d--)this.words[d+s]=this.words[d];for(d=0;d<s;d++)this.words[d]=0;this.length+=s}return this.strip()},n.prototype.ishln=function(t){return f(this.negative===0),this.iushln(t)},n.prototype.iushrn=function(t,r,s){f(typeof t=="number"&&t>=0);var h;r?h=(r-r%26)/26:h=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=s;if(h-=m,h=Math.max(0,h),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var c=0;for(e=this.length-1;e>=0&&(c!==0||e>=h);e--){var F=this.words[e]|0;this.words[e]=c<<26-d|F>>>d,c=F&y}return u&&c!==0&&(u.words[u.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,r,s){return f(this.negative===0),this.iushrn(t,r,s)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return!1;var d=this.words[s];return!!(d&h)},n.prototype.imaskn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26;if(f(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(r!==0&&s++,this.length=Math.min(s,this.length),r!==0){var h=67108863^67108863>>>r<<r;this.words[this.length-1]&=h}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return f(typeof t=="number"),f(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},n.prototype.isubn=function(t){if(f(typeof t=="number"),f(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,r,s){var h=t.length+s,d;this._expand(h);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+s]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+s]=m&67108863}for(;d<this.length-s;d++)m=(this.words[d+s]|0)+y,y=m>>26,this.words[d+s]=m&67108863;if(y===0)return this.strip();for(f(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,r){var s=this.length-t.length,h=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);s=26-y,s!==0&&(d=d.ushln(s),h.iushln(s),m=d.words[d.length-1]|0);var u=h.length-d.length,e;if(r!=="mod"){e=new n(null),e.length=u+1,e.words=new Array(e.length);for(var c=0;c<e.length;c++)e.words[c]=0}var F=h.clone()._ishlnsubmul(d,1,u);F.negative===0&&(h=F,e&&(e.words[u]=1));for(var L=u-1;L>=0;L--){var H=(h.words[d.length+L]|0)*67108864+(h.words[d.length+L-1]|0);for(H=Math.min(H/m|0,67108863),h._ishlnsubmul(d,H,L);h.negative!==0;)H--,h.negative=0,h._ishlnsubmul(d,1,L),h.isZero()||(h.negative^=1);e&&(e.words[L]=H)}return e&&e.strip(),h.strip(),r!=="div"&&s!==0&&h.iushrn(s),{div:e||null,mod:h}},n.prototype.divmod=function(t,r,s){if(f(!t.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var h,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(h=m.div.neg()),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.iadd(t)),{div:h,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(h=m.div.neg()),{div:h,mod:m.mod}):(this.negative&t.negative)!==0?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,r)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var s=r.div.negative!==0?r.mod.isub(t):r.mod,h=t.ushrn(1),d=t.andln(1),m=s.cmp(h);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){f(t<=67108863);for(var r=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(r*s+(this.words[h]|0))%t;return s},n.prototype.idivn=function(t){f(t<=67108863);for(var r=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+r*67108864;this.words[s]=h/t|0,r=h%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=new n(0),y=new n(1),u=0;r.isEven()&&s.isEven();)r.iushrn(1),s.iushrn(1),++u;for(var e=s.clone(),c=r.clone();!r.isZero();){for(var F=0,L=1;(r.words[0]&L)===0&&F<26;++F,L<<=1);if(F>0)for(r.iushrn(F);F-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(e),d.isub(c)),h.iushrn(1),d.iushrn(1);for(var H=0,G=1;(s.words[0]&G)===0&&H<26;++H,G<<=1);if(H>0)for(s.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(c)),m.iushrn(1),y.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(m),d.isub(y)):(s.isub(r),m.isub(h),y.isub(d))}return{a:m,b:y,gcd:s.iushln(u)}},n.prototype._invmp=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=s.clone();r.cmpn(1)>0&&s.cmpn(1)>0;){for(var y=0,u=1;(r.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)h.isOdd()&&h.iadd(m),h.iushrn(1);for(var e=0,c=1;(s.words[0]&c)===0&&e<26;++e,c<<=1);if(e>0)for(s.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(d)):(s.isub(r),d.isub(h))}var F;return r.cmpn(1)===0?F=h:F=d,F.cmpn(0)<0&&F.iadd(t),F},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),s=t.clone();r.negative=0,s.negative=0;for(var h=0;r.isEven()&&s.isEven();h++)r.iushrn(1),s.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;s.isEven();)s.iushrn(1);var d=r.cmp(s);if(d<0){var m=r;r=s,s=m}else if(d===0||s.cmpn(1)===0)break;r.isub(s)}while(!0);return s.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){f(typeof t=="number");var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var d=h,m=s;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var s;if(this.length>1)s=1;else{r&&(t=-t),f(t<=67108863,"Number is too big");var h=this.words[0]|0;s=h===t?0:h<t?-1:1}return this.negative!==0?-s|0:s},n.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,d=t.words[s]|0;if(h!==d){h<d?r=-1:h>d&&(r=1);break}}return r},n.prototype.gtn=function(t){return this.cmpn(t)===1},n.prototype.gt=function(t){return this.cmp(t)===1},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return this.cmpn(t)===-1},n.prototype.lt=function(t){return this.cmp(t)===-1},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return this.cmpn(t)===0},n.prototype.eq=function(t){return this.cmp(t)===0},n.red=function(t){return new Y(t)},n.prototype.toRed=function(t){return f(!this.red,"Already a number in reduction context"),f(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return f(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return f(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var k={k256:null,p224:null,p192:null,p25519:null};function N(v,t){this.name=v,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},N.prototype.ireduce=function(t){var r=t,s;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),s=r.bitLength();while(s>this.n);var h=s<this.n?-1:r.ucmp(this.p);return h===0?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},N.prototype.split=function(t,r){t.iushrn(this.n,0,r)},N.prototype.imulK=function(t){return t.imul(this.k)};function K(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(K,N),K.prototype.split=function(t,r){for(var s=4194303,h=Math.min(t.length,9),d=0;d<h;d++)r.words[d]=t.words[d];if(r.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&s,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&s)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},K.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,s=0;s<t.length;s++){var h=t.words[s]|0;r+=h*977,t.words[s]=r&67108863,r=h*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function $(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g($,N);function P(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,N);function z(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(z,N),z.prototype.imulK=function(t){for(var r=0,s=0;s<t.length;s++){var h=(t.words[s]|0)*19+r,d=h&67108863;h>>>=26,t.words[s]=d,r=h}return r!==0&&(t.words[t.length++]=r),t},n._prime=function(t){if(k[t])return k[t];var r;if(t==="k256")r=new K;else if(t==="p224")r=new $;else if(t==="p192")r=new P;else if(t==="p25519")r=new z;else throw new Error("Unknown prime "+t);return k[t]=r,r};function Y(v){if(typeof v=="string"){var t=n._prime(v);this.m=t.p,this.prime=t}else f(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Y.prototype._verify1=function(t){f(t.negative===0,"red works only with positives"),f(t.red,"red works only with red numbers")},Y.prototype._verify2=function(t,r){f((t.negative|r.negative)===0,"red works only with positives"),f(t.red&&t.red===r.red,"red works only with red numbers")},Y.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Y.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Y.prototype.add=function(t,r){this._verify2(t,r);var s=t.add(r);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Y.prototype.iadd=function(t,r){this._verify2(t,r);var s=t.iadd(r);return s.cmp(this.m)>=0&&s.isub(this.m),s},Y.prototype.sub=function(t,r){this._verify2(t,r);var s=t.sub(r);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},Y.prototype.isub=function(t,r){this._verify2(t,r);var s=t.isub(r);return s.cmpn(0)<0&&s.iadd(this.m),s},Y.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},Y.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Y.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Y.prototype.isqr=function(t){return this.imul(t,t.clone())},Y.prototype.sqr=function(t){return this.mul(t,t)},Y.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(f(r%2===1),r===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);f(!h.isZero());var m=new n(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new n(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var c=this.pow(e,h),F=this.pow(t,h.addn(1).iushrn(1)),L=this.pow(t,h),H=d;L.cmp(m)!==0;){for(var G=L,tt=0;G.cmp(m)!==0;tt++)G=G.redSqr();f(tt<H);var Z=this.pow(c,new n(1).iushln(H-tt-1));F=F.redMul(Z),c=Z.redSqr(),L=L.redMul(c),H=tt}return F},Y.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Y.prototype.pow=function(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var s=4,h=new Array(1<<s);h[0]=new n(1).toRed(this),h[1]=t;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],t);var m=h[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var c=r.words[d],F=e-1;F>=0;F--){var L=c>>F&1;if(m!==h[0]&&(m=this.sqr(m)),L===0&&y===0){u=0;continue}y<<=1,y|=L,u++,!(u!==s&&(d!==0||F!==0))&&(m=this.mul(m,h[y]),u=0,y=0)}e=26}return m},Y.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},Y.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},n.mont=function(t){return new nt(t)};function nt(v){Y.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,Y),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var s=t.mul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(l,ve)}(Wh)),Wh.exports}var Yh={exports:{}},Ep;function R4(){return Ep||(Ep=1,function(l){(function(i,a){function f(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function n(v,t,r){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=n:a.BN=n,n.BN=n,n.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=Ee.Buffer}catch{}n.isBN=function(t){return t instanceof n?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,r){return t.cmp(r)>0?t:r},n.min=function(t,r){return t.cmp(r)<0?t:r},n.prototype._init=function(t,r,s){if(typeof t=="number")return this._initNumber(t,r,s);if(typeof t=="object")return this._initArray(t,r,s);r==="hex"&&(r=16),f(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&(h++,this.negative=1),h<t.length&&(r===16?this._parseHex(t,h,s):(this._parseBase(t,r,h),s==="le"&&this._initArray(this.toArray(),r,s)))},n.prototype._initNumber=function(t,r,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(f(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),r,s)},n.prototype._initArray=function(t,r,s){if(f(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,m,y=0;if(s==="be")for(h=t.length-1,d=0;h>=0;h-=3)m=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(s==="le")for(h=0,d=0;h<t.length;h+=3)m=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function M(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var s=M(v,r);return r-1>=t&&(s|=M(v,r-1)<<4),s}n.prototype._parseHex=function(t,r,s){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d=0,m=0,y;if(s==="be")for(h=t.length-1;h>=r;h-=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(h=u%2===0?r+1:r;h<t.length;h+=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function w(v,t,r,s){for(var h=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;h*=s,y>=49?h+=y-49+10:y>=17?h+=y-17+10:h+=y}return h}n.prototype._parseBase=function(t,r,s){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=r)h++;h--,d=d/r|0;for(var m=t.length-s,y=m%h,u=Math.min(m,m-y)+s,e=0,c=s;c<u;c+=h)e=w(t,c,c+h,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var F=1;for(e=w(t,c,t.length,r),c=0;c<y;c++)F*=r;this.imuln(F),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,r){t=t||10,r=r|0||1;var s;if(t===16||t==="hex"){s="";for(var h=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<h|d)&16777215).toString(16);d=y>>>24-h&16777215,d!==0||m!==this.length-1?s=b[6-u.length]+u+s:s=u+s,h+=2,h>=26&&(h-=26,m--)}for(d!==0&&(s=d.toString(16)+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(t===(t|0)&&t>=2&&t<=36){var e=A[t],c=E[t];s="";var F=this.clone();for(F.negative=0;!F.isZero();){var L=F.modn(c).toString(t);F=F.idivn(c),F.isZero()?s=L+s:s=b[e-L.length]+L+s}for(this.isZero()&&(s="0"+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}f(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,r){return f(typeof x<"u"),this.toArrayLike(x,t,r)},n.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},n.prototype.toArrayLike=function(t,r,s){var h=this.byteLength(),d=s||Math.max(1,h);f(h<=d,"byte array longer than desired length"),f(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,c=this.clone();if(m){for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-h;e++)y[e]=0;for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[d-e-1]=u}return y},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var r=t,s=0;return r>=4096&&(s+=13,r>>>=13),r>=64&&(s+=7,r>>>=7),r>=8&&(s+=4,r>>>=4),r>=2&&(s+=2,r>>>=2),s+r},n.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,s=0;return(r&8191)===0&&(s+=13,r>>>=13),(r&127)===0&&(s+=7,r>>>=7),(r&15)===0&&(s+=4,r>>>=4),(r&3)===0&&(s+=2,r>>>=2),(r&1)===0&&s++,s},n.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function I(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var s=r/26|0,h=r%26;t[r]=(v.words[s]&1<<h)>>>h}return t}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var s=this._zeroBits(this.words[r]);if(t+=s,s!==26)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},n.prototype.ior=function(t){return f((this.negative|t.negative)===0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=r.length,this.strip()},n.prototype.iand=function(t){return f((this.negative|t.negative)===0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var r,s;this.length>t.length?(r=this,s=t):(r=t,s=this);for(var h=0;h<s.length;h++)this.words[h]=r.words[h]^s.words[h];if(this!==r)for(;h<r.length;h++)this.words[h]=r.words[h];return this.length=r.length,this.strip()},n.prototype.ixor=function(t){return f((this.negative|t.negative)===0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){f(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,s=t%26;this._expand(r),s>0&&r--;for(var h=0;h<r;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,r){f(typeof t=="number"&&t>=0);var s=t/26|0,h=t%26;return this._expand(s+1),r?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},n.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var s,h;this.length>t.length?(s=this,h=t):(s=t,h=this);for(var d=0,m=0;m<h.length;m++)r=(s.words[m]|0)+(h.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<s.length;m++)r=(s.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=s.length,d!==0)this.words[this.length]=d,this.length++;else if(s!==this)for(;m<s.length;m++)this.words[m]=s.words[m];return this},n.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var s=this.cmp(t);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;s>0?(h=this,d=t):(h=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(h.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<h.length;y++)r=(h.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<h.length&&h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=Math.max(this.length,y),h!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};function R(v,t,r){r.negative=t.negative^v.negative;var s=v.length+t.length|0;r.length=s,s=s-1|0;var h=v.words[0]|0,d=t.words[0]|0,m=h*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<s;e++){for(var c=u>>>26,F=u&67108863,L=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=L;H++){var G=e-H|0;h=v.words[G]|0,d=t.words[H]|0,m=h*d+F,c+=m/67108864|0,F=m&67108863}r.words[e]=F|0,u=c|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var T=function(t,r,s){var h=t.words,d=r.words,m=s.words,y=0,u,e,c,F=h[0]|0,L=F&8191,H=F>>>13,G=h[1]|0,tt=G&8191,Z=G>>>13,et=h[2]|0,j=et&8191,O=et>>>13,Q=h[3]|0,rt=Q&8191,st=Q>>>13,Jt=h[4]|0,gt=Jt&8191,mt=Jt>>>13,ee=h[5]|0,_t=ee&8191,Mt=ee>>>13,ie=h[6]|0,ut=ie&8191,pt=ie>>>13,Xt=h[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=h[8]|0,ht=Qt&8191,dt=Qt>>>13,ne=h[9]|0,ct=ne&8191,bt=ne>>>13,se=d[0]|0,yt=se&8191,wt=se>>>13,ae=d[1]|0,qt=ae&8191,Lt=ae>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Ut=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,me=d[5]|0,xt=me&8191,Ot=me>>>13,xe=d[6]|0,It=xe&8191,Tt=xe>>>13,we=d[7]|0,Pt=we&8191,Rt=we>>>13,ue=d[8]|0,Ct=ue&8191,Bt=ue>>>13,pr=d[9]|0,Ft=pr&8191,$t=pr>>>13;s.negative=t.negative^r.negative,s.length=19,u=Math.imul(L,yt),e=Math.imul(L,wt),e=e+Math.imul(H,yt)|0,c=Math.imul(H,wt);var Ae=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,c=Math.imul(Z,wt),u=u+Math.imul(L,qt)|0,e=e+Math.imul(L,Lt)|0,e=e+Math.imul(H,qt)|0,c=c+Math.imul(H,Lt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(j,yt),e=Math.imul(j,wt),e=e+Math.imul(O,yt)|0,c=Math.imul(O,wt),u=u+Math.imul(tt,qt)|0,e=e+Math.imul(tt,Lt)|0,e=e+Math.imul(Z,qt)|0,c=c+Math.imul(Z,Lt)|0,u=u+Math.imul(L,Nt)|0,e=e+Math.imul(L,kt)|0,e=e+Math.imul(H,Nt)|0,c=c+Math.imul(H,kt)|0;var je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(je>>>26)|0,je&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,c=Math.imul(st,wt),u=u+Math.imul(j,qt)|0,e=e+Math.imul(j,Lt)|0,e=e+Math.imul(O,qt)|0,c=c+Math.imul(O,Lt)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,c=c+Math.imul(Z,kt)|0,u=u+Math.imul(L,Ut)|0,e=e+Math.imul(L,Et)|0,e=e+Math.imul(H,Ut)|0,c=c+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,c=Math.imul(mt,wt),u=u+Math.imul(rt,qt)|0,e=e+Math.imul(rt,Lt)|0,e=e+Math.imul(st,qt)|0,c=c+Math.imul(st,Lt)|0,u=u+Math.imul(j,Nt)|0,e=e+Math.imul(j,kt)|0,e=e+Math.imul(O,Nt)|0,c=c+Math.imul(O,kt)|0,u=u+Math.imul(tt,Ut)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Ut)|0,c=c+Math.imul(Z,Et)|0,u=u+Math.imul(L,St)|0,e=e+Math.imul(L,At)|0,e=e+Math.imul(H,St)|0,c=c+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,c=Math.imul(Mt,wt),u=u+Math.imul(gt,qt)|0,e=e+Math.imul(gt,Lt)|0,e=e+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Lt)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,c=c+Math.imul(st,kt)|0,u=u+Math.imul(j,Ut)|0,e=e+Math.imul(j,Et)|0,e=e+Math.imul(O,Ut)|0,c=c+Math.imul(O,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,c=c+Math.imul(Z,At)|0,u=u+Math.imul(L,xt)|0,e=e+Math.imul(L,Ot)|0,e=e+Math.imul(H,xt)|0,c=c+Math.imul(H,Ot)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,c=Math.imul(pt,wt),u=u+Math.imul(_t,qt)|0,e=e+Math.imul(_t,Lt)|0,e=e+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Lt)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,c=c+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Ut)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Ut)|0,c=c+Math.imul(st,Et)|0,u=u+Math.imul(j,St)|0,e=e+Math.imul(j,At)|0,e=e+Math.imul(O,St)|0,c=c+Math.imul(O,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,xt)|0,c=c+Math.imul(Z,Ot)|0,u=u+Math.imul(L,It)|0,e=e+Math.imul(L,Tt)|0,e=e+Math.imul(H,It)|0,c=c+Math.imul(H,Tt)|0;var Ce=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,c=Math.imul(lt,wt),u=u+Math.imul(ut,qt)|0,e=e+Math.imul(ut,Lt)|0,e=e+Math.imul(pt,qt)|0,c=c+Math.imul(pt,Lt)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,c=c+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Ut)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,c=c+Math.imul(st,At)|0,u=u+Math.imul(j,xt)|0,e=e+Math.imul(j,Ot)|0,e=e+Math.imul(O,xt)|0,c=c+Math.imul(O,Ot)|0,u=u+Math.imul(tt,It)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,It)|0,c=c+Math.imul(Z,Tt)|0,u=u+Math.imul(L,Pt)|0,e=e+Math.imul(L,Rt)|0,e=e+Math.imul(H,Pt)|0,c=c+Math.imul(H,Rt)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,c=Math.imul(dt,wt),u=u+Math.imul(vt,qt)|0,e=e+Math.imul(vt,Lt)|0,e=e+Math.imul(lt,qt)|0,c=c+Math.imul(lt,Lt)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Ut)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Ut)|0,c=c+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,c=c+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,xt)|0,c=c+Math.imul(st,Ot)|0,u=u+Math.imul(j,It)|0,e=e+Math.imul(j,Tt)|0,e=e+Math.imul(O,It)|0,c=c+Math.imul(O,Tt)|0,u=u+Math.imul(tt,Pt)|0,e=e+Math.imul(tt,Rt)|0,e=e+Math.imul(Z,Pt)|0,c=c+Math.imul(Z,Rt)|0,u=u+Math.imul(L,Ct)|0,e=e+Math.imul(L,Bt)|0,e=e+Math.imul(H,Ct)|0,c=c+Math.imul(H,Bt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,c=Math.imul(bt,wt),u=u+Math.imul(ht,qt)|0,e=e+Math.imul(ht,Lt)|0,e=e+Math.imul(dt,qt)|0,c=c+Math.imul(dt,Lt)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,c=c+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Ut)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Ut)|0,c=c+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,c=c+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,xt)|0,c=c+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,It)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,It)|0,c=c+Math.imul(st,Tt)|0,u=u+Math.imul(j,Pt)|0,e=e+Math.imul(j,Rt)|0,e=e+Math.imul(O,Pt)|0,c=c+Math.imul(O,Rt)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Bt)|0,e=e+Math.imul(Z,Ct)|0,c=c+Math.imul(Z,Bt)|0,u=u+Math.imul(L,Ft)|0,e=e+Math.imul(L,$t)|0,e=e+Math.imul(H,Ft)|0,c=c+Math.imul(H,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,qt),e=Math.imul(ct,Lt),e=e+Math.imul(bt,qt)|0,c=Math.imul(bt,Lt),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Ut)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Ut)|0,c=c+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,c=c+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,xt)|0,c=c+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,It)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,It)|0,c=c+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Pt)|0,e=e+Math.imul(rt,Rt)|0,e=e+Math.imul(st,Pt)|0,c=c+Math.imul(st,Rt)|0,u=u+Math.imul(j,Ct)|0,e=e+Math.imul(j,Bt)|0,e=e+Math.imul(O,Ct)|0,c=c+Math.imul(O,Bt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,c=c+Math.imul(Z,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,c=Math.imul(bt,kt),u=u+Math.imul(ht,Ut)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Ut)|0,c=c+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,c=c+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,It)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,It)|0,c=c+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Pt)|0,e=e+Math.imul(gt,Rt)|0,e=e+Math.imul(mt,Pt)|0,c=c+Math.imul(mt,Rt)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Bt)|0,e=e+Math.imul(st,Ct)|0,c=c+Math.imul(st,Bt)|0,u=u+Math.imul(j,Ft)|0,e=e+Math.imul(j,$t)|0,e=e+Math.imul(O,Ft)|0,c=c+Math.imul(O,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Ut),e=Math.imul(ct,Et),e=e+Math.imul(bt,Ut)|0,c=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,c=c+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,xt)|0,c=c+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,It)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,It)|0,c=c+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Pt)|0,e=e+Math.imul(_t,Rt)|0,e=e+Math.imul(Mt,Pt)|0,c=c+Math.imul(Mt,Rt)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Bt)|0,e=e+Math.imul(mt,Ct)|0,c=c+Math.imul(mt,Bt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,c=c+Math.imul(st,$t)|0;var Le=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,c=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,It)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,It)|0,c=c+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Pt)|0,e=e+Math.imul(ut,Rt)|0,e=e+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Rt)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Bt)|0,e=e+Math.imul(Mt,Ct)|0,c=c+Math.imul(Mt,Bt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,xt)|0,c=Math.imul(bt,Ot),u=u+Math.imul(ht,It)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,It)|0,c=c+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Pt)|0,e=e+Math.imul(vt,Rt)|0,e=e+Math.imul(lt,Pt)|0,c=c+Math.imul(lt,Rt)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Bt)|0,e=e+Math.imul(pt,Ct)|0,c=c+Math.imul(pt,Bt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,It),e=Math.imul(ct,Tt),e=e+Math.imul(bt,It)|0,c=Math.imul(bt,Tt),u=u+Math.imul(ht,Pt)|0,e=e+Math.imul(ht,Rt)|0,e=e+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Rt)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Bt)|0,e=e+Math.imul(lt,Ct)|0,c=c+Math.imul(lt,Bt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,c=c+Math.imul(pt,$t)|0;var Re=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Re>>>26)|0,Re&=67108863,u=Math.imul(ct,Pt),e=Math.imul(ct,Rt),e=e+Math.imul(bt,Pt)|0,c=Math.imul(bt,Rt),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Bt)|0,e=e+Math.imul(dt,Ct)|0,c=c+Math.imul(dt,Bt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,c=c+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Bt),e=e+Math.imul(bt,Ct)|0,c=Math.imul(bt,Bt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,c=c+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,c=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(c+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Ae,m[1]=Ke,m[2]=je,m[3]=Ve,m[4]=Ge,m[5]=Ze,m[6]=Ce,m[7]=Ne,m[8]=We,m[9]=De,m[10]=Ye,m[11]=Je,m[12]=Le,m[13]=$e,m[14]=ze,m[15]=Re,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,s.length++),s};Math.imul||(T=R);function B(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var s=0,h=0,d=0;d<r.length-1;d++){var m=h;h=0;for(var y=s&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var c=d-e,F=v.words[c]|0,L=t.words[e]|0,H=F*L,G=H&67108863;m=m+(H/67108864|0)|0,G=G+y|0,y=G&67108863,m=m+(G>>>26)|0,h+=m>>>26,m&=67108863}r.words[d]=y,s=m,m=h}return s!==0?r.words[d]=s:r.length--,r.strip()}function D(v,t,r){var s=new q;return s.mulp(v,t,r)}n.prototype.mulTo=function(t,r){var s,h=this.length+t.length;return this.length===10&&t.length===10?s=T(this,t,r):h<63?s=R(this,t,r):h<1024?s=B(this,t,r):s=D(this,t,r),s};function q(v,t){this.x=v,this.y=t}q.prototype.makeRBT=function(t){for(var r=new Array(t),s=n.prototype._countBits(t)-1,h=0;h<t;h++)r[h]=this.revBin(h,s,t);return r},q.prototype.revBin=function(t,r,s){if(t===0||t===s-1)return t;for(var h=0,d=0;d<r;d++)h|=(t&1)<<r-d-1,t>>=1;return h},q.prototype.permute=function(t,r,s,h,d,m){for(var y=0;y<m;y++)h[y]=r[t[y]],d[y]=s[t[y]]},q.prototype.transform=function(t,r,s,h,d,m){this.permute(m,t,r,s,h,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),F=0;F<d;F+=u)for(var L=e,H=c,G=0;G<y;G++){var tt=s[F+G],Z=h[F+G],et=s[F+G+y],j=h[F+G+y],O=L*et-H*j;j=L*j+H*et,et=O,s[F+G]=tt+et,h[F+G]=Z+j,s[F+G+y]=tt-et,h[F+G+y]=Z-j,G!==u&&(O=e*L-c*H,H=e*H+c*L,L=O)}},q.prototype.guessLen13b=function(t,r){var s=Math.max(r,t)|1,h=s&1,d=0;for(s=s/2|0;s;s=s>>>1)d++;return 1<<d+1+h},q.prototype.conjugate=function(t,r,s){if(!(s<=1))for(var h=0;h<s/2;h++){var d=t[h];t[h]=t[s-h-1],t[s-h-1]=d,d=r[h],r[h]=-r[s-h-1],r[s-h-1]=-d}},q.prototype.normalize13b=function(t,r){for(var s=0,h=0;h<r/2;h++){var d=Math.round(t[2*h+1]/r)*8192+Math.round(t[2*h]/r)+s;t[h]=d&67108863,d<67108864?s=0:s=d/67108864|0}return t},q.prototype.convert13b=function(t,r,s,h){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),s[2*m]=d&8191,d=d>>>13,s[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<h;++m)s[m]=0;f(d===0),f((d&-8192)===0)},q.prototype.stub=function(t){for(var r=new Array(t),s=0;s<t;s++)r[s]=0;return r},q.prototype.mulp=function(t,r,s){var h=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(h),m=this.stub(h),y=new Array(h),u=new Array(h),e=new Array(h),c=new Array(h),F=new Array(h),L=new Array(h),H=s.words;H.length=h,this.convert13b(t.words,t.length,y,h),this.convert13b(r.words,r.length,c,h),this.transform(y,m,u,e,h,d),this.transform(c,m,F,L,h,d);for(var G=0;G<h;G++){var tt=u[G]*F[G]-e[G]*L[G];e[G]=u[G]*L[G]+e[G]*F[G],u[G]=tt}return this.conjugate(u,e,h),this.transform(u,e,H,m,h,d),this.conjugate(H,m,h),this.normalize13b(H,h),s.negative=t.negative^r.negative,s.length=t.length+r.length,s.strip()},n.prototype.mul=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},n.prototype.mulf=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),D(this,t,r)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){f(typeof t=="number"),f(t<67108864);for(var r=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,d=(h&67108863)+(r&67108863);r>>=26,r+=h/67108864|0,r+=d>>>26,this.words[s]=d&67108863}return r!==0&&(this.words[s]=r,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var r=I(t);if(r.length===0)return new n(1);for(var s=this,h=0;h<r.length&&r[h]===0;h++,s=s.sqr());if(++h<r.length)for(var d=s.sqr();h<r.length;h++,d=d.sqr())r[h]!==0&&(s=s.mul(d));return s},n.prototype.iushln=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&h,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(s!==0){for(d=this.length-1;d>=0;d--)this.words[d+s]=this.words[d];for(d=0;d<s;d++)this.words[d]=0;this.length+=s}return this.strip()},n.prototype.ishln=function(t){return f(this.negative===0),this.iushln(t)},n.prototype.iushrn=function(t,r,s){f(typeof t=="number"&&t>=0);var h;r?h=(r-r%26)/26:h=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=s;if(h-=m,h=Math.max(0,h),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var c=0;for(e=this.length-1;e>=0&&(c!==0||e>=h);e--){var F=this.words[e]|0;this.words[e]=c<<26-d|F>>>d,c=F&y}return u&&c!==0&&(u.words[u.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,r,s){return f(this.negative===0),this.iushrn(t,r,s)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return!1;var d=this.words[s];return!!(d&h)},n.prototype.imaskn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26;if(f(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(r!==0&&s++,this.length=Math.min(s,this.length),r!==0){var h=67108863^67108863>>>r<<r;this.words[this.length-1]&=h}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return f(typeof t=="number"),f(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},n.prototype.isubn=function(t){if(f(typeof t=="number"),f(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,r,s){var h=t.length+s,d;this._expand(h);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+s]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+s]=m&67108863}for(;d<this.length-s;d++)m=(this.words[d+s]|0)+y,y=m>>26,this.words[d+s]=m&67108863;if(y===0)return this.strip();for(f(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,r){var s=this.length-t.length,h=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);s=26-y,s!==0&&(d=d.ushln(s),h.iushln(s),m=d.words[d.length-1]|0);var u=h.length-d.length,e;if(r!=="mod"){e=new n(null),e.length=u+1,e.words=new Array(e.length);for(var c=0;c<e.length;c++)e.words[c]=0}var F=h.clone()._ishlnsubmul(d,1,u);F.negative===0&&(h=F,e&&(e.words[u]=1));for(var L=u-1;L>=0;L--){var H=(h.words[d.length+L]|0)*67108864+(h.words[d.length+L-1]|0);for(H=Math.min(H/m|0,67108863),h._ishlnsubmul(d,H,L);h.negative!==0;)H--,h.negative=0,h._ishlnsubmul(d,1,L),h.isZero()||(h.negative^=1);e&&(e.words[L]=H)}return e&&e.strip(),h.strip(),r!=="div"&&s!==0&&h.iushrn(s),{div:e||null,mod:h}},n.prototype.divmod=function(t,r,s){if(f(!t.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var h,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(h=m.div.neg()),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.iadd(t)),{div:h,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(h=m.div.neg()),{div:h,mod:m.mod}):(this.negative&t.negative)!==0?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,r)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var s=r.div.negative!==0?r.mod.isub(t):r.mod,h=t.ushrn(1),d=t.andln(1),m=s.cmp(h);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){f(t<=67108863);for(var r=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(r*s+(this.words[h]|0))%t;return s},n.prototype.idivn=function(t){f(t<=67108863);for(var r=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+r*67108864;this.words[s]=h/t|0,r=h%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=new n(0),y=new n(1),u=0;r.isEven()&&s.isEven();)r.iushrn(1),s.iushrn(1),++u;for(var e=s.clone(),c=r.clone();!r.isZero();){for(var F=0,L=1;(r.words[0]&L)===0&&F<26;++F,L<<=1);if(F>0)for(r.iushrn(F);F-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(e),d.isub(c)),h.iushrn(1),d.iushrn(1);for(var H=0,G=1;(s.words[0]&G)===0&&H<26;++H,G<<=1);if(H>0)for(s.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(c)),m.iushrn(1),y.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(m),d.isub(y)):(s.isub(r),m.isub(h),y.isub(d))}return{a:m,b:y,gcd:s.iushln(u)}},n.prototype._invmp=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=s.clone();r.cmpn(1)>0&&s.cmpn(1)>0;){for(var y=0,u=1;(r.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)h.isOdd()&&h.iadd(m),h.iushrn(1);for(var e=0,c=1;(s.words[0]&c)===0&&e<26;++e,c<<=1);if(e>0)for(s.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(d)):(s.isub(r),d.isub(h))}var F;return r.cmpn(1)===0?F=h:F=d,F.cmpn(0)<0&&F.iadd(t),F},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),s=t.clone();r.negative=0,s.negative=0;for(var h=0;r.isEven()&&s.isEven();h++)r.iushrn(1),s.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;s.isEven();)s.iushrn(1);var d=r.cmp(s);if(d<0){var m=r;r=s,s=m}else if(d===0||s.cmpn(1)===0)break;r.isub(s)}while(!0);return s.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){f(typeof t=="number");var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var d=h,m=s;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var s;if(this.length>1)s=1;else{r&&(t=-t),f(t<=67108863,"Number is too big");var h=this.words[0]|0;s=h===t?0:h<t?-1:1}return this.negative!==0?-s|0:s},n.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,d=t.words[s]|0;if(h!==d){h<d?r=-1:h>d&&(r=1);break}}return r},n.prototype.gtn=function(t){return this.cmpn(t)===1},n.prototype.gt=function(t){return this.cmp(t)===1},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return this.cmpn(t)===-1},n.prototype.lt=function(t){return this.cmp(t)===-1},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return this.cmpn(t)===0},n.prototype.eq=function(t){return this.cmp(t)===0},n.red=function(t){return new Y(t)},n.prototype.toRed=function(t){return f(!this.red,"Already a number in reduction context"),f(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return f(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return f(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var k={k256:null,p224:null,p192:null,p25519:null};function N(v,t){this.name=v,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},N.prototype.ireduce=function(t){var r=t,s;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),s=r.bitLength();while(s>this.n);var h=s<this.n?-1:r.ucmp(this.p);return h===0?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},N.prototype.split=function(t,r){t.iushrn(this.n,0,r)},N.prototype.imulK=function(t){return t.imul(this.k)};function K(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(K,N),K.prototype.split=function(t,r){for(var s=4194303,h=Math.min(t.length,9),d=0;d<h;d++)r.words[d]=t.words[d];if(r.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&s,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&s)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},K.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,s=0;s<t.length;s++){var h=t.words[s]|0;r+=h*977,t.words[s]=r&67108863,r=h*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function $(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g($,N);function P(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,N);function z(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(z,N),z.prototype.imulK=function(t){for(var r=0,s=0;s<t.length;s++){var h=(t.words[s]|0)*19+r,d=h&67108863;h>>>=26,t.words[s]=d,r=h}return r!==0&&(t.words[t.length++]=r),t},n._prime=function(t){if(k[t])return k[t];var r;if(t==="k256")r=new K;else if(t==="p224")r=new $;else if(t==="p192")r=new P;else if(t==="p25519")r=new z;else throw new Error("Unknown prime "+t);return k[t]=r,r};function Y(v){if(typeof v=="string"){var t=n._prime(v);this.m=t.p,this.prime=t}else f(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Y.prototype._verify1=function(t){f(t.negative===0,"red works only with positives"),f(t.red,"red works only with red numbers")},Y.prototype._verify2=function(t,r){f((t.negative|r.negative)===0,"red works only with positives"),f(t.red&&t.red===r.red,"red works only with red numbers")},Y.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Y.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Y.prototype.add=function(t,r){this._verify2(t,r);var s=t.add(r);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Y.prototype.iadd=function(t,r){this._verify2(t,r);var s=t.iadd(r);return s.cmp(this.m)>=0&&s.isub(this.m),s},Y.prototype.sub=function(t,r){this._verify2(t,r);var s=t.sub(r);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},Y.prototype.isub=function(t,r){this._verify2(t,r);var s=t.isub(r);return s.cmpn(0)<0&&s.iadd(this.m),s},Y.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},Y.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Y.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Y.prototype.isqr=function(t){return this.imul(t,t.clone())},Y.prototype.sqr=function(t){return this.mul(t,t)},Y.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(f(r%2===1),r===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);f(!h.isZero());var m=new n(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new n(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var c=this.pow(e,h),F=this.pow(t,h.addn(1).iushrn(1)),L=this.pow(t,h),H=d;L.cmp(m)!==0;){for(var G=L,tt=0;G.cmp(m)!==0;tt++)G=G.redSqr();f(tt<H);var Z=this.pow(c,new n(1).iushln(H-tt-1));F=F.redMul(Z),c=Z.redSqr(),L=L.redMul(c),H=tt}return F},Y.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Y.prototype.pow=function(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var s=4,h=new Array(1<<s);h[0]=new n(1).toRed(this),h[1]=t;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],t);var m=h[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var c=r.words[d],F=e-1;F>=0;F--){var L=c>>F&1;if(m!==h[0]&&(m=this.sqr(m)),L===0&&y===0){u=0;continue}y<<=1,y|=L,u++,!(u!==s&&(d!==0||F!==0))&&(m=this.mul(m,h[y]),u=0,y=0)}e=26}return m},Y.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},Y.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},n.mont=function(t){return new nt(t)};function nt(v){Y.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,Y),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var s=t.mul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(l,ve)}(Yh)),Yh.exports}var yo={exports:{}},Sp;function Bu(){if(Sp)return yo.exports;Sp=1;var l;yo.exports=function(g){return l||(l=new i(null)),l.generate(g)};function i(f){this.rand=f}if(yo.exports.Rand=i,i.prototype.generate=function(g){return this._rand(g)},i.prototype._rand=function(g){if(this.rand.getBytes)return this.rand.getBytes(g);for(var n=new Uint8Array(g),x=0;x<n.length;x++)n[x]=this.rand.getByte();return n},typeof self=="object")self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(g){var n=new Uint8Array(g);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(g){var n=new Uint8Array(g);return self.msCrypto.getRandomValues(n),n}:typeof window=="object"&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=mg();if(typeof a.randomBytes!="function")throw new Error("Not supported");i.prototype._rand=function(g){return a.randomBytes(g)}}catch{}return yo.exports}var Jh,Ap;function ig(){if(Ap)return Jh;Ap=1;var l=R4(),i=Bu();function a(f){this.rand=f||new i.Rand}return Jh=a,a.create=function(g){return new a(g)},a.prototype._randbelow=function(g){var n=g.bitLength(),x=Math.ceil(n/8);do var M=new l(this.rand.generate(x));while(M.cmp(g)>=0);return M},a.prototype._randrange=function(g,n){var x=n.sub(g);return g.add(this._randbelow(x))},a.prototype.test=function(g,n,x){var M=g.bitLength(),_=l.mont(g),w=new l(1).toRed(_);n||(n=Math.max(1,M/48|0));for(var b=g.subn(1),A=0;!b.testn(A);A++);for(var E=g.shrn(A),I=b.toRed(_),R=!0;n>0;n--){var T=this._randrange(new l(2),b);x&&x(T);var B=T.toRed(_).redPow(E);if(!(B.cmp(w)===0||B.cmp(I)===0)){for(var D=1;D<A;D++){if(B=B.redSqr(),B.cmp(w)===0)return!1;if(B.cmp(I)===0)break}if(D===A)return!1}}return R},a.prototype.getDivisor=function(g,n){var x=g.bitLength(),M=l.mont(g),_=new l(1).toRed(M);n||(n=Math.max(1,x/48|0));for(var w=g.subn(1),b=0;!w.testn(b);b++);for(var A=g.shrn(b),E=w.toRed(M);n>0;n--){var I=this._randrange(new l(2),w),R=g.gcd(I);if(R.cmpn(1)!==0)return R;var T=I.toRed(M).redPow(A);if(!(T.cmp(_)===0||T.cmp(E)===0)){for(var B=1;B<b;B++){if(T=T.redSqr(),T.cmp(_)===0)return T.fromRed().subn(1).gcd(g);if(T.cmp(E)===0)break}if(B===b)return T=T.redSqr(),T.fromRed().subn(1).gcd(g)}}return!1},Jh}var Xh,Ip;function ng(){if(Ip)return Xh;Ip=1;var l=ds();Xh=B,B.simpleSieve=R,B.fermatTest=T;var i=rg(),a=new i(24),f=ig(),g=new f,n=new i(1),x=new i(2),M=new i(5);new i(16),new i(8);var _=new i(10),w=new i(3);new i(7);var b=new i(11),A=new i(4);new i(12);var E=null;function I(){if(E!==null)return E;var D=1048576,q=[];q[0]=2;for(var k=1,N=3;N<D;N+=2){for(var K=Math.ceil(Math.sqrt(N)),$=0;$<k&&q[$]<=K&&N%q[$]!==0;$++);k!==$&&q[$]<=K||(q[k++]=N)}return E=q,q}function R(D){for(var q=I(),k=0;k<q.length;k++)if(D.modn(q[k])===0)return D.cmpn(q[k])===0;return!0}function T(D){var q=i.mont(D);return x.toRed(q).redPow(D.subn(1)).fromRed().cmpn(1)===0}function B(D,q){if(D<16)return q===2||q===5?new i([140,123]):new i([140,39]);q=new i(q);for(var k,N;;){for(k=new i(l(Math.ceil(D/8)));k.bitLength()>D;)k.ishrn(1);if(k.isEven()&&k.iadd(n),k.testn(1)||k.iadd(x),q.cmp(x)){if(!q.cmp(M))for(;k.mod(_).cmp(w);)k.iadd(A)}else for(;k.mod(a).cmp(b);)k.iadd(A);if(N=k.shrn(1),R(N)&&R(k)&&T(N)&&T(k)&&g.test(N)&&g.test(k))return k}}return Xh}const P4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},O4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},T4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},C4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},B4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},q4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},N4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},D4={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},L4={modp1:P4,modp2:O4,modp5:T4,modp14:C4,modp15:B4,modp16:q4,modp17:N4,modp18:D4};var Qh,Rp;function k4(){if(Rp)return Qh;Rp=1;var l=rg(),i=ig(),a=new i,f=new l(24),g=new l(11),n=new l(10),x=new l(3),M=new l(7),_=ng(),w=ds();Qh=R;function b(B,D){return D=D||"utf8",Ee.Buffer.isBuffer(B)||(B=new Ee.Buffer(B,D)),this._pub=new l(B),this}function A(B,D){return D=D||"utf8",Ee.Buffer.isBuffer(B)||(B=new Ee.Buffer(B,D)),this._priv=new l(B),this}var E={};function I(B,D){var q=D.toString("hex"),k=[q,B.toString(16)].join("_");if(k in E)return E[k];var N=0;if(B.isEven()||!_.simpleSieve||!_.fermatTest(B)||!a.test(B))return N+=1,q==="02"||q==="05"?N+=8:N+=4,E[k]=N,N;a.test(B.shrn(1))||(N+=2);var K;switch(q){case"02":B.mod(f).cmp(g)&&(N+=8);break;case"05":K=B.mod(n),K.cmp(x)&&K.cmp(M)&&(N+=8);break;default:N+=4}return E[k]=N,N}function R(B,D,q){this.setGenerator(D),this.__prime=new l(B),this._prime=l.mont(this.__prime),this._primeLen=B.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,q?(this.setPublicKey=b,this.setPrivateKey=A):this._primeCode=8}Object.defineProperty(R.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=I(this.__prime,this.__gen)),this._primeCode}}),R.prototype.generateKeys=function(){return this._priv||(this._priv=new l(w(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},R.prototype.computeSecret=function(B){B=new l(B),B=B.toRed(this._prime);var D=B.redPow(this._priv).fromRed(),q=new Ee.Buffer(D.toArray()),k=this.getPrime();if(q.length<k.length){var N=new Ee.Buffer(k.length-q.length);N.fill(0),q=Ee.Buffer.concat([N,q])}return q},R.prototype.getPublicKey=function(D){return T(this._pub,D)},R.prototype.getPrivateKey=function(D){return T(this._priv,D)},R.prototype.getPrime=function(B){return T(this.__prime,B)},R.prototype.getGenerator=function(B){return T(this._gen,B)},R.prototype.setGenerator=function(B,D){return D=D||"utf8",Ee.Buffer.isBuffer(B)||(B=new Ee.Buffer(B,D)),this.__gen=B,this._gen=new l(B),this};function T(B,D){var q=new Ee.Buffer(B.toArray());return D?q.toString(D):q}return Qh}var Pp;function U4(){if(Pp)return Nn;Pp=1;var l=ng(),i=L4,a=k4();function f(x){var M=new Ee.Buffer(i[x].prime,"hex"),_=new Ee.Buffer(i[x].gen,"hex");return new a(M,_)}var g={binary:!0,hex:!0,base64:!0};function n(x,M,_,w){return Ee.Buffer.isBuffer(M)||g[M]===void 0?n(x,"binary",M,_):(M=M||"binary",w=w||"binary",_=_||new Ee.Buffer([2]),Ee.Buffer.isBuffer(_)||(_=new Ee.Buffer(_,w)),typeof x=="number"?new a(l(x,_),_,!0):(Ee.Buffer.isBuffer(x)||(x=new Ee.Buffer(x,M)),new a(x,_,!0)))}return Nn.DiffieHellmanGroup=Nn.createDiffieHellmanGroup=Nn.getDiffieHellman=f,Nn.createDiffieHellman=Nn.DiffieHellman=n,Nn}var zs={exports:{}},t0,Op;function qu(){if(Op)return t0;Op=1;var l=xu.exports,i=ds();function a(n){var x=f(n),M=x.toRed(l.mont(n.modulus)).redPow(new l(n.publicExponent)).fromRed();return{blinder:M,unblinder:x.invm(n.modulus)}}function f(n){var x=n.modulus.byteLength(),M;do M=new l(i(x));while(M.cmp(n.modulus)>=0||!M.umod(n.prime1)||!M.umod(n.prime2));return M}function g(n,x){var M=a(x),_=x.modulus.byteLength(),w=new l(n).mul(M.blinder).umod(x.modulus),b=w.toRed(l.mont(x.prime1)),A=w.toRed(l.mont(x.prime2)),E=x.coefficient,I=x.prime1,R=x.prime2,T=b.redPow(x.exponent1).fromRed(),B=A.redPow(x.exponent2).fromRed(),D=T.isub(B).imul(E).umod(I).imul(R);return B.iadd(D).imul(M.unblinder).umod(x.modulus).toArrayLike(Ee.Buffer,"be",_)}return g.getr=f,t0=g,t0}var e0={};const F4="elliptic",$4="6.5.4",z4="EC cryptography",H4="lib/elliptic.js",K4=["lib"],j4={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},V4={type:"git",url:"git@github.com:indutny/elliptic"},G4=["EC","Elliptic","curve","Cryptography"],Z4="Fedor Indutny <fedor@indutny.com>",W4="MIT",Y4={url:"https://github.com/indutny/elliptic/issues"},J4="https://github.com/indutny/elliptic",X4={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},Q4={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},t_={name:F4,version:$4,description:z4,main:H4,files:K4,scripts:j4,repository:V4,keywords:G4,author:Z4,license:W4,bugs:Y4,homepage:J4,devDependencies:X4,dependencies:Q4};var r0={},i0={exports:{}},Tp;function Qi(){return Tp||(Tp=1,function(l){(function(i,a){function f(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function n(v,t,r){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=n:a.BN=n,n.BN=n,n.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=Ee.Buffer}catch{}n.isBN=function(t){return t instanceof n?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,r){return t.cmp(r)>0?t:r},n.min=function(t,r){return t.cmp(r)<0?t:r},n.prototype._init=function(t,r,s){if(typeof t=="number")return this._initNumber(t,r,s);if(typeof t=="object")return this._initArray(t,r,s);r==="hex"&&(r=16),f(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&(h++,this.negative=1),h<t.length&&(r===16?this._parseHex(t,h,s):(this._parseBase(t,r,h),s==="le"&&this._initArray(this.toArray(),r,s)))},n.prototype._initNumber=function(t,r,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(f(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),r,s)},n.prototype._initArray=function(t,r,s){if(f(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,m,y=0;if(s==="be")for(h=t.length-1,d=0;h>=0;h-=3)m=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(s==="le")for(h=0,d=0;h<t.length;h+=3)m=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function M(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var s=M(v,r);return r-1>=t&&(s|=M(v,r-1)<<4),s}n.prototype._parseHex=function(t,r,s){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d=0,m=0,y;if(s==="be")for(h=t.length-1;h>=r;h-=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(h=u%2===0?r+1:r;h<t.length;h+=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function w(v,t,r,s){for(var h=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;h*=s,y>=49?h+=y-49+10:y>=17?h+=y-17+10:h+=y}return h}n.prototype._parseBase=function(t,r,s){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=r)h++;h--,d=d/r|0;for(var m=t.length-s,y=m%h,u=Math.min(m,m-y)+s,e=0,c=s;c<u;c+=h)e=w(t,c,c+h,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var F=1;for(e=w(t,c,t.length,r),c=0;c<y;c++)F*=r;this.imuln(F),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,r){t=t||10,r=r|0||1;var s;if(t===16||t==="hex"){s="";for(var h=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<h|d)&16777215).toString(16);d=y>>>24-h&16777215,d!==0||m!==this.length-1?s=b[6-u.length]+u+s:s=u+s,h+=2,h>=26&&(h-=26,m--)}for(d!==0&&(s=d.toString(16)+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(t===(t|0)&&t>=2&&t<=36){var e=A[t],c=E[t];s="";var F=this.clone();for(F.negative=0;!F.isZero();){var L=F.modn(c).toString(t);F=F.idivn(c),F.isZero()?s=L+s:s=b[e-L.length]+L+s}for(this.isZero()&&(s="0"+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}f(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,r){return f(typeof x<"u"),this.toArrayLike(x,t,r)},n.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},n.prototype.toArrayLike=function(t,r,s){var h=this.byteLength(),d=s||Math.max(1,h);f(h<=d,"byte array longer than desired length"),f(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,c=this.clone();if(m){for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-h;e++)y[e]=0;for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[d-e-1]=u}return y},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var r=t,s=0;return r>=4096&&(s+=13,r>>>=13),r>=64&&(s+=7,r>>>=7),r>=8&&(s+=4,r>>>=4),r>=2&&(s+=2,r>>>=2),s+r},n.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,s=0;return(r&8191)===0&&(s+=13,r>>>=13),(r&127)===0&&(s+=7,r>>>=7),(r&15)===0&&(s+=4,r>>>=4),(r&3)===0&&(s+=2,r>>>=2),(r&1)===0&&s++,s},n.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function I(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var s=r/26|0,h=r%26;t[r]=(v.words[s]&1<<h)>>>h}return t}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var s=this._zeroBits(this.words[r]);if(t+=s,s!==26)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},n.prototype.ior=function(t){return f((this.negative|t.negative)===0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=r.length,this.strip()},n.prototype.iand=function(t){return f((this.negative|t.negative)===0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var r,s;this.length>t.length?(r=this,s=t):(r=t,s=this);for(var h=0;h<s.length;h++)this.words[h]=r.words[h]^s.words[h];if(this!==r)for(;h<r.length;h++)this.words[h]=r.words[h];return this.length=r.length,this.strip()},n.prototype.ixor=function(t){return f((this.negative|t.negative)===0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){f(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,s=t%26;this._expand(r),s>0&&r--;for(var h=0;h<r;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,r){f(typeof t=="number"&&t>=0);var s=t/26|0,h=t%26;return this._expand(s+1),r?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},n.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var s,h;this.length>t.length?(s=this,h=t):(s=t,h=this);for(var d=0,m=0;m<h.length;m++)r=(s.words[m]|0)+(h.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<s.length;m++)r=(s.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=s.length,d!==0)this.words[this.length]=d,this.length++;else if(s!==this)for(;m<s.length;m++)this.words[m]=s.words[m];return this},n.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var s=this.cmp(t);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;s>0?(h=this,d=t):(h=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(h.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<h.length;y++)r=(h.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<h.length&&h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=Math.max(this.length,y),h!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};function R(v,t,r){r.negative=t.negative^v.negative;var s=v.length+t.length|0;r.length=s,s=s-1|0;var h=v.words[0]|0,d=t.words[0]|0,m=h*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<s;e++){for(var c=u>>>26,F=u&67108863,L=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=L;H++){var G=e-H|0;h=v.words[G]|0,d=t.words[H]|0,m=h*d+F,c+=m/67108864|0,F=m&67108863}r.words[e]=F|0,u=c|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var T=function(t,r,s){var h=t.words,d=r.words,m=s.words,y=0,u,e,c,F=h[0]|0,L=F&8191,H=F>>>13,G=h[1]|0,tt=G&8191,Z=G>>>13,et=h[2]|0,j=et&8191,O=et>>>13,Q=h[3]|0,rt=Q&8191,st=Q>>>13,Jt=h[4]|0,gt=Jt&8191,mt=Jt>>>13,ee=h[5]|0,_t=ee&8191,Mt=ee>>>13,ie=h[6]|0,ut=ie&8191,pt=ie>>>13,Xt=h[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=h[8]|0,ht=Qt&8191,dt=Qt>>>13,ne=h[9]|0,ct=ne&8191,bt=ne>>>13,se=d[0]|0,yt=se&8191,wt=se>>>13,ae=d[1]|0,qt=ae&8191,Lt=ae>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Ut=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,me=d[5]|0,xt=me&8191,Ot=me>>>13,xe=d[6]|0,It=xe&8191,Tt=xe>>>13,we=d[7]|0,Pt=we&8191,Rt=we>>>13,ue=d[8]|0,Ct=ue&8191,Bt=ue>>>13,pr=d[9]|0,Ft=pr&8191,$t=pr>>>13;s.negative=t.negative^r.negative,s.length=19,u=Math.imul(L,yt),e=Math.imul(L,wt),e=e+Math.imul(H,yt)|0,c=Math.imul(H,wt);var Ae=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,c=Math.imul(Z,wt),u=u+Math.imul(L,qt)|0,e=e+Math.imul(L,Lt)|0,e=e+Math.imul(H,qt)|0,c=c+Math.imul(H,Lt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(j,yt),e=Math.imul(j,wt),e=e+Math.imul(O,yt)|0,c=Math.imul(O,wt),u=u+Math.imul(tt,qt)|0,e=e+Math.imul(tt,Lt)|0,e=e+Math.imul(Z,qt)|0,c=c+Math.imul(Z,Lt)|0,u=u+Math.imul(L,Nt)|0,e=e+Math.imul(L,kt)|0,e=e+Math.imul(H,Nt)|0,c=c+Math.imul(H,kt)|0;var je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(je>>>26)|0,je&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,c=Math.imul(st,wt),u=u+Math.imul(j,qt)|0,e=e+Math.imul(j,Lt)|0,e=e+Math.imul(O,qt)|0,c=c+Math.imul(O,Lt)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,c=c+Math.imul(Z,kt)|0,u=u+Math.imul(L,Ut)|0,e=e+Math.imul(L,Et)|0,e=e+Math.imul(H,Ut)|0,c=c+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,c=Math.imul(mt,wt),u=u+Math.imul(rt,qt)|0,e=e+Math.imul(rt,Lt)|0,e=e+Math.imul(st,qt)|0,c=c+Math.imul(st,Lt)|0,u=u+Math.imul(j,Nt)|0,e=e+Math.imul(j,kt)|0,e=e+Math.imul(O,Nt)|0,c=c+Math.imul(O,kt)|0,u=u+Math.imul(tt,Ut)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Ut)|0,c=c+Math.imul(Z,Et)|0,u=u+Math.imul(L,St)|0,e=e+Math.imul(L,At)|0,e=e+Math.imul(H,St)|0,c=c+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,c=Math.imul(Mt,wt),u=u+Math.imul(gt,qt)|0,e=e+Math.imul(gt,Lt)|0,e=e+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Lt)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,c=c+Math.imul(st,kt)|0,u=u+Math.imul(j,Ut)|0,e=e+Math.imul(j,Et)|0,e=e+Math.imul(O,Ut)|0,c=c+Math.imul(O,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,c=c+Math.imul(Z,At)|0,u=u+Math.imul(L,xt)|0,e=e+Math.imul(L,Ot)|0,e=e+Math.imul(H,xt)|0,c=c+Math.imul(H,Ot)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,c=Math.imul(pt,wt),u=u+Math.imul(_t,qt)|0,e=e+Math.imul(_t,Lt)|0,e=e+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Lt)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,c=c+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Ut)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Ut)|0,c=c+Math.imul(st,Et)|0,u=u+Math.imul(j,St)|0,e=e+Math.imul(j,At)|0,e=e+Math.imul(O,St)|0,c=c+Math.imul(O,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,xt)|0,c=c+Math.imul(Z,Ot)|0,u=u+Math.imul(L,It)|0,e=e+Math.imul(L,Tt)|0,e=e+Math.imul(H,It)|0,c=c+Math.imul(H,Tt)|0;var Ce=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,c=Math.imul(lt,wt),u=u+Math.imul(ut,qt)|0,e=e+Math.imul(ut,Lt)|0,e=e+Math.imul(pt,qt)|0,c=c+Math.imul(pt,Lt)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,c=c+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Ut)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,c=c+Math.imul(st,At)|0,u=u+Math.imul(j,xt)|0,e=e+Math.imul(j,Ot)|0,e=e+Math.imul(O,xt)|0,c=c+Math.imul(O,Ot)|0,u=u+Math.imul(tt,It)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,It)|0,c=c+Math.imul(Z,Tt)|0,u=u+Math.imul(L,Pt)|0,e=e+Math.imul(L,Rt)|0,e=e+Math.imul(H,Pt)|0,c=c+Math.imul(H,Rt)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,c=Math.imul(dt,wt),u=u+Math.imul(vt,qt)|0,e=e+Math.imul(vt,Lt)|0,e=e+Math.imul(lt,qt)|0,c=c+Math.imul(lt,Lt)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Ut)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Ut)|0,c=c+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,c=c+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,xt)|0,c=c+Math.imul(st,Ot)|0,u=u+Math.imul(j,It)|0,e=e+Math.imul(j,Tt)|0,e=e+Math.imul(O,It)|0,c=c+Math.imul(O,Tt)|0,u=u+Math.imul(tt,Pt)|0,e=e+Math.imul(tt,Rt)|0,e=e+Math.imul(Z,Pt)|0,c=c+Math.imul(Z,Rt)|0,u=u+Math.imul(L,Ct)|0,e=e+Math.imul(L,Bt)|0,e=e+Math.imul(H,Ct)|0,c=c+Math.imul(H,Bt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,c=Math.imul(bt,wt),u=u+Math.imul(ht,qt)|0,e=e+Math.imul(ht,Lt)|0,e=e+Math.imul(dt,qt)|0,c=c+Math.imul(dt,Lt)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,c=c+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Ut)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Ut)|0,c=c+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,c=c+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,xt)|0,c=c+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,It)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,It)|0,c=c+Math.imul(st,Tt)|0,u=u+Math.imul(j,Pt)|0,e=e+Math.imul(j,Rt)|0,e=e+Math.imul(O,Pt)|0,c=c+Math.imul(O,Rt)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Bt)|0,e=e+Math.imul(Z,Ct)|0,c=c+Math.imul(Z,Bt)|0,u=u+Math.imul(L,Ft)|0,e=e+Math.imul(L,$t)|0,e=e+Math.imul(H,Ft)|0,c=c+Math.imul(H,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,qt),e=Math.imul(ct,Lt),e=e+Math.imul(bt,qt)|0,c=Math.imul(bt,Lt),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Ut)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Ut)|0,c=c+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,c=c+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,xt)|0,c=c+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,It)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,It)|0,c=c+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Pt)|0,e=e+Math.imul(rt,Rt)|0,e=e+Math.imul(st,Pt)|0,c=c+Math.imul(st,Rt)|0,u=u+Math.imul(j,Ct)|0,e=e+Math.imul(j,Bt)|0,e=e+Math.imul(O,Ct)|0,c=c+Math.imul(O,Bt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,c=c+Math.imul(Z,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,c=Math.imul(bt,kt),u=u+Math.imul(ht,Ut)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Ut)|0,c=c+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,c=c+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,It)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,It)|0,c=c+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Pt)|0,e=e+Math.imul(gt,Rt)|0,e=e+Math.imul(mt,Pt)|0,c=c+Math.imul(mt,Rt)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Bt)|0,e=e+Math.imul(st,Ct)|0,c=c+Math.imul(st,Bt)|0,u=u+Math.imul(j,Ft)|0,e=e+Math.imul(j,$t)|0,e=e+Math.imul(O,Ft)|0,c=c+Math.imul(O,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Ut),e=Math.imul(ct,Et),e=e+Math.imul(bt,Ut)|0,c=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,c=c+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,xt)|0,c=c+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,It)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,It)|0,c=c+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Pt)|0,e=e+Math.imul(_t,Rt)|0,e=e+Math.imul(Mt,Pt)|0,c=c+Math.imul(Mt,Rt)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Bt)|0,e=e+Math.imul(mt,Ct)|0,c=c+Math.imul(mt,Bt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,c=c+Math.imul(st,$t)|0;var Le=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,c=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,It)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,It)|0,c=c+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Pt)|0,e=e+Math.imul(ut,Rt)|0,e=e+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Rt)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Bt)|0,e=e+Math.imul(Mt,Ct)|0,c=c+Math.imul(Mt,Bt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,xt)|0,c=Math.imul(bt,Ot),u=u+Math.imul(ht,It)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,It)|0,c=c+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Pt)|0,e=e+Math.imul(vt,Rt)|0,e=e+Math.imul(lt,Pt)|0,c=c+Math.imul(lt,Rt)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Bt)|0,e=e+Math.imul(pt,Ct)|0,c=c+Math.imul(pt,Bt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,It),e=Math.imul(ct,Tt),e=e+Math.imul(bt,It)|0,c=Math.imul(bt,Tt),u=u+Math.imul(ht,Pt)|0,e=e+Math.imul(ht,Rt)|0,e=e+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Rt)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Bt)|0,e=e+Math.imul(lt,Ct)|0,c=c+Math.imul(lt,Bt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,c=c+Math.imul(pt,$t)|0;var Re=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Re>>>26)|0,Re&=67108863,u=Math.imul(ct,Pt),e=Math.imul(ct,Rt),e=e+Math.imul(bt,Pt)|0,c=Math.imul(bt,Rt),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Bt)|0,e=e+Math.imul(dt,Ct)|0,c=c+Math.imul(dt,Bt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,c=c+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Bt),e=e+Math.imul(bt,Ct)|0,c=Math.imul(bt,Bt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,c=c+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,c=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(c+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Ae,m[1]=Ke,m[2]=je,m[3]=Ve,m[4]=Ge,m[5]=Ze,m[6]=Ce,m[7]=Ne,m[8]=We,m[9]=De,m[10]=Ye,m[11]=Je,m[12]=Le,m[13]=$e,m[14]=ze,m[15]=Re,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,s.length++),s};Math.imul||(T=R);function B(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var s=0,h=0,d=0;d<r.length-1;d++){var m=h;h=0;for(var y=s&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var c=d-e,F=v.words[c]|0,L=t.words[e]|0,H=F*L,G=H&67108863;m=m+(H/67108864|0)|0,G=G+y|0,y=G&67108863,m=m+(G>>>26)|0,h+=m>>>26,m&=67108863}r.words[d]=y,s=m,m=h}return s!==0?r.words[d]=s:r.length--,r.strip()}function D(v,t,r){var s=new q;return s.mulp(v,t,r)}n.prototype.mulTo=function(t,r){var s,h=this.length+t.length;return this.length===10&&t.length===10?s=T(this,t,r):h<63?s=R(this,t,r):h<1024?s=B(this,t,r):s=D(this,t,r),s};function q(v,t){this.x=v,this.y=t}q.prototype.makeRBT=function(t){for(var r=new Array(t),s=n.prototype._countBits(t)-1,h=0;h<t;h++)r[h]=this.revBin(h,s,t);return r},q.prototype.revBin=function(t,r,s){if(t===0||t===s-1)return t;for(var h=0,d=0;d<r;d++)h|=(t&1)<<r-d-1,t>>=1;return h},q.prototype.permute=function(t,r,s,h,d,m){for(var y=0;y<m;y++)h[y]=r[t[y]],d[y]=s[t[y]]},q.prototype.transform=function(t,r,s,h,d,m){this.permute(m,t,r,s,h,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),F=0;F<d;F+=u)for(var L=e,H=c,G=0;G<y;G++){var tt=s[F+G],Z=h[F+G],et=s[F+G+y],j=h[F+G+y],O=L*et-H*j;j=L*j+H*et,et=O,s[F+G]=tt+et,h[F+G]=Z+j,s[F+G+y]=tt-et,h[F+G+y]=Z-j,G!==u&&(O=e*L-c*H,H=e*H+c*L,L=O)}},q.prototype.guessLen13b=function(t,r){var s=Math.max(r,t)|1,h=s&1,d=0;for(s=s/2|0;s;s=s>>>1)d++;return 1<<d+1+h},q.prototype.conjugate=function(t,r,s){if(!(s<=1))for(var h=0;h<s/2;h++){var d=t[h];t[h]=t[s-h-1],t[s-h-1]=d,d=r[h],r[h]=-r[s-h-1],r[s-h-1]=-d}},q.prototype.normalize13b=function(t,r){for(var s=0,h=0;h<r/2;h++){var d=Math.round(t[2*h+1]/r)*8192+Math.round(t[2*h]/r)+s;t[h]=d&67108863,d<67108864?s=0:s=d/67108864|0}return t},q.prototype.convert13b=function(t,r,s,h){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),s[2*m]=d&8191,d=d>>>13,s[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<h;++m)s[m]=0;f(d===0),f((d&-8192)===0)},q.prototype.stub=function(t){for(var r=new Array(t),s=0;s<t;s++)r[s]=0;return r},q.prototype.mulp=function(t,r,s){var h=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(h),m=this.stub(h),y=new Array(h),u=new Array(h),e=new Array(h),c=new Array(h),F=new Array(h),L=new Array(h),H=s.words;H.length=h,this.convert13b(t.words,t.length,y,h),this.convert13b(r.words,r.length,c,h),this.transform(y,m,u,e,h,d),this.transform(c,m,F,L,h,d);for(var G=0;G<h;G++){var tt=u[G]*F[G]-e[G]*L[G];e[G]=u[G]*L[G]+e[G]*F[G],u[G]=tt}return this.conjugate(u,e,h),this.transform(u,e,H,m,h,d),this.conjugate(H,m,h),this.normalize13b(H,h),s.negative=t.negative^r.negative,s.length=t.length+r.length,s.strip()},n.prototype.mul=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},n.prototype.mulf=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),D(this,t,r)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){f(typeof t=="number"),f(t<67108864);for(var r=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,d=(h&67108863)+(r&67108863);r>>=26,r+=h/67108864|0,r+=d>>>26,this.words[s]=d&67108863}return r!==0&&(this.words[s]=r,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var r=I(t);if(r.length===0)return new n(1);for(var s=this,h=0;h<r.length&&r[h]===0;h++,s=s.sqr());if(++h<r.length)for(var d=s.sqr();h<r.length;h++,d=d.sqr())r[h]!==0&&(s=s.mul(d));return s},n.prototype.iushln=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&h,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(s!==0){for(d=this.length-1;d>=0;d--)this.words[d+s]=this.words[d];for(d=0;d<s;d++)this.words[d]=0;this.length+=s}return this.strip()},n.prototype.ishln=function(t){return f(this.negative===0),this.iushln(t)},n.prototype.iushrn=function(t,r,s){f(typeof t=="number"&&t>=0);var h;r?h=(r-r%26)/26:h=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=s;if(h-=m,h=Math.max(0,h),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var c=0;for(e=this.length-1;e>=0&&(c!==0||e>=h);e--){var F=this.words[e]|0;this.words[e]=c<<26-d|F>>>d,c=F&y}return u&&c!==0&&(u.words[u.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,r,s){return f(this.negative===0),this.iushrn(t,r,s)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return!1;var d=this.words[s];return!!(d&h)},n.prototype.imaskn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26;if(f(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(r!==0&&s++,this.length=Math.min(s,this.length),r!==0){var h=67108863^67108863>>>r<<r;this.words[this.length-1]&=h}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return f(typeof t=="number"),f(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},n.prototype.isubn=function(t){if(f(typeof t=="number"),f(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,r,s){var h=t.length+s,d;this._expand(h);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+s]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+s]=m&67108863}for(;d<this.length-s;d++)m=(this.words[d+s]|0)+y,y=m>>26,this.words[d+s]=m&67108863;if(y===0)return this.strip();for(f(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,r){var s=this.length-t.length,h=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);s=26-y,s!==0&&(d=d.ushln(s),h.iushln(s),m=d.words[d.length-1]|0);var u=h.length-d.length,e;if(r!=="mod"){e=new n(null),e.length=u+1,e.words=new Array(e.length);for(var c=0;c<e.length;c++)e.words[c]=0}var F=h.clone()._ishlnsubmul(d,1,u);F.negative===0&&(h=F,e&&(e.words[u]=1));for(var L=u-1;L>=0;L--){var H=(h.words[d.length+L]|0)*67108864+(h.words[d.length+L-1]|0);for(H=Math.min(H/m|0,67108863),h._ishlnsubmul(d,H,L);h.negative!==0;)H--,h.negative=0,h._ishlnsubmul(d,1,L),h.isZero()||(h.negative^=1);e&&(e.words[L]=H)}return e&&e.strip(),h.strip(),r!=="div"&&s!==0&&h.iushrn(s),{div:e||null,mod:h}},n.prototype.divmod=function(t,r,s){if(f(!t.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var h,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(h=m.div.neg()),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.iadd(t)),{div:h,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(h=m.div.neg()),{div:h,mod:m.mod}):(this.negative&t.negative)!==0?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,r)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var s=r.div.negative!==0?r.mod.isub(t):r.mod,h=t.ushrn(1),d=t.andln(1),m=s.cmp(h);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){f(t<=67108863);for(var r=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(r*s+(this.words[h]|0))%t;return s},n.prototype.idivn=function(t){f(t<=67108863);for(var r=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+r*67108864;this.words[s]=h/t|0,r=h%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=new n(0),y=new n(1),u=0;r.isEven()&&s.isEven();)r.iushrn(1),s.iushrn(1),++u;for(var e=s.clone(),c=r.clone();!r.isZero();){for(var F=0,L=1;(r.words[0]&L)===0&&F<26;++F,L<<=1);if(F>0)for(r.iushrn(F);F-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(e),d.isub(c)),h.iushrn(1),d.iushrn(1);for(var H=0,G=1;(s.words[0]&G)===0&&H<26;++H,G<<=1);if(H>0)for(s.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(c)),m.iushrn(1),y.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(m),d.isub(y)):(s.isub(r),m.isub(h),y.isub(d))}return{a:m,b:y,gcd:s.iushln(u)}},n.prototype._invmp=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=s.clone();r.cmpn(1)>0&&s.cmpn(1)>0;){for(var y=0,u=1;(r.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)h.isOdd()&&h.iadd(m),h.iushrn(1);for(var e=0,c=1;(s.words[0]&c)===0&&e<26;++e,c<<=1);if(e>0)for(s.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(d)):(s.isub(r),d.isub(h))}var F;return r.cmpn(1)===0?F=h:F=d,F.cmpn(0)<0&&F.iadd(t),F},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),s=t.clone();r.negative=0,s.negative=0;for(var h=0;r.isEven()&&s.isEven();h++)r.iushrn(1),s.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;s.isEven();)s.iushrn(1);var d=r.cmp(s);if(d<0){var m=r;r=s,s=m}else if(d===0||s.cmpn(1)===0)break;r.isub(s)}while(!0);return s.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){f(typeof t=="number");var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var d=h,m=s;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var s;if(this.length>1)s=1;else{r&&(t=-t),f(t<=67108863,"Number is too big");var h=this.words[0]|0;s=h===t?0:h<t?-1:1}return this.negative!==0?-s|0:s},n.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,d=t.words[s]|0;if(h!==d){h<d?r=-1:h>d&&(r=1);break}}return r},n.prototype.gtn=function(t){return this.cmpn(t)===1},n.prototype.gt=function(t){return this.cmp(t)===1},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return this.cmpn(t)===-1},n.prototype.lt=function(t){return this.cmp(t)===-1},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return this.cmpn(t)===0},n.prototype.eq=function(t){return this.cmp(t)===0},n.red=function(t){return new Y(t)},n.prototype.toRed=function(t){return f(!this.red,"Already a number in reduction context"),f(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return f(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return f(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var k={k256:null,p224:null,p192:null,p25519:null};function N(v,t){this.name=v,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},N.prototype.ireduce=function(t){var r=t,s;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),s=r.bitLength();while(s>this.n);var h=s<this.n?-1:r.ucmp(this.p);return h===0?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},N.prototype.split=function(t,r){t.iushrn(this.n,0,r)},N.prototype.imulK=function(t){return t.imul(this.k)};function K(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(K,N),K.prototype.split=function(t,r){for(var s=4194303,h=Math.min(t.length,9),d=0;d<h;d++)r.words[d]=t.words[d];if(r.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&s,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&s)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},K.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,s=0;s<t.length;s++){var h=t.words[s]|0;r+=h*977,t.words[s]=r&67108863,r=h*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function $(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g($,N);function P(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,N);function z(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(z,N),z.prototype.imulK=function(t){for(var r=0,s=0;s<t.length;s++){var h=(t.words[s]|0)*19+r,d=h&67108863;h>>>=26,t.words[s]=d,r=h}return r!==0&&(t.words[t.length++]=r),t},n._prime=function(t){if(k[t])return k[t];var r;if(t==="k256")r=new K;else if(t==="p224")r=new $;else if(t==="p192")r=new P;else if(t==="p25519")r=new z;else throw new Error("Unknown prime "+t);return k[t]=r,r};function Y(v){if(typeof v=="string"){var t=n._prime(v);this.m=t.p,this.prime=t}else f(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Y.prototype._verify1=function(t){f(t.negative===0,"red works only with positives"),f(t.red,"red works only with red numbers")},Y.prototype._verify2=function(t,r){f((t.negative|r.negative)===0,"red works only with positives"),f(t.red&&t.red===r.red,"red works only with red numbers")},Y.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Y.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Y.prototype.add=function(t,r){this._verify2(t,r);var s=t.add(r);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Y.prototype.iadd=function(t,r){this._verify2(t,r);var s=t.iadd(r);return s.cmp(this.m)>=0&&s.isub(this.m),s},Y.prototype.sub=function(t,r){this._verify2(t,r);var s=t.sub(r);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},Y.prototype.isub=function(t,r){this._verify2(t,r);var s=t.isub(r);return s.cmpn(0)<0&&s.iadd(this.m),s},Y.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},Y.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Y.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Y.prototype.isqr=function(t){return this.imul(t,t.clone())},Y.prototype.sqr=function(t){return this.mul(t,t)},Y.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(f(r%2===1),r===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);f(!h.isZero());var m=new n(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new n(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var c=this.pow(e,h),F=this.pow(t,h.addn(1).iushrn(1)),L=this.pow(t,h),H=d;L.cmp(m)!==0;){for(var G=L,tt=0;G.cmp(m)!==0;tt++)G=G.redSqr();f(tt<H);var Z=this.pow(c,new n(1).iushln(H-tt-1));F=F.redMul(Z),c=Z.redSqr(),L=L.redMul(c),H=tt}return F},Y.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Y.prototype.pow=function(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var s=4,h=new Array(1<<s);h[0]=new n(1).toRed(this),h[1]=t;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],t);var m=h[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var c=r.words[d],F=e-1;F>=0;F--){var L=c>>F&1;if(m!==h[0]&&(m=this.sqr(m)),L===0&&y===0){u=0;continue}y<<=1,y|=L,u++,!(u!==s&&(d!==0||F!==0))&&(m=this.mul(m,h[y]),u=0,y=0)}e=26}return m},Y.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},Y.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},n.mont=function(t){return new nt(t)};function nt(v){Y.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,Y),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var s=t.mul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(l,ve)}(i0)),i0.exports}var n0={},Cp;function sg(){return Cp||(Cp=1,function(l){var i=l;function a(n,x){if(Array.isArray(n))return n.slice();if(!n)return[];var M=[];if(typeof n!="string"){for(var _=0;_<n.length;_++)M[_]=n[_]|0;return M}if(x==="hex"){n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n);for(var _=0;_<n.length;_+=2)M.push(parseInt(n[_]+n[_+1],16))}else for(var _=0;_<n.length;_++){var w=n.charCodeAt(_),b=w>>8,A=w&255;b?M.push(b,A):M.push(A)}return M}i.toArray=a;function f(n){return n.length===1?"0"+n:n}i.zero2=f;function g(n){for(var x="",M=0;M<n.length;M++)x+=f(n[M].toString(16));return x}i.toHex=g,i.encode=function(x,M){return M==="hex"?g(x):x}}(n0)),n0}var Bp;function _i(){return Bp||(Bp=1,function(l){var i=l,a=Qi(),f=Ln,g=sg();i.assert=f,i.toArray=g.toArray,i.zero2=g.zero2,i.toHex=g.toHex,i.encode=g.encode;function n(b,A,E){var I=new Array(Math.max(b.bitLength(),E)+1);I.fill(0);for(var R=1<<A+1,T=b.clone(),B=0;B<I.length;B++){var D,q=T.andln(R-1);T.isOdd()?(q>(R>>1)-1?D=(R>>1)-q:D=q,T.isubn(D)):D=0,I[B]=D,T.iushrn(1)}return I}i.getNAF=n;function x(b,A){var E=[[],[]];b=b.clone(),A=A.clone();for(var I=0,R=0,T;b.cmpn(-I)>0||A.cmpn(-R)>0;){var B=b.andln(3)+I&3,D=A.andln(3)+R&3;B===3&&(B=-1),D===3&&(D=-1);var q;(B&1)===0?q=0:(T=b.andln(7)+I&7,(T===3||T===5)&&D===2?q=-B:q=B),E[0].push(q);var k;(D&1)===0?k=0:(T=A.andln(7)+R&7,(T===3||T===5)&&B===2?k=-D:k=D),E[1].push(k),2*I===q+1&&(I=1-I),2*R===k+1&&(R=1-R),b.iushrn(1),A.iushrn(1)}return E}i.getJSF=x;function M(b,A,E){var I="_"+A;b.prototype[A]=function(){return this[I]!==void 0?this[I]:this[I]=E.call(this)}}i.cachedProperty=M;function _(b){return typeof b=="string"?i.toArray(b,"hex"):b}i.parseBytes=_;function w(b){return new a(b,"hex","le")}i.intFromLE=w}(r0)),r0}var s0={},a0,qp;function Fo(){if(qp)return a0;qp=1;var l=Qi(),i=_i(),a=i.getNAF,f=i.getJSF,g=i.assert;function n(M,_){this.type=M,this.p=new l(_.p,16),this.red=_.prime?l.red(_.prime):l.mont(this.p),this.zero=new l(0).toRed(this.red),this.one=new l(1).toRed(this.red),this.two=new l(2).toRed(this.red),this.n=_.n&&new l(_.n,16),this.g=_.g&&this.pointFromJSON(_.g,_.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var w=this.n&&this.p.div(this.n);!w||w.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}a0=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(_,w){g(_.precomputed);var b=_._getDoubles(),A=a(w,1,this._bitLength),E=(1<<b.step+1)-(b.step%2===0?2:1);E/=3;var I=[],R,T;for(R=0;R<A.length;R+=b.step){T=0;for(var B=R+b.step-1;B>=R;B--)T=(T<<1)+A[B];I.push(T)}for(var D=this.jpoint(null,null,null),q=this.jpoint(null,null,null),k=E;k>0;k--){for(R=0;R<I.length;R++)T=I[R],T===k?q=q.mixedAdd(b.points[R]):T===-k&&(q=q.mixedAdd(b.points[R].neg()));D=D.add(q)}return D.toP()},n.prototype._wnafMul=function(_,w){var b=4,A=_._getNAFPoints(b);b=A.wnd;for(var E=A.points,I=a(w,b,this._bitLength),R=this.jpoint(null,null,null),T=I.length-1;T>=0;T--){for(var B=0;T>=0&&I[T]===0;T--)B++;if(T>=0&&B++,R=R.dblp(B),T<0)break;var D=I[T];g(D!==0),_.type==="affine"?D>0?R=R.mixedAdd(E[D-1>>1]):R=R.mixedAdd(E[-D-1>>1].neg()):D>0?R=R.add(E[D-1>>1]):R=R.add(E[-D-1>>1].neg())}return _.type==="affine"?R.toP():R},n.prototype._wnafMulAdd=function(_,w,b,A,E){var I=this._wnafT1,R=this._wnafT2,T=this._wnafT3,B=0,D,q,k;for(D=0;D<A;D++){k=w[D];var N=k._getNAFPoints(_);I[D]=N.wnd,R[D]=N.points}for(D=A-1;D>=1;D-=2){var K=D-1,$=D;if(I[K]!==1||I[$]!==1){T[K]=a(b[K],I[K],this._bitLength),T[$]=a(b[$],I[$],this._bitLength),B=Math.max(T[K].length,B),B=Math.max(T[$].length,B);continue}var P=[w[K],null,null,w[$]];w[K].y.cmp(w[$].y)===0?(P[1]=w[K].add(w[$]),P[2]=w[K].toJ().mixedAdd(w[$].neg())):w[K].y.cmp(w[$].y.redNeg())===0?(P[1]=w[K].toJ().mixedAdd(w[$]),P[2]=w[K].add(w[$].neg())):(P[1]=w[K].toJ().mixedAdd(w[$]),P[2]=w[K].toJ().mixedAdd(w[$].neg()));var z=[-3,-1,-5,-7,0,7,5,1,3],Y=f(b[K],b[$]);for(B=Math.max(Y[0].length,B),T[K]=new Array(B),T[$]=new Array(B),q=0;q<B;q++){var nt=Y[0][q]|0,v=Y[1][q]|0;T[K][q]=z[(nt+1)*3+(v+1)],T[$][q]=0,R[K]=P}}var t=this.jpoint(null,null,null),r=this._wnafT4;for(D=B;D>=0;D--){for(var s=0;D>=0;){var h=!0;for(q=0;q<A;q++)r[q]=T[q][D]|0,r[q]!==0&&(h=!1);if(!h)break;s++,D--}if(D>=0&&s++,t=t.dblp(s),D<0)break;for(q=0;q<A;q++){var d=r[q];d!==0&&(d>0?k=R[q][d-1>>1]:d<0&&(k=R[q][-d-1>>1].neg()),k.type==="affine"?t=t.mixedAdd(k):t=t.add(k))}}for(D=0;D<A;D++)R[D]=null;return E?t:t.toP()};function x(M,_){this.curve=M,this.type=_,this.precomputed=null}return n.BasePoint=x,x.prototype.eq=function(){throw new Error("Not implemented")},x.prototype.validate=function(){return this.curve.validate(this)},n.prototype.decodePoint=function(_,w){_=i.toArray(_,w);var b=this.p.byteLength();if((_[0]===4||_[0]===6||_[0]===7)&&_.length-1===2*b){_[0]===6?g(_[_.length-1]%2===0):_[0]===7&&g(_[_.length-1]%2===1);var A=this.point(_.slice(1,1+b),_.slice(1+b,1+2*b));return A}else if((_[0]===2||_[0]===3)&&_.length-1===b)return this.pointFromX(_.slice(1,1+b),_[0]===3);throw new Error("Unknown point format")},x.prototype.encodeCompressed=function(_){return this.encode(_,!0)},x.prototype._encode=function(_){var w=this.curve.p.byteLength(),b=this.getX().toArray("be",w);return _?[this.getY().isEven()?2:3].concat(b):[4].concat(b,this.getY().toArray("be",w))},x.prototype.encode=function(_,w){return i.encode(this._encode(w),_)},x.prototype.precompute=function(_){if(this.precomputed)return this;var w={doubles:null,naf:null,beta:null};return w.naf=this._getNAFPoints(8),w.doubles=this._getDoubles(4,_),w.beta=this._getBeta(),this.precomputed=w,this},x.prototype._hasDoubles=function(_){if(!this.precomputed)return!1;var w=this.precomputed.doubles;return w?w.points.length>=Math.ceil((_.bitLength()+1)/w.step):!1},x.prototype._getDoubles=function(_,w){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var b=[this],A=this,E=0;E<w;E+=_){for(var I=0;I<_;I++)A=A.dbl();b.push(A)}return{step:_,points:b}},x.prototype._getNAFPoints=function(_){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var w=[this],b=(1<<_)-1,A=b===1?null:this.dbl(),E=1;E<b;E++)w[E]=w[E-1].add(A);return{wnd:_,points:w}},x.prototype._getBeta=function(){return null},x.prototype.dblp=function(_){for(var w=this,b=0;b<_;b++)w=w.dbl();return w},a0}var o0,Np;function e_(){if(Np)return o0;Np=1;var l=_i(),i=Qi(),a=sr(),f=Fo(),g=l.assert;function n(_){f.call(this,"short",_),this.a=new i(_.a,16).toRed(this.red),this.b=new i(_.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(_),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}a(n,f),o0=n,n.prototype._getEndomorphism=function(w){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var b,A;if(w.beta)b=new i(w.beta,16).toRed(this.red);else{var E=this._getEndoRoots(this.p);b=E[0].cmp(E[1])<0?E[0]:E[1],b=b.toRed(this.red)}if(w.lambda)A=new i(w.lambda,16);else{var I=this._getEndoRoots(this.n);this.g.mul(I[0]).x.cmp(this.g.x.redMul(b))===0?A=I[0]:(A=I[1],g(this.g.mul(A).x.cmp(this.g.x.redMul(b))===0))}var R;return w.basis?R=w.basis.map(function(T){return{a:new i(T.a,16),b:new i(T.b,16)}}):R=this._getEndoBasis(A),{beta:b,lambda:A,basis:R}}},n.prototype._getEndoRoots=function(w){var b=w===this.p?this.red:i.mont(w),A=new i(2).toRed(b).redInvm(),E=A.redNeg(),I=new i(3).toRed(b).redNeg().redSqrt().redMul(A),R=E.redAdd(I).fromRed(),T=E.redSub(I).fromRed();return[R,T]},n.prototype._getEndoBasis=function(w){for(var b=this.n.ushrn(Math.floor(this.n.bitLength()/2)),A=w,E=this.n.clone(),I=new i(1),R=new i(0),T=new i(0),B=new i(1),D,q,k,N,K,$,P,z=0,Y,nt;A.cmpn(0)!==0;){var v=E.div(A);Y=E.sub(v.mul(A)),nt=T.sub(v.mul(I));var t=B.sub(v.mul(R));if(!k&&Y.cmp(b)<0)D=P.neg(),q=I,k=Y.neg(),N=nt;else if(k&&++z===2)break;P=Y,E=A,A=Y,T=I,I=nt,B=R,R=t}K=Y.neg(),$=nt;var r=k.sqr().add(N.sqr()),s=K.sqr().add($.sqr());return s.cmp(r)>=0&&(K=D,$=q),k.negative&&(k=k.neg(),N=N.neg()),K.negative&&(K=K.neg(),$=$.neg()),[{a:k,b:N},{a:K,b:$}]},n.prototype._endoSplit=function(w){var b=this.endo.basis,A=b[0],E=b[1],I=E.b.mul(w).divRound(this.n),R=A.b.neg().mul(w).divRound(this.n),T=I.mul(A.a),B=R.mul(E.a),D=I.mul(A.b),q=R.mul(E.b),k=w.sub(T).sub(B),N=D.add(q).neg();return{k1:k,k2:N}},n.prototype.pointFromX=function(w,b){w=new i(w,16),w.red||(w=w.toRed(this.red));var A=w.redSqr().redMul(w).redIAdd(w.redMul(this.a)).redIAdd(this.b),E=A.redSqrt();if(E.redSqr().redSub(A).cmp(this.zero)!==0)throw new Error("invalid point");var I=E.fromRed().isOdd();return(b&&!I||!b&&I)&&(E=E.redNeg()),this.point(w,E)},n.prototype.validate=function(w){if(w.inf)return!0;var b=w.x,A=w.y,E=this.a.redMul(b),I=b.redSqr().redMul(b).redIAdd(E).redIAdd(this.b);return A.redSqr().redISub(I).cmpn(0)===0},n.prototype._endoWnafMulAdd=function(w,b,A){for(var E=this._endoWnafT1,I=this._endoWnafT2,R=0;R<w.length;R++){var T=this._endoSplit(b[R]),B=w[R],D=B._getBeta();T.k1.negative&&(T.k1.ineg(),B=B.neg(!0)),T.k2.negative&&(T.k2.ineg(),D=D.neg(!0)),E[R*2]=B,E[R*2+1]=D,I[R*2]=T.k1,I[R*2+1]=T.k2}for(var q=this._wnafMulAdd(1,E,I,R*2,A),k=0;k<R*2;k++)E[k]=null,I[k]=null;return q};function x(_,w,b,A){f.BasePoint.call(this,_,"affine"),w===null&&b===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(w,16),this.y=new i(b,16),A&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}a(x,f.BasePoint),n.prototype.point=function(w,b,A){return new x(this,w,b,A)},n.prototype.pointFromJSON=function(w,b){return x.fromJSON(this,w,b)},x.prototype._getBeta=function(){if(!!this.curve.endo){var w=this.precomputed;if(w&&w.beta)return w.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(w){var A=this.curve,E=function(I){return A.point(I.x.redMul(A.endo.beta),I.y)};w.beta=b,b.precomputed={beta:null,naf:w.naf&&{wnd:w.naf.wnd,points:w.naf.points.map(E)},doubles:w.doubles&&{step:w.doubles.step,points:w.doubles.points.map(E)}}}return b}},x.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},x.fromJSON=function(w,b,A){typeof b=="string"&&(b=JSON.parse(b));var E=w.point(b[0],b[1],A);if(!b[2])return E;function I(T){return w.point(T[0],T[1],A)}var R=b[2];return E.precomputed={beta:null,doubles:R.doubles&&{step:R.doubles.step,points:[E].concat(R.doubles.points.map(I))},naf:R.naf&&{wnd:R.naf.wnd,points:[E].concat(R.naf.points.map(I))}},E},x.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},x.prototype.isInfinity=function(){return this.inf},x.prototype.add=function(w){if(this.inf)return w;if(w.inf)return this;if(this.eq(w))return this.dbl();if(this.neg().eq(w))return this.curve.point(null,null);if(this.x.cmp(w.x)===0)return this.curve.point(null,null);var b=this.y.redSub(w.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(w.x).redInvm()));var A=b.redSqr().redISub(this.x).redISub(w.x),E=b.redMul(this.x.redSub(A)).redISub(this.y);return this.curve.point(A,E)},x.prototype.dbl=function(){if(this.inf)return this;var w=this.y.redAdd(this.y);if(w.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,A=this.x.redSqr(),E=w.redInvm(),I=A.redAdd(A).redIAdd(A).redIAdd(b).redMul(E),R=I.redSqr().redISub(this.x.redAdd(this.x)),T=I.redMul(this.x.redSub(R)).redISub(this.y);return this.curve.point(R,T)},x.prototype.getX=function(){return this.x.fromRed()},x.prototype.getY=function(){return this.y.fromRed()},x.prototype.mul=function(w){return w=new i(w,16),this.isInfinity()?this:this._hasDoubles(w)?this.curve._fixedNafMul(this,w):this.curve.endo?this.curve._endoWnafMulAdd([this],[w]):this.curve._wnafMul(this,w)},x.prototype.mulAdd=function(w,b,A){var E=[this,b],I=[w,A];return this.curve.endo?this.curve._endoWnafMulAdd(E,I):this.curve._wnafMulAdd(1,E,I,2)},x.prototype.jmulAdd=function(w,b,A){var E=[this,b],I=[w,A];return this.curve.endo?this.curve._endoWnafMulAdd(E,I,!0):this.curve._wnafMulAdd(1,E,I,2,!0)},x.prototype.eq=function(w){return this===w||this.inf===w.inf&&(this.inf||this.x.cmp(w.x)===0&&this.y.cmp(w.y)===0)},x.prototype.neg=function(w){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(w&&this.precomputed){var A=this.precomputed,E=function(I){return I.neg()};b.precomputed={naf:A.naf&&{wnd:A.naf.wnd,points:A.naf.points.map(E)},doubles:A.doubles&&{step:A.doubles.step,points:A.doubles.points.map(E)}}}return b},x.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var w=this.curve.jpoint(this.x,this.y,this.curve.one);return w};function M(_,w,b,A){f.BasePoint.call(this,_,"jacobian"),w===null&&b===null&&A===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(w,16),this.y=new i(b,16),this.z=new i(A,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return a(M,f.BasePoint),n.prototype.jpoint=function(w,b,A){return new M(this,w,b,A)},M.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var w=this.z.redInvm(),b=w.redSqr(),A=this.x.redMul(b),E=this.y.redMul(b).redMul(w);return this.curve.point(A,E)},M.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},M.prototype.add=function(w){if(this.isInfinity())return w;if(w.isInfinity())return this;var b=w.z.redSqr(),A=this.z.redSqr(),E=this.x.redMul(b),I=w.x.redMul(A),R=this.y.redMul(b.redMul(w.z)),T=w.y.redMul(A.redMul(this.z)),B=E.redSub(I),D=R.redSub(T);if(B.cmpn(0)===0)return D.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var q=B.redSqr(),k=q.redMul(B),N=E.redMul(q),K=D.redSqr().redIAdd(k).redISub(N).redISub(N),$=D.redMul(N.redISub(K)).redISub(R.redMul(k)),P=this.z.redMul(w.z).redMul(B);return this.curve.jpoint(K,$,P)},M.prototype.mixedAdd=function(w){if(this.isInfinity())return w.toJ();if(w.isInfinity())return this;var b=this.z.redSqr(),A=this.x,E=w.x.redMul(b),I=this.y,R=w.y.redMul(b).redMul(this.z),T=A.redSub(E),B=I.redSub(R);if(T.cmpn(0)===0)return B.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=T.redSqr(),q=D.redMul(T),k=A.redMul(D),N=B.redSqr().redIAdd(q).redISub(k).redISub(k),K=B.redMul(k.redISub(N)).redISub(I.redMul(q)),$=this.z.redMul(T);return this.curve.jpoint(N,K,$)},M.prototype.dblp=function(w){if(w===0)return this;if(this.isInfinity())return this;if(!w)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var A=this;for(b=0;b<w;b++)A=A.dbl();return A}var E=this.curve.a,I=this.curve.tinv,R=this.x,T=this.y,B=this.z,D=B.redSqr().redSqr(),q=T.redAdd(T);for(b=0;b<w;b++){var k=R.redSqr(),N=q.redSqr(),K=N.redSqr(),$=k.redAdd(k).redIAdd(k).redIAdd(E.redMul(D)),P=R.redMul(N),z=$.redSqr().redISub(P.redAdd(P)),Y=P.redISub(z),nt=$.redMul(Y);nt=nt.redIAdd(nt).redISub(K);var v=q.redMul(B);b+1<w&&(D=D.redMul(K)),R=z,B=v,q=nt}return this.curve.jpoint(R,q.redMul(I),B)},M.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},M.prototype._zeroDbl=function(){var w,b,A;if(this.zOne){var E=this.x.redSqr(),I=this.y.redSqr(),R=I.redSqr(),T=this.x.redAdd(I).redSqr().redISub(E).redISub(R);T=T.redIAdd(T);var B=E.redAdd(E).redIAdd(E),D=B.redSqr().redISub(T).redISub(T),q=R.redIAdd(R);q=q.redIAdd(q),q=q.redIAdd(q),w=D,b=B.redMul(T.redISub(D)).redISub(q),A=this.y.redAdd(this.y)}else{var k=this.x.redSqr(),N=this.y.redSqr(),K=N.redSqr(),$=this.x.redAdd(N).redSqr().redISub(k).redISub(K);$=$.redIAdd($);var P=k.redAdd(k).redIAdd(k),z=P.redSqr(),Y=K.redIAdd(K);Y=Y.redIAdd(Y),Y=Y.redIAdd(Y),w=z.redISub($).redISub($),b=P.redMul($.redISub(w)).redISub(Y),A=this.y.redMul(this.z),A=A.redIAdd(A)}return this.curve.jpoint(w,b,A)},M.prototype._threeDbl=function(){var w,b,A;if(this.zOne){var E=this.x.redSqr(),I=this.y.redSqr(),R=I.redSqr(),T=this.x.redAdd(I).redSqr().redISub(E).redISub(R);T=T.redIAdd(T);var B=E.redAdd(E).redIAdd(E).redIAdd(this.curve.a),D=B.redSqr().redISub(T).redISub(T);w=D;var q=R.redIAdd(R);q=q.redIAdd(q),q=q.redIAdd(q),b=B.redMul(T.redISub(D)).redISub(q),A=this.y.redAdd(this.y)}else{var k=this.z.redSqr(),N=this.y.redSqr(),K=this.x.redMul(N),$=this.x.redSub(k).redMul(this.x.redAdd(k));$=$.redAdd($).redIAdd($);var P=K.redIAdd(K);P=P.redIAdd(P);var z=P.redAdd(P);w=$.redSqr().redISub(z),A=this.y.redAdd(this.z).redSqr().redISub(N).redISub(k);var Y=N.redSqr();Y=Y.redIAdd(Y),Y=Y.redIAdd(Y),Y=Y.redIAdd(Y),b=$.redMul(P.redISub(w)).redISub(Y)}return this.curve.jpoint(w,b,A)},M.prototype._dbl=function(){var w=this.curve.a,b=this.x,A=this.y,E=this.z,I=E.redSqr().redSqr(),R=b.redSqr(),T=A.redSqr(),B=R.redAdd(R).redIAdd(R).redIAdd(w.redMul(I)),D=b.redAdd(b);D=D.redIAdd(D);var q=D.redMul(T),k=B.redSqr().redISub(q.redAdd(q)),N=q.redISub(k),K=T.redSqr();K=K.redIAdd(K),K=K.redIAdd(K),K=K.redIAdd(K);var $=B.redMul(N).redISub(K),P=A.redAdd(A).redMul(E);return this.curve.jpoint(k,$,P)},M.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var w=this.x.redSqr(),b=this.y.redSqr(),A=this.z.redSqr(),E=b.redSqr(),I=w.redAdd(w).redIAdd(w),R=I.redSqr(),T=this.x.redAdd(b).redSqr().redISub(w).redISub(E);T=T.redIAdd(T),T=T.redAdd(T).redIAdd(T),T=T.redISub(R);var B=T.redSqr(),D=E.redIAdd(E);D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var q=I.redIAdd(T).redSqr().redISub(R).redISub(B).redISub(D),k=b.redMul(q);k=k.redIAdd(k),k=k.redIAdd(k);var N=this.x.redMul(B).redISub(k);N=N.redIAdd(N),N=N.redIAdd(N);var K=this.y.redMul(q.redMul(D.redISub(q)).redISub(T.redMul(B)));K=K.redIAdd(K),K=K.redIAdd(K),K=K.redIAdd(K);var $=this.z.redAdd(T).redSqr().redISub(A).redISub(B);return this.curve.jpoint(N,K,$)},M.prototype.mul=function(w,b){return w=new i(w,b),this.curve._wnafMul(this,w)},M.prototype.eq=function(w){if(w.type==="affine")return this.eq(w.toJ());if(this===w)return!0;var b=this.z.redSqr(),A=w.z.redSqr();if(this.x.redMul(A).redISub(w.x.redMul(b)).cmpn(0)!==0)return!1;var E=b.redMul(this.z),I=A.redMul(w.z);return this.y.redMul(I).redISub(w.y.redMul(E)).cmpn(0)===0},M.prototype.eqXToP=function(w){var b=this.z.redSqr(),A=w.toRed(this.curve.red).redMul(b);if(this.x.cmp(A)===0)return!0;for(var E=w.clone(),I=this.curve.redN.redMul(b);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(A.redIAdd(I),this.x.cmp(A)===0)return!0}},M.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},M.prototype.isInfinity=function(){return this.z.cmpn(0)===0},o0}var f0,Dp;function r_(){if(Dp)return f0;Dp=1;var l=Qi(),i=sr(),a=Fo(),f=_i();function g(x){a.call(this,"mont",x),this.a=new l(x.a,16).toRed(this.red),this.b=new l(x.b,16).toRed(this.red),this.i4=new l(4).toRed(this.red).redInvm(),this.two=new l(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}i(g,a),f0=g,g.prototype.validate=function(M){var _=M.normalize().x,w=_.redSqr(),b=w.redMul(_).redAdd(w.redMul(this.a)).redAdd(_),A=b.redSqrt();return A.redSqr().cmp(b)===0};function n(x,M,_){a.BasePoint.call(this,x,"projective"),M===null&&_===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new l(M,16),this.z=new l(_,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return i(n,a.BasePoint),g.prototype.decodePoint=function(M,_){return this.point(f.toArray(M,_),1)},g.prototype.point=function(M,_){return new n(this,M,_)},g.prototype.pointFromJSON=function(M){return n.fromJSON(this,M)},n.prototype.precompute=function(){},n.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},n.fromJSON=function(M,_){return new n(M,_[0],_[1]||M.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.z.cmpn(0)===0},n.prototype.dbl=function(){var M=this.x.redAdd(this.z),_=M.redSqr(),w=this.x.redSub(this.z),b=w.redSqr(),A=_.redSub(b),E=_.redMul(b),I=A.redMul(b.redAdd(this.curve.a24.redMul(A)));return this.curve.point(E,I)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(M,_){var w=this.x.redAdd(this.z),b=this.x.redSub(this.z),A=M.x.redAdd(M.z),E=M.x.redSub(M.z),I=E.redMul(w),R=A.redMul(b),T=_.z.redMul(I.redAdd(R).redSqr()),B=_.x.redMul(I.redISub(R).redSqr());return this.curve.point(T,B)},n.prototype.mul=function(M){for(var _=M.clone(),w=this,b=this.curve.point(null,null),A=this,E=[];_.cmpn(0)!==0;_.iushrn(1))E.push(_.andln(1));for(var I=E.length-1;I>=0;I--)E[I]===0?(w=w.diffAdd(b,A),b=b.dbl()):(b=w.diffAdd(b,A),w=w.dbl());return b},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.eq=function(M){return this.getX().cmp(M.getX())===0},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()},f0}var h0,Lp;function i_(){if(Lp)return h0;Lp=1;var l=_i(),i=Qi(),a=sr(),f=Fo(),g=l.assert;function n(M){this.twisted=(M.a|0)!==1,this.mOneA=this.twisted&&(M.a|0)===-1,this.extended=this.mOneA,f.call(this,"edwards",M),this.a=new i(M.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(M.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(M.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),g(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(M.c|0)===1}a(n,f),h0=n,n.prototype._mulA=function(_){return this.mOneA?_.redNeg():this.a.redMul(_)},n.prototype._mulC=function(_){return this.oneC?_:this.c.redMul(_)},n.prototype.jpoint=function(_,w,b,A){return this.point(_,w,b,A)},n.prototype.pointFromX=function(_,w){_=new i(_,16),_.red||(_=_.toRed(this.red));var b=_.redSqr(),A=this.c2.redSub(this.a.redMul(b)),E=this.one.redSub(this.c2.redMul(this.d).redMul(b)),I=A.redMul(E.redInvm()),R=I.redSqrt();if(R.redSqr().redSub(I).cmp(this.zero)!==0)throw new Error("invalid point");var T=R.fromRed().isOdd();return(w&&!T||!w&&T)&&(R=R.redNeg()),this.point(_,R)},n.prototype.pointFromY=function(_,w){_=new i(_,16),_.red||(_=_.toRed(this.red));var b=_.redSqr(),A=b.redSub(this.c2),E=b.redMul(this.d).redMul(this.c2).redSub(this.a),I=A.redMul(E.redInvm());if(I.cmp(this.zero)===0){if(w)throw new Error("invalid point");return this.point(this.zero,_)}var R=I.redSqrt();if(R.redSqr().redSub(I).cmp(this.zero)!==0)throw new Error("invalid point");return R.fromRed().isOdd()!==w&&(R=R.redNeg()),this.point(R,_)},n.prototype.validate=function(_){if(_.isInfinity())return!0;_.normalize();var w=_.x.redSqr(),b=_.y.redSqr(),A=w.redMul(this.a).redAdd(b),E=this.c2.redMul(this.one.redAdd(this.d.redMul(w).redMul(b)));return A.cmp(E)===0};function x(M,_,w,b,A){f.BasePoint.call(this,M,"projective"),_===null&&w===null&&b===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(_,16),this.y=new i(w,16),this.z=b?new i(b,16):this.curve.one,this.t=A&&new i(A,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return a(x,f.BasePoint),n.prototype.pointFromJSON=function(_){return x.fromJSON(this,_)},n.prototype.point=function(_,w,b,A){return new x(this,_,w,b,A)},x.fromJSON=function(_,w){return new x(_,w[0],w[1],w[2])},x.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},x.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},x.prototype._extDbl=function(){var _=this.x.redSqr(),w=this.y.redSqr(),b=this.z.redSqr();b=b.redIAdd(b);var A=this.curve._mulA(_),E=this.x.redAdd(this.y).redSqr().redISub(_).redISub(w),I=A.redAdd(w),R=I.redSub(b),T=A.redSub(w),B=E.redMul(R),D=I.redMul(T),q=E.redMul(T),k=R.redMul(I);return this.curve.point(B,D,k,q)},x.prototype._projDbl=function(){var _=this.x.redAdd(this.y).redSqr(),w=this.x.redSqr(),b=this.y.redSqr(),A,E,I,R,T,B;if(this.curve.twisted){R=this.curve._mulA(w);var D=R.redAdd(b);this.zOne?(A=_.redSub(w).redSub(b).redMul(D.redSub(this.curve.two)),E=D.redMul(R.redSub(b)),I=D.redSqr().redSub(D).redSub(D)):(T=this.z.redSqr(),B=D.redSub(T).redISub(T),A=_.redSub(w).redISub(b).redMul(B),E=D.redMul(R.redSub(b)),I=D.redMul(B))}else R=w.redAdd(b),T=this.curve._mulC(this.z).redSqr(),B=R.redSub(T).redSub(T),A=this.curve._mulC(_.redISub(R)).redMul(B),E=this.curve._mulC(R).redMul(w.redISub(b)),I=R.redMul(B);return this.curve.point(A,E,I)},x.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},x.prototype._extAdd=function(_){var w=this.y.redSub(this.x).redMul(_.y.redSub(_.x)),b=this.y.redAdd(this.x).redMul(_.y.redAdd(_.x)),A=this.t.redMul(this.curve.dd).redMul(_.t),E=this.z.redMul(_.z.redAdd(_.z)),I=b.redSub(w),R=E.redSub(A),T=E.redAdd(A),B=b.redAdd(w),D=I.redMul(R),q=T.redMul(B),k=I.redMul(B),N=R.redMul(T);return this.curve.point(D,q,N,k)},x.prototype._projAdd=function(_){var w=this.z.redMul(_.z),b=w.redSqr(),A=this.x.redMul(_.x),E=this.y.redMul(_.y),I=this.curve.d.redMul(A).redMul(E),R=b.redSub(I),T=b.redAdd(I),B=this.x.redAdd(this.y).redMul(_.x.redAdd(_.y)).redISub(A).redISub(E),D=w.redMul(R).redMul(B),q,k;return this.curve.twisted?(q=w.redMul(T).redMul(E.redSub(this.curve._mulA(A))),k=R.redMul(T)):(q=w.redMul(T).redMul(E.redSub(A)),k=this.curve._mulC(R).redMul(T)),this.curve.point(D,q,k)},x.prototype.add=function(_){return this.isInfinity()?_:_.isInfinity()?this:this.curve.extended?this._extAdd(_):this._projAdd(_)},x.prototype.mul=function(_){return this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve._wnafMul(this,_)},x.prototype.mulAdd=function(_,w,b){return this.curve._wnafMulAdd(1,[this,w],[_,b],2,!1)},x.prototype.jmulAdd=function(_,w,b){return this.curve._wnafMulAdd(1,[this,w],[_,b],2,!0)},x.prototype.normalize=function(){if(this.zOne)return this;var _=this.z.redInvm();return this.x=this.x.redMul(_),this.y=this.y.redMul(_),this.t&&(this.t=this.t.redMul(_)),this.z=this.curve.one,this.zOne=!0,this},x.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},x.prototype.getX=function(){return this.normalize(),this.x.fromRed()},x.prototype.getY=function(){return this.normalize(),this.y.fromRed()},x.prototype.eq=function(_){return this===_||this.getX().cmp(_.getX())===0&&this.getY().cmp(_.getY())===0},x.prototype.eqXToP=function(_){var w=_.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(w)===0)return!0;for(var b=_.clone(),A=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(w.redIAdd(A),this.x.cmp(w)===0)return!0}},x.prototype.toP=x.prototype.normalize,x.prototype.mixedAdd=x.prototype.add,h0}var kp;function ag(){return kp||(kp=1,function(l){var i=l;i.base=Fo(),i.short=e_(),i.mont=r_(),i.edwards=i_()}(s0)),s0}var u0={},c0,Up;function n_(){return Up||(Up=1,c0={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),c0}var Fp;function Nu(){return Fp||(Fp=1,function(l){var i=l,a=Eu,f=ag(),g=_i(),n=g.assert;function x(w){w.type==="short"?this.curve=new f.short(w):w.type==="edwards"?this.curve=new f.edwards(w):this.curve=new f.mont(w),this.g=this.curve.g,this.n=this.curve.n,this.hash=w.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}i.PresetCurve=x;function M(w,b){Object.defineProperty(i,w,{configurable:!0,enumerable:!0,get:function(){var A=new x(b);return Object.defineProperty(i,w,{configurable:!0,enumerable:!0,value:A}),A}})}M("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),M("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),M("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),M("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),M("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),M("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),M("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var _;try{_=n_()}catch{_=void 0}M("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",_]})}(u0)),u0}var l0,$p;function s_(){if($p)return l0;$p=1;var l=Eu,i=sg(),a=Ln;function f(g){if(!(this instanceof f))return new f(g);this.hash=g.hash,this.predResist=!!g.predResist,this.outLen=this.hash.outSize,this.minEntropy=g.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=i.toArray(g.entropy,g.entropyEnc||"hex"),x=i.toArray(g.nonce,g.nonceEnc||"hex"),M=i.toArray(g.pers,g.persEnc||"hex");a(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,x,M)}return l0=f,f.prototype._init=function(n,x,M){var _=n.concat(x).concat(M);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var w=0;w<this.V.length;w++)this.K[w]=0,this.V[w]=1;this._update(_),this._reseed=1,this.reseedInterval=281474976710656},f.prototype._hmac=function(){return new l.hmac(this.hash,this.K)},f.prototype._update=function(n){var x=this._hmac().update(this.V).update([0]);n&&(x=x.update(n)),this.K=x.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())},f.prototype.reseed=function(n,x,M,_){typeof x!="string"&&(_=M,M=x,x=null),n=i.toArray(n,x),M=i.toArray(M,_),a(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(M||[])),this._reseed=1},f.prototype.generate=function(n,x,M,_){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof x!="string"&&(_=M,M=x,x=null),M&&(M=i.toArray(M,_||"hex"),this._update(M));for(var w=[];w.length<n;)this.V=this._hmac().update(this.V).digest(),w=w.concat(this.V);var b=w.slice(0,n);return this._update(M),this._reseed++,i.encode(b,x)},l0}var d0,zp;function a_(){if(zp)return d0;zp=1;var l=Qi(),i=_i(),a=i.assert;function f(g,n){this.ec=g,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}return d0=f,f.fromPublic=function(n,x,M){return x instanceof f?x:new f(n,{pub:x,pubEnc:M})},f.fromPrivate=function(n,x,M){return x instanceof f?x:new f(n,{priv:x,privEnc:M})},f.prototype.validate=function(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:"Invalid public key"}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},f.prototype.getPublic=function(n,x){return typeof n=="string"&&(x=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),x?this.pub.encode(x,n):this.pub},f.prototype.getPrivate=function(n){return n==="hex"?this.priv.toString(16,2):this.priv},f.prototype._importPrivate=function(n,x){this.priv=new l(n,x||16),this.priv=this.priv.umod(this.ec.curve.n)},f.prototype._importPublic=function(n,x){if(n.x||n.y){this.ec.curve.type==="mont"?a(n.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&a(n.x&&n.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(n.x,n.y);return}this.pub=this.ec.curve.decodePoint(n,x)},f.prototype.derive=function(n){return n.validate()||a(n.validate(),"public point not validated"),n.mul(this.priv).getX()},f.prototype.sign=function(n,x,M){return this.ec.sign(n,this,x,M)},f.prototype.verify=function(n,x){return this.ec.verify(n,x,this)},f.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},d0}var p0,Hp;function o_(){if(Hp)return p0;Hp=1;var l=Qi(),i=_i(),a=i.assert;function f(_,w){if(_ instanceof f)return _;this._importDER(_,w)||(a(_.r&&_.s,"Signature without r or s"),this.r=new l(_.r,16),this.s=new l(_.s,16),_.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=_.recoveryParam)}p0=f;function g(){this.place=0}function n(_,w){var b=_[w.place++];if(!(b&128))return b;var A=b&15;if(A===0||A>4)return!1;for(var E=0,I=0,R=w.place;I<A;I++,R++)E<<=8,E|=_[R],E>>>=0;return E<=127?!1:(w.place=R,E)}function x(_){for(var w=0,b=_.length-1;!_[w]&&!(_[w+1]&128)&&w<b;)w++;return w===0?_:_.slice(w)}f.prototype._importDER=function(w,b){w=i.toArray(w,b);var A=new g;if(w[A.place++]!==48)return!1;var E=n(w,A);if(E===!1||E+A.place!==w.length||w[A.place++]!==2)return!1;var I=n(w,A);if(I===!1)return!1;var R=w.slice(A.place,I+A.place);if(A.place+=I,w[A.place++]!==2)return!1;var T=n(w,A);if(T===!1||w.length!==T+A.place)return!1;var B=w.slice(A.place,T+A.place);if(R[0]===0)if(R[1]&128)R=R.slice(1);else return!1;if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;return this.r=new l(R),this.s=new l(B),this.recoveryParam=null,!0};function M(_,w){if(w<128){_.push(w);return}var b=1+(Math.log(w)/Math.LN2>>>3);for(_.push(b|128);--b;)_.push(w>>>(b<<3)&255);_.push(w)}return f.prototype.toDER=function(w){var b=this.r.toArray(),A=this.s.toArray();for(b[0]&128&&(b=[0].concat(b)),A[0]&128&&(A=[0].concat(A)),b=x(b),A=x(A);!A[0]&&!(A[1]&128);)A=A.slice(1);var E=[2];M(E,b.length),E=E.concat(b),E.push(2),M(E,A.length);var I=E.concat(A),R=[48];return M(R,I.length),R=R.concat(I),i.encode(R,w)},p0}var v0,Kp;function f_(){if(Kp)return v0;Kp=1;var l=Qi(),i=s_(),a=_i(),f=Nu(),g=Bu(),n=a.assert,x=a_(),M=o_();function _(w){if(!(this instanceof _))return new _(w);typeof w=="string"&&(n(Object.prototype.hasOwnProperty.call(f,w),"Unknown curve "+w),w=f[w]),w instanceof f.PresetCurve&&(w={curve:w}),this.curve=w.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=w.curve.g,this.g.precompute(w.curve.n.bitLength()+1),this.hash=w.hash||w.curve.hash}return v0=_,_.prototype.keyPair=function(b){return new x(this,b)},_.prototype.keyFromPrivate=function(b,A){return x.fromPrivate(this,b,A)},_.prototype.keyFromPublic=function(b,A){return x.fromPublic(this,b,A)},_.prototype.genKeyPair=function(b){b||(b={});for(var A=new i({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||g(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),E=this.n.byteLength(),I=this.n.sub(new l(2));;){var R=new l(A.generate(E));if(!(R.cmp(I)>0))return R.iaddn(1),this.keyFromPrivate(R)}},_.prototype._truncateToN=function(b,A){var E=b.byteLength()*8-this.n.bitLength();return E>0&&(b=b.ushrn(E)),!A&&b.cmp(this.n)>=0?b.sub(this.n):b},_.prototype.sign=function(b,A,E,I){typeof E=="object"&&(I=E,E=null),I||(I={}),A=this.keyFromPrivate(A,E),b=this._truncateToN(new l(b,16));for(var R=this.n.byteLength(),T=A.getPrivate().toArray("be",R),B=b.toArray("be",R),D=new i({hash:this.hash,entropy:T,nonce:B,pers:I.pers,persEnc:I.persEnc||"utf8"}),q=this.n.sub(new l(1)),k=0;;k++){var N=I.k?I.k(k):new l(D.generate(this.n.byteLength()));if(N=this._truncateToN(N,!0),!(N.cmpn(1)<=0||N.cmp(q)>=0)){var K=this.g.mul(N);if(!K.isInfinity()){var $=K.getX(),P=$.umod(this.n);if(P.cmpn(0)!==0){var z=N.invm(this.n).mul(P.mul(A.getPrivate()).iadd(b));if(z=z.umod(this.n),z.cmpn(0)!==0){var Y=(K.getY().isOdd()?1:0)|($.cmp(P)!==0?2:0);return I.canonical&&z.cmp(this.nh)>0&&(z=this.n.sub(z),Y^=1),new M({r:P,s:z,recoveryParam:Y})}}}}}},_.prototype.verify=function(b,A,E,I){b=this._truncateToN(new l(b,16)),E=this.keyFromPublic(E,I),A=new M(A,"hex");var R=A.r,T=A.s;if(R.cmpn(1)<0||R.cmp(this.n)>=0||T.cmpn(1)<0||T.cmp(this.n)>=0)return!1;var B=T.invm(this.n),D=B.mul(b).umod(this.n),q=B.mul(R).umod(this.n),k;return this.curve._maxwellTrick?(k=this.g.jmulAdd(D,E.getPublic(),q),k.isInfinity()?!1:k.eqXToP(R)):(k=this.g.mulAdd(D,E.getPublic(),q),k.isInfinity()?!1:k.getX().umod(this.n).cmp(R)===0)},_.prototype.recoverPubKey=function(w,b,A,E){n((3&A)===A,"The recovery param is more than two bits"),b=new M(b,E);var I=this.n,R=new l(w),T=b.r,B=b.s,D=A&1,q=A>>1;if(T.cmp(this.curve.p.umod(this.curve.n))>=0&&q)throw new Error("Unable to find sencond key candinate");q?T=this.curve.pointFromX(T.add(this.curve.n),D):T=this.curve.pointFromX(T,D);var k=b.r.invm(I),N=I.sub(R).mul(k).umod(I),K=B.mul(k).umod(I);return this.g.mulAdd(N,T,K)},_.prototype.getKeyRecoveryParam=function(w,b,A,E){if(b=new M(b,E),b.recoveryParam!==null)return b.recoveryParam;for(var I=0;I<4;I++){var R;try{R=this.recoverPubKey(w,b,I)}catch{continue}if(R.eq(A))return I}throw new Error("Unable to find valid recovery factor")},v0}var g0,jp;function h_(){if(jp)return g0;jp=1;var l=_i(),i=l.assert,a=l.parseBytes,f=l.cachedProperty;function g(n,x){this.eddsa=n,this._secret=a(x.secret),n.isPoint(x.pub)?this._pub=x.pub:this._pubBytes=a(x.pub)}return g.fromPublic=function(x,M){return M instanceof g?M:new g(x,{pub:M})},g.fromSecret=function(x,M){return M instanceof g?M:new g(x,{secret:M})},g.prototype.secret=function(){return this._secret},f(g,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),f(g,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),f(g,"privBytes",function(){var x=this.eddsa,M=this.hash(),_=x.encodingLength-1,w=M.slice(0,x.encodingLength);return w[0]&=248,w[_]&=127,w[_]|=64,w}),f(g,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),f(g,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),f(g,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),g.prototype.sign=function(x){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(x,this)},g.prototype.verify=function(x,M){return this.eddsa.verify(x,M,this)},g.prototype.getSecret=function(x){return i(this._secret,"KeyPair is public only"),l.encode(this.secret(),x)},g.prototype.getPublic=function(x){return l.encode(this.pubBytes(),x)},g0=g,g0}var m0,Vp;function u_(){if(Vp)return m0;Vp=1;var l=Qi(),i=_i(),a=i.assert,f=i.cachedProperty,g=i.parseBytes;function n(x,M){this.eddsa=x,typeof M!="object"&&(M=g(M)),Array.isArray(M)&&(M={R:M.slice(0,x.encodingLength),S:M.slice(x.encodingLength)}),a(M.R&&M.S,"Signature without R or S"),x.isPoint(M.R)&&(this._R=M.R),M.S instanceof l&&(this._S=M.S),this._Rencoded=Array.isArray(M.R)?M.R:M.Rencoded,this._Sencoded=Array.isArray(M.S)?M.S:M.Sencoded}return f(n,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),f(n,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),f(n,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),f(n,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),n.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},n.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},m0=n,m0}var b0,Gp;function c_(){if(Gp)return b0;Gp=1;var l=Eu,i=Nu(),a=_i(),f=a.assert,g=a.parseBytes,n=h_(),x=u_();function M(_){if(f(_==="ed25519","only tested with ed25519 so far"),!(this instanceof M))return new M(_);_=i[_].curve,this.curve=_,this.g=_.g,this.g.precompute(_.n.bitLength()+1),this.pointClass=_.point().constructor,this.encodingLength=Math.ceil(_.n.bitLength()/8),this.hash=l.sha512}return b0=M,M.prototype.sign=function(w,b){w=g(w);var A=this.keyFromSecret(b),E=this.hashInt(A.messagePrefix(),w),I=this.g.mul(E),R=this.encodePoint(I),T=this.hashInt(R,A.pubBytes(),w).mul(A.priv()),B=E.add(T).umod(this.curve.n);return this.makeSignature({R:I,S:B,Rencoded:R})},M.prototype.verify=function(w,b,A){w=g(w),b=this.makeSignature(b);var E=this.keyFromPublic(A),I=this.hashInt(b.Rencoded(),E.pubBytes(),w),R=this.g.mul(b.S()),T=b.R().add(E.pub().mul(I));return T.eq(R)},M.prototype.hashInt=function(){for(var w=this.hash(),b=0;b<arguments.length;b++)w.update(arguments[b]);return a.intFromLE(w.digest()).umod(this.curve.n)},M.prototype.keyFromPublic=function(w){return n.fromPublic(this,w)},M.prototype.keyFromSecret=function(w){return n.fromSecret(this,w)},M.prototype.makeSignature=function(w){return w instanceof x?w:new x(this,w)},M.prototype.encodePoint=function(w){var b=w.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=w.getX().isOdd()?128:0,b},M.prototype.decodePoint=function(w){w=a.parseBytes(w);var b=w.length-1,A=w.slice(0,b).concat(w[b]&-129),E=(w[b]&128)!==0,I=a.intFromLE(A);return this.curve.pointFromY(I,E)},M.prototype.encodeInt=function(w){return w.toArray("le",this.encodingLength)},M.prototype.decodeInt=function(w){return a.intFromLE(w)},M.prototype.isPoint=function(w){return w instanceof this.pointClass},b0}var Zp;function Du(){return Zp||(Zp=1,function(l){var i=l;i.version=t_.version,i.utils=_i(),i.rand=Bu(),i.curve=ag(),i.curves=Nu(),i.ec=f_(),i.eddsa=c_()}(e0)),e0}var gi={},y0={},w0={exports:{}},Wp;function og(){return Wp||(Wp=1,function(l){(function(i,a){function f(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function n(v,t,r){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=n:a.BN=n,n.BN=n,n.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=Ee.Buffer}catch{}n.isBN=function(t){return t instanceof n?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,r){return t.cmp(r)>0?t:r},n.min=function(t,r){return t.cmp(r)<0?t:r},n.prototype._init=function(t,r,s){if(typeof t=="number")return this._initNumber(t,r,s);if(typeof t=="object")return this._initArray(t,r,s);r==="hex"&&(r=16),f(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&(h++,this.negative=1),h<t.length&&(r===16?this._parseHex(t,h,s):(this._parseBase(t,r,h),s==="le"&&this._initArray(this.toArray(),r,s)))},n.prototype._initNumber=function(t,r,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(f(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),r,s)},n.prototype._initArray=function(t,r,s){if(f(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,m,y=0;if(s==="be")for(h=t.length-1,d=0;h>=0;h-=3)m=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(s==="le")for(h=0,d=0;h<t.length;h+=3)m=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function M(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var s=M(v,r);return r-1>=t&&(s|=M(v,r-1)<<4),s}n.prototype._parseHex=function(t,r,s){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d=0,m=0,y;if(s==="be")for(h=t.length-1;h>=r;h-=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(h=u%2===0?r+1:r;h<t.length;h+=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function w(v,t,r,s){for(var h=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;h*=s,y>=49?h+=y-49+10:y>=17?h+=y-17+10:h+=y}return h}n.prototype._parseBase=function(t,r,s){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=r)h++;h--,d=d/r|0;for(var m=t.length-s,y=m%h,u=Math.min(m,m-y)+s,e=0,c=s;c<u;c+=h)e=w(t,c,c+h,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var F=1;for(e=w(t,c,t.length,r),c=0;c<y;c++)F*=r;this.imuln(F),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,r){t=t||10,r=r|0||1;var s;if(t===16||t==="hex"){s="";for(var h=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<h|d)&16777215).toString(16);d=y>>>24-h&16777215,d!==0||m!==this.length-1?s=b[6-u.length]+u+s:s=u+s,h+=2,h>=26&&(h-=26,m--)}for(d!==0&&(s=d.toString(16)+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(t===(t|0)&&t>=2&&t<=36){var e=A[t],c=E[t];s="";var F=this.clone();for(F.negative=0;!F.isZero();){var L=F.modn(c).toString(t);F=F.idivn(c),F.isZero()?s=L+s:s=b[e-L.length]+L+s}for(this.isZero()&&(s="0"+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}f(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,r){return f(typeof x<"u"),this.toArrayLike(x,t,r)},n.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},n.prototype.toArrayLike=function(t,r,s){var h=this.byteLength(),d=s||Math.max(1,h);f(h<=d,"byte array longer than desired length"),f(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,c=this.clone();if(m){for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-h;e++)y[e]=0;for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[d-e-1]=u}return y},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var r=t,s=0;return r>=4096&&(s+=13,r>>>=13),r>=64&&(s+=7,r>>>=7),r>=8&&(s+=4,r>>>=4),r>=2&&(s+=2,r>>>=2),s+r},n.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,s=0;return(r&8191)===0&&(s+=13,r>>>=13),(r&127)===0&&(s+=7,r>>>=7),(r&15)===0&&(s+=4,r>>>=4),(r&3)===0&&(s+=2,r>>>=2),(r&1)===0&&s++,s},n.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function I(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var s=r/26|0,h=r%26;t[r]=(v.words[s]&1<<h)>>>h}return t}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var s=this._zeroBits(this.words[r]);if(t+=s,s!==26)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},n.prototype.ior=function(t){return f((this.negative|t.negative)===0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=r.length,this.strip()},n.prototype.iand=function(t){return f((this.negative|t.negative)===0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var r,s;this.length>t.length?(r=this,s=t):(r=t,s=this);for(var h=0;h<s.length;h++)this.words[h]=r.words[h]^s.words[h];if(this!==r)for(;h<r.length;h++)this.words[h]=r.words[h];return this.length=r.length,this.strip()},n.prototype.ixor=function(t){return f((this.negative|t.negative)===0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){f(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,s=t%26;this._expand(r),s>0&&r--;for(var h=0;h<r;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,r){f(typeof t=="number"&&t>=0);var s=t/26|0,h=t%26;return this._expand(s+1),r?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},n.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var s,h;this.length>t.length?(s=this,h=t):(s=t,h=this);for(var d=0,m=0;m<h.length;m++)r=(s.words[m]|0)+(h.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<s.length;m++)r=(s.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=s.length,d!==0)this.words[this.length]=d,this.length++;else if(s!==this)for(;m<s.length;m++)this.words[m]=s.words[m];return this},n.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var s=this.cmp(t);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;s>0?(h=this,d=t):(h=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(h.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<h.length;y++)r=(h.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<h.length&&h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=Math.max(this.length,y),h!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};function R(v,t,r){r.negative=t.negative^v.negative;var s=v.length+t.length|0;r.length=s,s=s-1|0;var h=v.words[0]|0,d=t.words[0]|0,m=h*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<s;e++){for(var c=u>>>26,F=u&67108863,L=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=L;H++){var G=e-H|0;h=v.words[G]|0,d=t.words[H]|0,m=h*d+F,c+=m/67108864|0,F=m&67108863}r.words[e]=F|0,u=c|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var T=function(t,r,s){var h=t.words,d=r.words,m=s.words,y=0,u,e,c,F=h[0]|0,L=F&8191,H=F>>>13,G=h[1]|0,tt=G&8191,Z=G>>>13,et=h[2]|0,j=et&8191,O=et>>>13,Q=h[3]|0,rt=Q&8191,st=Q>>>13,Jt=h[4]|0,gt=Jt&8191,mt=Jt>>>13,ee=h[5]|0,_t=ee&8191,Mt=ee>>>13,ie=h[6]|0,ut=ie&8191,pt=ie>>>13,Xt=h[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=h[8]|0,ht=Qt&8191,dt=Qt>>>13,ne=h[9]|0,ct=ne&8191,bt=ne>>>13,se=d[0]|0,yt=se&8191,wt=se>>>13,ae=d[1]|0,qt=ae&8191,Lt=ae>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Ut=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,me=d[5]|0,xt=me&8191,Ot=me>>>13,xe=d[6]|0,It=xe&8191,Tt=xe>>>13,we=d[7]|0,Pt=we&8191,Rt=we>>>13,ue=d[8]|0,Ct=ue&8191,Bt=ue>>>13,pr=d[9]|0,Ft=pr&8191,$t=pr>>>13;s.negative=t.negative^r.negative,s.length=19,u=Math.imul(L,yt),e=Math.imul(L,wt),e=e+Math.imul(H,yt)|0,c=Math.imul(H,wt);var Ae=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,c=Math.imul(Z,wt),u=u+Math.imul(L,qt)|0,e=e+Math.imul(L,Lt)|0,e=e+Math.imul(H,qt)|0,c=c+Math.imul(H,Lt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(j,yt),e=Math.imul(j,wt),e=e+Math.imul(O,yt)|0,c=Math.imul(O,wt),u=u+Math.imul(tt,qt)|0,e=e+Math.imul(tt,Lt)|0,e=e+Math.imul(Z,qt)|0,c=c+Math.imul(Z,Lt)|0,u=u+Math.imul(L,Nt)|0,e=e+Math.imul(L,kt)|0,e=e+Math.imul(H,Nt)|0,c=c+Math.imul(H,kt)|0;var je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(je>>>26)|0,je&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,c=Math.imul(st,wt),u=u+Math.imul(j,qt)|0,e=e+Math.imul(j,Lt)|0,e=e+Math.imul(O,qt)|0,c=c+Math.imul(O,Lt)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,c=c+Math.imul(Z,kt)|0,u=u+Math.imul(L,Ut)|0,e=e+Math.imul(L,Et)|0,e=e+Math.imul(H,Ut)|0,c=c+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,c=Math.imul(mt,wt),u=u+Math.imul(rt,qt)|0,e=e+Math.imul(rt,Lt)|0,e=e+Math.imul(st,qt)|0,c=c+Math.imul(st,Lt)|0,u=u+Math.imul(j,Nt)|0,e=e+Math.imul(j,kt)|0,e=e+Math.imul(O,Nt)|0,c=c+Math.imul(O,kt)|0,u=u+Math.imul(tt,Ut)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Ut)|0,c=c+Math.imul(Z,Et)|0,u=u+Math.imul(L,St)|0,e=e+Math.imul(L,At)|0,e=e+Math.imul(H,St)|0,c=c+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,c=Math.imul(Mt,wt),u=u+Math.imul(gt,qt)|0,e=e+Math.imul(gt,Lt)|0,e=e+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Lt)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,c=c+Math.imul(st,kt)|0,u=u+Math.imul(j,Ut)|0,e=e+Math.imul(j,Et)|0,e=e+Math.imul(O,Ut)|0,c=c+Math.imul(O,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,c=c+Math.imul(Z,At)|0,u=u+Math.imul(L,xt)|0,e=e+Math.imul(L,Ot)|0,e=e+Math.imul(H,xt)|0,c=c+Math.imul(H,Ot)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,c=Math.imul(pt,wt),u=u+Math.imul(_t,qt)|0,e=e+Math.imul(_t,Lt)|0,e=e+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Lt)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,c=c+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Ut)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Ut)|0,c=c+Math.imul(st,Et)|0,u=u+Math.imul(j,St)|0,e=e+Math.imul(j,At)|0,e=e+Math.imul(O,St)|0,c=c+Math.imul(O,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,xt)|0,c=c+Math.imul(Z,Ot)|0,u=u+Math.imul(L,It)|0,e=e+Math.imul(L,Tt)|0,e=e+Math.imul(H,It)|0,c=c+Math.imul(H,Tt)|0;var Ce=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,c=Math.imul(lt,wt),u=u+Math.imul(ut,qt)|0,e=e+Math.imul(ut,Lt)|0,e=e+Math.imul(pt,qt)|0,c=c+Math.imul(pt,Lt)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,c=c+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Ut)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,c=c+Math.imul(st,At)|0,u=u+Math.imul(j,xt)|0,e=e+Math.imul(j,Ot)|0,e=e+Math.imul(O,xt)|0,c=c+Math.imul(O,Ot)|0,u=u+Math.imul(tt,It)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,It)|0,c=c+Math.imul(Z,Tt)|0,u=u+Math.imul(L,Pt)|0,e=e+Math.imul(L,Rt)|0,e=e+Math.imul(H,Pt)|0,c=c+Math.imul(H,Rt)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,c=Math.imul(dt,wt),u=u+Math.imul(vt,qt)|0,e=e+Math.imul(vt,Lt)|0,e=e+Math.imul(lt,qt)|0,c=c+Math.imul(lt,Lt)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Ut)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Ut)|0,c=c+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,c=c+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,xt)|0,c=c+Math.imul(st,Ot)|0,u=u+Math.imul(j,It)|0,e=e+Math.imul(j,Tt)|0,e=e+Math.imul(O,It)|0,c=c+Math.imul(O,Tt)|0,u=u+Math.imul(tt,Pt)|0,e=e+Math.imul(tt,Rt)|0,e=e+Math.imul(Z,Pt)|0,c=c+Math.imul(Z,Rt)|0,u=u+Math.imul(L,Ct)|0,e=e+Math.imul(L,Bt)|0,e=e+Math.imul(H,Ct)|0,c=c+Math.imul(H,Bt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,c=Math.imul(bt,wt),u=u+Math.imul(ht,qt)|0,e=e+Math.imul(ht,Lt)|0,e=e+Math.imul(dt,qt)|0,c=c+Math.imul(dt,Lt)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,c=c+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Ut)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Ut)|0,c=c+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,c=c+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,xt)|0,c=c+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,It)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,It)|0,c=c+Math.imul(st,Tt)|0,u=u+Math.imul(j,Pt)|0,e=e+Math.imul(j,Rt)|0,e=e+Math.imul(O,Pt)|0,c=c+Math.imul(O,Rt)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Bt)|0,e=e+Math.imul(Z,Ct)|0,c=c+Math.imul(Z,Bt)|0,u=u+Math.imul(L,Ft)|0,e=e+Math.imul(L,$t)|0,e=e+Math.imul(H,Ft)|0,c=c+Math.imul(H,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,qt),e=Math.imul(ct,Lt),e=e+Math.imul(bt,qt)|0,c=Math.imul(bt,Lt),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Ut)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Ut)|0,c=c+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,c=c+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,xt)|0,c=c+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,It)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,It)|0,c=c+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Pt)|0,e=e+Math.imul(rt,Rt)|0,e=e+Math.imul(st,Pt)|0,c=c+Math.imul(st,Rt)|0,u=u+Math.imul(j,Ct)|0,e=e+Math.imul(j,Bt)|0,e=e+Math.imul(O,Ct)|0,c=c+Math.imul(O,Bt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,c=c+Math.imul(Z,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,c=Math.imul(bt,kt),u=u+Math.imul(ht,Ut)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Ut)|0,c=c+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,c=c+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,It)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,It)|0,c=c+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Pt)|0,e=e+Math.imul(gt,Rt)|0,e=e+Math.imul(mt,Pt)|0,c=c+Math.imul(mt,Rt)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Bt)|0,e=e+Math.imul(st,Ct)|0,c=c+Math.imul(st,Bt)|0,u=u+Math.imul(j,Ft)|0,e=e+Math.imul(j,$t)|0,e=e+Math.imul(O,Ft)|0,c=c+Math.imul(O,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Ut),e=Math.imul(ct,Et),e=e+Math.imul(bt,Ut)|0,c=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,c=c+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,xt)|0,c=c+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,It)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,It)|0,c=c+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Pt)|0,e=e+Math.imul(_t,Rt)|0,e=e+Math.imul(Mt,Pt)|0,c=c+Math.imul(Mt,Rt)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Bt)|0,e=e+Math.imul(mt,Ct)|0,c=c+Math.imul(mt,Bt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,c=c+Math.imul(st,$t)|0;var Le=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,c=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,It)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,It)|0,c=c+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Pt)|0,e=e+Math.imul(ut,Rt)|0,e=e+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Rt)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Bt)|0,e=e+Math.imul(Mt,Ct)|0,c=c+Math.imul(Mt,Bt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,xt)|0,c=Math.imul(bt,Ot),u=u+Math.imul(ht,It)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,It)|0,c=c+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Pt)|0,e=e+Math.imul(vt,Rt)|0,e=e+Math.imul(lt,Pt)|0,c=c+Math.imul(lt,Rt)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Bt)|0,e=e+Math.imul(pt,Ct)|0,c=c+Math.imul(pt,Bt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,It),e=Math.imul(ct,Tt),e=e+Math.imul(bt,It)|0,c=Math.imul(bt,Tt),u=u+Math.imul(ht,Pt)|0,e=e+Math.imul(ht,Rt)|0,e=e+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Rt)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Bt)|0,e=e+Math.imul(lt,Ct)|0,c=c+Math.imul(lt,Bt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,c=c+Math.imul(pt,$t)|0;var Re=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Re>>>26)|0,Re&=67108863,u=Math.imul(ct,Pt),e=Math.imul(ct,Rt),e=e+Math.imul(bt,Pt)|0,c=Math.imul(bt,Rt),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Bt)|0,e=e+Math.imul(dt,Ct)|0,c=c+Math.imul(dt,Bt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,c=c+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Bt),e=e+Math.imul(bt,Ct)|0,c=Math.imul(bt,Bt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,c=c+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,c=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(c+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Ae,m[1]=Ke,m[2]=je,m[3]=Ve,m[4]=Ge,m[5]=Ze,m[6]=Ce,m[7]=Ne,m[8]=We,m[9]=De,m[10]=Ye,m[11]=Je,m[12]=Le,m[13]=$e,m[14]=ze,m[15]=Re,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,s.length++),s};Math.imul||(T=R);function B(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var s=0,h=0,d=0;d<r.length-1;d++){var m=h;h=0;for(var y=s&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var c=d-e,F=v.words[c]|0,L=t.words[e]|0,H=F*L,G=H&67108863;m=m+(H/67108864|0)|0,G=G+y|0,y=G&67108863,m=m+(G>>>26)|0,h+=m>>>26,m&=67108863}r.words[d]=y,s=m,m=h}return s!==0?r.words[d]=s:r.length--,r.strip()}function D(v,t,r){var s=new q;return s.mulp(v,t,r)}n.prototype.mulTo=function(t,r){var s,h=this.length+t.length;return this.length===10&&t.length===10?s=T(this,t,r):h<63?s=R(this,t,r):h<1024?s=B(this,t,r):s=D(this,t,r),s};function q(v,t){this.x=v,this.y=t}q.prototype.makeRBT=function(t){for(var r=new Array(t),s=n.prototype._countBits(t)-1,h=0;h<t;h++)r[h]=this.revBin(h,s,t);return r},q.prototype.revBin=function(t,r,s){if(t===0||t===s-1)return t;for(var h=0,d=0;d<r;d++)h|=(t&1)<<r-d-1,t>>=1;return h},q.prototype.permute=function(t,r,s,h,d,m){for(var y=0;y<m;y++)h[y]=r[t[y]],d[y]=s[t[y]]},q.prototype.transform=function(t,r,s,h,d,m){this.permute(m,t,r,s,h,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),F=0;F<d;F+=u)for(var L=e,H=c,G=0;G<y;G++){var tt=s[F+G],Z=h[F+G],et=s[F+G+y],j=h[F+G+y],O=L*et-H*j;j=L*j+H*et,et=O,s[F+G]=tt+et,h[F+G]=Z+j,s[F+G+y]=tt-et,h[F+G+y]=Z-j,G!==u&&(O=e*L-c*H,H=e*H+c*L,L=O)}},q.prototype.guessLen13b=function(t,r){var s=Math.max(r,t)|1,h=s&1,d=0;for(s=s/2|0;s;s=s>>>1)d++;return 1<<d+1+h},q.prototype.conjugate=function(t,r,s){if(!(s<=1))for(var h=0;h<s/2;h++){var d=t[h];t[h]=t[s-h-1],t[s-h-1]=d,d=r[h],r[h]=-r[s-h-1],r[s-h-1]=-d}},q.prototype.normalize13b=function(t,r){for(var s=0,h=0;h<r/2;h++){var d=Math.round(t[2*h+1]/r)*8192+Math.round(t[2*h]/r)+s;t[h]=d&67108863,d<67108864?s=0:s=d/67108864|0}return t},q.prototype.convert13b=function(t,r,s,h){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),s[2*m]=d&8191,d=d>>>13,s[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<h;++m)s[m]=0;f(d===0),f((d&-8192)===0)},q.prototype.stub=function(t){for(var r=new Array(t),s=0;s<t;s++)r[s]=0;return r},q.prototype.mulp=function(t,r,s){var h=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(h),m=this.stub(h),y=new Array(h),u=new Array(h),e=new Array(h),c=new Array(h),F=new Array(h),L=new Array(h),H=s.words;H.length=h,this.convert13b(t.words,t.length,y,h),this.convert13b(r.words,r.length,c,h),this.transform(y,m,u,e,h,d),this.transform(c,m,F,L,h,d);for(var G=0;G<h;G++){var tt=u[G]*F[G]-e[G]*L[G];e[G]=u[G]*L[G]+e[G]*F[G],u[G]=tt}return this.conjugate(u,e,h),this.transform(u,e,H,m,h,d),this.conjugate(H,m,h),this.normalize13b(H,h),s.negative=t.negative^r.negative,s.length=t.length+r.length,s.strip()},n.prototype.mul=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},n.prototype.mulf=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),D(this,t,r)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){f(typeof t=="number"),f(t<67108864);for(var r=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,d=(h&67108863)+(r&67108863);r>>=26,r+=h/67108864|0,r+=d>>>26,this.words[s]=d&67108863}return r!==0&&(this.words[s]=r,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var r=I(t);if(r.length===0)return new n(1);for(var s=this,h=0;h<r.length&&r[h]===0;h++,s=s.sqr());if(++h<r.length)for(var d=s.sqr();h<r.length;h++,d=d.sqr())r[h]!==0&&(s=s.mul(d));return s},n.prototype.iushln=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&h,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(s!==0){for(d=this.length-1;d>=0;d--)this.words[d+s]=this.words[d];for(d=0;d<s;d++)this.words[d]=0;this.length+=s}return this.strip()},n.prototype.ishln=function(t){return f(this.negative===0),this.iushln(t)},n.prototype.iushrn=function(t,r,s){f(typeof t=="number"&&t>=0);var h;r?h=(r-r%26)/26:h=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=s;if(h-=m,h=Math.max(0,h),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var c=0;for(e=this.length-1;e>=0&&(c!==0||e>=h);e--){var F=this.words[e]|0;this.words[e]=c<<26-d|F>>>d,c=F&y}return u&&c!==0&&(u.words[u.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,r,s){return f(this.negative===0),this.iushrn(t,r,s)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return!1;var d=this.words[s];return!!(d&h)},n.prototype.imaskn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26;if(f(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(r!==0&&s++,this.length=Math.min(s,this.length),r!==0){var h=67108863^67108863>>>r<<r;this.words[this.length-1]&=h}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return f(typeof t=="number"),f(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},n.prototype.isubn=function(t){if(f(typeof t=="number"),f(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,r,s){var h=t.length+s,d;this._expand(h);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+s]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+s]=m&67108863}for(;d<this.length-s;d++)m=(this.words[d+s]|0)+y,y=m>>26,this.words[d+s]=m&67108863;if(y===0)return this.strip();for(f(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,r){var s=this.length-t.length,h=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);s=26-y,s!==0&&(d=d.ushln(s),h.iushln(s),m=d.words[d.length-1]|0);var u=h.length-d.length,e;if(r!=="mod"){e=new n(null),e.length=u+1,e.words=new Array(e.length);for(var c=0;c<e.length;c++)e.words[c]=0}var F=h.clone()._ishlnsubmul(d,1,u);F.negative===0&&(h=F,e&&(e.words[u]=1));for(var L=u-1;L>=0;L--){var H=(h.words[d.length+L]|0)*67108864+(h.words[d.length+L-1]|0);for(H=Math.min(H/m|0,67108863),h._ishlnsubmul(d,H,L);h.negative!==0;)H--,h.negative=0,h._ishlnsubmul(d,1,L),h.isZero()||(h.negative^=1);e&&(e.words[L]=H)}return e&&e.strip(),h.strip(),r!=="div"&&s!==0&&h.iushrn(s),{div:e||null,mod:h}},n.prototype.divmod=function(t,r,s){if(f(!t.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var h,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(h=m.div.neg()),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.iadd(t)),{div:h,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(h=m.div.neg()),{div:h,mod:m.mod}):(this.negative&t.negative)!==0?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,r)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var s=r.div.negative!==0?r.mod.isub(t):r.mod,h=t.ushrn(1),d=t.andln(1),m=s.cmp(h);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){f(t<=67108863);for(var r=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(r*s+(this.words[h]|0))%t;return s},n.prototype.idivn=function(t){f(t<=67108863);for(var r=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+r*67108864;this.words[s]=h/t|0,r=h%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=new n(0),y=new n(1),u=0;r.isEven()&&s.isEven();)r.iushrn(1),s.iushrn(1),++u;for(var e=s.clone(),c=r.clone();!r.isZero();){for(var F=0,L=1;(r.words[0]&L)===0&&F<26;++F,L<<=1);if(F>0)for(r.iushrn(F);F-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(e),d.isub(c)),h.iushrn(1),d.iushrn(1);for(var H=0,G=1;(s.words[0]&G)===0&&H<26;++H,G<<=1);if(H>0)for(s.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(c)),m.iushrn(1),y.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(m),d.isub(y)):(s.isub(r),m.isub(h),y.isub(d))}return{a:m,b:y,gcd:s.iushln(u)}},n.prototype._invmp=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=s.clone();r.cmpn(1)>0&&s.cmpn(1)>0;){for(var y=0,u=1;(r.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)h.isOdd()&&h.iadd(m),h.iushrn(1);for(var e=0,c=1;(s.words[0]&c)===0&&e<26;++e,c<<=1);if(e>0)for(s.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(d)):(s.isub(r),d.isub(h))}var F;return r.cmpn(1)===0?F=h:F=d,F.cmpn(0)<0&&F.iadd(t),F},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),s=t.clone();r.negative=0,s.negative=0;for(var h=0;r.isEven()&&s.isEven();h++)r.iushrn(1),s.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;s.isEven();)s.iushrn(1);var d=r.cmp(s);if(d<0){var m=r;r=s,s=m}else if(d===0||s.cmpn(1)===0)break;r.isub(s)}while(!0);return s.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){f(typeof t=="number");var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var d=h,m=s;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var s;if(this.length>1)s=1;else{r&&(t=-t),f(t<=67108863,"Number is too big");var h=this.words[0]|0;s=h===t?0:h<t?-1:1}return this.negative!==0?-s|0:s},n.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,d=t.words[s]|0;if(h!==d){h<d?r=-1:h>d&&(r=1);break}}return r},n.prototype.gtn=function(t){return this.cmpn(t)===1},n.prototype.gt=function(t){return this.cmp(t)===1},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return this.cmpn(t)===-1},n.prototype.lt=function(t){return this.cmp(t)===-1},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return this.cmpn(t)===0},n.prototype.eq=function(t){return this.cmp(t)===0},n.red=function(t){return new Y(t)},n.prototype.toRed=function(t){return f(!this.red,"Already a number in reduction context"),f(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return f(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return f(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var k={k256:null,p224:null,p192:null,p25519:null};function N(v,t){this.name=v,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},N.prototype.ireduce=function(t){var r=t,s;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),s=r.bitLength();while(s>this.n);var h=s<this.n?-1:r.ucmp(this.p);return h===0?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},N.prototype.split=function(t,r){t.iushrn(this.n,0,r)},N.prototype.imulK=function(t){return t.imul(this.k)};function K(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(K,N),K.prototype.split=function(t,r){for(var s=4194303,h=Math.min(t.length,9),d=0;d<h;d++)r.words[d]=t.words[d];if(r.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&s,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&s)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},K.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,s=0;s<t.length;s++){var h=t.words[s]|0;r+=h*977,t.words[s]=r&67108863,r=h*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function $(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g($,N);function P(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,N);function z(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(z,N),z.prototype.imulK=function(t){for(var r=0,s=0;s<t.length;s++){var h=(t.words[s]|0)*19+r,d=h&67108863;h>>>=26,t.words[s]=d,r=h}return r!==0&&(t.words[t.length++]=r),t},n._prime=function(t){if(k[t])return k[t];var r;if(t==="k256")r=new K;else if(t==="p224")r=new $;else if(t==="p192")r=new P;else if(t==="p25519")r=new z;else throw new Error("Unknown prime "+t);return k[t]=r,r};function Y(v){if(typeof v=="string"){var t=n._prime(v);this.m=t.p,this.prime=t}else f(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Y.prototype._verify1=function(t){f(t.negative===0,"red works only with positives"),f(t.red,"red works only with red numbers")},Y.prototype._verify2=function(t,r){f((t.negative|r.negative)===0,"red works only with positives"),f(t.red&&t.red===r.red,"red works only with red numbers")},Y.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Y.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Y.prototype.add=function(t,r){this._verify2(t,r);var s=t.add(r);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Y.prototype.iadd=function(t,r){this._verify2(t,r);var s=t.iadd(r);return s.cmp(this.m)>=0&&s.isub(this.m),s},Y.prototype.sub=function(t,r){this._verify2(t,r);var s=t.sub(r);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},Y.prototype.isub=function(t,r){this._verify2(t,r);var s=t.isub(r);return s.cmpn(0)<0&&s.iadd(this.m),s},Y.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},Y.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Y.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Y.prototype.isqr=function(t){return this.imul(t,t.clone())},Y.prototype.sqr=function(t){return this.mul(t,t)},Y.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(f(r%2===1),r===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);f(!h.isZero());var m=new n(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new n(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var c=this.pow(e,h),F=this.pow(t,h.addn(1).iushrn(1)),L=this.pow(t,h),H=d;L.cmp(m)!==0;){for(var G=L,tt=0;G.cmp(m)!==0;tt++)G=G.redSqr();f(tt<H);var Z=this.pow(c,new n(1).iushln(H-tt-1));F=F.redMul(Z),c=Z.redSqr(),L=L.redMul(c),H=tt}return F},Y.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Y.prototype.pow=function(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var s=4,h=new Array(1<<s);h[0]=new n(1).toRed(this),h[1]=t;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],t);var m=h[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var c=r.words[d],F=e-1;F>=0;F--){var L=c>>F&1;if(m!==h[0]&&(m=this.sqr(m)),L===0&&y===0){u=0;continue}y<<=1,y|=L,u++,!(u!==s&&(d!==0||F!==0))&&(m=this.mul(m,h[y]),u=0,y=0)}e=26}return m},Y.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},Y.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},n.mont=function(t){return new nt(t)};function nt(v){Y.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,Y),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var s=t.mul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(l,ve)}(w0)),w0.exports}var _0={},M0={},x0,Yp;function Lu(){if(Yp)return x0;Yp=1;var l=Ee,i=l.Buffer,a={},f;for(f in l)!l.hasOwnProperty(f)||f==="SlowBuffer"||f==="Buffer"||(a[f]=l[f]);var g=a.Buffer={};for(f in i)!i.hasOwnProperty(f)||f==="allocUnsafe"||f==="allocUnsafeSlow"||(g[f]=i[f]);if(a.Buffer.prototype=i.prototype,(!g.from||g.from===Uint8Array.from)&&(g.from=function(n,x,M){if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof n);if(n&&typeof n.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);return i(n,x,M)}),g.alloc||(g.alloc=function(n,x,M){if(typeof n!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof n);if(n<0||n>=2*(1<<30))throw new RangeError('The value "'+n+'" is invalid for option "size"');var _=i(n);return!x||x.length===0?_.fill(0):typeof M=="string"?_.fill(x,M):_.fill(x),_}),!a.kStringMaxLength)try{a.kStringMaxLength=bi.exports.binding("buffer").kStringMaxLength}catch{}return a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),x0=a,x0}var E0={},Jp;function ku(){if(Jp)return E0;Jp=1;const l=sr();function i(f){this._reporterState={obj:null,path:[],options:f||{},errors:[]}}E0.Reporter=i,i.prototype.isError=function(g){return g instanceof a},i.prototype.save=function(){const g=this._reporterState;return{obj:g.obj,pathLen:g.path.length}},i.prototype.restore=function(g){const n=this._reporterState;n.obj=g.obj,n.path=n.path.slice(0,g.pathLen)},i.prototype.enterKey=function(g){return this._reporterState.path.push(g)},i.prototype.exitKey=function(g){const n=this._reporterState;n.path=n.path.slice(0,g-1)},i.prototype.leaveKey=function(g,n,x){const M=this._reporterState;this.exitKey(g),M.obj!==null&&(M.obj[n]=x)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const g=this._reporterState,n=g.obj;return g.obj={},n},i.prototype.leaveObject=function(g){const n=this._reporterState,x=n.obj;return n.obj=g,x},i.prototype.error=function(g){let n;const x=this._reporterState,M=g instanceof a;if(M?n=g:n=new a(x.path.map(function(_){return"["+JSON.stringify(_)+"]"}).join(""),g.message||g,g.stack),!x.options.partial)throw n;return M||x.errors.push(n),n},i.prototype.wrapResult=function(g){const n=this._reporterState;return n.options.partial?{result:this.isError(g)?null:g,errors:n.errors}:g};function a(f,g){this.path=f,this.rethrow(g)}return l(a,Error),a.prototype.rethrow=function(g){if(this.message=g+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(n){this.stack=n.stack}return this},E0}var wo={},Xp;function Xs(){if(Xp)return wo;Xp=1;const l=sr(),i=ku().Reporter,a=Lu().Buffer;function f(n,x){if(i.call(this,x),!a.isBuffer(n)){this.error("Input not Buffer");return}this.base=n,this.offset=0,this.length=n.length}l(f,i),wo.DecoderBuffer=f,f.isDecoderBuffer=function(x){return x instanceof f?!0:typeof x=="object"&&a.isBuffer(x.base)&&x.constructor.name==="DecoderBuffer"&&typeof x.offset=="number"&&typeof x.length=="number"&&typeof x.save=="function"&&typeof x.restore=="function"&&typeof x.isEmpty=="function"&&typeof x.readUInt8=="function"&&typeof x.skip=="function"&&typeof x.raw=="function"},f.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},f.prototype.restore=function(x){const M=new f(this.base);return M.offset=x.offset,M.length=this.offset,this.offset=x.offset,i.prototype.restore.call(this,x.reporter),M},f.prototype.isEmpty=function(){return this.offset===this.length},f.prototype.readUInt8=function(x){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(x||"DecoderBuffer overrun")},f.prototype.skip=function(x,M){if(!(this.offset+x<=this.length))return this.error(M||"DecoderBuffer overrun");const _=new f(this.base);return _._reporterState=this._reporterState,_.offset=this.offset,_.length=this.offset+x,this.offset+=x,_},f.prototype.raw=function(x){return this.base.slice(x?x.offset:this.offset,this.length)};function g(n,x){if(Array.isArray(n))this.length=0,this.value=n.map(function(M){return g.isEncoderBuffer(M)||(M=new g(M,x)),this.length+=M.length,M},this);else if(typeof n=="number"){if(!(0<=n&&n<=255))return x.error("non-byte EncoderBuffer value");this.value=n,this.length=1}else if(typeof n=="string")this.value=n,this.length=a.byteLength(n);else if(a.isBuffer(n))this.value=n,this.length=n.length;else return x.error("Unsupported type: "+typeof n)}return wo.EncoderBuffer=g,g.isEncoderBuffer=function(x){return x instanceof g?!0:typeof x=="object"&&x.constructor.name==="EncoderBuffer"&&typeof x.length=="number"&&typeof x.join=="function"},g.prototype.join=function(x,M){return x||(x=a.alloc(this.length)),M||(M=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(_){_.join(x,M),M+=_.length}):(typeof this.value=="number"?x[M]=this.value:typeof this.value=="string"?x.write(this.value,M):a.isBuffer(this.value)&&this.value.copy(x,M),M+=this.length)),x},wo}var S0,Qp;function Uu(){if(Qp)return S0;Qp=1;const l=ku().Reporter,i=Xs().EncoderBuffer,a=Xs().DecoderBuffer,f=Ln,g=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],n=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(g),x=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function M(w,b,A){const E={};this._baseState=E,E.name=A,E.enc=w,E.parent=b||null,E.children=null,E.tag=null,E.args=null,E.reverseArgs=null,E.choice=null,E.optional=!1,E.any=!1,E.obj=!1,E.use=null,E.useDecoder=null,E.key=null,E.default=null,E.explicit=null,E.implicit=null,E.contains=null,E.parent||(E.children=[],this._wrap())}S0=M;const _=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return M.prototype.clone=function(){const b=this._baseState,A={};_.forEach(function(I){A[I]=b[I]});const E=new this.constructor(A.parent);return E._baseState=A,E},M.prototype._wrap=function(){const b=this._baseState;n.forEach(function(A){this[A]=function(){const I=new this.constructor(this);return b.children.push(I),I[A].apply(I,arguments)}},this)},M.prototype._init=function(b){const A=this._baseState;f(A.parent===null),b.call(this),A.children=A.children.filter(function(E){return E._baseState.parent===this},this),f.equal(A.children.length,1,"Root node can have only one child")},M.prototype._useArgs=function(b){const A=this._baseState,E=b.filter(function(I){return I instanceof this.constructor},this);b=b.filter(function(I){return!(I instanceof this.constructor)},this),E.length!==0&&(f(A.children===null),A.children=E,E.forEach(function(I){I._baseState.parent=this},this)),b.length!==0&&(f(A.args===null),A.args=b,A.reverseArgs=b.map(function(I){if(typeof I!="object"||I.constructor!==Object)return I;const R={};return Object.keys(I).forEach(function(T){T==(T|0)&&(T|=0);const B=I[T];R[B]=T}),R}))},x.forEach(function(w){M.prototype[w]=function(){const A=this._baseState;throw new Error(w+" not implemented for encoding: "+A.enc)}}),g.forEach(function(w){M.prototype[w]=function(){const A=this._baseState,E=Array.prototype.slice.call(arguments);return f(A.tag===null),A.tag=w,this._useArgs(E),this}}),M.prototype.use=function(b){f(b);const A=this._baseState;return f(A.use===null),A.use=b,this},M.prototype.optional=function(){const b=this._baseState;return b.optional=!0,this},M.prototype.def=function(b){const A=this._baseState;return f(A.default===null),A.default=b,A.optional=!0,this},M.prototype.explicit=function(b){const A=this._baseState;return f(A.explicit===null&&A.implicit===null),A.explicit=b,this},M.prototype.implicit=function(b){const A=this._baseState;return f(A.explicit===null&&A.implicit===null),A.implicit=b,this},M.prototype.obj=function(){const b=this._baseState,A=Array.prototype.slice.call(arguments);return b.obj=!0,A.length!==0&&this._useArgs(A),this},M.prototype.key=function(b){const A=this._baseState;return f(A.key===null),A.key=b,this},M.prototype.any=function(){const b=this._baseState;return b.any=!0,this},M.prototype.choice=function(b){const A=this._baseState;return f(A.choice===null),A.choice=b,this._useArgs(Object.keys(b).map(function(E){return b[E]})),this},M.prototype.contains=function(b){const A=this._baseState;return f(A.use===null),A.contains=b,this},M.prototype._decode=function(b,A){const E=this._baseState;if(E.parent===null)return b.wrapResult(E.children[0]._decode(b,A));let I=E.default,R=!0,T=null;if(E.key!==null&&(T=b.enterKey(E.key)),E.optional){let D=null;if(E.explicit!==null?D=E.explicit:E.implicit!==null?D=E.implicit:E.tag!==null&&(D=E.tag),D===null&&!E.any){const q=b.save();try{E.choice===null?this._decodeGeneric(E.tag,b,A):this._decodeChoice(b,A),R=!0}catch{R=!1}b.restore(q)}else if(R=this._peekTag(b,D,E.any),b.isError(R))return R}let B;if(E.obj&&R&&(B=b.enterObject()),R){if(E.explicit!==null){const q=this._decodeTag(b,E.explicit);if(b.isError(q))return q;b=q}const D=b.offset;if(E.use===null&&E.choice===null){let q;E.any&&(q=b.save());const k=this._decodeTag(b,E.implicit!==null?E.implicit:E.tag,E.any);if(b.isError(k))return k;E.any?I=b.raw(q):b=k}if(A&&A.track&&E.tag!==null&&A.track(b.path(),D,b.length,"tagged"),A&&A.track&&E.tag!==null&&A.track(b.path(),b.offset,b.length,"content"),E.any||(E.choice===null?I=this._decodeGeneric(E.tag,b,A):I=this._decodeChoice(b,A)),b.isError(I))return I;if(!E.any&&E.choice===null&&E.children!==null&&E.children.forEach(function(k){k._decode(b,A)}),E.contains&&(E.tag==="octstr"||E.tag==="bitstr")){const q=new a(I);I=this._getUse(E.contains,b._reporterState.obj)._decode(q,A)}}return E.obj&&R&&(I=b.leaveObject(B)),E.key!==null&&(I!==null||R===!0)?b.leaveKey(T,E.key,I):T!==null&&b.exitKey(T),I},M.prototype._decodeGeneric=function(b,A,E){const I=this._baseState;return b==="seq"||b==="set"?null:b==="seqof"||b==="setof"?this._decodeList(A,b,I.args[0],E):/str$/.test(b)?this._decodeStr(A,b,E):b==="objid"&&I.args?this._decodeObjid(A,I.args[0],I.args[1],E):b==="objid"?this._decodeObjid(A,null,null,E):b==="gentime"||b==="utctime"?this._decodeTime(A,b,E):b==="null_"?this._decodeNull(A,E):b==="bool"?this._decodeBool(A,E):b==="objDesc"?this._decodeStr(A,b,E):b==="int"||b==="enum"?this._decodeInt(A,I.args&&I.args[0],E):I.use!==null?this._getUse(I.use,A._reporterState.obj)._decode(A,E):A.error("unknown tag: "+b)},M.prototype._getUse=function(b,A){const E=this._baseState;return E.useDecoder=this._use(b,A),f(E.useDecoder._baseState.parent===null),E.useDecoder=E.useDecoder._baseState.children[0],E.implicit!==E.useDecoder._baseState.implicit&&(E.useDecoder=E.useDecoder.clone(),E.useDecoder._baseState.implicit=E.implicit),E.useDecoder},M.prototype._decodeChoice=function(b,A){const E=this._baseState;let I=null,R=!1;return Object.keys(E.choice).some(function(T){const B=b.save(),D=E.choice[T];try{const q=D._decode(b,A);if(b.isError(q))return!1;I={type:T,value:q},R=!0}catch{return b.restore(B),!1}return!0},this),R?I:b.error("Choice not matched")},M.prototype._createEncoderBuffer=function(b){return new i(b,this.reporter)},M.prototype._encode=function(b,A,E){const I=this._baseState;if(I.default!==null&&I.default===b)return;const R=this._encodeValue(b,A,E);if(R!==void 0&&!this._skipDefault(R,A,E))return R},M.prototype._encodeValue=function(b,A,E){const I=this._baseState;if(I.parent===null)return I.children[0]._encode(b,A||new l);let R=null;if(this.reporter=A,I.optional&&b===void 0)if(I.default!==null)b=I.default;else return;let T=null,B=!1;if(I.any)R=this._createEncoderBuffer(b);else if(I.choice)R=this._encodeChoice(b,A);else if(I.contains)T=this._getUse(I.contains,E)._encode(b,A),B=!0;else if(I.children)T=I.children.map(function(D){if(D._baseState.tag==="null_")return D._encode(null,A,b);if(D._baseState.key===null)return A.error("Child should have a key");const q=A.enterKey(D._baseState.key);if(typeof b!="object")return A.error("Child expected, but input is not object");const k=D._encode(b[D._baseState.key],A,b);return A.leaveKey(q),k},this).filter(function(D){return D}),T=this._createEncoderBuffer(T);else if(I.tag==="seqof"||I.tag==="setof"){if(!(I.args&&I.args.length===1))return A.error("Too many args for : "+I.tag);if(!Array.isArray(b))return A.error("seqof/setof, but data is not Array");const D=this.clone();D._baseState.implicit=null,T=this._createEncoderBuffer(b.map(function(q){const k=this._baseState;return this._getUse(k.args[0],b)._encode(q,A)},D))}else I.use!==null?R=this._getUse(I.use,E)._encode(b,A):(T=this._encodePrimitive(I.tag,b),B=!0);if(!I.any&&I.choice===null){const D=I.implicit!==null?I.implicit:I.tag,q=I.implicit===null?"universal":"context";D===null?I.use===null&&A.error("Tag could be omitted only for .use()"):I.use===null&&(R=this._encodeComposite(D,B,q,T))}return I.explicit!==null&&(R=this._encodeComposite(I.explicit,!1,"context",R)),R},M.prototype._encodeChoice=function(b,A){const E=this._baseState,I=E.choice[b.type];return I||f(!1,b.type+" not found in "+JSON.stringify(Object.keys(E.choice))),I._encode(b.value,A)},M.prototype._encodePrimitive=function(b,A){const E=this._baseState;if(/str$/.test(b))return this._encodeStr(A,b);if(b==="objid"&&E.args)return this._encodeObjid(A,E.reverseArgs[0],E.args[1]);if(b==="objid")return this._encodeObjid(A,null,null);if(b==="gentime"||b==="utctime")return this._encodeTime(A,b);if(b==="null_")return this._encodeNull();if(b==="int"||b==="enum")return this._encodeInt(A,E.args&&E.reverseArgs[0]);if(b==="bool")return this._encodeBool(A);if(b==="objDesc")return this._encodeStr(A,b);throw new Error("Unsupported tag: "+b)},M.prototype._isNumstr=function(b){return/^[0-9 ]*$/.test(b)},M.prototype._isPrintstr=function(b){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(b)},S0}var A0={},t1;function Fu(){return t1||(t1=1,function(l){function i(a){const f={};return Object.keys(a).forEach(function(g){(g|0)==g&&(g=g|0);const n=a[g];f[n]=g}),f}l.tagClass={0:"universal",1:"application",2:"context",3:"private"},l.tagClassByName=i(l.tagClass),l.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},l.tagByName=i(l.tag)}(A0)),A0}var I0,e1;function fg(){if(e1)return I0;e1=1;const l=sr(),i=Lu().Buffer,a=Uu(),f=Fu();function g(_){this.enc="der",this.name=_.name,this.entity=_,this.tree=new n,this.tree._init(_.body)}I0=g,g.prototype.encode=function(w,b){return this.tree._encode(w,b).join()};function n(_){a.call(this,"der",_)}l(n,a),n.prototype._encodeComposite=function(w,b,A,E){const I=M(w,b,A,this.reporter);if(E.length<128){const B=i.alloc(2);return B[0]=I,B[1]=E.length,this._createEncoderBuffer([B,E])}let R=1;for(let B=E.length;B>=256;B>>=8)R++;const T=i.alloc(1+1+R);T[0]=I,T[1]=128|R;for(let B=1+R,D=E.length;D>0;B--,D>>=8)T[B]=D&255;return this._createEncoderBuffer([T,E])},n.prototype._encodeStr=function(w,b){if(b==="bitstr")return this._createEncoderBuffer([w.unused|0,w.data]);if(b==="bmpstr"){const A=i.alloc(w.length*2);for(let E=0;E<w.length;E++)A.writeUInt16BE(w.charCodeAt(E),E*2);return this._createEncoderBuffer(A)}else return b==="numstr"?this._isNumstr(w)?this._createEncoderBuffer(w):this.reporter.error("Encoding of string type: numstr supports only digits and space"):b==="printstr"?this._isPrintstr(w)?this._createEncoderBuffer(w):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(b)?this._createEncoderBuffer(w):b==="objDesc"?this._createEncoderBuffer(w):this.reporter.error("Encoding of string type: "+b+" unsupported")},n.prototype._encodeObjid=function(w,b,A){if(typeof w=="string"){if(!b)return this.reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(w))return this.reporter.error("objid not found in values map");w=b[w].split(/[\s.]+/g);for(let T=0;T<w.length;T++)w[T]|=0}else if(Array.isArray(w)){w=w.slice();for(let T=0;T<w.length;T++)w[T]|=0}if(!Array.isArray(w))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(w));if(!A){if(w[1]>=40)return this.reporter.error("Second objid identifier OOB");w.splice(0,2,w[0]*40+w[1])}let E=0;for(let T=0;T<w.length;T++){let B=w[T];for(E++;B>=128;B>>=7)E++}const I=i.alloc(E);let R=I.length-1;for(let T=w.length-1;T>=0;T--){let B=w[T];for(I[R--]=B&127;(B>>=7)>0;)I[R--]=128|B&127}return this._createEncoderBuffer(I)};function x(_){return _<10?"0"+_:_}n.prototype._encodeTime=function(w,b){let A;const E=new Date(w);return b==="gentime"?A=[x(E.getUTCFullYear()),x(E.getUTCMonth()+1),x(E.getUTCDate()),x(E.getUTCHours()),x(E.getUTCMinutes()),x(E.getUTCSeconds()),"Z"].join(""):b==="utctime"?A=[x(E.getUTCFullYear()%100),x(E.getUTCMonth()+1),x(E.getUTCDate()),x(E.getUTCHours()),x(E.getUTCMinutes()),x(E.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(A,"octstr")},n.prototype._encodeNull=function(){return this._createEncoderBuffer("")},n.prototype._encodeInt=function(w,b){if(typeof w=="string"){if(!b)return this.reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(w))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(w));w=b[w]}if(typeof w!="number"&&!i.isBuffer(w)){const I=w.toArray();!w.sign&&I[0]&128&&I.unshift(0),w=i.from(I)}if(i.isBuffer(w)){let I=w.length;w.length===0&&I++;const R=i.alloc(I);return w.copy(R),w.length===0&&(R[0]=0),this._createEncoderBuffer(R)}if(w<128)return this._createEncoderBuffer(w);if(w<256)return this._createEncoderBuffer([0,w]);let A=1;for(let I=w;I>=256;I>>=8)A++;const E=new Array(A);for(let I=E.length-1;I>=0;I--)E[I]=w&255,w>>=8;return E[0]&128&&E.unshift(0),this._createEncoderBuffer(i.from(E))},n.prototype._encodeBool=function(w){return this._createEncoderBuffer(w?255:0)},n.prototype._use=function(w,b){return typeof w=="function"&&(w=w(b)),w._getEncoder("der").tree},n.prototype._skipDefault=function(w,b,A){const E=this._baseState;let I;if(E.default===null)return!1;const R=w.join();if(E.defaultBuffer===void 0&&(E.defaultBuffer=this._encodeValue(E.default,b,A).join()),R.length!==E.defaultBuffer.length)return!1;for(I=0;I<R.length;I++)if(R[I]!==E.defaultBuffer[I])return!1;return!0};function M(_,w,b,A){let E;if(_==="seqof"?_="seq":_==="setof"&&(_="set"),f.tagByName.hasOwnProperty(_))E=f.tagByName[_];else if(typeof _=="number"&&(_|0)===_)E=_;else return A.error("Unknown tag: "+_);return E>=31?A.error("Multi-octet tag encoding unsupported"):(w||(E|=32),E|=f.tagClassByName[b||"universal"]<<6,E)}return I0}var R0,r1;function l_(){if(r1)return R0;r1=1;const l=sr(),i=fg();function a(f){i.call(this,f),this.enc="pem"}return l(a,i),R0=a,a.prototype.encode=function(g,n){const M=i.prototype.encode.call(this,g).toString("base64"),_=["-----BEGIN "+n.label+"-----"];for(let w=0;w<M.length;w+=64)_.push(M.slice(w,w+64));return _.push("-----END "+n.label+"-----"),_.join(`
`)},R0}var i1;function hg(){return i1||(i1=1,function(l){const i=l;i.der=fg(),i.pem=l_()}(M0)),M0}var P0={},O0,n1;function ug(){if(n1)return O0;n1=1;const l=sr(),i=og(),a=Xs().DecoderBuffer,f=Uu(),g=Fu();function n(w){this.enc="der",this.name=w.name,this.entity=w,this.tree=new x,this.tree._init(w.body)}O0=n,n.prototype.decode=function(b,A){return a.isDecoderBuffer(b)||(b=new a(b,A)),this.tree._decode(b,A)};function x(w){f.call(this,"der",w)}l(x,f),x.prototype._peekTag=function(b,A,E){if(b.isEmpty())return!1;const I=b.save(),R=M(b,'Failed to peek tag: "'+A+'"');return b.isError(R)?R:(b.restore(I),R.tag===A||R.tagStr===A||R.tagStr+"of"===A||E)},x.prototype._decodeTag=function(b,A,E){const I=M(b,'Failed to decode tag of "'+A+'"');if(b.isError(I))return I;let R=_(b,I.primitive,'Failed to get length of "'+A+'"');if(b.isError(R))return R;if(!E&&I.tag!==A&&I.tagStr!==A&&I.tagStr+"of"!==A)return b.error('Failed to match tag: "'+A+'"');if(I.primitive||R!==null)return b.skip(R,'Failed to match body of: "'+A+'"');const T=b.save(),B=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+this.tag+'"');return b.isError(B)?B:(R=b.offset-T.offset,b.restore(T),b.skip(R,'Failed to match body of: "'+A+'"'))},x.prototype._skipUntilEnd=function(b,A){for(;;){const E=M(b,A);if(b.isError(E))return E;const I=_(b,E.primitive,A);if(b.isError(I))return I;let R;if(E.primitive||I!==null?R=b.skip(I):R=this._skipUntilEnd(b,A),b.isError(R))return R;if(E.tagStr==="end")break}},x.prototype._decodeList=function(b,A,E,I){const R=[];for(;!b.isEmpty();){const T=this._peekTag(b,"end");if(b.isError(T))return T;const B=E.decode(b,"der",I);if(b.isError(B)&&T)break;R.push(B)}return R},x.prototype._decodeStr=function(b,A){if(A==="bitstr"){const E=b.readUInt8();return b.isError(E)?E:{unused:E,data:b.raw()}}else if(A==="bmpstr"){const E=b.raw();if(E.length%2===1)return b.error("Decoding of string type: bmpstr length mismatch");let I="";for(let R=0;R<E.length/2;R++)I+=String.fromCharCode(E.readUInt16BE(R*2));return I}else if(A==="numstr"){const E=b.raw().toString("ascii");return this._isNumstr(E)?E:b.error("Decoding of string type: numstr unsupported characters")}else{if(A==="octstr")return b.raw();if(A==="objDesc")return b.raw();if(A==="printstr"){const E=b.raw().toString("ascii");return this._isPrintstr(E)?E:b.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(A)?b.raw().toString():b.error("Decoding of string type: "+A+" unsupported")}},x.prototype._decodeObjid=function(b,A,E){let I;const R=[];let T=0,B=0;for(;!b.isEmpty();)B=b.readUInt8(),T<<=7,T|=B&127,(B&128)===0&&(R.push(T),T=0);B&128&&R.push(T);const D=R[0]/40|0,q=R[0]%40;if(E?I=R:I=[D,q].concat(R.slice(1)),A){let k=A[I.join(" ")];k===void 0&&(k=A[I.join(".")]),k!==void 0&&(I=k)}return I},x.prototype._decodeTime=function(b,A){const E=b.raw().toString();let I,R,T,B,D,q;if(A==="gentime")I=E.slice(0,4)|0,R=E.slice(4,6)|0,T=E.slice(6,8)|0,B=E.slice(8,10)|0,D=E.slice(10,12)|0,q=E.slice(12,14)|0;else if(A==="utctime")I=E.slice(0,2)|0,R=E.slice(2,4)|0,T=E.slice(4,6)|0,B=E.slice(6,8)|0,D=E.slice(8,10)|0,q=E.slice(10,12)|0,I<70?I=2e3+I:I=1900+I;else return b.error("Decoding "+A+" time is not supported yet");return Date.UTC(I,R-1,T,B,D,q,0)},x.prototype._decodeNull=function(){return null},x.prototype._decodeBool=function(b){const A=b.readUInt8();return b.isError(A)?A:A!==0},x.prototype._decodeInt=function(b,A){const E=b.raw();let I=new i(E);return A&&(I=A[I.toString(10)]||I),I},x.prototype._use=function(b,A){return typeof b=="function"&&(b=b(A)),b._getDecoder("der").tree};function M(w,b){let A=w.readUInt8(b);if(w.isError(A))return A;const E=g.tagClass[A>>6],I=(A&32)===0;if((A&31)===31){let T=A;for(A=0;(T&128)===128;){if(T=w.readUInt8(b),w.isError(T))return T;A<<=7,A|=T&127}}else A&=31;const R=g.tag[A];return{cls:E,primitive:I,tag:A,tagStr:R}}function _(w,b,A){let E=w.readUInt8(A);if(w.isError(E))return E;if(!b&&E===128)return null;if((E&128)===0)return E;const I=E&127;if(I>4)return w.error("length octect is too long");E=0;for(let R=0;R<I;R++){E<<=8;const T=w.readUInt8(A);if(w.isError(T))return T;E|=T}return E}return O0}var T0,s1;function d_(){if(s1)return T0;s1=1;const l=sr(),i=Lu().Buffer,a=ug();function f(g){a.call(this,g),this.enc="pem"}return l(f,a),T0=f,f.prototype.decode=function(n,x){const M=n.toString().split(/[\r\n]+/g),_=x.label.toUpperCase(),w=/^-----(BEGIN|END) ([^-]+)-----$/;let b=-1,A=-1;for(let R=0;R<M.length;R++){const T=M[R].match(w);if(T!==null&&T[2]===_)if(b===-1){if(T[1]!=="BEGIN")break;b=R}else{if(T[1]!=="END")break;A=R;break}}if(b===-1||A===-1)throw new Error("PEM section not found for: "+_);const E=M.slice(b+1,A).join("");E.replace(/[^a-z0-9+/=]+/gi,"");const I=i.from(E,"base64");return a.prototype.decode.call(this,I,x)},T0}var a1;function cg(){return a1||(a1=1,function(l){const i=l;i.der=ug(),i.pem=d_()}(P0)),P0}var o1;function p_(){return o1||(o1=1,function(l){const i=hg(),a=cg(),f=sr(),g=l;g.define=function(M,_){return new n(M,_)};function n(x,M){this.name=x,this.body=M,this.decoders={},this.encoders={}}n.prototype._createNamed=function(M){const _=this.name;function w(b){this._initNamed(b,_)}return f(w,M),w.prototype._initNamed=function(A,E){M.call(this,A,E)},new w(this)},n.prototype._getDecoder=function(M){return M=M||"der",this.decoders.hasOwnProperty(M)||(this.decoders[M]=this._createNamed(a[M])),this.decoders[M]},n.prototype.decode=function(M,_,w){return this._getDecoder(_).decode(M,w)},n.prototype._getEncoder=function(M){return M=M||"der",this.encoders.hasOwnProperty(M)||(this.encoders[M]=this._createNamed(i[M])),this.encoders[M]},n.prototype.encode=function(M,_,w){return this._getEncoder(_).encode(M,w)}}(_0)),_0}var C0={},f1;function v_(){return f1||(f1=1,function(l){const i=l;i.Reporter=ku().Reporter,i.DecoderBuffer=Xs().DecoderBuffer,i.EncoderBuffer=Xs().EncoderBuffer,i.Node=Uu()}(C0)),C0}var B0={},h1;function g_(){return h1||(h1=1,function(l){const i=l;i._reverse=function(f){const g={};return Object.keys(f).forEach(function(n){(n|0)==n&&(n=n|0);const x=f[n];g[x]=n}),g},i.der=Fu()}(B0)),B0}var u1;function lg(){return u1||(u1=1,function(l){const i=l;i.bignum=og(),i.define=p_().define,i.base=v_(),i.constants=g_(),i.decoders=cg(),i.encoders=hg()}(y0)),y0}var q0,c1;function m_(){if(c1)return q0;c1=1;var l=lg(),i=l.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=l.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),f=l.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),g=l.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(f),this.key("subjectPublicKey").bitstr())}),n=l.define("RelativeDistinguishedName",function(){this.setof(a)}),x=l.define("RDNSequence",function(){this.seqof(n)}),M=l.define("Name",function(){this.choice({rdnSequence:this.use(x)})}),_=l.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),w=l.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),b=l.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(f),this.key("issuer").use(M),this.key("validity").use(_),this.key("subject").use(M),this.key("subjectPublicKeyInfo").use(g),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(w).optional())}),A=l.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(b),this.key("signatureAlgorithm").use(f),this.key("signatureValue").bitstr())});return q0=A,q0}var l1;function b_(){if(l1)return gi;l1=1;var l=lg();gi.certificate=m_();var i=l.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});gi.RSAPrivateKey=i;var a=l.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});gi.RSAPublicKey=a;var f=l.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(g),this.key("subjectPublicKey").bitstr())});gi.PublicKey=f;var g=l.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),n=l.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(g),this.key("subjectPrivateKey").octstr())});gi.PrivateKey=n;var x=l.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});gi.EncryptedPrivateKey=x;var M=l.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});gi.DSAPrivateKey=M,gi.DSAparam=l.define("DSAparam",function(){this.int()});var _=l.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(w),this.key("publicKey").optional().explicit(1).bitstr())});gi.ECPrivateKey=_;var w=l.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});return gi.signature=l.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),gi}const y_={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var N0,d1;function w_(){if(d1)return N0;d1=1;var l=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,f=Uo(),g=Cu(),n=qe().Buffer;return N0=function(x,M){var _=x.toString(),w=_.match(l),b;if(w){var E="aes"+w[1],I=n.from(w[2],"hex"),R=n.from(w[3].replace(/[\r\n]/g,""),"base64"),T=f(M,I.slice(0,8),parseInt(w[1],10)).key,B=[],D=g.createDecipheriv(E,T,I);B.push(D.update(R)),B.push(D.final()),b=n.concat(B)}else{var A=_.match(a);b=n.from(A[2].replace(/[\r\n]/g,""),"base64")}var q=_.match(i)[1];return{tag:q,data:b}},N0}var D0,p1;function $o(){if(p1)return D0;p1=1;var l=b_(),i=y_,a=w_(),f=Cu(),g=Wv(),n=qe().Buffer;D0=x;function x(_){var w;typeof _=="object"&&!n.isBuffer(_)&&(w=_.passphrase,_=_.key),typeof _=="string"&&(_=n.from(_));var b=a(_,w),A=b.tag,E=b.data,I,R;switch(A){case"CERTIFICATE":R=l.certificate.decode(E,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(R||(R=l.PublicKey.decode(E,"der")),I=R.algorithm.algorithm.join("."),I){case"1.2.840.113549.1.1.1":return l.RSAPublicKey.decode(R.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return R.subjectPrivateKey=R.subjectPublicKey,{type:"ec",data:R};case"1.2.840.10040.4.1":return R.algorithm.params.pub_key=l.DSAparam.decode(R.subjectPublicKey.data,"der"),{type:"dsa",data:R.algorithm.params};default:throw new Error("unknown key id "+I)}case"ENCRYPTED PRIVATE KEY":E=l.EncryptedPrivateKey.decode(E,"der"),E=M(E,w);case"PRIVATE KEY":switch(R=l.PrivateKey.decode(E,"der"),I=R.algorithm.algorithm.join("."),I){case"1.2.840.113549.1.1.1":return l.RSAPrivateKey.decode(R.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:R.algorithm.curve,privateKey:l.ECPrivateKey.decode(R.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return R.algorithm.params.priv_key=l.DSAparam.decode(R.subjectPrivateKey,"der"),{type:"dsa",params:R.algorithm.params};default:throw new Error("unknown key id "+I)}case"RSA PUBLIC KEY":return l.RSAPublicKey.decode(E,"der");case"RSA PRIVATE KEY":return l.RSAPrivateKey.decode(E,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:l.DSAPrivateKey.decode(E,"der")};case"EC PRIVATE KEY":return E=l.ECPrivateKey.decode(E,"der"),{curve:E.parameters.value,privateKey:E.privateKey};default:throw new Error("unknown key type "+A)}}x.signature=l.signature;function M(_,w){var b=_.algorithm.decrypt.kde.kdeparams.salt,A=parseInt(_.algorithm.decrypt.kde.kdeparams.iters.toString(),10),E=i[_.algorithm.decrypt.cipher.algo.join(".")],I=_.algorithm.decrypt.cipher.iv,R=_.subjectPrivateKey,T=parseInt(E.split("-")[1],10)/8,B=g.pbkdf2Sync(w,b,A,T,"sha1"),D=f.createDecipheriv(E,B,I),q=[];return q.push(D.update(R)),q.push(D.final()),n.concat(q)}return D0}const dg={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var v1;function __(){if(v1)return zs.exports;v1=1;var l=qe().Buffer,i=Hv(),a=qu(),f=Du().ec,g=xu.exports,n=$o(),x=dg;function M(B,D,q,k,N){var K=n(D);if(K.curve){if(k!=="ecdsa"&&k!=="ecdsa/rsa")throw new Error("wrong private key type");return _(B,K)}else if(K.type==="dsa"){if(k!=="dsa")throw new Error("wrong private key type");return w(B,K,q)}else if(k!=="rsa"&&k!=="ecdsa/rsa")throw new Error("wrong private key type");B=l.concat([N,B]);for(var $=K.modulus.byteLength(),P=[0,1];B.length+P.length+1<$;)P.push(255);P.push(0);for(var z=-1;++z<B.length;)P.push(B[z]);var Y=a(P,K);return Y}function _(B,D){var q=x[D.curve.join(".")];if(!q)throw new Error("unknown curve "+D.curve.join("."));var k=new f(q),N=k.keyFromPrivate(D.privateKey),K=N.sign(B);return l.from(K.toDER())}function w(B,D,q){for(var k=D.params.priv_key,N=D.params.p,K=D.params.q,$=D.params.g,P=new g(0),z,Y=E(B,K).mod(K),nt=!1,v=A(k,K,B,q);nt===!1;)z=R(K,v,q),P=T($,z,N,K),nt=z.invm(K).imul(Y.add(k.mul(P))).mod(K),nt.cmpn(0)===0&&(nt=!1,P=new g(0));return b(P,nt)}function b(B,D){B=B.toArray(),D=D.toArray(),B[0]&128&&(B=[0].concat(B)),D[0]&128&&(D=[0].concat(D));var q=B.length+D.length+4,k=[48,q,2,B.length];return k=k.concat(B,[2,D.length],D),l.from(k)}function A(B,D,q,k){if(B=l.from(B.toArray()),B.length<D.byteLength()){var N=l.alloc(D.byteLength()-B.length);B=l.concat([N,B])}var K=q.length,$=I(q,D),P=l.alloc(K);P.fill(1);var z=l.alloc(K);return z=i(k,z).update(P).update(l.from([0])).update(B).update($).digest(),P=i(k,z).update(P).digest(),z=i(k,z).update(P).update(l.from([1])).update(B).update($).digest(),P=i(k,z).update(P).digest(),{k:z,v:P}}function E(B,D){var q=new g(B),k=(B.length<<3)-D.bitLength();return k>0&&q.ishrn(k),q}function I(B,D){B=E(B,D),B=B.mod(D);var q=l.from(B.toArray());if(q.length<D.byteLength()){var k=l.alloc(D.byteLength()-q.length);q=l.concat([k,q])}return q}function R(B,D,q){var k,N;do{for(k=l.alloc(0);k.length*8<B.bitLength();)D.v=i(q,D.k).update(D.v).digest(),k=l.concat([k,D.v]);N=E(k,B),D.k=i(q,D.k).update(D.v).update(l.from([0])).digest(),D.v=i(q,D.k).update(D.v).digest()}while(N.cmp(B)!==-1);return N}function T(B,D,q,k){return B.toRed(g.mont(q)).redPow(D).fromRed().mod(k)}return zs.exports=M,zs.exports.getKey=A,zs.exports.makeKey=R,zs.exports}var L0,g1;function M_(){if(g1)return L0;g1=1;var l=qe().Buffer,i=xu.exports,a=Du().ec,f=$o(),g=dg;function n(w,b,A,E,I){var R=f(A);if(R.type==="ec"){if(E!=="ecdsa"&&E!=="ecdsa/rsa")throw new Error("wrong public key type");return x(w,b,R)}else if(R.type==="dsa"){if(E!=="dsa")throw new Error("wrong public key type");return M(w,b,R)}else if(E!=="rsa"&&E!=="ecdsa/rsa")throw new Error("wrong public key type");b=l.concat([I,b]);for(var T=R.modulus.byteLength(),B=[1],D=0;b.length+B.length+2<T;)B.push(255),D++;B.push(0);for(var q=-1;++q<b.length;)B.push(b[q]);B=l.from(B);var k=i.mont(R.modulus);w=new i(w).toRed(k),w=w.redPow(new i(R.publicExponent)),w=l.from(w.fromRed().toArray());var N=D<8?1:0;for(T=Math.min(w.length,B.length),w.length!==B.length&&(N=1),q=-1;++q<T;)N|=w[q]^B[q];return N===0}function x(w,b,A){var E=g[A.data.algorithm.curve.join(".")];if(!E)throw new Error("unknown curve "+A.data.algorithm.curve.join("."));var I=new a(E),R=A.data.subjectPrivateKey.data;return I.verify(b,w,R)}function M(w,b,A){var E=A.data.p,I=A.data.q,R=A.data.g,T=A.data.pub_key,B=f.signature.decode(w,"der"),D=B.s,q=B.r;_(D,I),_(q,I);var k=i.mont(E),N=D.invm(I),K=R.toRed(k).redPow(new i(b).mul(N).mod(I)).fromRed().mul(T.toRed(k).redPow(q.mul(N).mod(I)).fromRed()).mod(E).mod(I);return K.cmp(q)===0}function _(w,b){if(w.cmpn(0)<=0)throw new Error("invalid sig");if(w.cmp(b)>=b)throw new Error("invalid sig")}return L0=n,L0}var k0,m1;function x_(){if(m1)return k0;m1=1;var l=qe().Buffer,i=ia(),a=Nv(),f=sr(),g=__(),n=M_(),x=Kv;Object.keys(x).forEach(function(A){x[A].id=l.from(x[A].id,"hex"),x[A.toLowerCase()]=x[A]});function M(A){a.Writable.call(this);var E=x[A];if(!E)throw new Error("Unknown message digest");this._hashType=E.hash,this._hash=i(E.hash),this._tag=E.id,this._signType=E.sign}f(M,a.Writable),M.prototype._write=function(E,I,R){this._hash.update(E),R()},M.prototype.update=function(E,I){return typeof E=="string"&&(E=l.from(E,I)),this._hash.update(E),this},M.prototype.sign=function(E,I){this.end();var R=this._hash.digest(),T=g(R,E,this._hashType,this._signType,this._tag);return I?T.toString(I):T};function _(A){a.Writable.call(this);var E=x[A];if(!E)throw new Error("Unknown message digest");this._hash=i(E.hash),this._tag=E.id,this._signType=E.sign}f(_,a.Writable),_.prototype._write=function(E,I,R){this._hash.update(E),R()},_.prototype.update=function(E,I){return typeof E=="string"&&(E=l.from(E,I)),this._hash.update(E),this},_.prototype.verify=function(E,I,R){typeof I=="string"&&(I=l.from(I,R)),this.end();var T=this._hash.digest();return n(I,T,E,this._signType,this._tag)};function w(A){return new M(A)}function b(A){return new _(A)}return k0={Sign:w,Verify:b,createSign:w,createVerify:b},k0}var U0={exports:{}},b1;function E_(){return b1||(b1=1,function(l){(function(i,a){function f(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function n(v,t,r){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=n:a.BN=n,n.BN=n,n.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=Ee.Buffer}catch{}n.isBN=function(t){return t instanceof n?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,r){return t.cmp(r)>0?t:r},n.min=function(t,r){return t.cmp(r)<0?t:r},n.prototype._init=function(t,r,s){if(typeof t=="number")return this._initNumber(t,r,s);if(typeof t=="object")return this._initArray(t,r,s);r==="hex"&&(r=16),f(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&(h++,this.negative=1),h<t.length&&(r===16?this._parseHex(t,h,s):(this._parseBase(t,r,h),s==="le"&&this._initArray(this.toArray(),r,s)))},n.prototype._initNumber=function(t,r,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(f(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),r,s)},n.prototype._initArray=function(t,r,s){if(f(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,m,y=0;if(s==="be")for(h=t.length-1,d=0;h>=0;h-=3)m=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(s==="le")for(h=0,d=0;h<t.length;h+=3)m=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function M(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var s=M(v,r);return r-1>=t&&(s|=M(v,r-1)<<4),s}n.prototype._parseHex=function(t,r,s){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d=0,m=0,y;if(s==="be")for(h=t.length-1;h>=r;h-=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(h=u%2===0?r+1:r;h<t.length;h+=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function w(v,t,r,s){for(var h=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;h*=s,y>=49?h+=y-49+10:y>=17?h+=y-17+10:h+=y}return h}n.prototype._parseBase=function(t,r,s){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=r)h++;h--,d=d/r|0;for(var m=t.length-s,y=m%h,u=Math.min(m,m-y)+s,e=0,c=s;c<u;c+=h)e=w(t,c,c+h,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var F=1;for(e=w(t,c,t.length,r),c=0;c<y;c++)F*=r;this.imuln(F),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,r){t=t||10,r=r|0||1;var s;if(t===16||t==="hex"){s="";for(var h=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<h|d)&16777215).toString(16);d=y>>>24-h&16777215,d!==0||m!==this.length-1?s=b[6-u.length]+u+s:s=u+s,h+=2,h>=26&&(h-=26,m--)}for(d!==0&&(s=d.toString(16)+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(t===(t|0)&&t>=2&&t<=36){var e=A[t],c=E[t];s="";var F=this.clone();for(F.negative=0;!F.isZero();){var L=F.modn(c).toString(t);F=F.idivn(c),F.isZero()?s=L+s:s=b[e-L.length]+L+s}for(this.isZero()&&(s="0"+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}f(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,r){return f(typeof x<"u"),this.toArrayLike(x,t,r)},n.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},n.prototype.toArrayLike=function(t,r,s){var h=this.byteLength(),d=s||Math.max(1,h);f(h<=d,"byte array longer than desired length"),f(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,c=this.clone();if(m){for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-h;e++)y[e]=0;for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[d-e-1]=u}return y},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var r=t,s=0;return r>=4096&&(s+=13,r>>>=13),r>=64&&(s+=7,r>>>=7),r>=8&&(s+=4,r>>>=4),r>=2&&(s+=2,r>>>=2),s+r},n.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,s=0;return(r&8191)===0&&(s+=13,r>>>=13),(r&127)===0&&(s+=7,r>>>=7),(r&15)===0&&(s+=4,r>>>=4),(r&3)===0&&(s+=2,r>>>=2),(r&1)===0&&s++,s},n.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function I(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var s=r/26|0,h=r%26;t[r]=(v.words[s]&1<<h)>>>h}return t}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var s=this._zeroBits(this.words[r]);if(t+=s,s!==26)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},n.prototype.ior=function(t){return f((this.negative|t.negative)===0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=r.length,this.strip()},n.prototype.iand=function(t){return f((this.negative|t.negative)===0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var r,s;this.length>t.length?(r=this,s=t):(r=t,s=this);for(var h=0;h<s.length;h++)this.words[h]=r.words[h]^s.words[h];if(this!==r)for(;h<r.length;h++)this.words[h]=r.words[h];return this.length=r.length,this.strip()},n.prototype.ixor=function(t){return f((this.negative|t.negative)===0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){f(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,s=t%26;this._expand(r),s>0&&r--;for(var h=0;h<r;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,r){f(typeof t=="number"&&t>=0);var s=t/26|0,h=t%26;return this._expand(s+1),r?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},n.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var s,h;this.length>t.length?(s=this,h=t):(s=t,h=this);for(var d=0,m=0;m<h.length;m++)r=(s.words[m]|0)+(h.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<s.length;m++)r=(s.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=s.length,d!==0)this.words[this.length]=d,this.length++;else if(s!==this)for(;m<s.length;m++)this.words[m]=s.words[m];return this},n.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var s=this.cmp(t);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;s>0?(h=this,d=t):(h=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(h.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<h.length;y++)r=(h.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<h.length&&h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=Math.max(this.length,y),h!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};function R(v,t,r){r.negative=t.negative^v.negative;var s=v.length+t.length|0;r.length=s,s=s-1|0;var h=v.words[0]|0,d=t.words[0]|0,m=h*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<s;e++){for(var c=u>>>26,F=u&67108863,L=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=L;H++){var G=e-H|0;h=v.words[G]|0,d=t.words[H]|0,m=h*d+F,c+=m/67108864|0,F=m&67108863}r.words[e]=F|0,u=c|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var T=function(t,r,s){var h=t.words,d=r.words,m=s.words,y=0,u,e,c,F=h[0]|0,L=F&8191,H=F>>>13,G=h[1]|0,tt=G&8191,Z=G>>>13,et=h[2]|0,j=et&8191,O=et>>>13,Q=h[3]|0,rt=Q&8191,st=Q>>>13,Jt=h[4]|0,gt=Jt&8191,mt=Jt>>>13,ee=h[5]|0,_t=ee&8191,Mt=ee>>>13,ie=h[6]|0,ut=ie&8191,pt=ie>>>13,Xt=h[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=h[8]|0,ht=Qt&8191,dt=Qt>>>13,ne=h[9]|0,ct=ne&8191,bt=ne>>>13,se=d[0]|0,yt=se&8191,wt=se>>>13,ae=d[1]|0,qt=ae&8191,Lt=ae>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Ut=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,me=d[5]|0,xt=me&8191,Ot=me>>>13,xe=d[6]|0,It=xe&8191,Tt=xe>>>13,we=d[7]|0,Pt=we&8191,Rt=we>>>13,ue=d[8]|0,Ct=ue&8191,Bt=ue>>>13,pr=d[9]|0,Ft=pr&8191,$t=pr>>>13;s.negative=t.negative^r.negative,s.length=19,u=Math.imul(L,yt),e=Math.imul(L,wt),e=e+Math.imul(H,yt)|0,c=Math.imul(H,wt);var Ae=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,c=Math.imul(Z,wt),u=u+Math.imul(L,qt)|0,e=e+Math.imul(L,Lt)|0,e=e+Math.imul(H,qt)|0,c=c+Math.imul(H,Lt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(j,yt),e=Math.imul(j,wt),e=e+Math.imul(O,yt)|0,c=Math.imul(O,wt),u=u+Math.imul(tt,qt)|0,e=e+Math.imul(tt,Lt)|0,e=e+Math.imul(Z,qt)|0,c=c+Math.imul(Z,Lt)|0,u=u+Math.imul(L,Nt)|0,e=e+Math.imul(L,kt)|0,e=e+Math.imul(H,Nt)|0,c=c+Math.imul(H,kt)|0;var je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(je>>>26)|0,je&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,c=Math.imul(st,wt),u=u+Math.imul(j,qt)|0,e=e+Math.imul(j,Lt)|0,e=e+Math.imul(O,qt)|0,c=c+Math.imul(O,Lt)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,c=c+Math.imul(Z,kt)|0,u=u+Math.imul(L,Ut)|0,e=e+Math.imul(L,Et)|0,e=e+Math.imul(H,Ut)|0,c=c+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,c=Math.imul(mt,wt),u=u+Math.imul(rt,qt)|0,e=e+Math.imul(rt,Lt)|0,e=e+Math.imul(st,qt)|0,c=c+Math.imul(st,Lt)|0,u=u+Math.imul(j,Nt)|0,e=e+Math.imul(j,kt)|0,e=e+Math.imul(O,Nt)|0,c=c+Math.imul(O,kt)|0,u=u+Math.imul(tt,Ut)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Ut)|0,c=c+Math.imul(Z,Et)|0,u=u+Math.imul(L,St)|0,e=e+Math.imul(L,At)|0,e=e+Math.imul(H,St)|0,c=c+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,c=Math.imul(Mt,wt),u=u+Math.imul(gt,qt)|0,e=e+Math.imul(gt,Lt)|0,e=e+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Lt)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,c=c+Math.imul(st,kt)|0,u=u+Math.imul(j,Ut)|0,e=e+Math.imul(j,Et)|0,e=e+Math.imul(O,Ut)|0,c=c+Math.imul(O,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,c=c+Math.imul(Z,At)|0,u=u+Math.imul(L,xt)|0,e=e+Math.imul(L,Ot)|0,e=e+Math.imul(H,xt)|0,c=c+Math.imul(H,Ot)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,c=Math.imul(pt,wt),u=u+Math.imul(_t,qt)|0,e=e+Math.imul(_t,Lt)|0,e=e+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Lt)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,c=c+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Ut)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Ut)|0,c=c+Math.imul(st,Et)|0,u=u+Math.imul(j,St)|0,e=e+Math.imul(j,At)|0,e=e+Math.imul(O,St)|0,c=c+Math.imul(O,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,xt)|0,c=c+Math.imul(Z,Ot)|0,u=u+Math.imul(L,It)|0,e=e+Math.imul(L,Tt)|0,e=e+Math.imul(H,It)|0,c=c+Math.imul(H,Tt)|0;var Ce=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,c=Math.imul(lt,wt),u=u+Math.imul(ut,qt)|0,e=e+Math.imul(ut,Lt)|0,e=e+Math.imul(pt,qt)|0,c=c+Math.imul(pt,Lt)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,c=c+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Ut)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,c=c+Math.imul(st,At)|0,u=u+Math.imul(j,xt)|0,e=e+Math.imul(j,Ot)|0,e=e+Math.imul(O,xt)|0,c=c+Math.imul(O,Ot)|0,u=u+Math.imul(tt,It)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,It)|0,c=c+Math.imul(Z,Tt)|0,u=u+Math.imul(L,Pt)|0,e=e+Math.imul(L,Rt)|0,e=e+Math.imul(H,Pt)|0,c=c+Math.imul(H,Rt)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,c=Math.imul(dt,wt),u=u+Math.imul(vt,qt)|0,e=e+Math.imul(vt,Lt)|0,e=e+Math.imul(lt,qt)|0,c=c+Math.imul(lt,Lt)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Ut)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Ut)|0,c=c+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,c=c+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,xt)|0,c=c+Math.imul(st,Ot)|0,u=u+Math.imul(j,It)|0,e=e+Math.imul(j,Tt)|0,e=e+Math.imul(O,It)|0,c=c+Math.imul(O,Tt)|0,u=u+Math.imul(tt,Pt)|0,e=e+Math.imul(tt,Rt)|0,e=e+Math.imul(Z,Pt)|0,c=c+Math.imul(Z,Rt)|0,u=u+Math.imul(L,Ct)|0,e=e+Math.imul(L,Bt)|0,e=e+Math.imul(H,Ct)|0,c=c+Math.imul(H,Bt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,c=Math.imul(bt,wt),u=u+Math.imul(ht,qt)|0,e=e+Math.imul(ht,Lt)|0,e=e+Math.imul(dt,qt)|0,c=c+Math.imul(dt,Lt)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,c=c+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Ut)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Ut)|0,c=c+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,c=c+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,xt)|0,c=c+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,It)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,It)|0,c=c+Math.imul(st,Tt)|0,u=u+Math.imul(j,Pt)|0,e=e+Math.imul(j,Rt)|0,e=e+Math.imul(O,Pt)|0,c=c+Math.imul(O,Rt)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Bt)|0,e=e+Math.imul(Z,Ct)|0,c=c+Math.imul(Z,Bt)|0,u=u+Math.imul(L,Ft)|0,e=e+Math.imul(L,$t)|0,e=e+Math.imul(H,Ft)|0,c=c+Math.imul(H,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,qt),e=Math.imul(ct,Lt),e=e+Math.imul(bt,qt)|0,c=Math.imul(bt,Lt),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Ut)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Ut)|0,c=c+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,c=c+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,xt)|0,c=c+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,It)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,It)|0,c=c+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Pt)|0,e=e+Math.imul(rt,Rt)|0,e=e+Math.imul(st,Pt)|0,c=c+Math.imul(st,Rt)|0,u=u+Math.imul(j,Ct)|0,e=e+Math.imul(j,Bt)|0,e=e+Math.imul(O,Ct)|0,c=c+Math.imul(O,Bt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,c=c+Math.imul(Z,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,c=Math.imul(bt,kt),u=u+Math.imul(ht,Ut)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Ut)|0,c=c+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,c=c+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,It)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,It)|0,c=c+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Pt)|0,e=e+Math.imul(gt,Rt)|0,e=e+Math.imul(mt,Pt)|0,c=c+Math.imul(mt,Rt)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Bt)|0,e=e+Math.imul(st,Ct)|0,c=c+Math.imul(st,Bt)|0,u=u+Math.imul(j,Ft)|0,e=e+Math.imul(j,$t)|0,e=e+Math.imul(O,Ft)|0,c=c+Math.imul(O,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Ut),e=Math.imul(ct,Et),e=e+Math.imul(bt,Ut)|0,c=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,c=c+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,xt)|0,c=c+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,It)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,It)|0,c=c+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Pt)|0,e=e+Math.imul(_t,Rt)|0,e=e+Math.imul(Mt,Pt)|0,c=c+Math.imul(Mt,Rt)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Bt)|0,e=e+Math.imul(mt,Ct)|0,c=c+Math.imul(mt,Bt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,c=c+Math.imul(st,$t)|0;var Le=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,c=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,It)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,It)|0,c=c+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Pt)|0,e=e+Math.imul(ut,Rt)|0,e=e+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Rt)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Bt)|0,e=e+Math.imul(Mt,Ct)|0,c=c+Math.imul(Mt,Bt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,xt)|0,c=Math.imul(bt,Ot),u=u+Math.imul(ht,It)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,It)|0,c=c+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Pt)|0,e=e+Math.imul(vt,Rt)|0,e=e+Math.imul(lt,Pt)|0,c=c+Math.imul(lt,Rt)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Bt)|0,e=e+Math.imul(pt,Ct)|0,c=c+Math.imul(pt,Bt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,It),e=Math.imul(ct,Tt),e=e+Math.imul(bt,It)|0,c=Math.imul(bt,Tt),u=u+Math.imul(ht,Pt)|0,e=e+Math.imul(ht,Rt)|0,e=e+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Rt)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Bt)|0,e=e+Math.imul(lt,Ct)|0,c=c+Math.imul(lt,Bt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,c=c+Math.imul(pt,$t)|0;var Re=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Re>>>26)|0,Re&=67108863,u=Math.imul(ct,Pt),e=Math.imul(ct,Rt),e=e+Math.imul(bt,Pt)|0,c=Math.imul(bt,Rt),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Bt)|0,e=e+Math.imul(dt,Ct)|0,c=c+Math.imul(dt,Bt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,c=c+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Bt),e=e+Math.imul(bt,Ct)|0,c=Math.imul(bt,Bt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,c=c+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,c=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(c+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Ae,m[1]=Ke,m[2]=je,m[3]=Ve,m[4]=Ge,m[5]=Ze,m[6]=Ce,m[7]=Ne,m[8]=We,m[9]=De,m[10]=Ye,m[11]=Je,m[12]=Le,m[13]=$e,m[14]=ze,m[15]=Re,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,s.length++),s};Math.imul||(T=R);function B(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var s=0,h=0,d=0;d<r.length-1;d++){var m=h;h=0;for(var y=s&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var c=d-e,F=v.words[c]|0,L=t.words[e]|0,H=F*L,G=H&67108863;m=m+(H/67108864|0)|0,G=G+y|0,y=G&67108863,m=m+(G>>>26)|0,h+=m>>>26,m&=67108863}r.words[d]=y,s=m,m=h}return s!==0?r.words[d]=s:r.length--,r.strip()}function D(v,t,r){var s=new q;return s.mulp(v,t,r)}n.prototype.mulTo=function(t,r){var s,h=this.length+t.length;return this.length===10&&t.length===10?s=T(this,t,r):h<63?s=R(this,t,r):h<1024?s=B(this,t,r):s=D(this,t,r),s};function q(v,t){this.x=v,this.y=t}q.prototype.makeRBT=function(t){for(var r=new Array(t),s=n.prototype._countBits(t)-1,h=0;h<t;h++)r[h]=this.revBin(h,s,t);return r},q.prototype.revBin=function(t,r,s){if(t===0||t===s-1)return t;for(var h=0,d=0;d<r;d++)h|=(t&1)<<r-d-1,t>>=1;return h},q.prototype.permute=function(t,r,s,h,d,m){for(var y=0;y<m;y++)h[y]=r[t[y]],d[y]=s[t[y]]},q.prototype.transform=function(t,r,s,h,d,m){this.permute(m,t,r,s,h,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),F=0;F<d;F+=u)for(var L=e,H=c,G=0;G<y;G++){var tt=s[F+G],Z=h[F+G],et=s[F+G+y],j=h[F+G+y],O=L*et-H*j;j=L*j+H*et,et=O,s[F+G]=tt+et,h[F+G]=Z+j,s[F+G+y]=tt-et,h[F+G+y]=Z-j,G!==u&&(O=e*L-c*H,H=e*H+c*L,L=O)}},q.prototype.guessLen13b=function(t,r){var s=Math.max(r,t)|1,h=s&1,d=0;for(s=s/2|0;s;s=s>>>1)d++;return 1<<d+1+h},q.prototype.conjugate=function(t,r,s){if(!(s<=1))for(var h=0;h<s/2;h++){var d=t[h];t[h]=t[s-h-1],t[s-h-1]=d,d=r[h],r[h]=-r[s-h-1],r[s-h-1]=-d}},q.prototype.normalize13b=function(t,r){for(var s=0,h=0;h<r/2;h++){var d=Math.round(t[2*h+1]/r)*8192+Math.round(t[2*h]/r)+s;t[h]=d&67108863,d<67108864?s=0:s=d/67108864|0}return t},q.prototype.convert13b=function(t,r,s,h){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),s[2*m]=d&8191,d=d>>>13,s[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<h;++m)s[m]=0;f(d===0),f((d&-8192)===0)},q.prototype.stub=function(t){for(var r=new Array(t),s=0;s<t;s++)r[s]=0;return r},q.prototype.mulp=function(t,r,s){var h=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(h),m=this.stub(h),y=new Array(h),u=new Array(h),e=new Array(h),c=new Array(h),F=new Array(h),L=new Array(h),H=s.words;H.length=h,this.convert13b(t.words,t.length,y,h),this.convert13b(r.words,r.length,c,h),this.transform(y,m,u,e,h,d),this.transform(c,m,F,L,h,d);for(var G=0;G<h;G++){var tt=u[G]*F[G]-e[G]*L[G];e[G]=u[G]*L[G]+e[G]*F[G],u[G]=tt}return this.conjugate(u,e,h),this.transform(u,e,H,m,h,d),this.conjugate(H,m,h),this.normalize13b(H,h),s.negative=t.negative^r.negative,s.length=t.length+r.length,s.strip()},n.prototype.mul=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},n.prototype.mulf=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),D(this,t,r)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){f(typeof t=="number"),f(t<67108864);for(var r=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,d=(h&67108863)+(r&67108863);r>>=26,r+=h/67108864|0,r+=d>>>26,this.words[s]=d&67108863}return r!==0&&(this.words[s]=r,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var r=I(t);if(r.length===0)return new n(1);for(var s=this,h=0;h<r.length&&r[h]===0;h++,s=s.sqr());if(++h<r.length)for(var d=s.sqr();h<r.length;h++,d=d.sqr())r[h]!==0&&(s=s.mul(d));return s},n.prototype.iushln=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&h,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(s!==0){for(d=this.length-1;d>=0;d--)this.words[d+s]=this.words[d];for(d=0;d<s;d++)this.words[d]=0;this.length+=s}return this.strip()},n.prototype.ishln=function(t){return f(this.negative===0),this.iushln(t)},n.prototype.iushrn=function(t,r,s){f(typeof t=="number"&&t>=0);var h;r?h=(r-r%26)/26:h=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=s;if(h-=m,h=Math.max(0,h),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var c=0;for(e=this.length-1;e>=0&&(c!==0||e>=h);e--){var F=this.words[e]|0;this.words[e]=c<<26-d|F>>>d,c=F&y}return u&&c!==0&&(u.words[u.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,r,s){return f(this.negative===0),this.iushrn(t,r,s)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return!1;var d=this.words[s];return!!(d&h)},n.prototype.imaskn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26;if(f(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(r!==0&&s++,this.length=Math.min(s,this.length),r!==0){var h=67108863^67108863>>>r<<r;this.words[this.length-1]&=h}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return f(typeof t=="number"),f(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},n.prototype.isubn=function(t){if(f(typeof t=="number"),f(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,r,s){var h=t.length+s,d;this._expand(h);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+s]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+s]=m&67108863}for(;d<this.length-s;d++)m=(this.words[d+s]|0)+y,y=m>>26,this.words[d+s]=m&67108863;if(y===0)return this.strip();for(f(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,r){var s=this.length-t.length,h=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);s=26-y,s!==0&&(d=d.ushln(s),h.iushln(s),m=d.words[d.length-1]|0);var u=h.length-d.length,e;if(r!=="mod"){e=new n(null),e.length=u+1,e.words=new Array(e.length);for(var c=0;c<e.length;c++)e.words[c]=0}var F=h.clone()._ishlnsubmul(d,1,u);F.negative===0&&(h=F,e&&(e.words[u]=1));for(var L=u-1;L>=0;L--){var H=(h.words[d.length+L]|0)*67108864+(h.words[d.length+L-1]|0);for(H=Math.min(H/m|0,67108863),h._ishlnsubmul(d,H,L);h.negative!==0;)H--,h.negative=0,h._ishlnsubmul(d,1,L),h.isZero()||(h.negative^=1);e&&(e.words[L]=H)}return e&&e.strip(),h.strip(),r!=="div"&&s!==0&&h.iushrn(s),{div:e||null,mod:h}},n.prototype.divmod=function(t,r,s){if(f(!t.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var h,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(h=m.div.neg()),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.iadd(t)),{div:h,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(h=m.div.neg()),{div:h,mod:m.mod}):(this.negative&t.negative)!==0?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,r)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var s=r.div.negative!==0?r.mod.isub(t):r.mod,h=t.ushrn(1),d=t.andln(1),m=s.cmp(h);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){f(t<=67108863);for(var r=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(r*s+(this.words[h]|0))%t;return s},n.prototype.idivn=function(t){f(t<=67108863);for(var r=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+r*67108864;this.words[s]=h/t|0,r=h%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=new n(0),y=new n(1),u=0;r.isEven()&&s.isEven();)r.iushrn(1),s.iushrn(1),++u;for(var e=s.clone(),c=r.clone();!r.isZero();){for(var F=0,L=1;(r.words[0]&L)===0&&F<26;++F,L<<=1);if(F>0)for(r.iushrn(F);F-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(e),d.isub(c)),h.iushrn(1),d.iushrn(1);for(var H=0,G=1;(s.words[0]&G)===0&&H<26;++H,G<<=1);if(H>0)for(s.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(c)),m.iushrn(1),y.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(m),d.isub(y)):(s.isub(r),m.isub(h),y.isub(d))}return{a:m,b:y,gcd:s.iushln(u)}},n.prototype._invmp=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=s.clone();r.cmpn(1)>0&&s.cmpn(1)>0;){for(var y=0,u=1;(r.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)h.isOdd()&&h.iadd(m),h.iushrn(1);for(var e=0,c=1;(s.words[0]&c)===0&&e<26;++e,c<<=1);if(e>0)for(s.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(d)):(s.isub(r),d.isub(h))}var F;return r.cmpn(1)===0?F=h:F=d,F.cmpn(0)<0&&F.iadd(t),F},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),s=t.clone();r.negative=0,s.negative=0;for(var h=0;r.isEven()&&s.isEven();h++)r.iushrn(1),s.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;s.isEven();)s.iushrn(1);var d=r.cmp(s);if(d<0){var m=r;r=s,s=m}else if(d===0||s.cmpn(1)===0)break;r.isub(s)}while(!0);return s.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){f(typeof t=="number");var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var d=h,m=s;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var s;if(this.length>1)s=1;else{r&&(t=-t),f(t<=67108863,"Number is too big");var h=this.words[0]|0;s=h===t?0:h<t?-1:1}return this.negative!==0?-s|0:s},n.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,d=t.words[s]|0;if(h!==d){h<d?r=-1:h>d&&(r=1);break}}return r},n.prototype.gtn=function(t){return this.cmpn(t)===1},n.prototype.gt=function(t){return this.cmp(t)===1},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return this.cmpn(t)===-1},n.prototype.lt=function(t){return this.cmp(t)===-1},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return this.cmpn(t)===0},n.prototype.eq=function(t){return this.cmp(t)===0},n.red=function(t){return new Y(t)},n.prototype.toRed=function(t){return f(!this.red,"Already a number in reduction context"),f(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return f(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return f(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var k={k256:null,p224:null,p192:null,p25519:null};function N(v,t){this.name=v,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},N.prototype.ireduce=function(t){var r=t,s;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),s=r.bitLength();while(s>this.n);var h=s<this.n?-1:r.ucmp(this.p);return h===0?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},N.prototype.split=function(t,r){t.iushrn(this.n,0,r)},N.prototype.imulK=function(t){return t.imul(this.k)};function K(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(K,N),K.prototype.split=function(t,r){for(var s=4194303,h=Math.min(t.length,9),d=0;d<h;d++)r.words[d]=t.words[d];if(r.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&s,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&s)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},K.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,s=0;s<t.length;s++){var h=t.words[s]|0;r+=h*977,t.words[s]=r&67108863,r=h*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function $(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g($,N);function P(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,N);function z(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(z,N),z.prototype.imulK=function(t){for(var r=0,s=0;s<t.length;s++){var h=(t.words[s]|0)*19+r,d=h&67108863;h>>>=26,t.words[s]=d,r=h}return r!==0&&(t.words[t.length++]=r),t},n._prime=function(t){if(k[t])return k[t];var r;if(t==="k256")r=new K;else if(t==="p224")r=new $;else if(t==="p192")r=new P;else if(t==="p25519")r=new z;else throw new Error("Unknown prime "+t);return k[t]=r,r};function Y(v){if(typeof v=="string"){var t=n._prime(v);this.m=t.p,this.prime=t}else f(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Y.prototype._verify1=function(t){f(t.negative===0,"red works only with positives"),f(t.red,"red works only with red numbers")},Y.prototype._verify2=function(t,r){f((t.negative|r.negative)===0,"red works only with positives"),f(t.red&&t.red===r.red,"red works only with red numbers")},Y.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Y.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Y.prototype.add=function(t,r){this._verify2(t,r);var s=t.add(r);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Y.prototype.iadd=function(t,r){this._verify2(t,r);var s=t.iadd(r);return s.cmp(this.m)>=0&&s.isub(this.m),s},Y.prototype.sub=function(t,r){this._verify2(t,r);var s=t.sub(r);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},Y.prototype.isub=function(t,r){this._verify2(t,r);var s=t.isub(r);return s.cmpn(0)<0&&s.iadd(this.m),s},Y.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},Y.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Y.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Y.prototype.isqr=function(t){return this.imul(t,t.clone())},Y.prototype.sqr=function(t){return this.mul(t,t)},Y.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(f(r%2===1),r===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);f(!h.isZero());var m=new n(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new n(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var c=this.pow(e,h),F=this.pow(t,h.addn(1).iushrn(1)),L=this.pow(t,h),H=d;L.cmp(m)!==0;){for(var G=L,tt=0;G.cmp(m)!==0;tt++)G=G.redSqr();f(tt<H);var Z=this.pow(c,new n(1).iushln(H-tt-1));F=F.redMul(Z),c=Z.redSqr(),L=L.redMul(c),H=tt}return F},Y.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Y.prototype.pow=function(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var s=4,h=new Array(1<<s);h[0]=new n(1).toRed(this),h[1]=t;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],t);var m=h[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var c=r.words[d],F=e-1;F>=0;F--){var L=c>>F&1;if(m!==h[0]&&(m=this.sqr(m)),L===0&&y===0){u=0;continue}y<<=1,y|=L,u++,!(u!==s&&(d!==0||F!==0))&&(m=this.mul(m,h[y]),u=0,y=0)}e=26}return m},Y.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},Y.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},n.mont=function(t){return new nt(t)};function nt(v){Y.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,Y),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var s=t.mul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(l,ve)}(U0)),U0.exports}var F0,y1;function S_(){if(y1)return F0;y1=1;var l=Du(),i=E_();F0=function(x){return new f(x)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1;function f(n){this.curveType=a[n],this.curveType||(this.curveType={name:n}),this.curve=new l.ec(this.curveType.name),this.keys=void 0}f.prototype.generateKeys=function(n,x){return this.keys=this.curve.genKeyPair(),this.getPublicKey(n,x)},f.prototype.computeSecret=function(n,x,M){x=x||"utf8",Ee.Buffer.isBuffer(n)||(n=new Ee.Buffer(n,x));var _=this.curve.keyFromPublic(n).getPublic(),w=_.mul(this.keys.getPrivate()).getX();return g(w,M,this.curveType.byteLength)},f.prototype.getPublicKey=function(n,x){var M=this.keys.getPublic(x==="compressed",!0);return x==="hybrid"&&(M[M.length-1]%2?M[0]=7:M[0]=6),g(M,n)},f.prototype.getPrivateKey=function(n){return g(this.keys.getPrivate(),n)},f.prototype.setPublicKey=function(n,x){return x=x||"utf8",Ee.Buffer.isBuffer(n)||(n=new Ee.Buffer(n,x)),this.keys._importPublic(n),this},f.prototype.setPrivateKey=function(n,x){x=x||"utf8",Ee.Buffer.isBuffer(n)||(n=new Ee.Buffer(n,x));var M=new i(n);return M=M.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(M),this};function g(n,x,M){Array.isArray(n)||(n=n.toArray());var _=new Ee.Buffer(n);if(M&&_.length<M){var w=new Ee.Buffer(M-_.length);w.fill(0),_=Ee.Buffer.concat([w,_])}return x?_.toString(x):_}return F0}var $0={},z0,w1;function pg(){if(w1)return z0;w1=1;var l=ia(),i=qe().Buffer;z0=function(f,g){for(var n=i.alloc(0),x=0,M;n.length<g;)M=a(x++),n=i.concat([n,l("sha1").update(f).update(M).digest()]);return n.slice(0,g)};function a(f){var g=i.allocUnsafe(4);return g.writeUInt32BE(f,0),g}return z0}var H0,_1;function vg(){return _1||(_1=1,H0=function(i,a){for(var f=i.length,g=-1;++g<f;)i[g]^=a[g];return i}),H0}var K0={exports:{}},M1;function $u(){return M1||(M1=1,function(l){(function(i,a){function f(v,t){if(!v)throw new Error(t||"Assertion failed")}function g(v,t){v.super_=t;var r=function(){};r.prototype=t.prototype,v.prototype=new r,v.prototype.constructor=v}function n(v,t,r){if(n.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(v||0,t||10,r||"be"))}typeof i=="object"?i.exports=n:a.BN=n,n.BN=n,n.wordSize=26;var x;try{typeof window<"u"&&typeof window.Buffer<"u"?x=window.Buffer:x=Ee.Buffer}catch{}n.isBN=function(t){return t instanceof n?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,r){return t.cmp(r)>0?t:r},n.min=function(t,r){return t.cmp(r)<0?t:r},n.prototype._init=function(t,r,s){if(typeof t=="number")return this._initNumber(t,r,s);if(typeof t=="object")return this._initArray(t,r,s);r==="hex"&&(r=16),f(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&(h++,this.negative=1),h<t.length&&(r===16?this._parseHex(t,h,s):(this._parseBase(t,r,h),s==="le"&&this._initArray(this.toArray(),r,s)))},n.prototype._initNumber=function(t,r,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(f(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),r,s)},n.prototype._initArray=function(t,r,s){if(f(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,m,y=0;if(s==="be")for(h=t.length-1,d=0;h>=0;h-=3)m=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);else if(s==="le")for(h=0,d=0;h<t.length;h+=3)m=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[d]|=m<<y&67108863,this.words[d+1]=m>>>26-y&67108863,y+=24,y>=26&&(y-=26,d++);return this.strip()};function M(v,t){var r=v.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function _(v,t,r){var s=M(v,r);return r-1>=t&&(s|=M(v,r-1)<<4),s}n.prototype._parseHex=function(t,r,s){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d=0,m=0,y;if(s==="be")for(h=t.length-1;h>=r;h-=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8;else{var u=t.length-r;for(h=u%2===0?r+1:r;h<t.length;h+=2)y=_(t,r,h)<<d,this.words[m]|=y&67108863,d>=18?(d-=18,m+=1,this.words[m]|=y>>>26):d+=8}this.strip()};function w(v,t,r,s){for(var h=0,d=Math.min(v.length,r),m=t;m<d;m++){var y=v.charCodeAt(m)-48;h*=s,y>=49?h+=y-49+10:y>=17?h+=y-17+10:h+=y}return h}n.prototype._parseBase=function(t,r,s){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=r)h++;h--,d=d/r|0;for(var m=t.length-s,y=m%h,u=Math.min(m,m-y)+s,e=0,c=s;c<u;c+=h)e=w(t,c,c+h,r),this.imuln(d),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(y!==0){var F=1;for(e=w(t,c,t.length,r),c=0;c<y;c++)F*=r;this.imuln(F),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}this.strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,r){t=t||10,r=r|0||1;var s;if(t===16||t==="hex"){s="";for(var h=0,d=0,m=0;m<this.length;m++){var y=this.words[m],u=((y<<h|d)&16777215).toString(16);d=y>>>24-h&16777215,d!==0||m!==this.length-1?s=b[6-u.length]+u+s:s=u+s,h+=2,h>=26&&(h-=26,m--)}for(d!==0&&(s=d.toString(16)+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(t===(t|0)&&t>=2&&t<=36){var e=A[t],c=E[t];s="";var F=this.clone();for(F.negative=0;!F.isZero();){var L=F.modn(c).toString(t);F=F.idivn(c),F.isZero()?s=L+s:s=b[e-L.length]+L+s}for(this.isZero()&&(s="0"+s);s.length%r!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}f(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,r){return f(typeof x<"u"),this.toArrayLike(x,t,r)},n.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},n.prototype.toArrayLike=function(t,r,s){var h=this.byteLength(),d=s||Math.max(1,h);f(h<=d,"byte array longer than desired length"),f(d>0,"Requested array length <= 0"),this.strip();var m=r==="le",y=new t(d),u,e,c=this.clone();if(m){for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[e]=u;for(;e<d;e++)y[e]=0}else{for(e=0;e<d-h;e++)y[e]=0;for(e=0;!c.isZero();e++)u=c.andln(255),c.iushrn(8),y[d-e-1]=u}return y},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var r=t,s=0;return r>=4096&&(s+=13,r>>>=13),r>=64&&(s+=7,r>>>=7),r>=8&&(s+=4,r>>>=4),r>=2&&(s+=2,r>>>=2),s+r},n.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,s=0;return(r&8191)===0&&(s+=13,r>>>=13),(r&127)===0&&(s+=7,r>>>=7),(r&15)===0&&(s+=4,r>>>=4),(r&3)===0&&(s+=2,r>>>=2),(r&1)===0&&s++,s},n.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function I(v){for(var t=new Array(v.bitLength()),r=0;r<t.length;r++){var s=r/26|0,h=r%26;t[r]=(v.words[s]&1<<h)>>>h}return t}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var s=this._zeroBits(this.words[r]);if(t+=s,s!==26)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},n.prototype.ior=function(t){return f((this.negative|t.negative)===0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=r.length,this.strip()},n.prototype.iand=function(t){return f((this.negative|t.negative)===0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var r,s;this.length>t.length?(r=this,s=t):(r=t,s=this);for(var h=0;h<s.length;h++)this.words[h]=r.words[h]^s.words[h];if(this!==r)for(;h<r.length;h++)this.words[h]=r.words[h];return this.length=r.length,this.strip()},n.prototype.ixor=function(t){return f((this.negative|t.negative)===0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){f(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,s=t%26;this._expand(r),s>0&&r--;for(var h=0;h<r;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,r){f(typeof t=="number"&&t>=0);var s=t/26|0,h=t%26;return this._expand(s+1),r?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},n.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var s,h;this.length>t.length?(s=this,h=t):(s=t,h=this);for(var d=0,m=0;m<h.length;m++)r=(s.words[m]|0)+(h.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;for(;d!==0&&m<s.length;m++)r=(s.words[m]|0)+d,this.words[m]=r&67108863,d=r>>>26;if(this.length=s.length,d!==0)this.words[this.length]=d,this.length++;else if(s!==this)for(;m<s.length;m++)this.words[m]=s.words[m];return this},n.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var s=this.cmp(t);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;s>0?(h=this,d=t):(h=t,d=this);for(var m=0,y=0;y<d.length;y++)r=(h.words[y]|0)-(d.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;for(;m!==0&&y<h.length;y++)r=(h.words[y]|0)+m,m=r>>26,this.words[y]=r&67108863;if(m===0&&y<h.length&&h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this.length=Math.max(this.length,y),h!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};function R(v,t,r){r.negative=t.negative^v.negative;var s=v.length+t.length|0;r.length=s,s=s-1|0;var h=v.words[0]|0,d=t.words[0]|0,m=h*d,y=m&67108863,u=m/67108864|0;r.words[0]=y;for(var e=1;e<s;e++){for(var c=u>>>26,F=u&67108863,L=Math.min(e,t.length-1),H=Math.max(0,e-v.length+1);H<=L;H++){var G=e-H|0;h=v.words[G]|0,d=t.words[H]|0,m=h*d+F,c+=m/67108864|0,F=m&67108863}r.words[e]=F|0,u=c|0}return u!==0?r.words[e]=u|0:r.length--,r.strip()}var T=function(t,r,s){var h=t.words,d=r.words,m=s.words,y=0,u,e,c,F=h[0]|0,L=F&8191,H=F>>>13,G=h[1]|0,tt=G&8191,Z=G>>>13,et=h[2]|0,j=et&8191,O=et>>>13,Q=h[3]|0,rt=Q&8191,st=Q>>>13,Jt=h[4]|0,gt=Jt&8191,mt=Jt>>>13,ee=h[5]|0,_t=ee&8191,Mt=ee>>>13,ie=h[6]|0,ut=ie&8191,pt=ie>>>13,Xt=h[7]|0,vt=Xt&8191,lt=Xt>>>13,Qt=h[8]|0,ht=Qt&8191,dt=Qt>>>13,ne=h[9]|0,ct=ne&8191,bt=ne>>>13,se=d[0]|0,yt=se&8191,wt=se>>>13,ae=d[1]|0,qt=ae&8191,Lt=ae>>>13,Fe=d[2]|0,Nt=Fe&8191,kt=Fe>>>13,ar=d[3]|0,Ut=ar&8191,Et=ar>>>13,pe=d[4]|0,St=pe&8191,At=pe>>>13,me=d[5]|0,xt=me&8191,Ot=me>>>13,xe=d[6]|0,It=xe&8191,Tt=xe>>>13,we=d[7]|0,Pt=we&8191,Rt=we>>>13,ue=d[8]|0,Ct=ue&8191,Bt=ue>>>13,pr=d[9]|0,Ft=pr&8191,$t=pr>>>13;s.negative=t.negative^r.negative,s.length=19,u=Math.imul(L,yt),e=Math.imul(L,wt),e=e+Math.imul(H,yt)|0,c=Math.imul(H,wt);var Ae=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,u=Math.imul(tt,yt),e=Math.imul(tt,wt),e=e+Math.imul(Z,yt)|0,c=Math.imul(Z,wt),u=u+Math.imul(L,qt)|0,e=e+Math.imul(L,Lt)|0,e=e+Math.imul(H,qt)|0,c=c+Math.imul(H,Lt)|0;var Ke=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,u=Math.imul(j,yt),e=Math.imul(j,wt),e=e+Math.imul(O,yt)|0,c=Math.imul(O,wt),u=u+Math.imul(tt,qt)|0,e=e+Math.imul(tt,Lt)|0,e=e+Math.imul(Z,qt)|0,c=c+Math.imul(Z,Lt)|0,u=u+Math.imul(L,Nt)|0,e=e+Math.imul(L,kt)|0,e=e+Math.imul(H,Nt)|0,c=c+Math.imul(H,kt)|0;var je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(je>>>26)|0,je&=67108863,u=Math.imul(rt,yt),e=Math.imul(rt,wt),e=e+Math.imul(st,yt)|0,c=Math.imul(st,wt),u=u+Math.imul(j,qt)|0,e=e+Math.imul(j,Lt)|0,e=e+Math.imul(O,qt)|0,c=c+Math.imul(O,Lt)|0,u=u+Math.imul(tt,Nt)|0,e=e+Math.imul(tt,kt)|0,e=e+Math.imul(Z,Nt)|0,c=c+Math.imul(Z,kt)|0,u=u+Math.imul(L,Ut)|0,e=e+Math.imul(L,Et)|0,e=e+Math.imul(H,Ut)|0,c=c+Math.imul(H,Et)|0;var Ve=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,u=Math.imul(gt,yt),e=Math.imul(gt,wt),e=e+Math.imul(mt,yt)|0,c=Math.imul(mt,wt),u=u+Math.imul(rt,qt)|0,e=e+Math.imul(rt,Lt)|0,e=e+Math.imul(st,qt)|0,c=c+Math.imul(st,Lt)|0,u=u+Math.imul(j,Nt)|0,e=e+Math.imul(j,kt)|0,e=e+Math.imul(O,Nt)|0,c=c+Math.imul(O,kt)|0,u=u+Math.imul(tt,Ut)|0,e=e+Math.imul(tt,Et)|0,e=e+Math.imul(Z,Ut)|0,c=c+Math.imul(Z,Et)|0,u=u+Math.imul(L,St)|0,e=e+Math.imul(L,At)|0,e=e+Math.imul(H,St)|0,c=c+Math.imul(H,At)|0;var Ge=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,u=Math.imul(_t,yt),e=Math.imul(_t,wt),e=e+Math.imul(Mt,yt)|0,c=Math.imul(Mt,wt),u=u+Math.imul(gt,qt)|0,e=e+Math.imul(gt,Lt)|0,e=e+Math.imul(mt,qt)|0,c=c+Math.imul(mt,Lt)|0,u=u+Math.imul(rt,Nt)|0,e=e+Math.imul(rt,kt)|0,e=e+Math.imul(st,Nt)|0,c=c+Math.imul(st,kt)|0,u=u+Math.imul(j,Ut)|0,e=e+Math.imul(j,Et)|0,e=e+Math.imul(O,Ut)|0,c=c+Math.imul(O,Et)|0,u=u+Math.imul(tt,St)|0,e=e+Math.imul(tt,At)|0,e=e+Math.imul(Z,St)|0,c=c+Math.imul(Z,At)|0,u=u+Math.imul(L,xt)|0,e=e+Math.imul(L,Ot)|0,e=e+Math.imul(H,xt)|0,c=c+Math.imul(H,Ot)|0;var Ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,u=Math.imul(ut,yt),e=Math.imul(ut,wt),e=e+Math.imul(pt,yt)|0,c=Math.imul(pt,wt),u=u+Math.imul(_t,qt)|0,e=e+Math.imul(_t,Lt)|0,e=e+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Lt)|0,u=u+Math.imul(gt,Nt)|0,e=e+Math.imul(gt,kt)|0,e=e+Math.imul(mt,Nt)|0,c=c+Math.imul(mt,kt)|0,u=u+Math.imul(rt,Ut)|0,e=e+Math.imul(rt,Et)|0,e=e+Math.imul(st,Ut)|0,c=c+Math.imul(st,Et)|0,u=u+Math.imul(j,St)|0,e=e+Math.imul(j,At)|0,e=e+Math.imul(O,St)|0,c=c+Math.imul(O,At)|0,u=u+Math.imul(tt,xt)|0,e=e+Math.imul(tt,Ot)|0,e=e+Math.imul(Z,xt)|0,c=c+Math.imul(Z,Ot)|0,u=u+Math.imul(L,It)|0,e=e+Math.imul(L,Tt)|0,e=e+Math.imul(H,It)|0,c=c+Math.imul(H,Tt)|0;var Ce=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,u=Math.imul(vt,yt),e=Math.imul(vt,wt),e=e+Math.imul(lt,yt)|0,c=Math.imul(lt,wt),u=u+Math.imul(ut,qt)|0,e=e+Math.imul(ut,Lt)|0,e=e+Math.imul(pt,qt)|0,c=c+Math.imul(pt,Lt)|0,u=u+Math.imul(_t,Nt)|0,e=e+Math.imul(_t,kt)|0,e=e+Math.imul(Mt,Nt)|0,c=c+Math.imul(Mt,kt)|0,u=u+Math.imul(gt,Ut)|0,e=e+Math.imul(gt,Et)|0,e=e+Math.imul(mt,Ut)|0,c=c+Math.imul(mt,Et)|0,u=u+Math.imul(rt,St)|0,e=e+Math.imul(rt,At)|0,e=e+Math.imul(st,St)|0,c=c+Math.imul(st,At)|0,u=u+Math.imul(j,xt)|0,e=e+Math.imul(j,Ot)|0,e=e+Math.imul(O,xt)|0,c=c+Math.imul(O,Ot)|0,u=u+Math.imul(tt,It)|0,e=e+Math.imul(tt,Tt)|0,e=e+Math.imul(Z,It)|0,c=c+Math.imul(Z,Tt)|0,u=u+Math.imul(L,Pt)|0,e=e+Math.imul(L,Rt)|0,e=e+Math.imul(H,Pt)|0,c=c+Math.imul(H,Rt)|0;var Ne=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,u=Math.imul(ht,yt),e=Math.imul(ht,wt),e=e+Math.imul(dt,yt)|0,c=Math.imul(dt,wt),u=u+Math.imul(vt,qt)|0,e=e+Math.imul(vt,Lt)|0,e=e+Math.imul(lt,qt)|0,c=c+Math.imul(lt,Lt)|0,u=u+Math.imul(ut,Nt)|0,e=e+Math.imul(ut,kt)|0,e=e+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,kt)|0,u=u+Math.imul(_t,Ut)|0,e=e+Math.imul(_t,Et)|0,e=e+Math.imul(Mt,Ut)|0,c=c+Math.imul(Mt,Et)|0,u=u+Math.imul(gt,St)|0,e=e+Math.imul(gt,At)|0,e=e+Math.imul(mt,St)|0,c=c+Math.imul(mt,At)|0,u=u+Math.imul(rt,xt)|0,e=e+Math.imul(rt,Ot)|0,e=e+Math.imul(st,xt)|0,c=c+Math.imul(st,Ot)|0,u=u+Math.imul(j,It)|0,e=e+Math.imul(j,Tt)|0,e=e+Math.imul(O,It)|0,c=c+Math.imul(O,Tt)|0,u=u+Math.imul(tt,Pt)|0,e=e+Math.imul(tt,Rt)|0,e=e+Math.imul(Z,Pt)|0,c=c+Math.imul(Z,Rt)|0,u=u+Math.imul(L,Ct)|0,e=e+Math.imul(L,Bt)|0,e=e+Math.imul(H,Ct)|0,c=c+Math.imul(H,Bt)|0;var We=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(We>>>26)|0,We&=67108863,u=Math.imul(ct,yt),e=Math.imul(ct,wt),e=e+Math.imul(bt,yt)|0,c=Math.imul(bt,wt),u=u+Math.imul(ht,qt)|0,e=e+Math.imul(ht,Lt)|0,e=e+Math.imul(dt,qt)|0,c=c+Math.imul(dt,Lt)|0,u=u+Math.imul(vt,Nt)|0,e=e+Math.imul(vt,kt)|0,e=e+Math.imul(lt,Nt)|0,c=c+Math.imul(lt,kt)|0,u=u+Math.imul(ut,Ut)|0,e=e+Math.imul(ut,Et)|0,e=e+Math.imul(pt,Ut)|0,c=c+Math.imul(pt,Et)|0,u=u+Math.imul(_t,St)|0,e=e+Math.imul(_t,At)|0,e=e+Math.imul(Mt,St)|0,c=c+Math.imul(Mt,At)|0,u=u+Math.imul(gt,xt)|0,e=e+Math.imul(gt,Ot)|0,e=e+Math.imul(mt,xt)|0,c=c+Math.imul(mt,Ot)|0,u=u+Math.imul(rt,It)|0,e=e+Math.imul(rt,Tt)|0,e=e+Math.imul(st,It)|0,c=c+Math.imul(st,Tt)|0,u=u+Math.imul(j,Pt)|0,e=e+Math.imul(j,Rt)|0,e=e+Math.imul(O,Pt)|0,c=c+Math.imul(O,Rt)|0,u=u+Math.imul(tt,Ct)|0,e=e+Math.imul(tt,Bt)|0,e=e+Math.imul(Z,Ct)|0,c=c+Math.imul(Z,Bt)|0,u=u+Math.imul(L,Ft)|0,e=e+Math.imul(L,$t)|0,e=e+Math.imul(H,Ft)|0,c=c+Math.imul(H,$t)|0;var De=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(De>>>26)|0,De&=67108863,u=Math.imul(ct,qt),e=Math.imul(ct,Lt),e=e+Math.imul(bt,qt)|0,c=Math.imul(bt,Lt),u=u+Math.imul(ht,Nt)|0,e=e+Math.imul(ht,kt)|0,e=e+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,kt)|0,u=u+Math.imul(vt,Ut)|0,e=e+Math.imul(vt,Et)|0,e=e+Math.imul(lt,Ut)|0,c=c+Math.imul(lt,Et)|0,u=u+Math.imul(ut,St)|0,e=e+Math.imul(ut,At)|0,e=e+Math.imul(pt,St)|0,c=c+Math.imul(pt,At)|0,u=u+Math.imul(_t,xt)|0,e=e+Math.imul(_t,Ot)|0,e=e+Math.imul(Mt,xt)|0,c=c+Math.imul(Mt,Ot)|0,u=u+Math.imul(gt,It)|0,e=e+Math.imul(gt,Tt)|0,e=e+Math.imul(mt,It)|0,c=c+Math.imul(mt,Tt)|0,u=u+Math.imul(rt,Pt)|0,e=e+Math.imul(rt,Rt)|0,e=e+Math.imul(st,Pt)|0,c=c+Math.imul(st,Rt)|0,u=u+Math.imul(j,Ct)|0,e=e+Math.imul(j,Bt)|0,e=e+Math.imul(O,Ct)|0,c=c+Math.imul(O,Bt)|0,u=u+Math.imul(tt,Ft)|0,e=e+Math.imul(tt,$t)|0,e=e+Math.imul(Z,Ft)|0,c=c+Math.imul(Z,$t)|0;var Ye=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,u=Math.imul(ct,Nt),e=Math.imul(ct,kt),e=e+Math.imul(bt,Nt)|0,c=Math.imul(bt,kt),u=u+Math.imul(ht,Ut)|0,e=e+Math.imul(ht,Et)|0,e=e+Math.imul(dt,Ut)|0,c=c+Math.imul(dt,Et)|0,u=u+Math.imul(vt,St)|0,e=e+Math.imul(vt,At)|0,e=e+Math.imul(lt,St)|0,c=c+Math.imul(lt,At)|0,u=u+Math.imul(ut,xt)|0,e=e+Math.imul(ut,Ot)|0,e=e+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ot)|0,u=u+Math.imul(_t,It)|0,e=e+Math.imul(_t,Tt)|0,e=e+Math.imul(Mt,It)|0,c=c+Math.imul(Mt,Tt)|0,u=u+Math.imul(gt,Pt)|0,e=e+Math.imul(gt,Rt)|0,e=e+Math.imul(mt,Pt)|0,c=c+Math.imul(mt,Rt)|0,u=u+Math.imul(rt,Ct)|0,e=e+Math.imul(rt,Bt)|0,e=e+Math.imul(st,Ct)|0,c=c+Math.imul(st,Bt)|0,u=u+Math.imul(j,Ft)|0,e=e+Math.imul(j,$t)|0,e=e+Math.imul(O,Ft)|0,c=c+Math.imul(O,$t)|0;var Je=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Je>>>26)|0,Je&=67108863,u=Math.imul(ct,Ut),e=Math.imul(ct,Et),e=e+Math.imul(bt,Ut)|0,c=Math.imul(bt,Et),u=u+Math.imul(ht,St)|0,e=e+Math.imul(ht,At)|0,e=e+Math.imul(dt,St)|0,c=c+Math.imul(dt,At)|0,u=u+Math.imul(vt,xt)|0,e=e+Math.imul(vt,Ot)|0,e=e+Math.imul(lt,xt)|0,c=c+Math.imul(lt,Ot)|0,u=u+Math.imul(ut,It)|0,e=e+Math.imul(ut,Tt)|0,e=e+Math.imul(pt,It)|0,c=c+Math.imul(pt,Tt)|0,u=u+Math.imul(_t,Pt)|0,e=e+Math.imul(_t,Rt)|0,e=e+Math.imul(Mt,Pt)|0,c=c+Math.imul(Mt,Rt)|0,u=u+Math.imul(gt,Ct)|0,e=e+Math.imul(gt,Bt)|0,e=e+Math.imul(mt,Ct)|0,c=c+Math.imul(mt,Bt)|0,u=u+Math.imul(rt,Ft)|0,e=e+Math.imul(rt,$t)|0,e=e+Math.imul(st,Ft)|0,c=c+Math.imul(st,$t)|0;var Le=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,u=Math.imul(ct,St),e=Math.imul(ct,At),e=e+Math.imul(bt,St)|0,c=Math.imul(bt,At),u=u+Math.imul(ht,xt)|0,e=e+Math.imul(ht,Ot)|0,e=e+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ot)|0,u=u+Math.imul(vt,It)|0,e=e+Math.imul(vt,Tt)|0,e=e+Math.imul(lt,It)|0,c=c+Math.imul(lt,Tt)|0,u=u+Math.imul(ut,Pt)|0,e=e+Math.imul(ut,Rt)|0,e=e+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Rt)|0,u=u+Math.imul(_t,Ct)|0,e=e+Math.imul(_t,Bt)|0,e=e+Math.imul(Mt,Ct)|0,c=c+Math.imul(Mt,Bt)|0,u=u+Math.imul(gt,Ft)|0,e=e+Math.imul(gt,$t)|0,e=e+Math.imul(mt,Ft)|0,c=c+Math.imul(mt,$t)|0;var $e=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,u=Math.imul(ct,xt),e=Math.imul(ct,Ot),e=e+Math.imul(bt,xt)|0,c=Math.imul(bt,Ot),u=u+Math.imul(ht,It)|0,e=e+Math.imul(ht,Tt)|0,e=e+Math.imul(dt,It)|0,c=c+Math.imul(dt,Tt)|0,u=u+Math.imul(vt,Pt)|0,e=e+Math.imul(vt,Rt)|0,e=e+Math.imul(lt,Pt)|0,c=c+Math.imul(lt,Rt)|0,u=u+Math.imul(ut,Ct)|0,e=e+Math.imul(ut,Bt)|0,e=e+Math.imul(pt,Ct)|0,c=c+Math.imul(pt,Bt)|0,u=u+Math.imul(_t,Ft)|0,e=e+Math.imul(_t,$t)|0,e=e+Math.imul(Mt,Ft)|0,c=c+Math.imul(Mt,$t)|0;var ze=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(ze>>>26)|0,ze&=67108863,u=Math.imul(ct,It),e=Math.imul(ct,Tt),e=e+Math.imul(bt,It)|0,c=Math.imul(bt,Tt),u=u+Math.imul(ht,Pt)|0,e=e+Math.imul(ht,Rt)|0,e=e+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Rt)|0,u=u+Math.imul(vt,Ct)|0,e=e+Math.imul(vt,Bt)|0,e=e+Math.imul(lt,Ct)|0,c=c+Math.imul(lt,Bt)|0,u=u+Math.imul(ut,Ft)|0,e=e+Math.imul(ut,$t)|0,e=e+Math.imul(pt,Ft)|0,c=c+Math.imul(pt,$t)|0;var Re=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Re>>>26)|0,Re&=67108863,u=Math.imul(ct,Pt),e=Math.imul(ct,Rt),e=e+Math.imul(bt,Pt)|0,c=Math.imul(bt,Rt),u=u+Math.imul(ht,Ct)|0,e=e+Math.imul(ht,Bt)|0,e=e+Math.imul(dt,Ct)|0,c=c+Math.imul(dt,Bt)|0,u=u+Math.imul(vt,Ft)|0,e=e+Math.imul(vt,$t)|0,e=e+Math.imul(lt,Ft)|0,c=c+Math.imul(lt,$t)|0;var Xe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,u=Math.imul(ct,Ct),e=Math.imul(ct,Bt),e=e+Math.imul(bt,Ct)|0,c=Math.imul(bt,Bt),u=u+Math.imul(ht,Ft)|0,e=e+Math.imul(ht,$t)|0,e=e+Math.imul(dt,Ft)|0,c=c+Math.imul(dt,$t)|0;var Qe=(y+u|0)+((e&8191)<<13)|0;y=(c+(e>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,u=Math.imul(ct,Ft),e=Math.imul(ct,$t),e=e+Math.imul(bt,Ft)|0,c=Math.imul(bt,$t);var tr=(y+u|0)+((e&8191)<<13)|0;return y=(c+(e>>>13)|0)+(tr>>>26)|0,tr&=67108863,m[0]=Ae,m[1]=Ke,m[2]=je,m[3]=Ve,m[4]=Ge,m[5]=Ze,m[6]=Ce,m[7]=Ne,m[8]=We,m[9]=De,m[10]=Ye,m[11]=Je,m[12]=Le,m[13]=$e,m[14]=ze,m[15]=Re,m[16]=Xe,m[17]=Qe,m[18]=tr,y!==0&&(m[19]=y,s.length++),s};Math.imul||(T=R);function B(v,t,r){r.negative=t.negative^v.negative,r.length=v.length+t.length;for(var s=0,h=0,d=0;d<r.length-1;d++){var m=h;h=0;for(var y=s&67108863,u=Math.min(d,t.length-1),e=Math.max(0,d-v.length+1);e<=u;e++){var c=d-e,F=v.words[c]|0,L=t.words[e]|0,H=F*L,G=H&67108863;m=m+(H/67108864|0)|0,G=G+y|0,y=G&67108863,m=m+(G>>>26)|0,h+=m>>>26,m&=67108863}r.words[d]=y,s=m,m=h}return s!==0?r.words[d]=s:r.length--,r.strip()}function D(v,t,r){var s=new q;return s.mulp(v,t,r)}n.prototype.mulTo=function(t,r){var s,h=this.length+t.length;return this.length===10&&t.length===10?s=T(this,t,r):h<63?s=R(this,t,r):h<1024?s=B(this,t,r):s=D(this,t,r),s};function q(v,t){this.x=v,this.y=t}q.prototype.makeRBT=function(t){for(var r=new Array(t),s=n.prototype._countBits(t)-1,h=0;h<t;h++)r[h]=this.revBin(h,s,t);return r},q.prototype.revBin=function(t,r,s){if(t===0||t===s-1)return t;for(var h=0,d=0;d<r;d++)h|=(t&1)<<r-d-1,t>>=1;return h},q.prototype.permute=function(t,r,s,h,d,m){for(var y=0;y<m;y++)h[y]=r[t[y]],d[y]=s[t[y]]},q.prototype.transform=function(t,r,s,h,d,m){this.permute(m,t,r,s,h,d);for(var y=1;y<d;y<<=1)for(var u=y<<1,e=Math.cos(2*Math.PI/u),c=Math.sin(2*Math.PI/u),F=0;F<d;F+=u)for(var L=e,H=c,G=0;G<y;G++){var tt=s[F+G],Z=h[F+G],et=s[F+G+y],j=h[F+G+y],O=L*et-H*j;j=L*j+H*et,et=O,s[F+G]=tt+et,h[F+G]=Z+j,s[F+G+y]=tt-et,h[F+G+y]=Z-j,G!==u&&(O=e*L-c*H,H=e*H+c*L,L=O)}},q.prototype.guessLen13b=function(t,r){var s=Math.max(r,t)|1,h=s&1,d=0;for(s=s/2|0;s;s=s>>>1)d++;return 1<<d+1+h},q.prototype.conjugate=function(t,r,s){if(!(s<=1))for(var h=0;h<s/2;h++){var d=t[h];t[h]=t[s-h-1],t[s-h-1]=d,d=r[h],r[h]=-r[s-h-1],r[s-h-1]=-d}},q.prototype.normalize13b=function(t,r){for(var s=0,h=0;h<r/2;h++){var d=Math.round(t[2*h+1]/r)*8192+Math.round(t[2*h]/r)+s;t[h]=d&67108863,d<67108864?s=0:s=d/67108864|0}return t},q.prototype.convert13b=function(t,r,s,h){for(var d=0,m=0;m<r;m++)d=d+(t[m]|0),s[2*m]=d&8191,d=d>>>13,s[2*m+1]=d&8191,d=d>>>13;for(m=2*r;m<h;++m)s[m]=0;f(d===0),f((d&-8192)===0)},q.prototype.stub=function(t){for(var r=new Array(t),s=0;s<t;s++)r[s]=0;return r},q.prototype.mulp=function(t,r,s){var h=2*this.guessLen13b(t.length,r.length),d=this.makeRBT(h),m=this.stub(h),y=new Array(h),u=new Array(h),e=new Array(h),c=new Array(h),F=new Array(h),L=new Array(h),H=s.words;H.length=h,this.convert13b(t.words,t.length,y,h),this.convert13b(r.words,r.length,c,h),this.transform(y,m,u,e,h,d),this.transform(c,m,F,L,h,d);for(var G=0;G<h;G++){var tt=u[G]*F[G]-e[G]*L[G];e[G]=u[G]*L[G]+e[G]*F[G],u[G]=tt}return this.conjugate(u,e,h),this.transform(u,e,H,m,h,d),this.conjugate(H,m,h),this.normalize13b(H,h),s.negative=t.negative^r.negative,s.length=t.length+r.length,s.strip()},n.prototype.mul=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},n.prototype.mulf=function(t){var r=new n(null);return r.words=new Array(this.length+t.length),D(this,t,r)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){f(typeof t=="number"),f(t<67108864);for(var r=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*t,d=(h&67108863)+(r&67108863);r>>=26,r+=h/67108864|0,r+=d>>>26,this.words[s]=d&67108863}return r!==0&&(this.words[s]=r,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var r=I(t);if(r.length===0)return new n(1);for(var s=this,h=0;h<r.length&&r[h]===0;h++,s=s.sqr());if(++h<r.length)for(var d=s.sqr();h<r.length;h++,d=d.sqr())r[h]!==0&&(s=s.mul(d));return s},n.prototype.iushln=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=67108863>>>26-r<<26-r,d;if(r!==0){var m=0;for(d=0;d<this.length;d++){var y=this.words[d]&h,u=(this.words[d]|0)-y<<r;this.words[d]=u|m,m=y>>>26-r}m&&(this.words[d]=m,this.length++)}if(s!==0){for(d=this.length-1;d>=0;d--)this.words[d+s]=this.words[d];for(d=0;d<s;d++)this.words[d]=0;this.length+=s}return this.strip()},n.prototype.ishln=function(t){return f(this.negative===0),this.iushln(t)},n.prototype.iushrn=function(t,r,s){f(typeof t=="number"&&t>=0);var h;r?h=(r-r%26)/26:h=0;var d=t%26,m=Math.min((t-d)/26,this.length),y=67108863^67108863>>>d<<d,u=s;if(h-=m,h=Math.max(0,h),u){for(var e=0;e<m;e++)u.words[e]=this.words[e];u.length=m}if(m!==0)if(this.length>m)for(this.length-=m,e=0;e<this.length;e++)this.words[e]=this.words[e+m];else this.words[0]=0,this.length=1;var c=0;for(e=this.length-1;e>=0&&(c!==0||e>=h);e--){var F=this.words[e]|0;this.words[e]=c<<26-d|F>>>d,c=F&y}return u&&c!==0&&(u.words[u.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,r,s){return f(this.negative===0),this.iushrn(t,r,s)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return!1;var d=this.words[s];return!!(d&h)},n.prototype.imaskn=function(t){f(typeof t=="number"&&t>=0);var r=t%26,s=(t-r)/26;if(f(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(r!==0&&s++,this.length=Math.min(s,this.length),r!==0){var h=67108863^67108863>>>r<<r;this.words[this.length-1]&=h}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return f(typeof t=="number"),f(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},n.prototype.isubn=function(t){if(f(typeof t=="number"),f(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,r,s){var h=t.length+s,d;this._expand(h);var m,y=0;for(d=0;d<t.length;d++){m=(this.words[d+s]|0)+y;var u=(t.words[d]|0)*r;m-=u&67108863,y=(m>>26)-(u/67108864|0),this.words[d+s]=m&67108863}for(;d<this.length-s;d++)m=(this.words[d+s]|0)+y,y=m>>26,this.words[d+s]=m&67108863;if(y===0)return this.strip();for(f(y===-1),y=0,d=0;d<this.length;d++)m=-(this.words[d]|0)+y,y=m>>26,this.words[d]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,r){var s=this.length-t.length,h=this.clone(),d=t,m=d.words[d.length-1]|0,y=this._countBits(m);s=26-y,s!==0&&(d=d.ushln(s),h.iushln(s),m=d.words[d.length-1]|0);var u=h.length-d.length,e;if(r!=="mod"){e=new n(null),e.length=u+1,e.words=new Array(e.length);for(var c=0;c<e.length;c++)e.words[c]=0}var F=h.clone()._ishlnsubmul(d,1,u);F.negative===0&&(h=F,e&&(e.words[u]=1));for(var L=u-1;L>=0;L--){var H=(h.words[d.length+L]|0)*67108864+(h.words[d.length+L-1]|0);for(H=Math.min(H/m|0,67108863),h._ishlnsubmul(d,H,L);h.negative!==0;)H--,h.negative=0,h._ishlnsubmul(d,1,L),h.isZero()||(h.negative^=1);e&&(e.words[L]=H)}return e&&e.strip(),h.strip(),r!=="div"&&s!==0&&h.iushrn(s),{div:e||null,mod:h}},n.prototype.divmod=function(t,r,s){if(f(!t.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var h,d,m;return this.negative!==0&&t.negative===0?(m=this.neg().divmod(t,r),r!=="mod"&&(h=m.div.neg()),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.iadd(t)),{div:h,mod:d}):this.negative===0&&t.negative!==0?(m=this.divmod(t.neg(),r),r!=="mod"&&(h=m.div.neg()),{div:h,mod:m.mod}):(this.negative&t.negative)!==0?(m=this.neg().divmod(t.neg(),r),r!=="div"&&(d=m.mod.neg(),s&&d.negative!==0&&d.isub(t)),{div:m.div,mod:d}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,r)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var s=r.div.negative!==0?r.mod.isub(t):r.mod,h=t.ushrn(1),d=t.andln(1),m=s.cmp(h);return m<0||d===1&&m===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},n.prototype.modn=function(t){f(t<=67108863);for(var r=(1<<26)%t,s=0,h=this.length-1;h>=0;h--)s=(r*s+(this.words[h]|0))%t;return s},n.prototype.idivn=function(t){f(t<=67108863);for(var r=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+r*67108864;this.words[s]=h/t|0,r=h%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=new n(0),y=new n(1),u=0;r.isEven()&&s.isEven();)r.iushrn(1),s.iushrn(1),++u;for(var e=s.clone(),c=r.clone();!r.isZero();){for(var F=0,L=1;(r.words[0]&L)===0&&F<26;++F,L<<=1);if(F>0)for(r.iushrn(F);F-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(e),d.isub(c)),h.iushrn(1),d.iushrn(1);for(var H=0,G=1;(s.words[0]&G)===0&&H<26;++H,G<<=1);if(H>0)for(s.iushrn(H);H-- >0;)(m.isOdd()||y.isOdd())&&(m.iadd(e),y.isub(c)),m.iushrn(1),y.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(m),d.isub(y)):(s.isub(r),m.isub(h),y.isub(d))}return{a:m,b:y,gcd:s.iushln(u)}},n.prototype._invmp=function(t){f(t.negative===0),f(!t.isZero());var r=this,s=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new n(1),d=new n(0),m=s.clone();r.cmpn(1)>0&&s.cmpn(1)>0;){for(var y=0,u=1;(r.words[0]&u)===0&&y<26;++y,u<<=1);if(y>0)for(r.iushrn(y);y-- >0;)h.isOdd()&&h.iadd(m),h.iushrn(1);for(var e=0,c=1;(s.words[0]&c)===0&&e<26;++e,c<<=1);if(e>0)for(s.iushrn(e);e-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);r.cmp(s)>=0?(r.isub(s),h.isub(d)):(s.isub(r),d.isub(h))}var F;return r.cmpn(1)===0?F=h:F=d,F.cmpn(0)<0&&F.iadd(t),F},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),s=t.clone();r.negative=0,s.negative=0;for(var h=0;r.isEven()&&s.isEven();h++)r.iushrn(1),s.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;s.isEven();)s.iushrn(1);var d=r.cmp(s);if(d<0){var m=r;r=s,s=m}else if(d===0||s.cmpn(1)===0)break;r.isub(s)}while(!0);return s.iushln(h)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){f(typeof t=="number");var r=t%26,s=(t-r)/26,h=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var d=h,m=s;d!==0&&m<this.length;m++){var y=this.words[m]|0;y+=d,d=y>>>26,y&=67108863,this.words[m]=y}return d!==0&&(this.words[m]=d,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var s;if(this.length>1)s=1;else{r&&(t=-t),f(t<=67108863,"Number is too big");var h=this.words[0]|0;s=h===t?0:h<t?-1:1}return this.negative!==0?-s|0:s},n.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,d=t.words[s]|0;if(h!==d){h<d?r=-1:h>d&&(r=1);break}}return r},n.prototype.gtn=function(t){return this.cmpn(t)===1},n.prototype.gt=function(t){return this.cmp(t)===1},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return this.cmpn(t)===-1},n.prototype.lt=function(t){return this.cmp(t)===-1},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return this.cmpn(t)===0},n.prototype.eq=function(t){return this.cmp(t)===0},n.red=function(t){return new Y(t)},n.prototype.toRed=function(t){return f(!this.red,"Already a number in reduction context"),f(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return f(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return f(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var k={k256:null,p224:null,p192:null,p25519:null};function N(v,t){this.name=v,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},N.prototype.ireduce=function(t){var r=t,s;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),s=r.bitLength();while(s>this.n);var h=s<this.n?-1:r.ucmp(this.p);return h===0?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},N.prototype.split=function(t,r){t.iushrn(this.n,0,r)},N.prototype.imulK=function(t){return t.imul(this.k)};function K(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}g(K,N),K.prototype.split=function(t,r){for(var s=4194303,h=Math.min(t.length,9),d=0;d<h;d++)r.words[d]=t.words[d];if(r.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var m=t.words[9];for(r.words[r.length++]=m&s,d=10;d<t.length;d++){var y=t.words[d]|0;t.words[d-10]=(y&s)<<4|m>>>22,m=y}m>>>=22,t.words[d-10]=m,m===0&&t.length>10?t.length-=10:t.length-=9},K.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,s=0;s<t.length;s++){var h=t.words[s]|0;r+=h*977,t.words[s]=r&67108863,r=h*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function $(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}g($,N);function P(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}g(P,N);function z(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}g(z,N),z.prototype.imulK=function(t){for(var r=0,s=0;s<t.length;s++){var h=(t.words[s]|0)*19+r,d=h&67108863;h>>>=26,t.words[s]=d,r=h}return r!==0&&(t.words[t.length++]=r),t},n._prime=function(t){if(k[t])return k[t];var r;if(t==="k256")r=new K;else if(t==="p224")r=new $;else if(t==="p192")r=new P;else if(t==="p25519")r=new z;else throw new Error("Unknown prime "+t);return k[t]=r,r};function Y(v){if(typeof v=="string"){var t=n._prime(v);this.m=t.p,this.prime=t}else f(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Y.prototype._verify1=function(t){f(t.negative===0,"red works only with positives"),f(t.red,"red works only with red numbers")},Y.prototype._verify2=function(t,r){f((t.negative|r.negative)===0,"red works only with positives"),f(t.red&&t.red===r.red,"red works only with red numbers")},Y.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Y.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Y.prototype.add=function(t,r){this._verify2(t,r);var s=t.add(r);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Y.prototype.iadd=function(t,r){this._verify2(t,r);var s=t.iadd(r);return s.cmp(this.m)>=0&&s.isub(this.m),s},Y.prototype.sub=function(t,r){this._verify2(t,r);var s=t.sub(r);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},Y.prototype.isub=function(t,r){this._verify2(t,r);var s=t.isub(r);return s.cmpn(0)<0&&s.iadd(this.m),s},Y.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},Y.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Y.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Y.prototype.isqr=function(t){return this.imul(t,t.clone())},Y.prototype.sqr=function(t){return this.mul(t,t)},Y.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(f(r%2===1),r===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);f(!h.isZero());var m=new n(1).toRed(this),y=m.redNeg(),u=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new n(2*e*e).toRed(this);this.pow(e,u).cmp(y)!==0;)e.redIAdd(y);for(var c=this.pow(e,h),F=this.pow(t,h.addn(1).iushrn(1)),L=this.pow(t,h),H=d;L.cmp(m)!==0;){for(var G=L,tt=0;G.cmp(m)!==0;tt++)G=G.redSqr();f(tt<H);var Z=this.pow(c,new n(1).iushln(H-tt-1));F=F.redMul(Z),c=Z.redSqr(),L=L.redMul(c),H=tt}return F},Y.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Y.prototype.pow=function(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var s=4,h=new Array(1<<s);h[0]=new n(1).toRed(this),h[1]=t;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],t);var m=h[0],y=0,u=0,e=r.bitLength()%26;for(e===0&&(e=26),d=r.length-1;d>=0;d--){for(var c=r.words[d],F=e-1;F>=0;F--){var L=c>>F&1;if(m!==h[0]&&(m=this.sqr(m)),L===0&&y===0){u=0;continue}y<<=1,y|=L,u++,!(u!==s&&(d!==0||F!==0))&&(m=this.mul(m,h[y]),u=0,y=0)}e=26}return m},Y.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},Y.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},n.mont=function(t){return new nt(t)};function nt(v){Y.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g(nt,Y),nt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},nt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},nt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var s=t.mul(r),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=s.isub(h).iushrn(this.shift),m=d;return d.cmp(this.m)>=0?m=d.isub(this.m):d.cmpn(0)<0&&(m=d.iadd(this.m)),m._forceRed(this)},nt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(l,ve)}(K0)),K0.exports}var j0,x1;function gg(){if(x1)return j0;x1=1;var l=$u(),i=qe().Buffer;function a(f,g){return i.from(f.toRed(l.mont(g.modulus)).redPow(new l(g.publicExponent)).fromRed().toArray())}return j0=a,j0}var V0,E1;function A_(){if(E1)return V0;E1=1;var l=$o(),i=ds(),a=ia(),f=pg(),g=vg(),n=$u(),x=gg(),M=qu(),_=qe().Buffer;V0=function(I,R,T){var B;I.padding?B=I.padding:T?B=1:B=4;var D=l(I),q;if(B===4)q=w(D,R);else if(B===1)q=b(D,R,T);else if(B===3){if(q=new n(R),q.cmp(D.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return T?M(q,D):x(q,D)};function w(E,I){var R=E.modulus.byteLength(),T=I.length,B=a("sha1").update(_.alloc(0)).digest(),D=B.length,q=2*D;if(T>R-q-2)throw new Error("message too long");var k=_.alloc(R-T-q-2),N=R-D-1,K=i(D),$=g(_.concat([B,k,_.alloc(1,1),I],N),f(K,N)),P=g(K,f($,D));return new n(_.concat([_.alloc(1),P,$],R))}function b(E,I,R){var T=I.length,B=E.modulus.byteLength();if(T>B-11)throw new Error("message too long");var D;return R?D=_.alloc(B-T-3,255):D=A(B-T-3),new n(_.concat([_.from([0,R?1:2]),D,_.alloc(1),I],B))}function A(E){for(var I=_.allocUnsafe(E),R=0,T=i(E*2),B=0,D;R<E;)B===T.length&&(T=i(E*2),B=0),D=T[B++],D&&(I[R++]=D);return I}return V0}var G0,S1;function I_(){if(S1)return G0;S1=1;var l=$o(),i=pg(),a=vg(),f=$u(),g=qu(),n=ia(),x=gg(),M=qe().Buffer;G0=function(E,I,R){var T;E.padding?T=E.padding:R?T=1:T=4;var B=l(E),D=B.modulus.byteLength();if(I.length>D||new f(I).cmp(B.modulus)>=0)throw new Error("decryption error");var q;R?q=x(new f(I),B):q=g(I,B);var k=M.alloc(D-q.length);if(q=M.concat([k,q],D),T===4)return _(B,q);if(T===1)return w(B,q,R);if(T===3)return q;throw new Error("unknown padding")};function _(A,E){var I=A.modulus.byteLength(),R=n("sha1").update(M.alloc(0)).digest(),T=R.length;if(E[0]!==0)throw new Error("decryption error");var B=E.slice(1,T+1),D=E.slice(T+1),q=a(B,i(D,T)),k=a(D,i(q,I-T-1));if(b(R,k.slice(0,T)))throw new Error("decryption error");for(var N=T;k[N]===0;)N++;if(k[N++]!==1)throw new Error("decryption error");return k.slice(N)}function w(A,E,I){for(var R=E.slice(0,2),T=2,B=0;E[T++]!==0;)if(T>=E.length){B++;break}var D=E.slice(2,T-1);if((R.toString("hex")!=="0002"&&!I||R.toString("hex")!=="0001"&&I)&&B++,D.length<8&&B++,B)throw new Error("decryption error");return E.slice(T)}function b(A,E){A=M.from(A),E=M.from(E);var I=0,R=A.length;A.length!==E.length&&(I++,R=Math.min(A.length,E.length));for(var T=-1;++T<R;)I+=A[T]^E[T];return I}return G0}var A1;function R_(){return A1||(A1=1,function(l){l.publicEncrypt=A_(),l.privateDecrypt=I_(),l.privateEncrypt=function(a,f){return l.publicEncrypt(a,f,!0)},l.publicDecrypt=function(a,f){return l.privateDecrypt(a,f,!0)}}($0)),$0}var as={},I1;function P_(){if(I1)return as;I1=1;function l(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var i=qe(),a=ds(),f=i.Buffer,g=i.kMaxLength,n=ve.crypto||ve.msCrypto,x=Math.pow(2,32)-1;function M(E,I){if(typeof E!="number"||E!==E)throw new TypeError("offset must be a number");if(E>x||E<0)throw new TypeError("offset must be a uint32");if(E>g||E>I)throw new RangeError("offset out of range")}function _(E,I,R){if(typeof E!="number"||E!==E)throw new TypeError("size must be a number");if(E>x||E<0)throw new TypeError("size must be a uint32");if(E+I>R||E>g)throw new RangeError("buffer too small")}n&&n.getRandomValues||!bi.exports.browser?(as.randomFill=w,as.randomFillSync=A):(as.randomFill=l,as.randomFillSync=l);function w(E,I,R,T){if(!f.isBuffer(E)&&!(E instanceof ve.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof I=="function")T=I,I=0,R=E.length;else if(typeof R=="function")T=R,R=E.length-I;else if(typeof T!="function")throw new TypeError('"cb" argument must be a function');return M(I,E.length),_(R,I,E.length),b(E,I,R,T)}function b(E,I,R,T){if(bi.exports.browser){var B=E.buffer,D=new Uint8Array(B,I,R);if(n.getRandomValues(D),T){bi.exports.nextTick(function(){T(null,E)});return}return E}if(T){a(R,function(k,N){if(k)return T(k);N.copy(E,I),T(null,E)});return}var q=a(R);return q.copy(E,I),E}function A(E,I,R){if(typeof I>"u"&&(I=0),!f.isBuffer(E)&&!(E instanceof ve.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return M(I,E.length),R===void 0&&(R=E.length-I),_(R,I,E.length),b(E,I,R)}return as}var R1;function mg(){if(R1)return ye;R1=1,ye.randomBytes=ye.rng=ye.pseudoRandomBytes=ye.prng=ds(),ye.createHash=ye.Hash=ia(),ye.createHmac=ye.Hmac=Hv();var l=f4(),i=Object.keys(l),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);ye.getHashes=function(){return a};var f=Wv();ye.pbkdf2=f.pbkdf2,ye.pbkdf2Sync=f.pbkdf2Sync;var g=I4();ye.Cipher=g.Cipher,ye.createCipher=g.createCipher,ye.Cipheriv=g.Cipheriv,ye.createCipheriv=g.createCipheriv,ye.Decipher=g.Decipher,ye.createDecipher=g.createDecipher,ye.Decipheriv=g.Decipheriv,ye.createDecipheriv=g.createDecipheriv,ye.getCiphers=g.getCiphers,ye.listCiphers=g.listCiphers;var n=U4();ye.DiffieHellmanGroup=n.DiffieHellmanGroup,ye.createDiffieHellmanGroup=n.createDiffieHellmanGroup,ye.getDiffieHellman=n.getDiffieHellman,ye.createDiffieHellman=n.createDiffieHellman,ye.DiffieHellman=n.DiffieHellman;var x=x_();ye.createSign=x.createSign,ye.Sign=x.Sign,ye.createVerify=x.createVerify,ye.Verify=x.Verify,ye.createECDH=S_();var M=R_();ye.publicEncrypt=M.publicEncrypt,ye.privateEncrypt=M.privateEncrypt,ye.publicDecrypt=M.publicDecrypt,ye.privateDecrypt=M.privateDecrypt;var _=P_();return ye.randomFill=_.randomFill,ye.randomFillSync=_.randomFillSync,ye.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},ye.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},ye}Object.defineProperty(Lo,"__esModule",{value:!0});Lo.NodeRandomSource=void 0;const O_=si;class T_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof G5<"u"){const i=mg();i&&i.randomBytes&&(this._crypto=i,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(i){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let a=this._crypto.randomBytes(i);if(a.length!==i)throw new Error("NodeRandomSource: got fewer bytes than requested");const f=new Uint8Array(i);for(let g=0;g<f.length;g++)f[g]=a[g];return(0,O_.wipe)(a),f}}Lo.NodeRandomSource=T_;Object.defineProperty(No,"__esModule",{value:!0});No.SystemRandomSource=void 0;const C_=Do,B_=Lo;class q_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new C_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new B_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(i){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(i)}}No.SystemRandomSource=q_;var ge={},bg={};(function(l){Object.defineProperty(l,"__esModule",{value:!0});function i(M,_){var w=M>>>16&65535,b=M&65535,A=_>>>16&65535,E=_&65535;return b*E+(w*E+b*A<<16>>>0)|0}l.mul=Math.imul||i;function a(M,_){return M+_|0}l.add=a;function f(M,_){return M-_|0}l.sub=f;function g(M,_){return M<<_|M>>>32-_}l.rotl=g;function n(M,_){return M<<32-_|M>>>_}l.rotr=n;function x(M){return typeof M=="number"&&isFinite(M)&&Math.floor(M)===M}l.isInteger=Number.isInteger||x,l.MAX_SAFE_INTEGER=9007199254740991,l.isSafeInteger=function(M){return l.isInteger(M)&&M>=-l.MAX_SAFE_INTEGER&&M<=l.MAX_SAFE_INTEGER}})(bg);Object.defineProperty(ge,"__esModule",{value:!0});var yg=bg;function N_(l,i){return i===void 0&&(i=0),(l[i+0]<<8|l[i+1])<<16>>16}ge.readInt16BE=N_;function D_(l,i){return i===void 0&&(i=0),(l[i+0]<<8|l[i+1])>>>0}ge.readUint16BE=D_;function L_(l,i){return i===void 0&&(i=0),(l[i+1]<<8|l[i])<<16>>16}ge.readInt16LE=L_;function k_(l,i){return i===void 0&&(i=0),(l[i+1]<<8|l[i])>>>0}ge.readUint16LE=k_;function wg(l,i,a){return i===void 0&&(i=new Uint8Array(2)),a===void 0&&(a=0),i[a+0]=l>>>8,i[a+1]=l>>>0,i}ge.writeUint16BE=wg;ge.writeInt16BE=wg;function _g(l,i,a){return i===void 0&&(i=new Uint8Array(2)),a===void 0&&(a=0),i[a+0]=l>>>0,i[a+1]=l>>>8,i}ge.writeUint16LE=_g;ge.writeInt16LE=_g;function au(l,i){return i===void 0&&(i=0),l[i]<<24|l[i+1]<<16|l[i+2]<<8|l[i+3]}ge.readInt32BE=au;function ou(l,i){return i===void 0&&(i=0),(l[i]<<24|l[i+1]<<16|l[i+2]<<8|l[i+3])>>>0}ge.readUint32BE=ou;function fu(l,i){return i===void 0&&(i=0),l[i+3]<<24|l[i+2]<<16|l[i+1]<<8|l[i]}ge.readInt32LE=fu;function hu(l,i){return i===void 0&&(i=0),(l[i+3]<<24|l[i+2]<<16|l[i+1]<<8|l[i])>>>0}ge.readUint32LE=hu;function Ro(l,i,a){return i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0),i[a+0]=l>>>24,i[a+1]=l>>>16,i[a+2]=l>>>8,i[a+3]=l>>>0,i}ge.writeUint32BE=Ro;ge.writeInt32BE=Ro;function Po(l,i,a){return i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0),i[a+0]=l>>>0,i[a+1]=l>>>8,i[a+2]=l>>>16,i[a+3]=l>>>24,i}ge.writeUint32LE=Po;ge.writeInt32LE=Po;function U_(l,i){i===void 0&&(i=0);var a=au(l,i),f=au(l,i+4);return a*4294967296+f-(f>>31)*4294967296}ge.readInt64BE=U_;function F_(l,i){i===void 0&&(i=0);var a=ou(l,i),f=ou(l,i+4);return a*4294967296+f}ge.readUint64BE=F_;function $_(l,i){i===void 0&&(i=0);var a=fu(l,i),f=fu(l,i+4);return f*4294967296+a-(a>>31)*4294967296}ge.readInt64LE=$_;function z_(l,i){i===void 0&&(i=0);var a=hu(l,i),f=hu(l,i+4);return f*4294967296+a}ge.readUint64LE=z_;function Mg(l,i,a){return i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0),Ro(l/4294967296>>>0,i,a),Ro(l>>>0,i,a+4),i}ge.writeUint64BE=Mg;ge.writeInt64BE=Mg;function xg(l,i,a){return i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0),Po(l>>>0,i,a),Po(l/4294967296>>>0,i,a+4),i}ge.writeUint64LE=xg;ge.writeInt64LE=xg;function H_(l,i,a){if(a===void 0&&(a=0),l%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(l/8>i.length-a)throw new Error("readUintBE: array is too short for the given bitLength");for(var f=0,g=1,n=l/8+a-1;n>=a;n--)f+=i[n]*g,g*=256;return f}ge.readUintBE=H_;function K_(l,i,a){if(a===void 0&&(a=0),l%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(l/8>i.length-a)throw new Error("readUintLE: array is too short for the given bitLength");for(var f=0,g=1,n=a;n<a+l/8;n++)f+=i[n]*g,g*=256;return f}ge.readUintLE=K_;function j_(l,i,a,f){if(a===void 0&&(a=new Uint8Array(l/8)),f===void 0&&(f=0),l%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!yg.isSafeInteger(i))throw new Error("writeUintBE value must be an integer");for(var g=1,n=l/8+f-1;n>=f;n--)a[n]=i/g&255,g*=256;return a}ge.writeUintBE=j_;function V_(l,i,a,f){if(a===void 0&&(a=new Uint8Array(l/8)),f===void 0&&(f=0),l%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!yg.isSafeInteger(i))throw new Error("writeUintLE value must be an integer");for(var g=1,n=f;n<f+l/8;n++)a[n]=i/g&255,g*=256;return a}ge.writeUintLE=V_;function G_(l,i){i===void 0&&(i=0);var a=new DataView(l.buffer,l.byteOffset,l.byteLength);return a.getFloat32(i)}ge.readFloat32BE=G_;function Z_(l,i){i===void 0&&(i=0);var a=new DataView(l.buffer,l.byteOffset,l.byteLength);return a.getFloat32(i,!0)}ge.readFloat32LE=Z_;function W_(l,i){i===void 0&&(i=0);var a=new DataView(l.buffer,l.byteOffset,l.byteLength);return a.getFloat64(i)}ge.readFloat64BE=W_;function Y_(l,i){i===void 0&&(i=0);var a=new DataView(l.buffer,l.byteOffset,l.byteLength);return a.getFloat64(i,!0)}ge.readFloat64LE=Y_;function J_(l,i,a){i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0);var f=new DataView(i.buffer,i.byteOffset,i.byteLength);return f.setFloat32(a,l),i}ge.writeFloat32BE=J_;function X_(l,i,a){i===void 0&&(i=new Uint8Array(4)),a===void 0&&(a=0);var f=new DataView(i.buffer,i.byteOffset,i.byteLength);return f.setFloat32(a,l,!0),i}ge.writeFloat32LE=X_;function Q_(l,i,a){i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0);var f=new DataView(i.buffer,i.byteOffset,i.byteLength);return f.setFloat64(a,l),i}ge.writeFloat64BE=Q_;function tM(l,i,a){i===void 0&&(i=new Uint8Array(8)),a===void 0&&(a=0);var f=new DataView(i.buffer,i.byteOffset,i.byteLength);return f.setFloat64(a,l,!0),i}ge.writeFloat64LE=tM;(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.randomStringForEntropy=l.randomString=l.randomUint32=l.randomBytes=l.defaultRandomSource=void 0;const i=No,a=ge,f=si;l.defaultRandomSource=new i.SystemRandomSource;function g(w,b=l.defaultRandomSource){return b.randomBytes(w)}l.randomBytes=g;function n(w=l.defaultRandomSource){const b=g(4,w),A=(0,a.readUint32LE)(b);return(0,f.wipe)(b),A}l.randomUint32=n;const x="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function M(w,b=x,A=l.defaultRandomSource){if(b.length<2)throw new Error("randomString charset is too short");if(b.length>256)throw new Error("randomString charset is too long");let E="";const I=b.length,R=256-256%I;for(;w>0;){const T=g(Math.ceil(w*256/R),A);for(let B=0;B<T.length&&w>0;B++){const D=T[B];D<R&&(E+=b.charAt(D%I),w--)}(0,f.wipe)(T)}return E}l.randomString=M;function _(w,b=x,A=l.defaultRandomSource){const E=Math.ceil(w/(Math.log(b.length)/Math.LN2));return M(E,b,A)}l.randomStringForEntropy=_})(ls);var Eg={};(function(l){Object.defineProperty(l,"__esModule",{value:!0});var i=ge,a=si;l.DIGEST_LENGTH=64,l.BLOCK_SIZE=128;var f=function(){function M(){this.digestLength=l.DIGEST_LENGTH,this.blockSize=l.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return M.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},M.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},M.prototype.clean=function(){a.wipe(this._buffer),a.wipe(this._tempHi),a.wipe(this._tempLo),this.reset()},M.prototype.update=function(_,w){if(w===void 0&&(w=_.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var b=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<l.BLOCK_SIZE&&w>0;)this._buffer[this._bufferLength++]=_[b++],w--;this._bufferLength===this.blockSize&&(n(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(b=n(this._tempHi,this._tempLo,this._stateHi,this._stateLo,_,b,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=_[b++],w--;return this},M.prototype.finish=function(_){if(!this._finished){var w=this._bytesHashed,b=this._bufferLength,A=w/536870912|0,E=w<<3,I=w%128<112?128:256;this._buffer[b]=128;for(var R=b+1;R<I-8;R++)this._buffer[R]=0;i.writeUint32BE(A,this._buffer,I-8),i.writeUint32BE(E,this._buffer,I-4),n(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,I),this._finished=!0}for(var R=0;R<this.digestLength/8;R++)i.writeUint32BE(this._stateHi[R],_,R*8),i.writeUint32BE(this._stateLo[R],_,R*8+4);return this},M.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},M.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},M.prototype.restoreState=function(_){return this._stateHi.set(_.stateHi),this._stateLo.set(_.stateLo),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},M.prototype.cleanSavedState=function(_){a.wipe(_.stateHi),a.wipe(_.stateLo),_.buffer&&a.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},M}();l.SHA512=f;var g=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function n(M,_,w,b,A,E,I){for(var R=w[0],T=w[1],B=w[2],D=w[3],q=w[4],k=w[5],N=w[6],K=w[7],$=b[0],P=b[1],z=b[2],Y=b[3],nt=b[4],v=b[5],t=b[6],r=b[7],s,h,d,m,y,u,e,c;I>=128;){for(var F=0;F<16;F++){var L=8*F+E;M[F]=i.readUint32BE(A,L),_[F]=i.readUint32BE(A,L+4)}for(var F=0;F<80;F++){var H=R,G=T,tt=B,Z=D,et=q,j=k,O=N,Q=K,rt=$,st=P,Jt=z,gt=Y,mt=nt,ee=v,_t=t,Mt=r;if(s=K,h=r,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=(q>>>14|nt<<32-14)^(q>>>18|nt<<32-18)^(nt>>>41-32|q<<32-(41-32)),h=(nt>>>14|q<<32-14)^(nt>>>18|q<<32-18)^(q>>>41-32|nt<<32-(41-32)),y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,s=q&k^~q&N,h=nt&v^~nt&t,y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,s=g[F*2],h=g[F*2+1],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,s=M[F%16],h=_[F%16],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,d=e&65535|c<<16,m=y&65535|u<<16,s=d,h=m,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=(R>>>28|$<<32-28)^($>>>34-32|R<<32-(34-32))^($>>>39-32|R<<32-(39-32)),h=($>>>28|R<<32-28)^(R>>>34-32|$<<32-(34-32))^(R>>>39-32|$<<32-(39-32)),y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,s=R&T^R&B^T&B,h=$&P^$&z^P&z,y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,Q=e&65535|c<<16,Mt=y&65535|u<<16,s=Z,h=gt,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=d,h=m,y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,Z=e&65535|c<<16,gt=y&65535|u<<16,T=H,B=G,D=tt,q=Z,k=et,N=j,K=O,R=Q,P=rt,z=st,Y=Jt,nt=gt,v=mt,t=ee,r=_t,$=Mt,F%16===15)for(var L=0;L<16;L++)s=M[L],h=_[L],y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=M[(L+9)%16],h=_[(L+9)%16],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,d=M[(L+1)%16],m=_[(L+1)%16],s=(d>>>1|m<<32-1)^(d>>>8|m<<32-8)^d>>>7,h=(m>>>1|d<<32-1)^(m>>>8|d<<32-8)^(m>>>7|d<<32-7),y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,d=M[(L+14)%16],m=_[(L+14)%16],s=(d>>>19|m<<32-19)^(m>>>61-32|d<<32-(61-32))^d>>>6,h=(m>>>19|d<<32-19)^(d>>>61-32|m<<32-(61-32))^(m>>>6|d<<32-6),y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,M[L]=e&65535|c<<16,_[L]=y&65535|u<<16}s=R,h=$,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[0],h=b[0],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[0]=R=e&65535|c<<16,b[0]=$=y&65535|u<<16,s=T,h=P,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[1],h=b[1],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[1]=T=e&65535|c<<16,b[1]=P=y&65535|u<<16,s=B,h=z,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[2],h=b[2],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[2]=B=e&65535|c<<16,b[2]=z=y&65535|u<<16,s=D,h=Y,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[3],h=b[3],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[3]=D=e&65535|c<<16,b[3]=Y=y&65535|u<<16,s=q,h=nt,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[4],h=b[4],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[4]=q=e&65535|c<<16,b[4]=nt=y&65535|u<<16,s=k,h=v,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[5],h=b[5],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[5]=k=e&65535|c<<16,b[5]=v=y&65535|u<<16,s=N,h=t,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[6],h=b[6],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[6]=N=e&65535|c<<16,b[6]=t=y&65535|u<<16,s=K,h=r,y=h&65535,u=h>>>16,e=s&65535,c=s>>>16,s=w[7],h=b[7],y+=h&65535,u+=h>>>16,e+=s&65535,c+=s>>>16,u+=y>>>16,e+=u>>>16,c+=e>>>16,w[7]=K=e&65535|c<<16,b[7]=r=y&65535|u<<16,E+=128,I-=128}return E}function x(M){var _=new f;_.update(M);var w=_.digest();return _.clean(),w}l.hash=x})(Eg);(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.convertSecretKeyToX25519=l.convertPublicKeyToX25519=l.verify=l.sign=l.extractPublicKeyFromSecretKey=l.generateKeyPair=l.generateKeyPairFromSeed=l.SEED_LENGTH=l.SECRET_KEY_LENGTH=l.PUBLIC_KEY_LENGTH=l.SIGNATURE_LENGTH=void 0;const i=ls,a=Eg,f=si;l.SIGNATURE_LENGTH=64,l.PUBLIC_KEY_LENGTH=32,l.SECRET_KEY_LENGTH=64,l.SEED_LENGTH=32;function g(Z){const et=new Float64Array(16);if(Z)for(let j=0;j<Z.length;j++)et[j]=Z[j];return et}const n=new Uint8Array(32);n[0]=9;const x=g(),M=g([1]),_=g([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),w=g([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=g([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=g([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),E=g([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function I(Z,et){for(let j=0;j<16;j++)Z[j]=et[j]|0}function R(Z){let et=1;for(let j=0;j<16;j++){let O=Z[j]+et+65535;et=Math.floor(O/65536),Z[j]=O-et*65536}Z[0]+=et-1+37*(et-1)}function T(Z,et,j){const O=~(j-1);for(let Q=0;Q<16;Q++){const rt=O&(Z[Q]^et[Q]);Z[Q]^=rt,et[Q]^=rt}}function B(Z,et){const j=g(),O=g();for(let Q=0;Q<16;Q++)O[Q]=et[Q];R(O),R(O),R(O);for(let Q=0;Q<2;Q++){j[0]=O[0]-65517;for(let st=1;st<15;st++)j[st]=O[st]-65535-(j[st-1]>>16&1),j[st-1]&=65535;j[15]=O[15]-32767-(j[14]>>16&1);const rt=j[15]>>16&1;j[14]&=65535,T(O,j,1-rt)}for(let Q=0;Q<16;Q++)Z[2*Q]=O[Q]&255,Z[2*Q+1]=O[Q]>>8}function D(Z,et){let j=0;for(let O=0;O<32;O++)j|=Z[O]^et[O];return(1&j-1>>>8)-1}function q(Z,et){const j=new Uint8Array(32),O=new Uint8Array(32);return B(j,Z),B(O,et),D(j,O)}function k(Z){const et=new Uint8Array(32);return B(et,Z),et[0]&1}function N(Z,et){for(let j=0;j<16;j++)Z[j]=et[2*j]+(et[2*j+1]<<8);Z[15]&=32767}function K(Z,et,j){for(let O=0;O<16;O++)Z[O]=et[O]+j[O]}function $(Z,et,j){for(let O=0;O<16;O++)Z[O]=et[O]-j[O]}function P(Z,et,j){let O,Q,rt=0,st=0,Jt=0,gt=0,mt=0,ee=0,_t=0,Mt=0,ie=0,ut=0,pt=0,Xt=0,vt=0,lt=0,Qt=0,ht=0,dt=0,ne=0,ct=0,bt=0,se=0,yt=0,wt=0,ae=0,qt=0,Lt=0,Fe=0,Nt=0,kt=0,ar=0,Ut=0,Et=j[0],pe=j[1],St=j[2],At=j[3],me=j[4],xt=j[5],Ot=j[6],xe=j[7],It=j[8],Tt=j[9],we=j[10],Pt=j[11],Rt=j[12],ue=j[13],Ct=j[14],Bt=j[15];O=et[0],rt+=O*Et,st+=O*pe,Jt+=O*St,gt+=O*At,mt+=O*me,ee+=O*xt,_t+=O*Ot,Mt+=O*xe,ie+=O*It,ut+=O*Tt,pt+=O*we,Xt+=O*Pt,vt+=O*Rt,lt+=O*ue,Qt+=O*Ct,ht+=O*Bt,O=et[1],st+=O*Et,Jt+=O*pe,gt+=O*St,mt+=O*At,ee+=O*me,_t+=O*xt,Mt+=O*Ot,ie+=O*xe,ut+=O*It,pt+=O*Tt,Xt+=O*we,vt+=O*Pt,lt+=O*Rt,Qt+=O*ue,ht+=O*Ct,dt+=O*Bt,O=et[2],Jt+=O*Et,gt+=O*pe,mt+=O*St,ee+=O*At,_t+=O*me,Mt+=O*xt,ie+=O*Ot,ut+=O*xe,pt+=O*It,Xt+=O*Tt,vt+=O*we,lt+=O*Pt,Qt+=O*Rt,ht+=O*ue,dt+=O*Ct,ne+=O*Bt,O=et[3],gt+=O*Et,mt+=O*pe,ee+=O*St,_t+=O*At,Mt+=O*me,ie+=O*xt,ut+=O*Ot,pt+=O*xe,Xt+=O*It,vt+=O*Tt,lt+=O*we,Qt+=O*Pt,ht+=O*Rt,dt+=O*ue,ne+=O*Ct,ct+=O*Bt,O=et[4],mt+=O*Et,ee+=O*pe,_t+=O*St,Mt+=O*At,ie+=O*me,ut+=O*xt,pt+=O*Ot,Xt+=O*xe,vt+=O*It,lt+=O*Tt,Qt+=O*we,ht+=O*Pt,dt+=O*Rt,ne+=O*ue,ct+=O*Ct,bt+=O*Bt,O=et[5],ee+=O*Et,_t+=O*pe,Mt+=O*St,ie+=O*At,ut+=O*me,pt+=O*xt,Xt+=O*Ot,vt+=O*xe,lt+=O*It,Qt+=O*Tt,ht+=O*we,dt+=O*Pt,ne+=O*Rt,ct+=O*ue,bt+=O*Ct,se+=O*Bt,O=et[6],_t+=O*Et,Mt+=O*pe,ie+=O*St,ut+=O*At,pt+=O*me,Xt+=O*xt,vt+=O*Ot,lt+=O*xe,Qt+=O*It,ht+=O*Tt,dt+=O*we,ne+=O*Pt,ct+=O*Rt,bt+=O*ue,se+=O*Ct,yt+=O*Bt,O=et[7],Mt+=O*Et,ie+=O*pe,ut+=O*St,pt+=O*At,Xt+=O*me,vt+=O*xt,lt+=O*Ot,Qt+=O*xe,ht+=O*It,dt+=O*Tt,ne+=O*we,ct+=O*Pt,bt+=O*Rt,se+=O*ue,yt+=O*Ct,wt+=O*Bt,O=et[8],ie+=O*Et,ut+=O*pe,pt+=O*St,Xt+=O*At,vt+=O*me,lt+=O*xt,Qt+=O*Ot,ht+=O*xe,dt+=O*It,ne+=O*Tt,ct+=O*we,bt+=O*Pt,se+=O*Rt,yt+=O*ue,wt+=O*Ct,ae+=O*Bt,O=et[9],ut+=O*Et,pt+=O*pe,Xt+=O*St,vt+=O*At,lt+=O*me,Qt+=O*xt,ht+=O*Ot,dt+=O*xe,ne+=O*It,ct+=O*Tt,bt+=O*we,se+=O*Pt,yt+=O*Rt,wt+=O*ue,ae+=O*Ct,qt+=O*Bt,O=et[10],pt+=O*Et,Xt+=O*pe,vt+=O*St,lt+=O*At,Qt+=O*me,ht+=O*xt,dt+=O*Ot,ne+=O*xe,ct+=O*It,bt+=O*Tt,se+=O*we,yt+=O*Pt,wt+=O*Rt,ae+=O*ue,qt+=O*Ct,Lt+=O*Bt,O=et[11],Xt+=O*Et,vt+=O*pe,lt+=O*St,Qt+=O*At,ht+=O*me,dt+=O*xt,ne+=O*Ot,ct+=O*xe,bt+=O*It,se+=O*Tt,yt+=O*we,wt+=O*Pt,ae+=O*Rt,qt+=O*ue,Lt+=O*Ct,Fe+=O*Bt,O=et[12],vt+=O*Et,lt+=O*pe,Qt+=O*St,ht+=O*At,dt+=O*me,ne+=O*xt,ct+=O*Ot,bt+=O*xe,se+=O*It,yt+=O*Tt,wt+=O*we,ae+=O*Pt,qt+=O*Rt,Lt+=O*ue,Fe+=O*Ct,Nt+=O*Bt,O=et[13],lt+=O*Et,Qt+=O*pe,ht+=O*St,dt+=O*At,ne+=O*me,ct+=O*xt,bt+=O*Ot,se+=O*xe,yt+=O*It,wt+=O*Tt,ae+=O*we,qt+=O*Pt,Lt+=O*Rt,Fe+=O*ue,Nt+=O*Ct,kt+=O*Bt,O=et[14],Qt+=O*Et,ht+=O*pe,dt+=O*St,ne+=O*At,ct+=O*me,bt+=O*xt,se+=O*Ot,yt+=O*xe,wt+=O*It,ae+=O*Tt,qt+=O*we,Lt+=O*Pt,Fe+=O*Rt,Nt+=O*ue,kt+=O*Ct,ar+=O*Bt,O=et[15],ht+=O*Et,dt+=O*pe,ne+=O*St,ct+=O*At,bt+=O*me,se+=O*xt,yt+=O*Ot,wt+=O*xe,ae+=O*It,qt+=O*Tt,Lt+=O*we,Fe+=O*Pt,Nt+=O*Rt,kt+=O*ue,ar+=O*Ct,Ut+=O*Bt,rt+=38*dt,st+=38*ne,Jt+=38*ct,gt+=38*bt,mt+=38*se,ee+=38*yt,_t+=38*wt,Mt+=38*ae,ie+=38*qt,ut+=38*Lt,pt+=38*Fe,Xt+=38*Nt,vt+=38*kt,lt+=38*ar,Qt+=38*Ut,Q=1,O=rt+Q+65535,Q=Math.floor(O/65536),rt=O-Q*65536,O=st+Q+65535,Q=Math.floor(O/65536),st=O-Q*65536,O=Jt+Q+65535,Q=Math.floor(O/65536),Jt=O-Q*65536,O=gt+Q+65535,Q=Math.floor(O/65536),gt=O-Q*65536,O=mt+Q+65535,Q=Math.floor(O/65536),mt=O-Q*65536,O=ee+Q+65535,Q=Math.floor(O/65536),ee=O-Q*65536,O=_t+Q+65535,Q=Math.floor(O/65536),_t=O-Q*65536,O=Mt+Q+65535,Q=Math.floor(O/65536),Mt=O-Q*65536,O=ie+Q+65535,Q=Math.floor(O/65536),ie=O-Q*65536,O=ut+Q+65535,Q=Math.floor(O/65536),ut=O-Q*65536,O=pt+Q+65535,Q=Math.floor(O/65536),pt=O-Q*65536,O=Xt+Q+65535,Q=Math.floor(O/65536),Xt=O-Q*65536,O=vt+Q+65535,Q=Math.floor(O/65536),vt=O-Q*65536,O=lt+Q+65535,Q=Math.floor(O/65536),lt=O-Q*65536,O=Qt+Q+65535,Q=Math.floor(O/65536),Qt=O-Q*65536,O=ht+Q+65535,Q=Math.floor(O/65536),ht=O-Q*65536,rt+=Q-1+37*(Q-1),Q=1,O=rt+Q+65535,Q=Math.floor(O/65536),rt=O-Q*65536,O=st+Q+65535,Q=Math.floor(O/65536),st=O-Q*65536,O=Jt+Q+65535,Q=Math.floor(O/65536),Jt=O-Q*65536,O=gt+Q+65535,Q=Math.floor(O/65536),gt=O-Q*65536,O=mt+Q+65535,Q=Math.floor(O/65536),mt=O-Q*65536,O=ee+Q+65535,Q=Math.floor(O/65536),ee=O-Q*65536,O=_t+Q+65535,Q=Math.floor(O/65536),_t=O-Q*65536,O=Mt+Q+65535,Q=Math.floor(O/65536),Mt=O-Q*65536,O=ie+Q+65535,Q=Math.floor(O/65536),ie=O-Q*65536,O=ut+Q+65535,Q=Math.floor(O/65536),ut=O-Q*65536,O=pt+Q+65535,Q=Math.floor(O/65536),pt=O-Q*65536,O=Xt+Q+65535,Q=Math.floor(O/65536),Xt=O-Q*65536,O=vt+Q+65535,Q=Math.floor(O/65536),vt=O-Q*65536,O=lt+Q+65535,Q=Math.floor(O/65536),lt=O-Q*65536,O=Qt+Q+65535,Q=Math.floor(O/65536),Qt=O-Q*65536,O=ht+Q+65535,Q=Math.floor(O/65536),ht=O-Q*65536,rt+=Q-1+37*(Q-1),Z[0]=rt,Z[1]=st,Z[2]=Jt,Z[3]=gt,Z[4]=mt,Z[5]=ee,Z[6]=_t,Z[7]=Mt,Z[8]=ie,Z[9]=ut,Z[10]=pt,Z[11]=Xt,Z[12]=vt,Z[13]=lt,Z[14]=Qt,Z[15]=ht}function z(Z,et){P(Z,et,et)}function Y(Z,et){const j=g();let O;for(O=0;O<16;O++)j[O]=et[O];for(O=253;O>=0;O--)z(j,j),O!==2&&O!==4&&P(j,j,et);for(O=0;O<16;O++)Z[O]=j[O]}function nt(Z,et){const j=g();let O;for(O=0;O<16;O++)j[O]=et[O];for(O=250;O>=0;O--)z(j,j),O!==1&&P(j,j,et);for(O=0;O<16;O++)Z[O]=j[O]}function v(Z,et){const j=g(),O=g(),Q=g(),rt=g(),st=g(),Jt=g(),gt=g(),mt=g(),ee=g();$(j,Z[1],Z[0]),$(ee,et[1],et[0]),P(j,j,ee),K(O,Z[0],Z[1]),K(ee,et[0],et[1]),P(O,O,ee),P(Q,Z[3],et[3]),P(Q,Q,w),P(rt,Z[2],et[2]),K(rt,rt,rt),$(st,O,j),$(Jt,rt,Q),K(gt,rt,Q),K(mt,O,j),P(Z[0],st,Jt),P(Z[1],mt,gt),P(Z[2],gt,Jt),P(Z[3],st,mt)}function t(Z,et,j){for(let O=0;O<4;O++)T(Z[O],et[O],j)}function r(Z,et){const j=g(),O=g(),Q=g();Y(Q,et[2]),P(j,et[0],Q),P(O,et[1],Q),B(Z,O),Z[31]^=k(j)<<7}function s(Z,et,j){I(Z[0],x),I(Z[1],M),I(Z[2],M),I(Z[3],x);for(let O=255;O>=0;--O){const Q=j[O/8|0]>>(O&7)&1;t(Z,et,Q),v(et,Z),v(Z,Z),t(Z,et,Q)}}function h(Z,et){const j=[g(),g(),g(),g()];I(j[0],b),I(j[1],A),I(j[2],M),P(j[3],b,A),s(Z,j,et)}function d(Z){if(Z.length!==l.SEED_LENGTH)throw new Error(`ed25519: seed must be ${l.SEED_LENGTH} bytes`);const et=(0,a.hash)(Z);et[0]&=248,et[31]&=127,et[31]|=64;const j=new Uint8Array(32),O=[g(),g(),g(),g()];h(O,et),r(j,O);const Q=new Uint8Array(64);return Q.set(Z),Q.set(j,32),{publicKey:j,secretKey:Q}}l.generateKeyPairFromSeed=d;function m(Z){const et=(0,i.randomBytes)(32,Z),j=d(et);return(0,f.wipe)(et),j}l.generateKeyPair=m;function y(Z){if(Z.length!==l.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${l.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Z.subarray(32))}l.extractPublicKeyFromSecretKey=y;const u=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function e(Z,et){let j,O,Q,rt;for(O=63;O>=32;--O){for(j=0,Q=O-32,rt=O-12;Q<rt;++Q)et[Q]+=j-16*et[O]*u[Q-(O-32)],j=Math.floor((et[Q]+128)/256),et[Q]-=j*256;et[Q]+=j,et[O]=0}for(j=0,Q=0;Q<32;Q++)et[Q]+=j-(et[31]>>4)*u[Q],j=et[Q]>>8,et[Q]&=255;for(Q=0;Q<32;Q++)et[Q]-=j*u[Q];for(O=0;O<32;O++)et[O+1]+=et[O]>>8,Z[O]=et[O]&255}function c(Z){const et=new Float64Array(64);for(let j=0;j<64;j++)et[j]=Z[j];for(let j=0;j<64;j++)Z[j]=0;e(Z,et)}function F(Z,et){const j=new Float64Array(64),O=[g(),g(),g(),g()],Q=(0,a.hash)(Z.subarray(0,32));Q[0]&=248,Q[31]&=127,Q[31]|=64;const rt=new Uint8Array(64);rt.set(Q.subarray(32),32);const st=new a.SHA512;st.update(rt.subarray(32)),st.update(et);const Jt=st.digest();st.clean(),c(Jt),h(O,Jt),r(rt,O),st.reset(),st.update(rt.subarray(0,32)),st.update(Z.subarray(32)),st.update(et);const gt=st.digest();c(gt);for(let mt=0;mt<32;mt++)j[mt]=Jt[mt];for(let mt=0;mt<32;mt++)for(let ee=0;ee<32;ee++)j[mt+ee]+=gt[mt]*Q[ee];return e(rt.subarray(32),j),rt}l.sign=F;function L(Z,et){const j=g(),O=g(),Q=g(),rt=g(),st=g(),Jt=g(),gt=g();return I(Z[2],M),N(Z[1],et),z(Q,Z[1]),P(rt,Q,_),$(Q,Q,Z[2]),K(rt,Z[2],rt),z(st,rt),z(Jt,st),P(gt,Jt,st),P(j,gt,Q),P(j,j,rt),nt(j,j),P(j,j,Q),P(j,j,rt),P(j,j,rt),P(Z[0],j,rt),z(O,Z[0]),P(O,O,rt),q(O,Q)&&P(Z[0],Z[0],E),z(O,Z[0]),P(O,O,rt),q(O,Q)?-1:(k(Z[0])===et[31]>>7&&$(Z[0],x,Z[0]),P(Z[3],Z[0],Z[1]),0)}function H(Z,et,j){const O=new Uint8Array(32),Q=[g(),g(),g(),g()],rt=[g(),g(),g(),g()];if(j.length!==l.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${l.SIGNATURE_LENGTH} bytes`);if(L(rt,Z))return!1;const st=new a.SHA512;st.update(j.subarray(0,32)),st.update(Z),st.update(et);const Jt=st.digest();return c(Jt),s(Q,rt,Jt),h(rt,j.subarray(32)),v(Q,rt),r(O,Q),!D(j,O)}l.verify=H;function G(Z){let et=[g(),g(),g(),g()];if(L(et,Z))throw new Error("Ed25519: invalid public key");let j=g(),O=g(),Q=et[1];K(j,M,Q),$(O,M,Q),Y(O,O),P(j,j,O);let rt=new Uint8Array(32);return B(rt,j),rt}l.convertPublicKeyToX25519=G;function tt(Z){const et=(0,a.hash)(Z.subarray(0,32));et[0]&=248,et[31]&=127,et[31]|=64;const j=new Uint8Array(et.subarray(0,32));return(0,f.wipe)(et),j}l.convertSecretKeyToX25519=tt})(Iu);const eM="EdDSA",rM="JWT",Sg=".",Ag="base64url",iM="utf8",nM="utf8",sM=":",aM="did",oM="key",P1="base58btc",fM="z",hM="K36",uM=32;function Oo(l){return zr(Yr(Js(l),iM),Ag)}function Ig(l){const i=Yr(hM,P1),a=fM+zr(su([i,l]),P1);return[aM,oM,a].join(sM)}function cM(l){return zr(l,Ag)}function lM(l){return Yr([Oo(l.header),Oo(l.payload)].join(Sg),nM)}function dM(l){return[Oo(l.header),Oo(l.payload),cM(l.signature)].join(Sg)}function O1(l=ls.randomBytes(uM)){return Iu.generateKeyPairFromSeed(l)}async function pM(l,i,a,f,g=re.fromMiliseconds(Date.now())){const n={alg:eM,typ:rM},x=Ig(f.publicKey),M=g+a,_={iss:x,sub:l,aud:i,iat:g,exp:M},w=lM({header:n,payload:_}),b=Iu.sign(f.secretKey,w);return dM({header:n,payload:_,signature:b})}var zu={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});var Cr=ge,uu=si,vM=20;function gM(l,i,a){for(var f=1634760805,g=857760878,n=2036477234,x=1797285236,M=a[3]<<24|a[2]<<16|a[1]<<8|a[0],_=a[7]<<24|a[6]<<16|a[5]<<8|a[4],w=a[11]<<24|a[10]<<16|a[9]<<8|a[8],b=a[15]<<24|a[14]<<16|a[13]<<8|a[12],A=a[19]<<24|a[18]<<16|a[17]<<8|a[16],E=a[23]<<24|a[22]<<16|a[21]<<8|a[20],I=a[27]<<24|a[26]<<16|a[25]<<8|a[24],R=a[31]<<24|a[30]<<16|a[29]<<8|a[28],T=i[3]<<24|i[2]<<16|i[1]<<8|i[0],B=i[7]<<24|i[6]<<16|i[5]<<8|i[4],D=i[11]<<24|i[10]<<16|i[9]<<8|i[8],q=i[15]<<24|i[14]<<16|i[13]<<8|i[12],k=f,N=g,K=n,$=x,P=M,z=_,Y=w,nt=b,v=A,t=E,r=I,s=R,h=T,d=B,m=D,y=q,u=0;u<vM;u+=2)k=k+P|0,h^=k,h=h>>>32-16|h<<16,v=v+h|0,P^=v,P=P>>>32-12|P<<12,N=N+z|0,d^=N,d=d>>>32-16|d<<16,t=t+d|0,z^=t,z=z>>>32-12|z<<12,K=K+Y|0,m^=K,m=m>>>32-16|m<<16,r=r+m|0,Y^=r,Y=Y>>>32-12|Y<<12,$=$+nt|0,y^=$,y=y>>>32-16|y<<16,s=s+y|0,nt^=s,nt=nt>>>32-12|nt<<12,K=K+Y|0,m^=K,m=m>>>32-8|m<<8,r=r+m|0,Y^=r,Y=Y>>>32-7|Y<<7,$=$+nt|0,y^=$,y=y>>>32-8|y<<8,s=s+y|0,nt^=s,nt=nt>>>32-7|nt<<7,N=N+z|0,d^=N,d=d>>>32-8|d<<8,t=t+d|0,z^=t,z=z>>>32-7|z<<7,k=k+P|0,h^=k,h=h>>>32-8|h<<8,v=v+h|0,P^=v,P=P>>>32-7|P<<7,k=k+z|0,y^=k,y=y>>>32-16|y<<16,r=r+y|0,z^=r,z=z>>>32-12|z<<12,N=N+Y|0,h^=N,h=h>>>32-16|h<<16,s=s+h|0,Y^=s,Y=Y>>>32-12|Y<<12,K=K+nt|0,d^=K,d=d>>>32-16|d<<16,v=v+d|0,nt^=v,nt=nt>>>32-12|nt<<12,$=$+P|0,m^=$,m=m>>>32-16|m<<16,t=t+m|0,P^=t,P=P>>>32-12|P<<12,K=K+nt|0,d^=K,d=d>>>32-8|d<<8,v=v+d|0,nt^=v,nt=nt>>>32-7|nt<<7,$=$+P|0,m^=$,m=m>>>32-8|m<<8,t=t+m|0,P^=t,P=P>>>32-7|P<<7,N=N+Y|0,h^=N,h=h>>>32-8|h<<8,s=s+h|0,Y^=s,Y=Y>>>32-7|Y<<7,k=k+z|0,y^=k,y=y>>>32-8|y<<8,r=r+y|0,z^=r,z=z>>>32-7|z<<7;Cr.writeUint32LE(k+f|0,l,0),Cr.writeUint32LE(N+g|0,l,4),Cr.writeUint32LE(K+n|0,l,8),Cr.writeUint32LE($+x|0,l,12),Cr.writeUint32LE(P+M|0,l,16),Cr.writeUint32LE(z+_|0,l,20),Cr.writeUint32LE(Y+w|0,l,24),Cr.writeUint32LE(nt+b|0,l,28),Cr.writeUint32LE(v+A|0,l,32),Cr.writeUint32LE(t+E|0,l,36),Cr.writeUint32LE(r+I|0,l,40),Cr.writeUint32LE(s+R|0,l,44),Cr.writeUint32LE(h+T|0,l,48),Cr.writeUint32LE(d+B|0,l,52),Cr.writeUint32LE(m+D|0,l,56),Cr.writeUint32LE(y+q|0,l,60)}function Rg(l,i,a,f,g){if(g===void 0&&(g=0),l.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(f.length<a.length)throw new Error("ChaCha: destination is shorter than source");var n,x;if(g===0){if(i.length!==8&&i.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");n=new Uint8Array(16),x=n.length-i.length,n.set(i,x)}else{if(i.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");n=i,x=g}for(var M=new Uint8Array(64),_=0;_<a.length;_+=64){gM(M,n,l);for(var w=_;w<_+64&&w<a.length;w++)f[w]=a[w]^M[w-_];bM(n,0,x)}return uu.wipe(M),g===0&&uu.wipe(n),f}zo.streamXOR=Rg;function mM(l,i,a,f){return f===void 0&&(f=0),uu.wipe(a),Rg(l,i,a,a,f)}zo.stream=mM;function bM(l,i,a){for(var f=1;a--;)f=f+(l[i]&255)|0,l[i]=f&255,f>>>=8,i++;if(f>0)throw new Error("ChaCha: counter overflow")}var Pg={},pn={};Object.defineProperty(pn,"__esModule",{value:!0});function yM(l,i,a){return~(l-1)&i|l-1&a}pn.select=yM;function wM(l,i){return(l|0)-(i|0)-1>>>31&1}pn.lessOrEqual=wM;function Og(l,i){if(l.length!==i.length)return 0;for(var a=0,f=0;f<l.length;f++)a|=l[f]^i[f];return 1&a-1>>>8}pn.compare=Og;function _M(l,i){return l.length===0||i.length===0?!1:Og(l,i)!==0}pn.equal=_M;(function(l){Object.defineProperty(l,"__esModule",{value:!0});var i=pn,a=si;l.DIGEST_LENGTH=16;var f=function(){function x(M){this.digestLength=l.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var _=M[0]|M[1]<<8;this._r[0]=_&8191;var w=M[2]|M[3]<<8;this._r[1]=(_>>>13|w<<3)&8191;var b=M[4]|M[5]<<8;this._r[2]=(w>>>10|b<<6)&7939;var A=M[6]|M[7]<<8;this._r[3]=(b>>>7|A<<9)&8191;var E=M[8]|M[9]<<8;this._r[4]=(A>>>4|E<<12)&255,this._r[5]=E>>>1&8190;var I=M[10]|M[11]<<8;this._r[6]=(E>>>14|I<<2)&8191;var R=M[12]|M[13]<<8;this._r[7]=(I>>>11|R<<5)&8065;var T=M[14]|M[15]<<8;this._r[8]=(R>>>8|T<<8)&8191,this._r[9]=T>>>5&127,this._pad[0]=M[16]|M[17]<<8,this._pad[1]=M[18]|M[19]<<8,this._pad[2]=M[20]|M[21]<<8,this._pad[3]=M[22]|M[23]<<8,this._pad[4]=M[24]|M[25]<<8,this._pad[5]=M[26]|M[27]<<8,this._pad[6]=M[28]|M[29]<<8,this._pad[7]=M[30]|M[31]<<8}return x.prototype._blocks=function(M,_,w){for(var b=this._fin?0:2048,A=this._h[0],E=this._h[1],I=this._h[2],R=this._h[3],T=this._h[4],B=this._h[5],D=this._h[6],q=this._h[7],k=this._h[8],N=this._h[9],K=this._r[0],$=this._r[1],P=this._r[2],z=this._r[3],Y=this._r[4],nt=this._r[5],v=this._r[6],t=this._r[7],r=this._r[8],s=this._r[9];w>=16;){var h=M[_+0]|M[_+1]<<8;A+=h&8191;var d=M[_+2]|M[_+3]<<8;E+=(h>>>13|d<<3)&8191;var m=M[_+4]|M[_+5]<<8;I+=(d>>>10|m<<6)&8191;var y=M[_+6]|M[_+7]<<8;R+=(m>>>7|y<<9)&8191;var u=M[_+8]|M[_+9]<<8;T+=(y>>>4|u<<12)&8191,B+=u>>>1&8191;var e=M[_+10]|M[_+11]<<8;D+=(u>>>14|e<<2)&8191;var c=M[_+12]|M[_+13]<<8;q+=(e>>>11|c<<5)&8191;var F=M[_+14]|M[_+15]<<8;k+=(c>>>8|F<<8)&8191,N+=F>>>5|b;var L=0,H=L;H+=A*K,H+=E*(5*s),H+=I*(5*r),H+=R*(5*t),H+=T*(5*v),L=H>>>13,H&=8191,H+=B*(5*nt),H+=D*(5*Y),H+=q*(5*z),H+=k*(5*P),H+=N*(5*$),L+=H>>>13,H&=8191;var G=L;G+=A*$,G+=E*K,G+=I*(5*s),G+=R*(5*r),G+=T*(5*t),L=G>>>13,G&=8191,G+=B*(5*v),G+=D*(5*nt),G+=q*(5*Y),G+=k*(5*z),G+=N*(5*P),L+=G>>>13,G&=8191;var tt=L;tt+=A*P,tt+=E*$,tt+=I*K,tt+=R*(5*s),tt+=T*(5*r),L=tt>>>13,tt&=8191,tt+=B*(5*t),tt+=D*(5*v),tt+=q*(5*nt),tt+=k*(5*Y),tt+=N*(5*z),L+=tt>>>13,tt&=8191;var Z=L;Z+=A*z,Z+=E*P,Z+=I*$,Z+=R*K,Z+=T*(5*s),L=Z>>>13,Z&=8191,Z+=B*(5*r),Z+=D*(5*t),Z+=q*(5*v),Z+=k*(5*nt),Z+=N*(5*Y),L+=Z>>>13,Z&=8191;var et=L;et+=A*Y,et+=E*z,et+=I*P,et+=R*$,et+=T*K,L=et>>>13,et&=8191,et+=B*(5*s),et+=D*(5*r),et+=q*(5*t),et+=k*(5*v),et+=N*(5*nt),L+=et>>>13,et&=8191;var j=L;j+=A*nt,j+=E*Y,j+=I*z,j+=R*P,j+=T*$,L=j>>>13,j&=8191,j+=B*K,j+=D*(5*s),j+=q*(5*r),j+=k*(5*t),j+=N*(5*v),L+=j>>>13,j&=8191;var O=L;O+=A*v,O+=E*nt,O+=I*Y,O+=R*z,O+=T*P,L=O>>>13,O&=8191,O+=B*$,O+=D*K,O+=q*(5*s),O+=k*(5*r),O+=N*(5*t),L+=O>>>13,O&=8191;var Q=L;Q+=A*t,Q+=E*v,Q+=I*nt,Q+=R*Y,Q+=T*z,L=Q>>>13,Q&=8191,Q+=B*P,Q+=D*$,Q+=q*K,Q+=k*(5*s),Q+=N*(5*r),L+=Q>>>13,Q&=8191;var rt=L;rt+=A*r,rt+=E*t,rt+=I*v,rt+=R*nt,rt+=T*Y,L=rt>>>13,rt&=8191,rt+=B*z,rt+=D*P,rt+=q*$,rt+=k*K,rt+=N*(5*s),L+=rt>>>13,rt&=8191;var st=L;st+=A*s,st+=E*r,st+=I*t,st+=R*v,st+=T*nt,L=st>>>13,st&=8191,st+=B*Y,st+=D*z,st+=q*P,st+=k*$,st+=N*K,L+=st>>>13,st&=8191,L=(L<<2)+L|0,L=L+H|0,H=L&8191,L=L>>>13,G+=L,A=H,E=G,I=tt,R=Z,T=et,B=j,D=O,q=Q,k=rt,N=st,_+=16,w-=16}this._h[0]=A,this._h[1]=E,this._h[2]=I,this._h[3]=R,this._h[4]=T,this._h[5]=B,this._h[6]=D,this._h[7]=q,this._h[8]=k,this._h[9]=N},x.prototype.finish=function(M,_){_===void 0&&(_=0);var w=new Uint16Array(10),b,A,E,I;if(this._leftover){for(I=this._leftover,this._buffer[I++]=1;I<16;I++)this._buffer[I]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(b=this._h[1]>>>13,this._h[1]&=8191,I=2;I<10;I++)this._h[I]+=b,b=this._h[I]>>>13,this._h[I]&=8191;for(this._h[0]+=b*5,b=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=b,b=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=b,w[0]=this._h[0]+5,b=w[0]>>>13,w[0]&=8191,I=1;I<10;I++)w[I]=this._h[I]+b,b=w[I]>>>13,w[I]&=8191;for(w[9]-=1<<13,A=(b^1)-1,I=0;I<10;I++)w[I]&=A;for(A=~A,I=0;I<10;I++)this._h[I]=this._h[I]&A|w[I];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,E=this._h[0]+this._pad[0],this._h[0]=E&65535,I=1;I<8;I++)E=(this._h[I]+this._pad[I]|0)+(E>>>16)|0,this._h[I]=E&65535;return M[_+0]=this._h[0]>>>0,M[_+1]=this._h[0]>>>8,M[_+2]=this._h[1]>>>0,M[_+3]=this._h[1]>>>8,M[_+4]=this._h[2]>>>0,M[_+5]=this._h[2]>>>8,M[_+6]=this._h[3]>>>0,M[_+7]=this._h[3]>>>8,M[_+8]=this._h[4]>>>0,M[_+9]=this._h[4]>>>8,M[_+10]=this._h[5]>>>0,M[_+11]=this._h[5]>>>8,M[_+12]=this._h[6]>>>0,M[_+13]=this._h[6]>>>8,M[_+14]=this._h[7]>>>0,M[_+15]=this._h[7]>>>8,this._finished=!0,this},x.prototype.update=function(M){var _=0,w=M.length,b;if(this._leftover){b=16-this._leftover,b>w&&(b=w);for(var A=0;A<b;A++)this._buffer[this._leftover+A]=M[_+A];if(w-=b,_+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(w>=16&&(b=w-w%16,this._blocks(M,_,b),_+=b,w-=b),w){for(var A=0;A<w;A++)this._buffer[this._leftover+A]=M[_+A];this._leftover+=w}return this},x.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var M=new Uint8Array(16);return this.finish(M),M},x.prototype.clean=function(){return a.wipe(this._buffer),a.wipe(this._r),a.wipe(this._h),a.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},x}();l.Poly1305=f;function g(x,M){var _=new f(x);_.update(M);var w=_.digest();return _.clean(),w}l.oneTimeAuth=g;function n(x,M){return x.length!==l.DIGEST_LENGTH||M.length!==l.DIGEST_LENGTH?!1:i.equal(x,M)}l.equal=n})(Pg);(function(l){Object.defineProperty(l,"__esModule",{value:!0});var i=zo,a=Pg,f=si,g=ge,n=pn;l.KEY_LENGTH=32,l.NONCE_LENGTH=12,l.TAG_LENGTH=16;var x=new Uint8Array(16),M=function(){function _(w){if(this.nonceLength=l.NONCE_LENGTH,this.tagLength=l.TAG_LENGTH,w.length!==l.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(w)}return _.prototype.seal=function(w,b,A,E){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var I=new Uint8Array(16);I.set(w,I.length-w.length);var R=new Uint8Array(32);i.stream(this._key,I,R,4);var T=b.length+this.tagLength,B;if(E){if(E.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");B=E}else B=new Uint8Array(T);return i.streamXOR(this._key,I,b,B,4),this._authenticate(B.subarray(B.length-this.tagLength,B.length),R,B.subarray(0,B.length-this.tagLength),A),f.wipe(I),B},_.prototype.open=function(w,b,A,E){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var I=new Uint8Array(16);I.set(w,I.length-w.length);var R=new Uint8Array(32);i.stream(this._key,I,R,4);var T=new Uint8Array(this.tagLength);if(this._authenticate(T,R,b.subarray(0,b.length-this.tagLength),A),!n.equal(T,b.subarray(b.length-this.tagLength,b.length)))return null;var B=b.length-this.tagLength,D;if(E){if(E.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");D=E}else D=new Uint8Array(B);return i.streamXOR(this._key,I,b.subarray(0,b.length-this.tagLength),D,4),f.wipe(I),D},_.prototype.clean=function(){return f.wipe(this._key),this},_.prototype._authenticate=function(w,b,A,E){var I=new a.Poly1305(b);E&&(I.update(E),E.length%16>0&&I.update(x.subarray(E.length%16))),I.update(A),A.length%16>0&&I.update(x.subarray(A.length%16));var R=new Uint8Array(8);E&&g.writeUint64LE(E.length,R),I.update(R),g.writeUint64LE(A.length,R),I.update(R);for(var T=I.digest(),B=0;B<T.length;B++)w[B]=T[B];I.clean(),f.wipe(T),f.wipe(R)},_}();l.ChaCha20Poly1305=M})(zu);var Tg={},sa={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});function MM(l){return typeof l.saveState<"u"&&typeof l.restoreState<"u"&&typeof l.cleanSavedState<"u"}Hu.isSerializableHash=MM;Object.defineProperty(sa,"__esModule",{value:!0});var qi=Hu,xM=pn,EM=si,Cg=function(){function l(i,a){this._finished=!1,this._inner=new i,this._outer=new i,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var f=new Uint8Array(this.blockSize);a.length>this.blockSize?this._inner.update(a).finish(f).clean():f.set(a);for(var g=0;g<f.length;g++)f[g]^=54;this._inner.update(f);for(var g=0;g<f.length;g++)f[g]^=106;this._outer.update(f),qi.isSerializableHash(this._inner)&&qi.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),EM.wipe(f)}return l.prototype.reset=function(){if(!qi.isSerializableHash(this._inner)||!qi.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},l.prototype.clean=function(){qi.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),qi.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},l.prototype.update=function(i){return this._inner.update(i),this},l.prototype.finish=function(i){return this._finished?(this._outer.finish(i),this):(this._inner.finish(i),this._outer.update(i.subarray(0,this.digestLength)).finish(i),this._finished=!0,this)},l.prototype.digest=function(){var i=new Uint8Array(this.digestLength);return this.finish(i),i},l.prototype.saveState=function(){if(!qi.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},l.prototype.restoreState=function(i){if(!qi.isSerializableHash(this._inner)||!qi.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(i),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},l.prototype.cleanSavedState=function(i){if(!qi.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(i)},l}();sa.HMAC=Cg;function SM(l,i,a){var f=new Cg(l,i);f.update(a);var g=f.digest();return f.clean(),g}sa.hmac=SM;sa.equal=xM.equal;Object.defineProperty(Tg,"__esModule",{value:!0});var T1=sa,C1=si,AM=function(){function l(i,a,f,g){f===void 0&&(f=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=i,this._info=g;var n=T1.hmac(this._hash,f,a);this._hmac=new T1.HMAC(i,n),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return l.prototype._fillBuffer=function(){this._counter[0]++;var i=this._counter[0];if(i===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),i>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},l.prototype.expand=function(i){for(var a=new Uint8Array(i),f=0;f<a.length;f++)this._bufpos===this._buffer.length&&this._fillBuffer(),a[f]=this._buffer[this._bufpos++];return a},l.prototype.clean=function(){this._hmac.clean(),C1.wipe(this._buffer),C1.wipe(this._counter),this._bufpos=0},l}(),IM=Tg.HKDF=AM,Ho={};(function(l){Object.defineProperty(l,"__esModule",{value:!0});var i=ge,a=si;l.DIGEST_LENGTH=32,l.BLOCK_SIZE=64;var f=function(){function M(){this.digestLength=l.DIGEST_LENGTH,this.blockSize=l.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return M.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},M.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},M.prototype.clean=function(){a.wipe(this._buffer),a.wipe(this._temp),this.reset()},M.prototype.update=function(_,w){if(w===void 0&&(w=_.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var b=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&w>0;)this._buffer[this._bufferLength++]=_[b++],w--;this._bufferLength===this.blockSize&&(n(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(b=n(this._temp,this._state,_,b,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=_[b++],w--;return this},M.prototype.finish=function(_){if(!this._finished){var w=this._bytesHashed,b=this._bufferLength,A=w/536870912|0,E=w<<3,I=w%64<56?64:128;this._buffer[b]=128;for(var R=b+1;R<I-8;R++)this._buffer[R]=0;i.writeUint32BE(A,this._buffer,I-8),i.writeUint32BE(E,this._buffer,I-4),n(this._temp,this._state,this._buffer,0,I),this._finished=!0}for(var R=0;R<this.digestLength/4;R++)i.writeUint32BE(this._state[R],_,R*4);return this},M.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},M.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},M.prototype.restoreState=function(_){return this._state.set(_.state),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},M.prototype.cleanSavedState=function(_){a.wipe(_.state),_.buffer&&a.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},M}();l.SHA256=f;var g=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function n(M,_,w,b,A){for(;A>=64;){for(var E=_[0],I=_[1],R=_[2],T=_[3],B=_[4],D=_[5],q=_[6],k=_[7],N=0;N<16;N++){var K=b+N*4;M[N]=i.readUint32BE(w,K)}for(var N=16;N<64;N++){var $=M[N-2],P=($>>>17|$<<32-17)^($>>>19|$<<32-19)^$>>>10;$=M[N-15];var z=($>>>7|$<<32-7)^($>>>18|$<<32-18)^$>>>3;M[N]=(P+M[N-7]|0)+(z+M[N-16]|0)}for(var N=0;N<64;N++){var P=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&D^~B&q)|0)+(k+(g[N]+M[N]|0)|0)|0,z=((E>>>2|E<<32-2)^(E>>>13|E<<32-13)^(E>>>22|E<<32-22))+(E&I^E&R^I&R)|0;k=q,q=D,D=B,B=T+P|0,T=R,R=I,I=E,E=P+z|0}_[0]+=E,_[1]+=I,_[2]+=R,_[3]+=T,_[4]+=B,_[5]+=D,_[6]+=q,_[7]+=k,b+=64,A-=64}return b}function x(M){var _=new f;_.update(M);var w=_.digest();return _.clean(),w}l.hash=x})(Ho);var Ku={};(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.sharedKey=l.generateKeyPair=l.generateKeyPairFromSeed=l.scalarMultBase=l.scalarMult=l.SHARED_KEY_LENGTH=l.SECRET_KEY_LENGTH=l.PUBLIC_KEY_LENGTH=void 0;const i=ls,a=si;l.PUBLIC_KEY_LENGTH=32,l.SECRET_KEY_LENGTH=32,l.SHARED_KEY_LENGTH=32;function f(N){const K=new Float64Array(16);if(N)for(let $=0;$<N.length;$++)K[$]=N[$];return K}const g=new Uint8Array(32);g[0]=9;const n=f([56129,1]);function x(N){let K=1;for(let $=0;$<16;$++){let P=N[$]+K+65535;K=Math.floor(P/65536),N[$]=P-K*65536}N[0]+=K-1+37*(K-1)}function M(N,K,$){const P=~($-1);for(let z=0;z<16;z++){const Y=P&(N[z]^K[z]);N[z]^=Y,K[z]^=Y}}function _(N,K){const $=f(),P=f();for(let z=0;z<16;z++)P[z]=K[z];x(P),x(P),x(P);for(let z=0;z<2;z++){$[0]=P[0]-65517;for(let nt=1;nt<15;nt++)$[nt]=P[nt]-65535-($[nt-1]>>16&1),$[nt-1]&=65535;$[15]=P[15]-32767-($[14]>>16&1);const Y=$[15]>>16&1;$[14]&=65535,M(P,$,1-Y)}for(let z=0;z<16;z++)N[2*z]=P[z]&255,N[2*z+1]=P[z]>>8}function w(N,K){for(let $=0;$<16;$++)N[$]=K[2*$]+(K[2*$+1]<<8);N[15]&=32767}function b(N,K,$){for(let P=0;P<16;P++)N[P]=K[P]+$[P]}function A(N,K,$){for(let P=0;P<16;P++)N[P]=K[P]-$[P]}function E(N,K,$){let P,z,Y=0,nt=0,v=0,t=0,r=0,s=0,h=0,d=0,m=0,y=0,u=0,e=0,c=0,F=0,L=0,H=0,G=0,tt=0,Z=0,et=0,j=0,O=0,Q=0,rt=0,st=0,Jt=0,gt=0,mt=0,ee=0,_t=0,Mt=0,ie=$[0],ut=$[1],pt=$[2],Xt=$[3],vt=$[4],lt=$[5],Qt=$[6],ht=$[7],dt=$[8],ne=$[9],ct=$[10],bt=$[11],se=$[12],yt=$[13],wt=$[14],ae=$[15];P=K[0],Y+=P*ie,nt+=P*ut,v+=P*pt,t+=P*Xt,r+=P*vt,s+=P*lt,h+=P*Qt,d+=P*ht,m+=P*dt,y+=P*ne,u+=P*ct,e+=P*bt,c+=P*se,F+=P*yt,L+=P*wt,H+=P*ae,P=K[1],nt+=P*ie,v+=P*ut,t+=P*pt,r+=P*Xt,s+=P*vt,h+=P*lt,d+=P*Qt,m+=P*ht,y+=P*dt,u+=P*ne,e+=P*ct,c+=P*bt,F+=P*se,L+=P*yt,H+=P*wt,G+=P*ae,P=K[2],v+=P*ie,t+=P*ut,r+=P*pt,s+=P*Xt,h+=P*vt,d+=P*lt,m+=P*Qt,y+=P*ht,u+=P*dt,e+=P*ne,c+=P*ct,F+=P*bt,L+=P*se,H+=P*yt,G+=P*wt,tt+=P*ae,P=K[3],t+=P*ie,r+=P*ut,s+=P*pt,h+=P*Xt,d+=P*vt,m+=P*lt,y+=P*Qt,u+=P*ht,e+=P*dt,c+=P*ne,F+=P*ct,L+=P*bt,H+=P*se,G+=P*yt,tt+=P*wt,Z+=P*ae,P=K[4],r+=P*ie,s+=P*ut,h+=P*pt,d+=P*Xt,m+=P*vt,y+=P*lt,u+=P*Qt,e+=P*ht,c+=P*dt,F+=P*ne,L+=P*ct,H+=P*bt,G+=P*se,tt+=P*yt,Z+=P*wt,et+=P*ae,P=K[5],s+=P*ie,h+=P*ut,d+=P*pt,m+=P*Xt,y+=P*vt,u+=P*lt,e+=P*Qt,c+=P*ht,F+=P*dt,L+=P*ne,H+=P*ct,G+=P*bt,tt+=P*se,Z+=P*yt,et+=P*wt,j+=P*ae,P=K[6],h+=P*ie,d+=P*ut,m+=P*pt,y+=P*Xt,u+=P*vt,e+=P*lt,c+=P*Qt,F+=P*ht,L+=P*dt,H+=P*ne,G+=P*ct,tt+=P*bt,Z+=P*se,et+=P*yt,j+=P*wt,O+=P*ae,P=K[7],d+=P*ie,m+=P*ut,y+=P*pt,u+=P*Xt,e+=P*vt,c+=P*lt,F+=P*Qt,L+=P*ht,H+=P*dt,G+=P*ne,tt+=P*ct,Z+=P*bt,et+=P*se,j+=P*yt,O+=P*wt,Q+=P*ae,P=K[8],m+=P*ie,y+=P*ut,u+=P*pt,e+=P*Xt,c+=P*vt,F+=P*lt,L+=P*Qt,H+=P*ht,G+=P*dt,tt+=P*ne,Z+=P*ct,et+=P*bt,j+=P*se,O+=P*yt,Q+=P*wt,rt+=P*ae,P=K[9],y+=P*ie,u+=P*ut,e+=P*pt,c+=P*Xt,F+=P*vt,L+=P*lt,H+=P*Qt,G+=P*ht,tt+=P*dt,Z+=P*ne,et+=P*ct,j+=P*bt,O+=P*se,Q+=P*yt,rt+=P*wt,st+=P*ae,P=K[10],u+=P*ie,e+=P*ut,c+=P*pt,F+=P*Xt,L+=P*vt,H+=P*lt,G+=P*Qt,tt+=P*ht,Z+=P*dt,et+=P*ne,j+=P*ct,O+=P*bt,Q+=P*se,rt+=P*yt,st+=P*wt,Jt+=P*ae,P=K[11],e+=P*ie,c+=P*ut,F+=P*pt,L+=P*Xt,H+=P*vt,G+=P*lt,tt+=P*Qt,Z+=P*ht,et+=P*dt,j+=P*ne,O+=P*ct,Q+=P*bt,rt+=P*se,st+=P*yt,Jt+=P*wt,gt+=P*ae,P=K[12],c+=P*ie,F+=P*ut,L+=P*pt,H+=P*Xt,G+=P*vt,tt+=P*lt,Z+=P*Qt,et+=P*ht,j+=P*dt,O+=P*ne,Q+=P*ct,rt+=P*bt,st+=P*se,Jt+=P*yt,gt+=P*wt,mt+=P*ae,P=K[13],F+=P*ie,L+=P*ut,H+=P*pt,G+=P*Xt,tt+=P*vt,Z+=P*lt,et+=P*Qt,j+=P*ht,O+=P*dt,Q+=P*ne,rt+=P*ct,st+=P*bt,Jt+=P*se,gt+=P*yt,mt+=P*wt,ee+=P*ae,P=K[14],L+=P*ie,H+=P*ut,G+=P*pt,tt+=P*Xt,Z+=P*vt,et+=P*lt,j+=P*Qt,O+=P*ht,Q+=P*dt,rt+=P*ne,st+=P*ct,Jt+=P*bt,gt+=P*se,mt+=P*yt,ee+=P*wt,_t+=P*ae,P=K[15],H+=P*ie,G+=P*ut,tt+=P*pt,Z+=P*Xt,et+=P*vt,j+=P*lt,O+=P*Qt,Q+=P*ht,rt+=P*dt,st+=P*ne,Jt+=P*ct,gt+=P*bt,mt+=P*se,ee+=P*yt,_t+=P*wt,Mt+=P*ae,Y+=38*G,nt+=38*tt,v+=38*Z,t+=38*et,r+=38*j,s+=38*O,h+=38*Q,d+=38*rt,m+=38*st,y+=38*Jt,u+=38*gt,e+=38*mt,c+=38*ee,F+=38*_t,L+=38*Mt,z=1,P=Y+z+65535,z=Math.floor(P/65536),Y=P-z*65536,P=nt+z+65535,z=Math.floor(P/65536),nt=P-z*65536,P=v+z+65535,z=Math.floor(P/65536),v=P-z*65536,P=t+z+65535,z=Math.floor(P/65536),t=P-z*65536,P=r+z+65535,z=Math.floor(P/65536),r=P-z*65536,P=s+z+65535,z=Math.floor(P/65536),s=P-z*65536,P=h+z+65535,z=Math.floor(P/65536),h=P-z*65536,P=d+z+65535,z=Math.floor(P/65536),d=P-z*65536,P=m+z+65535,z=Math.floor(P/65536),m=P-z*65536,P=y+z+65535,z=Math.floor(P/65536),y=P-z*65536,P=u+z+65535,z=Math.floor(P/65536),u=P-z*65536,P=e+z+65535,z=Math.floor(P/65536),e=P-z*65536,P=c+z+65535,z=Math.floor(P/65536),c=P-z*65536,P=F+z+65535,z=Math.floor(P/65536),F=P-z*65536,P=L+z+65535,z=Math.floor(P/65536),L=P-z*65536,P=H+z+65535,z=Math.floor(P/65536),H=P-z*65536,Y+=z-1+37*(z-1),z=1,P=Y+z+65535,z=Math.floor(P/65536),Y=P-z*65536,P=nt+z+65535,z=Math.floor(P/65536),nt=P-z*65536,P=v+z+65535,z=Math.floor(P/65536),v=P-z*65536,P=t+z+65535,z=Math.floor(P/65536),t=P-z*65536,P=r+z+65535,z=Math.floor(P/65536),r=P-z*65536,P=s+z+65535,z=Math.floor(P/65536),s=P-z*65536,P=h+z+65535,z=Math.floor(P/65536),h=P-z*65536,P=d+z+65535,z=Math.floor(P/65536),d=P-z*65536,P=m+z+65535,z=Math.floor(P/65536),m=P-z*65536,P=y+z+65535,z=Math.floor(P/65536),y=P-z*65536,P=u+z+65535,z=Math.floor(P/65536),u=P-z*65536,P=e+z+65535,z=Math.floor(P/65536),e=P-z*65536,P=c+z+65535,z=Math.floor(P/65536),c=P-z*65536,P=F+z+65535,z=Math.floor(P/65536),F=P-z*65536,P=L+z+65535,z=Math.floor(P/65536),L=P-z*65536,P=H+z+65535,z=Math.floor(P/65536),H=P-z*65536,Y+=z-1+37*(z-1),N[0]=Y,N[1]=nt,N[2]=v,N[3]=t,N[4]=r,N[5]=s,N[6]=h,N[7]=d,N[8]=m,N[9]=y,N[10]=u,N[11]=e,N[12]=c,N[13]=F,N[14]=L,N[15]=H}function I(N,K){E(N,K,K)}function R(N,K){const $=f();for(let P=0;P<16;P++)$[P]=K[P];for(let P=253;P>=0;P--)I($,$),P!==2&&P!==4&&E($,$,K);for(let P=0;P<16;P++)N[P]=$[P]}function T(N,K){const $=new Uint8Array(32),P=new Float64Array(80),z=f(),Y=f(),nt=f(),v=f(),t=f(),r=f();for(let m=0;m<31;m++)$[m]=N[m];$[31]=N[31]&127|64,$[0]&=248,w(P,K);for(let m=0;m<16;m++)Y[m]=P[m];z[0]=v[0]=1;for(let m=254;m>=0;--m){const y=$[m>>>3]>>>(m&7)&1;M(z,Y,y),M(nt,v,y),b(t,z,nt),A(z,z,nt),b(nt,Y,v),A(Y,Y,v),I(v,t),I(r,z),E(z,nt,z),E(nt,Y,t),b(t,z,nt),A(z,z,nt),I(Y,z),A(nt,v,r),E(z,nt,n),b(z,z,v),E(nt,nt,z),E(z,v,r),E(v,Y,P),I(Y,t),M(z,Y,y),M(nt,v,y)}for(let m=0;m<16;m++)P[m+16]=z[m],P[m+32]=nt[m],P[m+48]=Y[m],P[m+64]=v[m];const s=P.subarray(32),h=P.subarray(16);R(s,s),E(h,h,s);const d=new Uint8Array(32);return _(d,h),d}l.scalarMult=T;function B(N){return T(N,g)}l.scalarMultBase=B;function D(N){if(N.length!==l.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${l.SECRET_KEY_LENGTH} bytes`);const K=new Uint8Array(N);return{publicKey:B(K),secretKey:K}}l.generateKeyPairFromSeed=D;function q(N){const K=(0,i.randomBytes)(32,N),$=D(K);return(0,a.wipe)(K),$}l.generateKeyPair=q;function k(N,K,$=!1){if(N.length!==l.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(K.length!==l.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const P=T(N,K);if($){let z=0;for(let Y=0;Y<P.length;Y++)z|=P[Y];if(z===0)throw new Error("X25519: invalid shared key")}return P}l.sharedKey=k})(Ku);var or={};Object.defineProperty(or,"__esModule",{value:!0});or.getLocalStorage=or.getLocalStorageOrThrow=or.getCrypto=or.getCryptoOrThrow=qg=or.getLocation=or.getLocationOrThrow=ju=or.getNavigator=or.getNavigatorOrThrow=Bg=or.getDocument=or.getDocumentOrThrow=or.getFromWindowOrThrow=or.getFromWindow=void 0;function Un(l){let i;return typeof window<"u"&&typeof window[l]<"u"&&(i=window[l]),i}or.getFromWindow=Un;function ps(l){const i=Un(l);if(!i)throw new Error(`${l} is not defined in Window`);return i}or.getFromWindowOrThrow=ps;function RM(){return ps("document")}or.getDocumentOrThrow=RM;function PM(){return Un("document")}var Bg=or.getDocument=PM;function OM(){return ps("navigator")}or.getNavigatorOrThrow=OM;function TM(){return Un("navigator")}var ju=or.getNavigator=TM;function CM(){return ps("location")}or.getLocationOrThrow=CM;function BM(){return Un("location")}var qg=or.getLocation=BM;function qM(){return ps("crypto")}or.getCryptoOrThrow=qM;function NM(){return Un("crypto")}or.getCrypto=NM;function DM(){return ps("localStorage")}or.getLocalStorageOrThrow=DM;function LM(){return Un("localStorage")}or.getLocalStorage=LM;var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});var Ng=Vu.getWindowMetadata=void 0;const B1=or;function kM(){let l,i;try{l=B1.getDocumentOrThrow(),i=B1.getLocationOrThrow()}catch{return null}function a(){const A=l.getElementsByTagName("link"),E=[];for(let I=0;I<A.length;I++){const R=A[I],T=R.getAttribute("rel");if(T&&T.toLowerCase().indexOf("icon")>-1){const B=R.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let D=i.protocol+"//"+i.host;if(B.indexOf("/")===0)D+=B;else{const q=i.pathname.split("/");q.pop();const k=q.join("/");D+=k+"/"+B}E.push(D)}else if(B.indexOf("//")===0){const D=i.protocol+B;E.push(D)}else E.push(B)}}return E}function f(...A){const E=l.getElementsByTagName("meta");for(let I=0;I<E.length;I++){const R=E[I],T=["itemprop","property","name"].map(B=>R.getAttribute(B)).filter(B=>B?A.includes(B):!1);if(T.length&&T){const B=R.getAttribute("content");if(B)return B}}return""}function g(){let A=f("name","og:site_name","og:title","twitter:title");return A||(A=l.title),A}function n(){return f("description","og:description","twitter:description","keywords")}const x=g(),M=n(),_=i.origin,w=a();return{description:M,url:_,icons:w,name:x}}Ng=Vu.getWindowMetadata=kM;var Qs={},UM=l=>encodeURIComponent(l).replace(/[!'()*]/g,i=>`%${i.charCodeAt(0).toString(16).toUpperCase()}`),Dg="%[a-f0-9]{2}",q1=new RegExp("("+Dg+")|([^%]+?)","gi"),N1=new RegExp("("+Dg+")+","gi");function cu(l,i){try{return[decodeURIComponent(l.join(""))]}catch{}if(l.length===1)return l;i=i||1;var a=l.slice(0,i),f=l.slice(i);return Array.prototype.concat.call([],cu(a),cu(f))}function FM(l){try{return decodeURIComponent(l)}catch{for(var i=l.match(q1)||[],a=1;a<i.length;a++)l=cu(i,a).join(""),i=l.match(q1)||[];return l}}function $M(l){for(var i={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},a=N1.exec(l);a;){try{i[a[0]]=decodeURIComponent(a[0])}catch{var f=FM(a[0]);f!==a[0]&&(i[a[0]]=f)}a=N1.exec(l)}i["%C2"]="\uFFFD";for(var g=Object.keys(i),n=0;n<g.length;n++){var x=g[n];l=l.replace(new RegExp(x,"g"),i[x])}return l}var zM=function(l){if(typeof l!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof l+"`");try{return l=l.replace(/\+/g," "),decodeURIComponent(l)}catch{return $M(l)}},HM=(l,i)=>{if(!(typeof l=="string"&&typeof i=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(i==="")return[l];const a=l.indexOf(i);return a===-1?[l]:[l.slice(0,a),l.slice(a+i.length)]},KM=function(l,i){for(var a={},f=Object.keys(l),g=Array.isArray(i),n=0;n<f.length;n++){var x=f[n],M=l[x];(g?i.indexOf(x)!==-1:i(x,M,l))&&(a[x]=M)}return a};(function(l){const i=UM,a=zM,f=HM,g=KM,n=q=>q==null,x=Symbol("encodeFragmentIdentifier");function M(q){switch(q.arrayFormat){case"index":return k=>(N,K)=>{const $=N.length;return K===void 0||q.skipNull&&K===null||q.skipEmptyString&&K===""?N:K===null?[...N,[b(k,q),"[",$,"]"].join("")]:[...N,[b(k,q),"[",b($,q),"]=",b(K,q)].join("")]};case"bracket":return k=>(N,K)=>K===void 0||q.skipNull&&K===null||q.skipEmptyString&&K===""?N:K===null?[...N,[b(k,q),"[]"].join("")]:[...N,[b(k,q),"[]=",b(K,q)].join("")];case"colon-list-separator":return k=>(N,K)=>K===void 0||q.skipNull&&K===null||q.skipEmptyString&&K===""?N:K===null?[...N,[b(k,q),":list="].join("")]:[...N,[b(k,q),":list=",b(K,q)].join("")];case"comma":case"separator":case"bracket-separator":{const k=q.arrayFormat==="bracket-separator"?"[]=":"=";return N=>(K,$)=>$===void 0||q.skipNull&&$===null||q.skipEmptyString&&$===""?K:($=$===null?"":$,K.length===0?[[b(N,q),k,b($,q)].join("")]:[[K,b($,q)].join(q.arrayFormatSeparator)])}default:return k=>(N,K)=>K===void 0||q.skipNull&&K===null||q.skipEmptyString&&K===""?N:K===null?[...N,b(k,q)]:[...N,[b(k,q),"=",b(K,q)].join("")]}}function _(q){let k;switch(q.arrayFormat){case"index":return(N,K,$)=>{if(k=/\[(\d*)\]$/.exec(N),N=N.replace(/\[\d*\]$/,""),!k){$[N]=K;return}$[N]===void 0&&($[N]={}),$[N][k[1]]=K};case"bracket":return(N,K,$)=>{if(k=/(\[\])$/.exec(N),N=N.replace(/\[\]$/,""),!k){$[N]=K;return}if($[N]===void 0){$[N]=[K];return}$[N]=[].concat($[N],K)};case"colon-list-separator":return(N,K,$)=>{if(k=/(:list)$/.exec(N),N=N.replace(/:list$/,""),!k){$[N]=K;return}if($[N]===void 0){$[N]=[K];return}$[N]=[].concat($[N],K)};case"comma":case"separator":return(N,K,$)=>{const P=typeof K=="string"&&K.includes(q.arrayFormatSeparator),z=typeof K=="string"&&!P&&A(K,q).includes(q.arrayFormatSeparator);K=z?A(K,q):K;const Y=P||z?K.split(q.arrayFormatSeparator).map(nt=>A(nt,q)):K===null?K:A(K,q);$[N]=Y};case"bracket-separator":return(N,K,$)=>{const P=/(\[\])$/.test(N);if(N=N.replace(/\[\]$/,""),!P){$[N]=K&&A(K,q);return}const z=K===null?[]:K.split(q.arrayFormatSeparator).map(Y=>A(Y,q));if($[N]===void 0){$[N]=z;return}$[N]=[].concat($[N],z)};default:return(N,K,$)=>{if($[N]===void 0){$[N]=K;return}$[N]=[].concat($[N],K)}}}function w(q){if(typeof q!="string"||q.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function b(q,k){return k.encode?k.strict?i(q):encodeURIComponent(q):q}function A(q,k){return k.decode?a(q):q}function E(q){return Array.isArray(q)?q.sort():typeof q=="object"?E(Object.keys(q)).sort((k,N)=>Number(k)-Number(N)).map(k=>q[k]):q}function I(q){const k=q.indexOf("#");return k!==-1&&(q=q.slice(0,k)),q}function R(q){let k="";const N=q.indexOf("#");return N!==-1&&(k=q.slice(N)),k}function T(q){q=I(q);const k=q.indexOf("?");return k===-1?"":q.slice(k+1)}function B(q,k){return k.parseNumbers&&!Number.isNaN(Number(q))&&typeof q=="string"&&q.trim()!==""?q=Number(q):k.parseBooleans&&q!==null&&(q.toLowerCase()==="true"||q.toLowerCase()==="false")&&(q=q.toLowerCase()==="true"),q}function D(q,k){k=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},k),w(k.arrayFormatSeparator);const N=_(k),K=Object.create(null);if(typeof q!="string"||(q=q.trim().replace(/^[?#&]/,""),!q))return K;for(const $ of q.split("&")){if($==="")continue;let[P,z]=f(k.decode?$.replace(/\+/g," "):$,"=");z=z===void 0?null:["comma","separator","bracket-separator"].includes(k.arrayFormat)?z:A(z,k),N(A(P,k),z,K)}for(const $ of Object.keys(K)){const P=K[$];if(typeof P=="object"&&P!==null)for(const z of Object.keys(P))P[z]=B(P[z],k);else K[$]=B(P,k)}return k.sort===!1?K:(k.sort===!0?Object.keys(K).sort():Object.keys(K).sort(k.sort)).reduce(($,P)=>{const z=K[P];return Boolean(z)&&typeof z=="object"&&!Array.isArray(z)?$[P]=E(z):$[P]=z,$},Object.create(null))}l.extract=T,l.parse=D,l.stringify=(q,k)=>{if(!q)return"";k=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},k),w(k.arrayFormatSeparator);const N=z=>k.skipNull&&n(q[z])||k.skipEmptyString&&q[z]==="",K=M(k),$={};for(const z of Object.keys(q))N(z)||($[z]=q[z]);const P=Object.keys($);return k.sort!==!1&&P.sort(k.sort),P.map(z=>{const Y=q[z];return Y===void 0?"":Y===null?b(z,k):Array.isArray(Y)?Y.length===0&&k.arrayFormat==="bracket-separator"?b(z,k)+"[]":Y.reduce(K(z),[]).join("&"):b(z,k)+"="+b(Y,k)}).filter(z=>z.length>0).join("&")},l.parseUrl=(q,k)=>{k=Object.assign({decode:!0},k);const[N,K]=f(q,"#");return Object.assign({url:N.split("?")[0]||"",query:D(T(q),k)},k&&k.parseFragmentIdentifier&&K?{fragmentIdentifier:A(K,k)}:{})},l.stringifyUrl=(q,k)=>{k=Object.assign({encode:!0,strict:!0,[x]:!0},k);const N=I(q.url).split("?")[0]||"",K=l.extract(q.url),$=l.parse(K,{sort:!1}),P=Object.assign($,q.query);let z=l.stringify(P,k);z&&(z=`?${z}`);let Y=R(q.url);return q.fragmentIdentifier&&(Y=`#${k[x]?b(q.fragmentIdentifier,k):q.fragmentIdentifier}`),`${N}${z}${Y}`},l.pick=(q,k,N)=>{N=Object.assign({parseFragmentIdentifier:!0,[x]:!1},N);const{url:K,query:$,fragmentIdentifier:P}=l.parseUrl(q,N);return l.stringifyUrl({url:K,query:g($,k),fragmentIdentifier:P},N)},l.exclude=(q,k,N)=>{const K=Array.isArray(k)?$=>!k.includes($):($,P)=>!k($,P);return l.pick(q,K,N)}})(Qs);const jM={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function VM(l,i=[]){const a=[];return Object.keys(l).forEach(f=>{if(i.length&&!i.includes(f))return;const g=l[f];a.push(...g.accounts)}),a}function Lg(l,i){return l.includes(":")?[l]:i.chains||[]}const kg="base10",$r="base16",lu="base64pad",Gu="utf8",Ug=0,Fn=1,GM=0,D1=1,du=12,Zu=32;function ZM(){const l=Ku.generateKeyPair();return{privateKey:zr(l.secretKey,$r),publicKey:zr(l.publicKey,$r)}}function pu(){const l=ls.randomBytes(Zu);return zr(l,$r)}function WM(l,i){const a=Ku.sharedKey(Yr(l,$r),Yr(i,$r)),f=new IM(Ho.SHA256,a).expand(Zu);return zr(f,$r)}function YM(l){const i=Ho.hash(Yr(l,$r));return zr(i,$r)}function hs(l){const i=Ho.hash(Yr(l,Gu));return zr(i,$r)}function JM(l){return Yr(`${l}`,kg)}function aa(l){return Number(zr(l,kg))}function XM(l){const i=JM(typeof l.type<"u"?l.type:Ug);if(aa(i)===Fn&&typeof l.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const a=typeof l.senderPublicKey<"u"?Yr(l.senderPublicKey,$r):void 0,f=typeof l.iv<"u"?Yr(l.iv,$r):ls.randomBytes(du),g=new zu.ChaCha20Poly1305(Yr(l.symKey,$r)).seal(f,Yr(l.message,Gu));return t8({type:i,sealed:g,iv:f,senderPublicKey:a})}function QM(l){const i=new zu.ChaCha20Poly1305(Yr(l.symKey,$r)),{sealed:a,iv:f}=To(l.encoded),g=i.open(f,a);if(g===null)throw new Error("Failed to decrypt");return zr(g,Gu)}function t8(l){if(aa(l.type)===Fn){if(typeof l.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return zr(su([l.type,l.senderPublicKey,l.iv,l.sealed]),lu)}return zr(su([l.type,l.iv,l.sealed]),lu)}function To(l){const i=Yr(l,lu),a=i.slice(GM,D1),f=D1;if(aa(a)===Fn){const M=f+Zu,_=M+du,w=i.slice(f,M),b=i.slice(M,_),A=i.slice(_);return{type:a,sealed:A,iv:b,senderPublicKey:w}}const g=f+du,n=i.slice(f,g),x=i.slice(g);return{type:a,sealed:x,iv:n}}function e8(l,i){const a=To(l);return Fg({type:aa(a.type),senderPublicKey:typeof a.senderPublicKey<"u"?zr(a.senderPublicKey,$r):void 0,receiverPublicKey:i==null?void 0:i.receiverPublicKey})}function Fg(l){const i=(l==null?void 0:l.type)||Ug;if(i===Fn){if(typeof(l==null?void 0:l.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(l==null?void 0:l.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:i,senderPublicKey:l==null?void 0:l.senderPublicKey,receiverPublicKey:l==null?void 0:l.receiverPublicKey}}function L1(l){return l.type===Fn&&typeof l.senderPublicKey=="string"&&typeof l.receiverPublicKey=="string"}var r8=Object.defineProperty,k1=Object.getOwnPropertySymbols,i8=Object.prototype.hasOwnProperty,n8=Object.prototype.propertyIsEnumerable,U1=(l,i,a)=>i in l?r8(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,F1=(l,i)=>{for(var a in i||(i={}))i8.call(i,a)&&U1(l,a,i[a]);if(k1)for(var a of k1(i))n8.call(i,a)&&U1(l,a,i[a]);return l};const s8="ReactNative",ni={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},a8="js";function Wu(){return typeof bi.exports<"u"&&typeof bi.exports.versions<"u"&&typeof bi.exports.versions.node<"u"}function Ko(){return!Bg()&&!!ju()&&navigator.product===s8}function oa(){return!Wu()&&!!ju()}function fa(){return Ko()?ni.reactNative:Wu()?ni.node:oa()?ni.browser:ni.unknown}function o8(l,i){let a=Qs.parse(l);return a=F1(F1({},a),i),l=Qs.stringify(a),l}function f8(){return Ng()||{name:"",description:"",url:"",icons:[""]}}function h8(){if(fa()===ni.reactNative&&typeof lr<"u"&&typeof(lr==null?void 0:lr.Platform)<"u"){const{OS:a,Version:f}=lr.Platform;return[a,f].join("-")}const l=Xw();if(l===null)return"unknown";const i=l.os?l.os.replace(" ","").toLowerCase():"unknown";return l.type==="browser"?[i,l.name,l.version].join("-"):[i,l.version].join("-")}function u8(){var l;const i=fa();return i===ni.browser?[i,((l=qg())==null?void 0:l.host)||"unknown"].join(":"):i}function c8(l,i,a){const f=h8(),g=u8();return[[l,i].join("-"),[a8,a].join("-"),f,g].join("/")}function l8({protocol:l,version:i,relayUrl:a,sdkVersion:f,auth:g,projectId:n,useOnCloseEvent:x}){const M=a.split("?"),_=c8(l,i,f),w={auth:g,ua:_,projectId:n,useOnCloseEvent:x||void 0},b=o8(M[1]||"",w);return M[0]+"?"+b}function Dn(l,i){return l.filter(a=>i.includes(a)).length===l.length}function $g(l){return Object.fromEntries(l.entries())}function zg(l){return new Map(Object.entries(l))}function fs(l=re.FIVE_MINUTES,i){const a=re.toMiliseconds(l||re.FIVE_MINUTES);let f,g,n;return{resolve:x=>{n&&f&&(clearTimeout(n),f(x))},reject:x=>{n&&g&&(clearTimeout(n),g(x))},done:()=>new Promise((x,M)=>{n=setTimeout(()=>{M(new Error(i))},a),f=x,g=M})}}function ta(l,i,a){return new Promise(async(f,g)=>{const n=setTimeout(()=>g(new Error(a)),i);try{const x=await l;f(x)}catch(x){g(x)}clearTimeout(n)})}function Hg(l,i){if(typeof i=="string"&&i.startsWith(`${l}:`))return i;if(l.toLowerCase()==="topic"){if(typeof i!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${i}`}else if(l.toLowerCase()==="id"){if(typeof i!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${i}`}throw new Error(`Unknown expirer target type: ${l}`)}function d8(l){return Hg("topic",l)}function p8(l){return Hg("id",l)}function Kg(l){const[i,a]=l.split(":"),f={id:void 0,topic:void 0};if(i==="topic"&&typeof a=="string")f.topic=a;else if(i==="id"&&Number.isInteger(Number(a)))f.id=Number(a);else throw new Error(`Invalid target, expected id:number or topic:string, got ${i}:${a}`);return f}function Ii(l,i){return re.fromMiliseconds((i||Date.now())+re.toMiliseconds(l))}function cn(l){return Date.now()>=re.toMiliseconds(l)}function Mr(l,i){return`${l}${i?`:${i}`:""}`}function Z0(l=[],i=[]){return[...new Set([...l,...i])]}async function v8({id:l,topic:i,wcDeepLink:a}){try{if(!a)return;const f=typeof a=="string"?JSON.parse(a):a;let g=f==null?void 0:f.href;if(typeof g!="string")return;g.endsWith("/")&&(g=g.slice(0,-1));const n=`${g}/wc?requestId=${l}&sessionTopic=${i}`,x=fa();x===ni.browser?n.startsWith("https://")?window.open(n,"_blank","noreferrer noopener"):window.open(n,"_self","noreferrer noopener"):x===ni.reactNative&&typeof(lr==null?void 0:lr.Linking)<"u"&&await lr.Linking.openURL(n)}catch(f){console.error(f)}}const g8="irn";function vu(l){return(l==null?void 0:l.relay)||{protocol:g8}}function So(l){const i=jM[l];if(typeof i>"u")throw new Error(`Relay Protocol not supported: ${l}`);return i}var m8=Object.defineProperty,$1=Object.getOwnPropertySymbols,b8=Object.prototype.hasOwnProperty,y8=Object.prototype.propertyIsEnumerable,z1=(l,i,a)=>i in l?m8(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,w8=(l,i)=>{for(var a in i||(i={}))b8.call(i,a)&&z1(l,a,i[a]);if($1)for(var a of $1(i))y8.call(i,a)&&z1(l,a,i[a]);return l};function _8(l,i="-"){const a={},f="relay"+i;return Object.keys(l).forEach(g=>{if(g.startsWith(f)){const n=g.replace(f,""),x=l[g];a[n]=x}}),a}function M8(l){const i=l.indexOf(":"),a=l.indexOf("?")!==-1?l.indexOf("?"):void 0,f=l.substring(0,i),g=l.substring(i+1,a).split("@"),n=typeof a<"u"?l.substring(a):"",x=Qs.parse(n);return{protocol:f,topic:x8(g[0]),version:parseInt(g[1],10),symKey:x.symKey,relay:_8(x)}}function x8(l){return l.startsWith("//")?l.substring(2):l}function E8(l,i="-"){const a="relay",f={};return Object.keys(l).forEach(g=>{const n=a+i+g;l[g]&&(f[n]=l[g])}),f}function S8(l){return`${l.protocol}:${l.topic}@${l.version}?`+Qs.stringify(w8({symKey:l.symKey},E8(l.relay)))}function vs(l){const i=[];return l.forEach(a=>{const[f,g]=a.split(":");i.push(`${f}:${g}`)}),i}function A8(l){const i=[];return Object.values(l).forEach(a=>{i.push(...vs(a.accounts))}),i}function I8(l,i){const a=[];return Object.values(l).forEach(f=>{vs(f.accounts).includes(i)&&a.push(...f.methods)}),a}function R8(l,i){const a=[];return Object.values(l).forEach(f=>{vs(f.accounts).includes(i)&&a.push(...f.events)}),a}function P8(l,i){const a=Ao(l,i);if(a)throw new Error(a.message);const f={};for(const[g,n]of Object.entries(l))f[g]={methods:n.methods,events:n.events,chains:n.accounts.map(x=>`${x.split(":")[0]}:${x.split(":")[1]}`)};return f}function Yu(l){return l.includes(":")}function Zs(l){return Yu(l)?l.split(":")[0]:l}const O8={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},T8={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Zt(l,i){const{message:a,code:f}=T8[l];return{message:i?`${a} ${i}`:a,code:f}}function br(l,i){const{message:a,code:f}=O8[l];return{message:i?`${a} ${i}`:a,code:f}}function Li(l,i){return Array.isArray(l)?typeof i<"u"&&l.length?l.every(i):!0:!1}function us(l){return Object.getPrototypeOf(l)===Object.prototype&&Object.keys(l).length}function Fr(l){return typeof l>"u"}function Ir(l,i){return i&&Fr(l)?!0:typeof l=="string"&&!!l.trim().length}function Ju(l,i){return i&&Fr(l)?!0:typeof l=="number"&&!isNaN(l)}function C8(l,i){const{requiredNamespaces:a}=i,f=Object.keys(l.namespaces),g=Object.keys(a);let n=!0;return Dn(g,f)?(f.forEach(x=>{const{accounts:M,methods:_,events:w}=l.namespaces[x],b=vs(M),A=a[x];(!Dn(Lg(x,A),b)||!Dn(A.methods,_)||!Dn(A.events,w))&&(n=!1)}),n):!1}function Co(l){return Ir(l,!1)&&l.includes(":")?l.split(":").length===2:!1}function B8(l){if(Ir(l,!1)&&l.includes(":")){const i=l.split(":");if(i.length===3){const a=i[0]+":"+i[1];return!!i[2]&&Co(a)}}return!1}function q8(l){if(Ir(l,!1))try{return typeof new URL(l)<"u"}catch{return!1}return!1}function N8(l){var i;return(i=l==null?void 0:l.proposer)==null?void 0:i.publicKey}function D8(l){return l==null?void 0:l.topic}function L8(l,i){let a=null;return Ir(l==null?void 0:l.publicKey,!1)||(a=Zt("MISSING_OR_INVALID",`${i} controller public key should be a string`)),a}function H1(l){let i=!0;return Li(l)?l.length&&(i=l.every(a=>Ir(a,!1))):i=!1,i}function k8(l,i,a){let f=null;return Li(i)&&i.length?i.forEach(g=>{f||Co(g)||(f=br("UNSUPPORTED_CHAINS",`${a}, chain ${g} should be a string and conform to "namespace:chainId" format`))}):Co(l)||(f=br("UNSUPPORTED_CHAINS",`${a}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),f}function U8(l,i,a){let f=null;return Object.entries(l).forEach(([g,n])=>{if(f)return;const x=k8(g,Lg(g,n),`${i} ${a}`);x&&(f=x)}),f}function F8(l,i){let a=null;return Li(l)?l.forEach(f=>{a||B8(f)||(a=br("UNSUPPORTED_ACCOUNTS",`${i}, account ${f} should be a string and conform to "namespace:chainId:address" format`))}):a=br("UNSUPPORTED_ACCOUNTS",`${i}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),a}function $8(l,i){let a=null;return Object.values(l).forEach(f=>{if(a)return;const g=F8(f==null?void 0:f.accounts,`${i} namespace`);g&&(a=g)}),a}function z8(l,i){let a=null;return H1(l==null?void 0:l.methods)?H1(l==null?void 0:l.events)||(a=br("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):a=br("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),a}function jg(l,i){let a=null;return Object.values(l).forEach(f=>{if(a)return;const g=z8(f,`${i}, namespace`);g&&(a=g)}),a}function H8(l,i,a){let f=null;if(l&&us(l)){const g=jg(l,i);g&&(f=g);const n=U8(l,i,a);n&&(f=n)}else f=Zt("MISSING_OR_INVALID",`${i}, ${a} should be an object with data`);return f}function Ao(l,i){let a=null;if(l&&us(l)){const f=jg(l,i);f&&(a=f);const g=$8(l,i);g&&(a=g)}else a=Zt("MISSING_OR_INVALID",`${i}, namespaces should be an object with data`);return a}function Vg(l){return Ir(l.protocol,!0)}function K8(l,i){let a=!1;return i&&!l?a=!0:l&&Li(l)&&l.length&&l.forEach(f=>{a=Vg(f)}),a}function j8(l){return typeof l=="number"}function Wr(l){return typeof l<"u"&&typeof l!==null}function V8(l){return!(!l||typeof l!="object"||!l.code||!Ju(l.code,!1)||!l.message||!Ir(l.message,!1))}function G8(l){return!(Fr(l)||!Ir(l.method,!1))}function Z8(l){return!(Fr(l)||Fr(l.result)&&Fr(l.error)||!Ju(l.id,!1)||!Ir(l.jsonrpc,!1))}function W8(l){return!(Fr(l)||!Ir(l.name,!1))}function K1(l,i){return!(!Co(i)||!A8(l).includes(i))}function Y8(l,i,a){return Ir(a,!1)?I8(l,i).includes(a):!1}function J8(l,i,a){return Ir(a,!1)?R8(l,i).includes(a):!1}function j1(l,i,a){let f=null;const g=X8(l),n=Q8(i),x=Object.keys(g),M=Object.keys(n),_=V1(Object.keys(l)),w=V1(Object.keys(i)),b=_.filter(A=>!w.includes(A));return b.length&&(f=Zt("NON_CONFORMING_NAMESPACES",`${a} namespaces keys don't satisfy requiredNamespaces.
      Required: ${b.toString()}
      Received: ${Object.keys(i).toString()}`)),Dn(x,M)||(f=Zt("NON_CONFORMING_NAMESPACES",`${a} namespaces chains don't satisfy required namespaces.
      Required: ${x.toString()}
      Approved: ${M.toString()}`)),Object.keys(i).forEach(A=>{if(!A.includes(":")||f)return;const E=vs(i[A].accounts);E.includes(A)||(f=Zt("NON_CONFORMING_NAMESPACES",`${a} namespaces accounts don't satisfy namespace accounts for ${A}
        Required: ${A}
        Approved: ${E.toString()}`))}),x.forEach(A=>{f||(Dn(g[A].methods,n[A].methods)?Dn(g[A].events,n[A].events)||(f=Zt("NON_CONFORMING_NAMESPACES",`${a} namespaces events don't satisfy namespace events for ${A}`)):f=Zt("NON_CONFORMING_NAMESPACES",`${a} namespaces methods don't satisfy namespace methods for ${A}`))}),f}function X8(l){const i={};return Object.keys(l).forEach(a=>{var f;a.includes(":")?i[a]=l[a]:(f=l[a].chains)==null||f.forEach(g=>{i[g]={methods:l[a].methods,events:l[a].events}})}),i}function V1(l){return[...new Set(l.map(i=>i.includes(":")?i.split(":")[0]:i))]}function Q8(l){const i={};return Object.keys(l).forEach(a=>{if(a.includes(":"))i[a]=l[a];else{const f=vs(l[a].accounts);f==null||f.forEach(g=>{i[g]={accounts:l[a].accounts.filter(n=>n.includes(`${g}:`)),methods:l[a].methods,events:l[a].events}})}}),i}function t9(l,i){return Ju(l,!1)&&l<=i.max&&l>=i.min}function G1(){const l=fa();return new Promise(i=>{switch(l){case ni.browser:i(e9());break;case ni.reactNative:i(r9());break;case ni.node:i(i9());break;default:i(!0)}})}function e9(){return oa()&&(navigator==null?void 0:navigator.onLine)}async function r9(){if(Ko()&&typeof lr<"u"&&lr!=null&&lr.NetInfo){const l=await(lr==null?void 0:lr.NetInfo.fetch());return l==null?void 0:l.isConnected}return!0}function i9(){return!0}function n9(l){switch(fa()){case ni.browser:s9(l);break;case ni.reactNative:a9(l);break}}function s9(l){oa()&&(window.addEventListener("online",()=>l(!0)),window.addEventListener("offline",()=>l(!1)))}function a9(l){var i;Ko()&&typeof lr<"u"&&lr!=null&&lr.NetInfo&&((i=lr)==null||i.NetInfo.addEventListener(a=>l(a==null?void 0:a.isConnected)))}const W0={};class _o{static get(i){return W0[i]}static set(i,a){W0[i]=a}static delete(i){delete W0[i]}}const o9="PARSE_ERROR",f9="INVALID_REQUEST",h9="METHOD_NOT_FOUND",u9="INVALID_PARAMS",Gg="INTERNAL_ERROR",Xu="SERVER_ERROR",c9=[-32700,-32600,-32601,-32602,-32603],Ys={[o9]:{code:-32700,message:"Parse error"},[f9]:{code:-32600,message:"Invalid Request"},[h9]:{code:-32601,message:"Method not found"},[u9]:{code:-32602,message:"Invalid params"},[Gg]:{code:-32603,message:"Internal error"},[Xu]:{code:-32e3,message:"Server error"}},Zg=Xu;function l9(l){return c9.includes(l)}function Z1(l){return Object.keys(Ys).includes(l)?Ys[l]:Ys[Zg]}function d9(l){const i=Object.values(Ys).find(a=>a.code===l);return i||Ys[Zg]}function Wg(l,i,a){return l.message.includes("getaddrinfo ENOTFOUND")||l.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${a} RPC url at ${i}`):l}var Yg={},Zi={},W1;function p9(){if(W1)return Zi;W1=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.isBrowserCryptoAvailable=Zi.getSubtleCrypto=Zi.getBrowerCrypto=void 0;function l(){return(ve===null||ve===void 0?void 0:ve.crypto)||(ve===null||ve===void 0?void 0:ve.msCrypto)||{}}Zi.getBrowerCrypto=l;function i(){const f=l();return f.subtle||f.webkitSubtle}Zi.getSubtleCrypto=i;function a(){return!!l()&&!!i()}return Zi.isBrowserCryptoAvailable=a,Zi}var Wi={},Y1;function v9(){if(Y1)return Wi;Y1=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.isBrowser=Wi.isNode=Wi.isReactNative=void 0;function l(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Wi.isReactNative=l;function i(){return typeof bi.exports<"u"&&typeof bi.exports.versions<"u"&&typeof bi.exports.versions.node<"u"}Wi.isNode=i;function a(){return!l()&&!i()}return Wi.isBrowser=a,Wi}(function(l){Object.defineProperty(l,"__esModule",{value:!0});const i=wi.exports;i.__exportStar(p9(),l),i.__exportStar(v9(),l)})(Yg);function Qu(l=3){const i=Date.now()*Math.pow(10,l),a=Math.floor(Math.random()*Math.pow(10,l));return i+a}function Jg(l=6){return BigInt(Qu(l))}function ea(l,i,a){return{id:a||Qu(),jsonrpc:"2.0",method:l,params:i}}function tc(l,i){return{id:l,jsonrpc:"2.0",result:i}}function jo(l,i,a){return{id:l,jsonrpc:"2.0",error:g9(i,a)}}function g9(l,i){return typeof l>"u"?Z1(Gg):(typeof l=="string"&&(l=Object.assign(Object.assign({},Z1(Xu)),{message:l})),typeof i<"u"&&(l.data=i),l9(l.code)&&(l=d9(l.code)),l)}class m9{}class b9 extends m9{constructor(){super()}}class y9 extends b9{constructor(i){super()}}const w9="^https?:",_9="^wss?:";function M9(l){const i=l.match(new RegExp(/^\w+:/,"gi"));if(!(!i||!i.length))return i[0]}function Xg(l,i){const a=M9(l);return typeof a>"u"?!1:new RegExp(i).test(a)}function J1(l){return Xg(l,w9)}function X1(l){return Xg(l,_9)}function x9(l){return new RegExp("wss?://localhost(:d{2,5})?").test(l)}function Qg(l){return typeof l=="object"&&"id"in l&&"jsonrpc"in l&&l.jsonrpc==="2.0"}function ec(l){return Qg(l)&&"method"in l}function Vo(l){return Qg(l)&&(Xi(l)||Ri(l))}function Xi(l){return"result"in l}function Ri(l){return"error"in l}class vn extends y9{constructor(i){super(i),this.events=new qr.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(i),this.connection.connected&&this.registerEventListeners()}async connect(i=this.connection){await this.open(i)}async disconnect(){await this.close()}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async request(i,a){return this.requestStrict(ea(i.method,i.params||[],i.id||Jg().toString()),a)}async requestStrict(i,a){return new Promise(async(f,g)=>{if(!this.connection.connected)try{await this.open()}catch(n){g(n)}this.events.on(`${i.id}`,n=>{Ri(n)?g(n.error):f(n.result)});try{await this.connection.send(i,a)}catch(n){g(n)}})}setConnection(i=this.connection){return i}onPayload(i){this.events.emit("payload",i),Vo(i)?this.events.emit(`${i.id}`,i):this.events.emit("message",{type:i.method,data:i.params})}onClose(i){i&&i.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${i.code} ${i.reason?`(${i.reason})`:""}`)),this.events.emit("disconnect")}async open(i=this.connection){this.connection===i&&this.connection.connected||(this.connection.connected&&this.close(),typeof i=="string"&&(await this.connection.open(i),i=this.connection),this.connection=this.setConnection(i),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",i=>this.onPayload(i)),this.connection.on("close",i=>this.onClose(i)),this.connection.on("error",i=>this.events.emit("error",i)),this.connection.on("register_error",i=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const E9=()=>typeof WebSocket<"u"?WebSocket:typeof lr<"u"&&typeof lr.WebSocket<"u"?lr.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),S9=()=>typeof WebSocket<"u"||typeof lr<"u"&&typeof lr.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Q1=l=>l.split("?")[0],tv=10,A9=E9();class I9{constructor(i){if(this.url=i,this.events=new qr.exports.EventEmitter,this.registering=!1,!X1(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);this.url=i}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async open(i=this.url){await this.register(i)}async close(){return new Promise((i,a)=>{if(typeof this.socket>"u"){a(new Error("Connection already closed"));return}this.socket.onclose=f=>{this.onClose(f),i()},this.socket.close()})}async send(i,a){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Js(i))}catch(f){this.onError(i.id,f)}}register(i=this.url){if(!X1(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);if(this.registering){const a=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=a||this.events.listenerCount("open")>=a)&&this.events.setMaxListeners(a+1),new Promise((f,g)=>{this.events.once("register_error",n=>{this.resetMaxListeners(),g(n)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return g(new Error("WebSocket connection is missing or invalid"));f(this.socket)})})}return this.url=i,this.registering=!0,new Promise((a,f)=>{const g=Yg.isReactNative()?void 0:{rejectUnauthorized:!x9(i)},n=new A9(i,[],g);S9()?n.onerror=x=>{const M=x;f(this.emitError(M.error))}:n.on("error",x=>{f(this.emitError(x))}),n.onopen=()=>{this.onOpen(n),a(n)}})}onOpen(i){i.onmessage=a=>this.onPayload(a),i.onclose=a=>this.onClose(a),this.socket=i,this.registering=!1,this.events.emit("open")}onClose(i){this.socket=void 0,this.registering=!1,this.events.emit("close",i)}onPayload(i){if(typeof i.data>"u")return;const a=typeof i.data=="string"?Au(i.data):i.data;this.events.emit("payload",a)}onError(i,a){const f=this.parseError(a),g=f.message||f.toString(),n=jo(i,g);this.events.emit("payload",n)}parseError(i,a=this.url){return Wg(i,Q1(a),"WS")}resetMaxListeners(){this.events.getMaxListeners()>tv&&this.events.setMaxListeners(tv)}emitError(i){const a=this.parseError(new Error((i==null?void 0:i.message)||`WebSocket connection failed for host: ${Q1(this.url)}`));return this.events.emit("register_error",a),a}}var gu={exports:{}};(function(l,i){var a=200,f="__lodash_hash_undefined__",g=1,n=2,x=9007199254740991,M="[object Arguments]",_="[object Array]",w="[object AsyncFunction]",b="[object Boolean]",A="[object Date]",E="[object Error]",I="[object Function]",R="[object GeneratorFunction]",T="[object Map]",B="[object Number]",D="[object Null]",q="[object Object]",k="[object Promise]",N="[object Proxy]",K="[object RegExp]",$="[object Set]",P="[object String]",z="[object Symbol]",Y="[object Undefined]",nt="[object WeakMap]",v="[object ArrayBuffer]",t="[object DataView]",r="[object Float32Array]",s="[object Float64Array]",h="[object Int8Array]",d="[object Int16Array]",m="[object Int32Array]",y="[object Uint8Array]",u="[object Uint8ClampedArray]",e="[object Uint16Array]",c="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,L=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,G={};G[r]=G[s]=G[h]=G[d]=G[m]=G[y]=G[u]=G[e]=G[c]=!0,G[M]=G[_]=G[v]=G[b]=G[t]=G[A]=G[E]=G[I]=G[T]=G[B]=G[q]=G[K]=G[$]=G[P]=G[nt]=!1;var tt=typeof ve=="object"&&ve&&ve.Object===Object&&ve,Z=typeof self=="object"&&self&&self.Object===Object&&self,et=tt||Z||Function("return this")(),j=i&&!i.nodeType&&i,O=j&&!0&&l&&!l.nodeType&&l,Q=O&&O.exports===j,rt=Q&&tt.process,st=function(){try{return rt&&rt.binding&&rt.binding("util")}catch{}}(),Jt=st&&st.isTypedArray;function gt(J,at){for(var jt=-1,Wt=J==null?0:J.length,rr=0,le=[];++jt<Wt;){var fr=J[jt];at(fr,jt,J)&&(le[rr++]=fr)}return le}function mt(J,at){for(var jt=-1,Wt=at.length,rr=J.length;++jt<Wt;)J[rr+jt]=at[jt];return J}function ee(J,at){for(var jt=-1,Wt=J==null?0:J.length;++jt<Wt;)if(at(J[jt],jt,J))return!0;return!1}function _t(J,at){for(var jt=-1,Wt=Array(J);++jt<J;)Wt[jt]=at(jt);return Wt}function Mt(J){return function(at){return J(at)}}function ie(J,at){return J.has(at)}function ut(J,at){return J==null?void 0:J[at]}function pt(J){var at=-1,jt=Array(J.size);return J.forEach(function(Wt,rr){jt[++at]=[rr,Wt]}),jt}function Xt(J,at){return function(jt){return J(at(jt))}}function vt(J){var at=-1,jt=Array(J.size);return J.forEach(function(Wt){jt[++at]=Wt}),jt}var lt=Array.prototype,Qt=Function.prototype,ht=Object.prototype,dt=et["__core-js_shared__"],ne=Qt.toString,ct=ht.hasOwnProperty,bt=function(){var J=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),se=ht.toString,yt=RegExp("^"+ne.call(ct).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=Q?et.Buffer:void 0,ae=et.Symbol,qt=et.Uint8Array,Lt=ht.propertyIsEnumerable,Fe=lt.splice,Nt=ae?ae.toStringTag:void 0,kt=Object.getOwnPropertySymbols,ar=wt?wt.isBuffer:void 0,Ut=Xt(Object.keys,Object),Et=Jr(et,"DataView"),pe=Jr(et,"Map"),St=Jr(et,"Promise"),At=Jr(et,"Set"),me=Jr(et,"WeakMap"),xt=Jr(Object,"create"),Ot=ki(Et),xe=ki(pe),It=ki(St),Tt=ki(At),we=ki(me),Pt=ae?ae.prototype:void 0,Rt=Pt?Pt.valueOf:void 0;function ue(J){var at=-1,jt=J==null?0:J.length;for(this.clear();++at<jt;){var Wt=J[at];this.set(Wt[0],Wt[1])}}function Ct(){this.__data__=xt?xt(null):{},this.size=0}function Bt(J){var at=this.has(J)&&delete this.__data__[J];return this.size-=at?1:0,at}function pr(J){var at=this.__data__;if(xt){var jt=at[J];return jt===f?void 0:jt}return ct.call(at,J)?at[J]:void 0}function Ft(J){var at=this.__data__;return xt?at[J]!==void 0:ct.call(at,J)}function $t(J,at){var jt=this.__data__;return this.size+=this.has(J)?0:1,jt[J]=xt&&at===void 0?f:at,this}ue.prototype.clear=Ct,ue.prototype.delete=Bt,ue.prototype.get=pr,ue.prototype.has=Ft,ue.prototype.set=$t;function Ae(J){var at=-1,jt=J==null?0:J.length;for(this.clear();++at<jt;){var Wt=J[at];this.set(Wt[0],Wt[1])}}function Ke(){this.__data__=[],this.size=0}function je(J){var at=this.__data__,jt=mn(at,J);if(jt<0)return!1;var Wt=at.length-1;return jt==Wt?at.pop():Fe.call(at,jt,1),--this.size,!0}function Ve(J){var at=this.__data__,jt=mn(at,J);return jt<0?void 0:at[jt][1]}function Ge(J){return mn(this.__data__,J)>-1}function Ze(J,at){var jt=this.__data__,Wt=mn(jt,J);return Wt<0?(++this.size,jt.push([J,at])):jt[Wt][1]=at,this}Ae.prototype.clear=Ke,Ae.prototype.delete=je,Ae.prototype.get=Ve,Ae.prototype.has=Ge,Ae.prototype.set=Ze;function Ce(J){var at=-1,jt=J==null?0:J.length;for(this.clear();++at<jt;){var Wt=J[at];this.set(Wt[0],Wt[1])}}function Ne(){this.size=0,this.__data__={hash:new ue,map:new(pe||Ae),string:new ue}}function We(J){var at=tn(this,J).delete(J);return this.size-=at?1:0,at}function De(J){return tn(this,J).get(J)}function Ye(J){return tn(this,J).has(J)}function Je(J,at){var jt=tn(this,J),Wt=jt.size;return jt.set(J,at),this.size+=jt.size==Wt?0:1,this}Ce.prototype.clear=Ne,Ce.prototype.delete=We,Ce.prototype.get=De,Ce.prototype.has=Ye,Ce.prototype.set=Je;function Le(J){var at=-1,jt=J==null?0:J.length;for(this.__data__=new Ce;++at<jt;)this.add(J[at])}function $e(J){return this.__data__.set(J,f),this}function ze(J){return this.__data__.has(J)}Le.prototype.add=Le.prototype.push=$e,Le.prototype.has=ze;function Re(J){var at=this.__data__=new Ae(J);this.size=at.size}function Xe(){this.__data__=new Ae,this.size=0}function Qe(J){var at=this.__data__,jt=at.delete(J);return this.size=at.size,jt}function tr(J){return this.__data__.get(J)}function Wo(J){return this.__data__.has(J)}function ua(J,at){var jt=this.__data__;if(jt instanceof Ae){var Wt=jt.__data__;if(!pe||Wt.length<a-1)return Wt.push([J,at]),this.size=++jt.size,this;jt=this.__data__=new Ce(Wt)}return jt.set(J,at),this.size=jt.size,this}Re.prototype.clear=Xe,Re.prototype.delete=Qe,Re.prototype.get=tr,Re.prototype.has=Wo,Re.prototype.set=ua;function ca(J,at){var jt=Kn(J),Wt=!jt&&xa(J),rr=!jt&&!Wt&&bs(J),le=!jt&&!Wt&&!rr&&Aa(J),fr=jt||Wt||rr||le,wr=fr?_t(J.length,String):[],Pe=wr.length;for(var ir in J)(at||ct.call(J,ir))&&!(fr&&(ir=="length"||rr&&(ir=="offset"||ir=="parent")||le&&(ir=="buffer"||ir=="byteLength"||ir=="byteOffset")||ba(ir,Pe)))&&wr.push(ir);return wr}function mn(J,at){for(var jt=J.length;jt--;)if(Ma(J[jt][0],at))return jt;return-1}function gs(J,at,jt){var Wt=at(J);return Kn(J)?Wt:mt(Wt,jt(J))}function bn(J){return J==null?J===void 0?Y:D:Nt&&Nt in Object(J)?ga(J):Xo(J)}function ms(J){return wn(J)&&bn(J)==M}function yn(J,at,jt,Wt,rr){return J===at?!0:J==null||at==null||!wn(J)&&!wn(at)?J!==J&&at!==at:la(J,at,jt,Wt,yn,rr)}function la(J,at,jt,Wt,rr,le){var fr=Kn(J),wr=Kn(at),Pe=fr?_:Pi(J),ir=wr?_:Pi(at);Pe=Pe==M?q:Pe,ir=ir==M?q:ir;var vr=Pe==q,Hr=ir==q,_r=Pe==ir;if(_r&&bs(J)){if(!bs(at))return!1;fr=!0,vr=!1}if(_r&&!vr)return le||(le=new Re),fr||Aa(J)?zn(J,at,jt,Wt,rr,le):Jo(J,at,Pe,jt,Wt,rr,le);if(!(jt&g)){var hr=vr&&ct.call(J,"__wrapped__"),Nr=Hr&&ct.call(at,"__wrapped__");if(hr||Nr){var Mi=hr?J.value():J,ai=Nr?at.value():at;return le||(le=new Re),rr(Mi,ai,jt,Wt,le)}}return _r?(le||(le=new Re),va(J,at,jt,Wt,rr,le)):!1}function Yo(J){if(!Sa(J)||wa(J))return!1;var at=jn(J)?yt:L;return at.test(ki(J))}function da(J){return wn(J)&&Ea(J.length)&&!!G[bn(J)]}function pa(J){if(!_a(J))return Ut(J);var at=[];for(var jt in Object(J))ct.call(J,jt)&&jt!="constructor"&&at.push(jt);return at}function zn(J,at,jt,Wt,rr,le){var fr=jt&g,wr=J.length,Pe=at.length;if(wr!=Pe&&!(fr&&Pe>wr))return!1;var ir=le.get(J);if(ir&&le.get(at))return ir==at;var vr=-1,Hr=!0,_r=jt&n?new Le:void 0;for(le.set(J,at),le.set(at,J);++vr<wr;){var hr=J[vr],Nr=at[vr];if(Wt)var Mi=fr?Wt(Nr,hr,vr,at,J,le):Wt(hr,Nr,vr,J,at,le);if(Mi!==void 0){if(Mi)continue;Hr=!1;break}if(_r){if(!ee(at,function(ai,Oi){if(!ie(_r,Oi)&&(hr===ai||rr(hr,ai,jt,Wt,le)))return _r.push(Oi)})){Hr=!1;break}}else if(!(hr===Nr||rr(hr,Nr,jt,Wt,le))){Hr=!1;break}}return le.delete(J),le.delete(at),Hr}function Jo(J,at,jt,Wt,rr,le,fr){switch(jt){case t:if(J.byteLength!=at.byteLength||J.byteOffset!=at.byteOffset)return!1;J=J.buffer,at=at.buffer;case v:return!(J.byteLength!=at.byteLength||!le(new qt(J),new qt(at)));case b:case A:case B:return Ma(+J,+at);case E:return J.name==at.name&&J.message==at.message;case K:case P:return J==at+"";case T:var wr=pt;case $:var Pe=Wt&g;if(wr||(wr=vt),J.size!=at.size&&!Pe)return!1;var ir=fr.get(J);if(ir)return ir==at;Wt|=n,fr.set(J,at);var vr=zn(wr(J),wr(at),Wt,rr,le,fr);return fr.delete(J),vr;case z:if(Rt)return Rt.call(J)==Rt.call(at)}return!1}function va(J,at,jt,Wt,rr,le){var fr=jt&g,wr=Hn(J),Pe=wr.length,ir=Hn(at),vr=ir.length;if(Pe!=vr&&!fr)return!1;for(var Hr=Pe;Hr--;){var _r=wr[Hr];if(!(fr?_r in at:ct.call(at,_r)))return!1}var hr=le.get(J);if(hr&&le.get(at))return hr==at;var Nr=!0;le.set(J,at),le.set(at,J);for(var Mi=fr;++Hr<Pe;){_r=wr[Hr];var ai=J[_r],Oi=at[_r];if(Wt)var ys=fr?Wt(Oi,ai,_r,at,J,le):Wt(ai,Oi,_r,J,at,le);if(!(ys===void 0?ai===Oi||rr(ai,Oi,jt,Wt,le):ys)){Nr=!1;break}Mi||(Mi=_r=="constructor")}if(Nr&&!Mi){var _n=J.constructor,Sr=at.constructor;_n!=Sr&&"constructor"in J&&"constructor"in at&&!(typeof _n=="function"&&_n instanceof _n&&typeof Sr=="function"&&Sr instanceof Sr)&&(Nr=!1)}return le.delete(J),le.delete(at),Nr}function Hn(J){return gs(J,ef,ma)}function tn(J,at){var jt=J.__data__;return ya(at)?jt[typeof at=="string"?"string":"hash"]:jt.map}function Jr(J,at){var jt=ut(J,at);return Yo(jt)?jt:void 0}function ga(J){var at=ct.call(J,Nt),jt=J[Nt];try{J[Nt]=void 0;var Wt=!0}catch{}var rr=se.call(J);return Wt&&(at?J[Nt]=jt:delete J[Nt]),rr}var ma=kt?function(J){return J==null?[]:(J=Object(J),gt(kt(J),function(at){return Lt.call(J,at)}))}:er,Pi=bn;(Et&&Pi(new Et(new ArrayBuffer(1)))!=t||pe&&Pi(new pe)!=T||St&&Pi(St.resolve())!=k||At&&Pi(new At)!=$||me&&Pi(new me)!=nt)&&(Pi=function(J){var at=bn(J),jt=at==q?J.constructor:void 0,Wt=jt?ki(jt):"";if(Wt)switch(Wt){case Ot:return t;case xe:return T;case It:return k;case Tt:return $;case we:return nt}return at});function ba(J,at){return at=at==null?x:at,!!at&&(typeof J=="number"||H.test(J))&&J>-1&&J%1==0&&J<at}function ya(J){var at=typeof J;return at=="string"||at=="number"||at=="symbol"||at=="boolean"?J!=="__proto__":J===null}function wa(J){return!!bt&&bt in J}function _a(J){var at=J&&J.constructor,jt=typeof at=="function"&&at.prototype||ht;return J===jt}function Xo(J){return se.call(J)}function ki(J){if(J!=null){try{return ne.call(J)}catch{}try{return J+""}catch{}}return""}function Ma(J,at){return J===at||J!==J&&at!==at}var xa=ms(function(){return arguments}())?ms:function(J){return wn(J)&&ct.call(J,"callee")&&!Lt.call(J,"callee")},Kn=Array.isArray;function Qo(J){return J!=null&&Ea(J.length)&&!jn(J)}var bs=ar||He;function tf(J,at){return yn(J,at)}function jn(J){if(!Sa(J))return!1;var at=bn(J);return at==I||at==R||at==w||at==N}function Ea(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=x}function Sa(J){var at=typeof J;return J!=null&&(at=="object"||at=="function")}function wn(J){return J!=null&&typeof J=="object"}var Aa=Jt?Mt(Jt):da;function ef(J){return Qo(J)?ca(J):pa(J)}function er(){return[]}function He(){return!1}l.exports=tf})(gu,gu.exports);const R9=gu.exports;function P9(l,i){if(l.length>=255)throw new TypeError("Alphabet too long");for(var a=new Uint8Array(256),f=0;f<a.length;f++)a[f]=255;for(var g=0;g<l.length;g++){var n=l.charAt(g),x=n.charCodeAt(0);if(a[x]!==255)throw new TypeError(n+" is ambiguous");a[x]=g}var M=l.length,_=l.charAt(0),w=Math.log(M)/Math.log(256),b=Math.log(256)/Math.log(M);function A(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var T=0,B=0,D=0,q=R.length;D!==q&&R[D]===0;)D++,T++;for(var k=(q-D)*b+1>>>0,N=new Uint8Array(k);D!==q;){for(var K=R[D],$=0,P=k-1;(K!==0||$<B)&&P!==-1;P--,$++)K+=256*N[P]>>>0,N[P]=K%M>>>0,K=K/M>>>0;if(K!==0)throw new Error("Non-zero carry");B=$,D++}for(var z=k-B;z!==k&&N[z]===0;)z++;for(var Y=_.repeat(T);z<k;++z)Y+=l.charAt(N[z]);return Y}function E(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var T=0;if(R[T]!==" "){for(var B=0,D=0;R[T]===_;)B++,T++;for(var q=(R.length-T)*w+1>>>0,k=new Uint8Array(q);R[T];){var N=a[R.charCodeAt(T)];if(N===255)return;for(var K=0,$=q-1;(N!==0||K<D)&&$!==-1;$--,K++)N+=M*k[$]>>>0,k[$]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");D=K,T++}if(R[T]!==" "){for(var P=q-D;P!==q&&k[P]===0;)P++;for(var z=new Uint8Array(B+(q-P)),Y=B;P!==q;)z[Y++]=k[P++];return z}}}function I(R){var T=E(R);if(T)return T;throw new Error(`Non-${i} character`)}return{encode:A,decodeUnsafe:E,decode:I}}var O9=P9,T9=O9;const tm=l=>{if(l instanceof Uint8Array&&l.constructor.name==="Uint8Array")return l;if(l instanceof ArrayBuffer)return new Uint8Array(l);if(ArrayBuffer.isView(l))return new Uint8Array(l.buffer,l.byteOffset,l.byteLength);throw new Error("Unknown type, must be binary type")},C9=l=>new TextEncoder().encode(l),B9=l=>new TextDecoder().decode(l);class q9{constructor(i,a,f){this.name=i,this.prefix=a,this.baseEncode=f}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}}class N9{constructor(i,a,f){if(this.name=i,this.prefix=a,a.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=a.codePointAt(0),this.baseDecode=f}decode(i){if(typeof i=="string"){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(i){return em(this,i)}}class D9{constructor(i){this.decoders=i}or(i){return em(this,i)}decode(i){const a=i[0],f=this.decoders[a];if(f)return f.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const em=(l,i)=>new D9({...l.decoders||{[l.prefix]:l},...i.decoders||{[i.prefix]:i}});class L9{constructor(i,a,f,g){this.name=i,this.prefix=a,this.baseEncode=f,this.baseDecode=g,this.encoder=new q9(i,a,f),this.decoder=new N9(i,a,g)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}}const Go=({name:l,prefix:i,encode:a,decode:f})=>new L9(l,i,a,f),ha=({prefix:l,name:i,alphabet:a})=>{const{encode:f,decode:g}=T9(a,i);return Go({prefix:l,name:i,encode:f,decode:n=>tm(g(n))})},k9=(l,i,a,f)=>{const g={};for(let b=0;b<i.length;++b)g[i[b]]=b;let n=l.length;for(;l[n-1]==="=";)--n;const x=new Uint8Array(n*a/8|0);let M=0,_=0,w=0;for(let b=0;b<n;++b){const A=g[l[b]];if(A===void 0)throw new SyntaxError(`Non-${f} character`);_=_<<a|A,M+=a,M>=8&&(M-=8,x[w++]=255&_>>M)}if(M>=a||255&_<<8-M)throw new SyntaxError("Unexpected end of data");return x},U9=(l,i,a)=>{const f=i[i.length-1]==="=",g=(1<<a)-1;let n="",x=0,M=0;for(let _=0;_<l.length;++_)for(M=M<<8|l[_],x+=8;x>a;)x-=a,n+=i[g&M>>x];if(x&&(n+=i[g&M<<a-x]),f)for(;n.length*a&7;)n+="=";return n},Pr=({name:l,prefix:i,bitsPerChar:a,alphabet:f})=>Go({prefix:i,name:l,encode(g){return U9(g,f,a)},decode(g){return k9(g,f,a,l)}}),F9=Go({prefix:"\0",name:"identity",encode:l=>B9(l),decode:l=>C9(l)});var $9=Object.freeze({__proto__:null,identity:F9});const z9=Pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var H9=Object.freeze({__proto__:null,base2:z9});const K9=Pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var j9=Object.freeze({__proto__:null,base8:K9});const V9=ha({prefix:"9",name:"base10",alphabet:"0123456789"});var G9=Object.freeze({__proto__:null,base10:V9});const Z9=Pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),W9=Pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Y9=Object.freeze({__proto__:null,base16:Z9,base16upper:W9});const J9=Pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),X9=Pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Q9=Pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),t7=Pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e7=Pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),r7=Pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),i7=Pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),n7=Pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),s7=Pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var a7=Object.freeze({__proto__:null,base32:J9,base32upper:X9,base32pad:Q9,base32padupper:t7,base32hex:e7,base32hexupper:r7,base32hexpad:i7,base32hexpadupper:n7,base32z:s7});const o7=ha({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),f7=ha({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var h7=Object.freeze({__proto__:null,base36:o7,base36upper:f7});const u7=ha({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),c7=ha({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var l7=Object.freeze({__proto__:null,base58btc:u7,base58flickr:c7});const d7=Pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),p7=Pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),v7=Pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),g7=Pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var m7=Object.freeze({__proto__:null,base64:d7,base64pad:p7,base64url:v7,base64urlpad:g7});const rm=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),b7=rm.reduce((l,i,a)=>(l[a]=i,l),[]),y7=rm.reduce((l,i,a)=>(l[i.codePointAt(0)]=a,l),[]);function w7(l){return l.reduce((i,a)=>(i+=b7[a],i),"")}function _7(l){const i=[];for(const a of l){const f=y7[a.codePointAt(0)];if(f===void 0)throw new Error(`Non-base256emoji character: ${a}`);i.push(f)}return new Uint8Array(i)}const M7=Go({prefix:"\u{1F680}",name:"base256emoji",encode:w7,decode:_7});var x7=Object.freeze({__proto__:null,base256emoji:M7}),E7=im,ev=128,S7=127,A7=~S7,I7=Math.pow(2,31);function im(l,i,a){i=i||[],a=a||0;for(var f=a;l>=I7;)i[a++]=l&255|ev,l/=128;for(;l&A7;)i[a++]=l&255|ev,l>>>=7;return i[a]=l|0,im.bytes=a-f+1,i}var R7=mu,P7=128,rv=127;function mu(l,f){var a=0,f=f||0,g=0,n=f,x,M=l.length;do{if(n>=M)throw mu.bytes=0,new RangeError("Could not decode varint");x=l[n++],a+=g<28?(x&rv)<<g:(x&rv)*Math.pow(2,g),g+=7}while(x>=P7);return mu.bytes=n-f,a}var O7=Math.pow(2,7),T7=Math.pow(2,14),C7=Math.pow(2,21),B7=Math.pow(2,28),q7=Math.pow(2,35),N7=Math.pow(2,42),D7=Math.pow(2,49),L7=Math.pow(2,56),k7=Math.pow(2,63),U7=function(l){return l<O7?1:l<T7?2:l<C7?3:l<B7?4:l<q7?5:l<N7?6:l<D7?7:l<L7?8:l<k7?9:10},F7={encode:E7,decode:R7,encodingLength:U7},nm=F7;const iv=(l,i,a=0)=>(nm.encode(l,i,a),i),nv=l=>nm.encodingLength(l),bu=(l,i)=>{const a=i.byteLength,f=nv(l),g=f+nv(a),n=new Uint8Array(g+a);return iv(l,n,0),iv(a,n,f),n.set(i,g),new $7(l,a,i,n)};class $7{constructor(i,a,f,g){this.code=i,this.size=a,this.digest=f,this.bytes=g}}const sm=({name:l,code:i,encode:a})=>new z7(l,i,a);class z7{constructor(i,a,f){this.name=i,this.code=a,this.encode=f}digest(i){if(i instanceof Uint8Array){const a=this.encode(i);return a instanceof Uint8Array?bu(this.code,a):a.then(f=>bu(this.code,f))}else throw Error("Unknown type, must be binary type")}}const am=l=>async i=>new Uint8Array(await crypto.subtle.digest(l,i)),H7=sm({name:"sha2-256",code:18,encode:am("SHA-256")}),K7=sm({name:"sha2-512",code:19,encode:am("SHA-512")});var j7=Object.freeze({__proto__:null,sha256:H7,sha512:K7});const om=0,V7="identity",fm=tm,G7=l=>bu(om,fm(l)),Z7={code:om,name:V7,encode:fm,digest:G7};var W7=Object.freeze({__proto__:null,identity:Z7});new TextEncoder,new TextDecoder;const sv={...$9,...H9,...j9,...G9,...Y9,...a7,...h7,...l7,...m7,...x7};({...j7,...W7});function hm(l){return globalThis.Buffer!=null?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):l}function Y7(l=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hm(globalThis.Buffer.allocUnsafe(l)):new Uint8Array(l)}function um(l,i,a,f){return{name:l,prefix:i,encoder:{name:l,prefix:i,encode:a},decoder:{decode:f}}}const av=um("utf8","u",l=>"u"+new TextDecoder("utf8").decode(l),l=>new TextEncoder().encode(l.substring(1))),Y0=um("ascii","a",l=>{let i="a";for(let a=0;a<l.length;a++)i+=String.fromCharCode(l[a]);return i},l=>{l=l.substring(1);const i=Y7(l.length);for(let a=0;a<l.length;a++)i[a]=l.charCodeAt(a);return i}),J7={utf8:av,"utf-8":av,hex:sv.base16,latin1:Y0,ascii:Y0,binary:Y0,...sv};function X7(l,i="utf8"){const a=J7[i];if(!a)throw new Error(`Unsupported encoding "${i}"`);return(i==="utf8"||i==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hm(globalThis.Buffer.from(l,"utf-8")):a.decoder.decode(`${a.prefix}${l}`)}const cm="wc",Q7=2,rc="core",ln=`${cm}@2:${rc}:`,tx={name:rc,logger:"error"},ex={database:":memory:"},rx="crypto",ov="client_ed25519_seed",ix=re.ONE_DAY,nx="keychain",sx="0.3",ax="messages",ox="0.3",fx=re.SIX_HOURS,hx="publisher",lm="irn",ux="error",dm="wss://relay.walletconnect.com",fv="wss://relay.walletconnect.org",cx="relayer",Br={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},lx="_subscription",Yi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},dx=re.ONE_SECOND,px="2.10.0",vx=1e4,gx="0.3",mx="WALLETCONNECT_CLIENT_ID",Di={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},bx="subscription",yx="0.3",wx=re.FIVE_SECONDS*1e3,_x="pairing",Mx="0.3",Hs={wc_pairingDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:re.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:re.ONE_DAY,prompt:!1,tag:0},res:{ttl:re.ONE_DAY,prompt:!1,tag:0}}},Ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},xx="history",Ex="0.3",Sx="expirer",mi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Ax="0.3",J0="verify-api",Io="https://verify.walletconnect.com",hv="https://verify.walletconnect.org";class Ix{constructor(i,a){this.core=i,this.logger=a,this.keychain=new Map,this.name=nx,this.version=sx,this.initialized=!1,this.storagePrefix=ln,this.init=async()=>{if(!this.initialized){const f=await this.getKeyChain();typeof f<"u"&&(this.keychain=f),this.initialized=!0}},this.has=f=>(this.isInitialized(),this.keychain.has(f)),this.set=async(f,g)=>{this.isInitialized(),this.keychain.set(f,g),await this.persist()},this.get=f=>{this.isInitialized();const g=this.keychain.get(f);if(typeof g>"u"){const{message:n}=Zt("NO_MATCHING_KEY",`${this.name}: ${f}`);throw new Error(n)}return g},this.del=async f=>{this.isInitialized(),this.keychain.delete(f),await this.persist()},this.core=i,this.logger=Te.generateChildLogger(a,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(i){await this.core.storage.setItem(this.storageKey,$g(i))}async getKeyChain(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?zg(i):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Rx{constructor(i,a,f){this.core=i,this.logger=a,this.name=rx,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=g=>(this.isInitialized(),this.keychain.has(g)),this.getClientId=async()=>{this.isInitialized();const g=await this.getClientSeed(),n=O1(g);return Ig(n.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const g=ZM();return this.setPrivateKey(g.publicKey,g.privateKey)},this.signJWT=async g=>{this.isInitialized();const n=await this.getClientSeed(),x=O1(n),M=pu();return await pM(M,g,ix,x)},this.generateSharedKey=(g,n,x)=>{this.isInitialized();const M=this.getPrivateKey(g),_=WM(M,n);return this.setSymKey(_,x)},this.setSymKey=async(g,n)=>{this.isInitialized();const x=n||YM(g);return await this.keychain.set(x,g),x},this.deleteKeyPair=async g=>{this.isInitialized(),await this.keychain.del(g)},this.deleteSymKey=async g=>{this.isInitialized(),await this.keychain.del(g)},this.encode=async(g,n,x)=>{this.isInitialized();const M=Fg(x),_=Js(n);if(L1(M)){const E=M.senderPublicKey,I=M.receiverPublicKey;g=await this.generateSharedKey(E,I)}const w=this.getSymKey(g),{type:b,senderPublicKey:A}=M;return XM({type:b,symKey:w,message:_,senderPublicKey:A})},this.decode=async(g,n,x)=>{this.isInitialized();const M=e8(n,x);if(L1(M)){const _=M.receiverPublicKey,w=M.senderPublicKey;g=await this.generateSharedKey(_,w)}try{const _=this.getSymKey(g),w=QM({symKey:_,encoded:n});return Au(w)}catch(_){this.logger.error(`Failed to decode message from topic: '${g}', clientId: '${await this.getClientId()}'`),this.logger.error(_)}},this.getPayloadType=g=>{const n=To(g);return aa(n.type)},this.getPayloadSenderPublicKey=g=>{const n=To(g);return n.senderPublicKey?zr(n.senderPublicKey,$r):void 0},this.core=i,this.logger=Te.generateChildLogger(a,this.name),this.keychain=f||new Ix(this.core,this.logger)}get context(){return Te.getLoggerContext(this.logger)}async setPrivateKey(i,a){return await this.keychain.set(i,a),i}getPrivateKey(i){return this.keychain.get(i)}async getClientSeed(){let i="";try{i=this.keychain.get(ov)}catch{i=pu(),await this.keychain.set(ov,i)}return X7(i,"base16")}getSymKey(i){return this.keychain.get(i)}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Px extends N5{constructor(i,a){super(i,a),this.logger=i,this.core=a,this.messages=new Map,this.name=ax,this.version=ox,this.initialized=!1,this.storagePrefix=ln,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const f=await this.getRelayerMessages();typeof f<"u"&&(this.messages=f),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(f){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(f)}finally{this.initialized=!0}}},this.set=async(f,g)=>{this.isInitialized();const n=hs(g);let x=this.messages.get(f);return typeof x>"u"&&(x={}),typeof x[n]<"u"||(x[n]=g,this.messages.set(f,x),await this.persist()),n},this.get=f=>{this.isInitialized();let g=this.messages.get(f);return typeof g>"u"&&(g={}),g},this.has=(f,g)=>{this.isInitialized();const n=this.get(f),x=hs(g);return typeof n[x]<"u"},this.del=async f=>{this.isInitialized(),this.messages.delete(f),await this.persist()},this.logger=Te.generateChildLogger(i,this.name),this.core=a}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(i){await this.core.storage.setItem(this.storageKey,$g(i))}async getRelayerMessages(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?zg(i):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Ox extends D5{constructor(i,a){super(i,a),this.relayer=i,this.logger=a,this.events=new qr.exports.EventEmitter,this.name=hx,this.queue=new Map,this.publishTimeout=re.toMiliseconds(re.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(f,g,n)=>{var x;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:f,message:g,opts:n}});try{const M=(n==null?void 0:n.ttl)||fx,_=vu(n),w=(n==null?void 0:n.prompt)||!1,b=(n==null?void 0:n.tag)||0,A=(n==null?void 0:n.id)||Jg().toString(),E={topic:f,message:g,opts:{ttl:M,relay:_,prompt:w,tag:b,id:A}},I=setTimeout(()=>this.queue.set(A,E),this.publishTimeout);try{await await ta(this.rpcPublish(f,g,M,_,w,b,A),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(A),this.relayer.events.emit(Br.publish,E)}catch(R){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(x=n==null?void 0:n.internal)!=null&&x.throwOnFailedPublish)throw this.removeRequestFromQueue(A),R;return}finally{clearTimeout(I)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:f,message:g,opts:n}})}catch(M){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(M),M}},this.on=(f,g)=>{this.events.on(f,g)},this.once=(f,g)=>{this.events.once(f,g)},this.off=(f,g)=>{this.events.off(f,g)},this.removeListener=(f,g)=>{this.events.removeListener(f,g)},this.relayer=i,this.logger=Te.generateChildLogger(a,this.name),this.registerEventListeners()}get context(){return Te.getLoggerContext(this.logger)}rpcPublish(i,a,f,g,n,x,M){var _,w,b,A;const E={method:So(g.protocol).publish,params:{topic:i,message:a,ttl:f,prompt:n,tag:x},id:M};return Fr((_=E.params)==null?void 0:_.prompt)&&((w=E.params)==null||delete w.prompt),Fr((b=E.params)==null?void 0:b.tag)&&((A=E.params)==null||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:E}),this.relayer.request(E)}removeRequestFromQueue(i){this.queue.delete(i)}checkQueue(){this.queue.forEach(async i=>{const{topic:a,message:f,opts:g}=i;await this.publish(a,f,g)})}registerEventListeners(){this.relayer.core.heartbeat.on(cs.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Br.connection_stalled);return}this.checkQueue()}),this.relayer.on(Br.message_ack,i=>{this.removeRequestFromQueue(i.id.toString())})}}class Tx{constructor(){this.map=new Map,this.set=(i,a)=>{const f=this.get(i);this.exists(i,a)||this.map.set(i,[...f,a])},this.get=i=>this.map.get(i)||[],this.exists=(i,a)=>this.get(i).includes(a),this.delete=(i,a)=>{if(typeof a>"u"){this.map.delete(i);return}if(!this.map.has(i))return;const f=this.get(i);if(!this.exists(i,a))return;const g=f.filter(n=>n!==a);if(!g.length){this.map.delete(i);return}this.map.set(i,g)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Cx=Object.defineProperty,Bx=Object.defineProperties,qx=Object.getOwnPropertyDescriptors,uv=Object.getOwnPropertySymbols,Nx=Object.prototype.hasOwnProperty,Dx=Object.prototype.propertyIsEnumerable,cv=(l,i,a)=>i in l?Cx(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,Ks=(l,i)=>{for(var a in i||(i={}))Nx.call(i,a)&&cv(l,a,i[a]);if(uv)for(var a of uv(i))Dx.call(i,a)&&cv(l,a,i[a]);return l},X0=(l,i)=>Bx(l,qx(i));class Lx extends U5{constructor(i,a){super(i,a),this.relayer=i,this.logger=a,this.subscriptions=new Map,this.topicMap=new Tx,this.events=new qr.exports.EventEmitter,this.name=bx,this.version=yx,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ln,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(f,g)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:f,opts:g}});try{const n=vu(g),x={topic:f,relay:n};this.pending.set(f,x);const M=await this.rpcSubscribe(f,n);return this.onSubscribe(M,x),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:f,opts:g}}),M}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(f,g)=>{await this.restartToComplete(),this.isInitialized(),typeof(g==null?void 0:g.id)<"u"?await this.unsubscribeById(f,g.id,g):await this.unsubscribeByTopic(f,g)},this.isSubscribed=async f=>this.topics.includes(f)?!0:await new Promise((g,n)=>{const x=new re.Watch;x.start(this.pendingSubscriptionWatchLabel);const M=setInterval(()=>{!this.pending.has(f)&&this.topics.includes(f)&&(clearInterval(M),x.stop(this.pendingSubscriptionWatchLabel),g(!0)),x.elapsed(this.pendingSubscriptionWatchLabel)>=wx&&(clearInterval(M),x.stop(this.pendingSubscriptionWatchLabel),n(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(f,g)=>{this.events.on(f,g)},this.once=(f,g)=>{this.events.once(f,g)},this.off=(f,g)=>{this.events.off(f,g)},this.removeListener=(f,g)=>{this.events.removeListener(f,g)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=i,this.logger=Te.generateChildLogger(a,this.name),this.clientId=""}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(i,a){let f=!1;try{f=this.getSubscription(i).topic===a}catch{}return f}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(i,a){const f=this.topicMap.get(i);await Promise.all(f.map(async g=>await this.unsubscribeById(i,g,a)))}async unsubscribeById(i,a,f){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:a,opts:f}});try{const g=vu(f);await this.rpcUnsubscribe(i,a,g);const n=br("USER_DISCONNECTED",`${this.name}, ${i}`);await this.onUnsubscribe(i,a,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:a,opts:f}})}catch(g){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(g),g}}async rpcSubscribe(i,a){const f={method:So(a.protocol).subscribe,params:{topic:i}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:f});try{await await ta(this.relayer.request(f),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Br.connection_stalled)}return hs(i+this.clientId)}async rpcBatchSubscribe(i){if(!i.length)return;const a=i[0].relay,f={method:So(a.protocol).batchSubscribe,params:{topics:i.map(g=>g.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:f});try{return await await ta(this.relayer.request(f),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Br.connection_stalled)}}rpcUnsubscribe(i,a,f){const g={method:So(f.protocol).unsubscribe,params:{topic:i,id:a}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:g}),this.relayer.request(g)}onSubscribe(i,a){this.setSubscription(i,X0(Ks({},a),{id:i})),this.pending.delete(a.topic)}onBatchSubscribe(i){i.length&&i.forEach(a=>{this.setSubscription(a.id,Ks({},a)),this.pending.delete(a.topic)})}async onUnsubscribe(i,a,f){this.events.removeAllListeners(a),this.hasSubscription(a,i)&&this.deleteSubscription(a,f),await this.relayer.messages.del(i)}async setRelayerSubscriptions(i){await this.relayer.core.storage.setItem(this.storageKey,i)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(i,a){this.subscriptions.has(i)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:i,subscription:a}),this.addSubscription(i,a))}addSubscription(i,a){this.subscriptions.set(i,Ks({},a)),this.topicMap.set(a.topic,i),this.events.emit(Di.created,a)}getSubscription(i){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:i});const a=this.subscriptions.get(i);if(!a){const{message:f}=Zt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(f)}return a}deleteSubscription(i,a){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:i,reason:a});const f=this.getSubscription(i);this.subscriptions.delete(i),this.topicMap.delete(f.topic,i),this.events.emit(Di.deleted,X0(Ks({},f),{reason:a}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Di.sync)}async reset(){if(this.cached.length){const i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let a=0;a<i;a++){const f=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(f)}}this.events.emit(Di.resubscribed)}async restore(){try{const i=await this.getRelayerSubscriptions();if(typeof i>"u"||!i.length)return;if(this.subscriptions.size){const{message:a}=Zt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(i){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(i)}}async batchSubscribe(i){if(!i.length)return;const a=await this.rpcBatchSubscribe(i);Li(a)&&this.onBatchSubscribe(a.map((f,g)=>X0(Ks({},i[g]),{id:f})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const i=[];this.pending.forEach(a=>{i.push(a)}),await this.batchSubscribe(i)}registerEventListeners(){this.relayer.core.heartbeat.on(cs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Br.connect,async()=>{await this.onConnect()}),this.relayer.on(Br.disconnect,()=>{this.onDisconnect()}),this.events.on(Di.created,async i=>{const a=Di.created;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),await this.persist()}),this.events.on(Di.deleted,async i=>{const a=Di.deleted;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}async restartToComplete(){this.restartInProgress&&await new Promise(i=>{const a=setInterval(()=>{this.restartInProgress||(clearInterval(a),i())},this.pollingInterval)})}}var kx=Object.defineProperty,lv=Object.getOwnPropertySymbols,Ux=Object.prototype.hasOwnProperty,Fx=Object.prototype.propertyIsEnumerable,dv=(l,i,a)=>i in l?kx(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,$x=(l,i)=>{for(var a in i||(i={}))Ux.call(i,a)&&dv(l,a,i[a]);if(lv)for(var a of lv(i))Fx.call(i,a)&&dv(l,a,i[a]);return l};class zx extends L5{constructor(i){super(i),this.protocol="wc",this.version=2,this.events=new qr.exports.EventEmitter,this.name=cx,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async a=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(a)}catch(f){throw this.logger.debug("Failed to Publish Request"),this.logger.error(f),f}},this.onPayloadHandler=a=>{this.onProviderPayload(a)},this.onConnectHandler=()=>{this.events.emit(Br.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=a=>{this.logger.error(a),this.events.emit(Br.error,a)},this.registerProviderListeners=()=>{this.provider.on(Yi.payload,this.onPayloadHandler),this.provider.on(Yi.connect,this.onConnectHandler),this.provider.on(Yi.disconnect,this.onDisconnectHandler),this.provider.on(Yi.error,this.onProviderErrorHandler)},this.core=i.core,this.logger=typeof i.logger<"u"&&typeof i.logger!="string"?Te.generateChildLogger(i.logger,this.name):Te.pino(Te.getDefaultLoggerOptions({level:i.logger||ux})),this.messages=new Px(this.logger,i.core),this.subscriber=new Lx(this,this.logger),this.publisher=new Ox(this,this.logger),this.relayUrl=(i==null?void 0:i.relayUrl)||dm,this.projectId=i.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${fv}...`),await this.restartTransport(fv)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},vx)}get context(){return Te.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(i,a,f){this.isInitialized(),await this.publisher.publish(i,a,f),await this.recordMessageEvent({topic:i,message:a,publishedAt:Date.now()})}async subscribe(i,a){var f;this.isInitialized();let g=((f=this.subscriber.topicMap.get(i))==null?void 0:f[0])||"";return g||(await Promise.all([new Promise(n=>{this.subscriber.once(Di.created,x=>{x.topic===i&&n()})}),new Promise(async n=>{g=await this.subscriber.subscribe(i,a),n()})]),g)}async unsubscribe(i,a){this.isInitialized(),await this.subscriber.unsubscribe(i,a)}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ta(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(i){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){i&&i!==this.relayUrl&&(this.relayUrl=i,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(a=>{if(!this.initialized)return a();this.subscriber.once(Di.resubscribed,()=>{a()})}),new Promise(async(a,f)=>{try{await ta(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(g){f(g);return}a()})])}catch(a){this.logger.error(a);const f=a;if(!this.isConnectionStalled(f.message))throw a;this.provider.events.emit(Yi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(i){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=i||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await G1())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(i){return this.staleConnectionErrors.some(a=>i.includes(a))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const i=await this.core.crypto.signJWT(this.relayUrl);this.provider=new vn(new I9(l8({sdkVersion:px,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:i,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(i){const{topic:a,message:f}=i;await this.messages.set(a,f)}async shouldIgnoreMessageEvent(i){const{topic:a,message:f}=i;if(!f||f.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${f}`),!0;if(!await this.subscriber.isSubscribed(a))return this.logger.debug(`Ignoring message for non-subscribed topic ${a}`),!0;const g=this.messages.has(a,f);return g&&this.logger.debug(`Ignoring duplicate message: ${f}`),g}async onProviderPayload(i){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:i}),ec(i)){if(!i.method.endsWith(lx))return;const a=i.params,{topic:f,message:g,publishedAt:n}=a.data,x={topic:f,message:g,publishedAt:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($x({type:"event",event:a.id},x)),this.events.emit(a.id,x),await this.acknowledgePayload(i),await this.onMessageEvent(x)}else Vo(i)&&this.events.emit(Br.message_ack,i)}async onMessageEvent(i){await this.shouldIgnoreMessageEvent(i)||(this.events.emit(Br.message,i),await this.recordMessageEvent(i))}async acknowledgePayload(i){const a=tc(i.id,!0);await this.provider.connection.send(a)}unregisterProviderListeners(){this.provider.off(Yi.payload,this.onPayloadHandler),this.provider.off(Yi.connect,this.onConnectHandler),this.provider.off(Yi.disconnect,this.onDisconnectHandler),this.provider.off(Yi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Br.connection_stalled,()=>{this.restartTransport().catch(a=>this.logger.error(a))});let i=await G1();n9(async a=>{this.initialized&&i!==a&&(i=a,a?await this.restartTransport().catch(f=>this.logger.error(f)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(f=>this.logger.error(f))))})}onProviderDisconnect(){this.events.emit(Br.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(i=>this.logger.error(i))},re.toMiliseconds(dx)))}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(i=>{const a=setInterval(()=>{this.connected&&(clearInterval(a),i())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Hx=Object.defineProperty,pv=Object.getOwnPropertySymbols,Kx=Object.prototype.hasOwnProperty,jx=Object.prototype.propertyIsEnumerable,vv=(l,i,a)=>i in l?Hx(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,gv=(l,i)=>{for(var a in i||(i={}))Kx.call(i,a)&&vv(l,a,i[a]);if(pv)for(var a of pv(i))jx.call(i,a)&&vv(l,a,i[a]);return l};class Zo extends k5{constructor(i,a,f,g=ln,n=void 0){super(i,a,f,g),this.core=i,this.logger=a,this.name=f,this.map=new Map,this.version=gx,this.cached=[],this.initialized=!1,this.storagePrefix=ln,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(x=>{this.getKey&&x!==null&&!Fr(x)?this.map.set(this.getKey(x),x):N8(x)?this.map.set(x.id,x):D8(x)&&this.map.set(x.topic,x)}),this.cached=[],this.initialized=!0)},this.set=async(x,M)=>{this.isInitialized(),this.map.has(x)?await this.update(x,M):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:x,value:M}),this.map.set(x,M),await this.persist())},this.get=x=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:x}),this.getData(x)),this.getAll=x=>(this.isInitialized(),x?this.values.filter(M=>Object.keys(x).every(_=>R9(M[_],x[_]))):this.values),this.update=async(x,M)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:x,update:M});const _=gv(gv({},this.getData(x)),M);this.map.set(x,_),await this.persist()},this.delete=async(x,M)=>{this.isInitialized(),this.map.has(x)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:x,reason:M}),this.map.delete(x),await this.persist())},this.logger=Te.generateChildLogger(a,this.name),this.storagePrefix=g,this.getKey=n}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(i){await this.core.storage.setItem(this.storageKey,i)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(i){const a=this.map.get(i);if(!a){const{message:f}=Zt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(f),new Error(f)}return a}async persist(){await this.setDataStore(this.values)}async restore(){try{const i=await this.getDataStore();if(typeof i>"u"||!i.length)return;if(this.map.size){const{message:a}=Zt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(i){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(i)}}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Vx{constructor(i,a){this.core=i,this.logger=a,this.name=_x,this.version=Mx,this.events=new qr.exports,this.initialized=!1,this.storagePrefix=ln,this.ignoredPayloadTypes=[Fn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:f})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...f])]},this.create=async()=>{this.isInitialized();const f=pu(),g=await this.core.crypto.setSymKey(f),n=Ii(re.FIVE_MINUTES),x={protocol:lm},M={topic:g,expiry:n,relay:x,active:!1},_=S8({protocol:this.core.protocol,version:this.core.version,topic:g,symKey:f,relay:x});return await this.pairings.set(g,M),await this.core.relayer.subscribe(g),this.core.expirer.set(g,n),{topic:g,uri:_}},this.pair=async f=>{this.isInitialized(),this.isValidPair(f);const{topic:g,symKey:n,relay:x}=M8(f.uri);if(this.pairings.keys.includes(g))throw new Error(`Pairing already exists: ${g}`);if(this.core.crypto.hasKeys(g))throw new Error(`Keychain already exists: ${g}`);const M=Ii(re.FIVE_MINUTES),_={topic:g,relay:x,expiry:M,active:!1};return await this.pairings.set(g,_),await this.core.crypto.setSymKey(n,g),await this.core.relayer.subscribe(g,{relay:x}),this.core.expirer.set(g,M),f.activatePairing&&await this.activate({topic:g}),_},this.activate=async({topic:f})=>{this.isInitialized();const g=Ii(re.THIRTY_DAYS);await this.pairings.update(f,{active:!0,expiry:g}),this.core.expirer.set(f,g)},this.ping=async f=>{this.isInitialized(),await this.isValidPing(f);const{topic:g}=f;if(this.pairings.keys.includes(g)){const n=await this.sendRequest(g,"wc_pairingPing",{}),{done:x,resolve:M,reject:_}=fs();this.events.once(Mr("pairing_ping",n),({error:w})=>{w?_(w):M()}),await x()}},this.updateExpiry=async({topic:f,expiry:g})=>{this.isInitialized(),await this.pairings.update(f,{expiry:g})},this.updateMetadata=async({topic:f,metadata:g})=>{this.isInitialized(),await this.pairings.update(f,{peerMetadata:g})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async f=>{this.isInitialized(),await this.isValidDisconnect(f);const{topic:g}=f;this.pairings.keys.includes(g)&&(await this.sendRequest(g,"wc_pairingDelete",br("USER_DISCONNECTED")),await this.deletePairing(g))},this.sendRequest=async(f,g,n)=>{const x=ea(g,n),M=await this.core.crypto.encode(f,x),_=Hs[g].req;return this.core.history.set(f,x),this.core.relayer.publish(f,M,_),x.id},this.sendResult=async(f,g,n)=>{const x=tc(f,n),M=await this.core.crypto.encode(g,x),_=await this.core.history.get(g,f),w=Hs[_.request.method].res;await this.core.relayer.publish(g,M,w),await this.core.history.resolve(x)},this.sendError=async(f,g,n)=>{const x=jo(f,n),M=await this.core.crypto.encode(g,x),_=await this.core.history.get(g,f),w=Hs[_.request.method]?Hs[_.request.method].res:Hs.unregistered_method.res;await this.core.relayer.publish(g,M,w),await this.core.history.resolve(x)},this.deletePairing=async(f,g)=>{await this.core.relayer.unsubscribe(f),await Promise.all([this.pairings.delete(f,br("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(f),g?Promise.resolve():this.core.expirer.del(f)])},this.cleanup=async()=>{const f=this.pairings.getAll().filter(g=>cn(g.expiry));await Promise.all(f.map(g=>this.deletePairing(g.topic)))},this.onRelayEventRequest=f=>{const{topic:g,payload:n}=f;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(g,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(g,n);default:return this.onUnknownRpcMethodRequest(g,n)}},this.onRelayEventResponse=async f=>{const{topic:g,payload:n}=f,x=(await this.core.history.get(g,n.id)).request.method;switch(x){case"wc_pairingPing":return this.onPairingPingResponse(g,n);default:return this.onUnknownRpcMethodResponse(x)}},this.onPairingPingRequest=async(f,g)=>{const{id:n}=g;try{this.isValidPing({topic:f}),await this.sendResult(n,f,!0),this.events.emit("pairing_ping",{id:n,topic:f})}catch(x){await this.sendError(n,f,x),this.logger.error(x)}},this.onPairingPingResponse=(f,g)=>{const{id:n}=g;setTimeout(()=>{Xi(g)?this.events.emit(Mr("pairing_ping",n),{}):Ri(g)&&this.events.emit(Mr("pairing_ping",n),{error:g.error})},500)},this.onPairingDeleteRequest=async(f,g)=>{const{id:n}=g;try{this.isValidDisconnect({topic:f}),await this.deletePairing(f),this.events.emit("pairing_delete",{id:n,topic:f})}catch(x){await this.sendError(n,f,x),this.logger.error(x)}},this.onUnknownRpcMethodRequest=async(f,g)=>{const{id:n,method:x}=g;try{if(this.registeredMethods.includes(x))return;const M=br("WC_METHOD_UNSUPPORTED",x);await this.sendError(n,f,M),this.logger.error(M)}catch(M){await this.sendError(n,f,M),this.logger.error(M)}},this.onUnknownRpcMethodResponse=f=>{this.registeredMethods.includes(f)||this.logger.error(br("WC_METHOD_UNSUPPORTED",f))},this.isValidPair=f=>{if(!Wr(f)){const{message:g}=Zt("MISSING_OR_INVALID",`pair() params: ${f}`);throw new Error(g)}if(!q8(f.uri)){const{message:g}=Zt("MISSING_OR_INVALID",`pair() uri: ${f.uri}`);throw new Error(g)}},this.isValidPing=async f=>{if(!Wr(f)){const{message:n}=Zt("MISSING_OR_INVALID",`ping() params: ${f}`);throw new Error(n)}const{topic:g}=f;await this.isValidPairingTopic(g)},this.isValidDisconnect=async f=>{if(!Wr(f)){const{message:n}=Zt("MISSING_OR_INVALID",`disconnect() params: ${f}`);throw new Error(n)}const{topic:g}=f;await this.isValidPairingTopic(g)},this.isValidPairingTopic=async f=>{if(!Ir(f,!1)){const{message:g}=Zt("MISSING_OR_INVALID",`pairing topic should be a string: ${f}`);throw new Error(g)}if(!this.pairings.keys.includes(f)){const{message:g}=Zt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${f}`);throw new Error(g)}if(cn(this.pairings.get(f).expiry)){await this.deletePairing(f);const{message:g}=Zt("EXPIRED",`pairing topic: ${f}`);throw new Error(g)}},this.core=i,this.logger=Te.generateChildLogger(a,this.name),this.pairings=new Zo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Te.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}registerRelayerEvents(){this.core.relayer.on(Br.message,async i=>{const{topic:a,message:f}=i;if(!this.pairings.keys.includes(a)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(f)))return;const g=await this.core.crypto.decode(a,f);try{ec(g)?(this.core.history.set(a,g),this.onRelayEventRequest({topic:a,payload:g})):Vo(g)&&(await this.core.history.resolve(g),await this.onRelayEventResponse({topic:a,payload:g}),this.core.history.delete(a,g.id))}catch(n){this.logger.error(n)}})}registerExpirerEvents(){this.core.expirer.on(mi.expired,async i=>{const{topic:a}=Kg(i.target);a&&this.pairings.keys.includes(a)&&(await this.deletePairing(a,!0),this.events.emit("pairing_expire",{topic:a}))})}}class Gx extends q5{constructor(i,a){super(i,a),this.core=i,this.logger=a,this.records=new Map,this.events=new qr.exports.EventEmitter,this.name=xx,this.version=Ex,this.cached=[],this.initialized=!1,this.storagePrefix=ln,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>this.records.set(f.id,f)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(f,g,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:f,request:g,chainId:n}),this.records.has(g.id))return;const x={id:g.id,topic:f,request:{method:g.method,params:g.params||null},chainId:n,expiry:Ii(re.THIRTY_DAYS)};this.records.set(x.id,x),this.events.emit(Ni.created,x)},this.resolve=async f=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:f}),!this.records.has(f.id))return;const g=await this.getRecord(f.id);typeof g.response>"u"&&(g.response=Ri(f)?{error:f.error}:{result:f.result},this.records.set(g.id,g),this.events.emit(Ni.updated,g))},this.get=async(f,g)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:f,id:g}),await this.getRecord(g)),this.delete=(f,g)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:g}),this.values.forEach(n=>{if(n.topic===f){if(typeof g<"u"&&n.id!==g)return;this.records.delete(n.id),this.events.emit(Ni.deleted,n)}})},this.exists=async(f,g)=>(this.isInitialized(),this.records.has(g)?(await this.getRecord(g)).topic===f:!1),this.on=(f,g)=>{this.events.on(f,g)},this.once=(f,g)=>{this.events.once(f,g)},this.off=(f,g)=>{this.events.off(f,g)},this.removeListener=(f,g)=>{this.events.removeListener(f,g)},this.logger=Te.generateChildLogger(a,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const i=[];return this.values.forEach(a=>{if(typeof a.response<"u")return;const f={topic:a.topic,request:ea(a.request.method,a.request.params,a.id),chainId:a.chainId};return i.push(f)}),i}async setJsonRpcRecords(i){await this.core.storage.setItem(this.storageKey,i)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(i){this.isInitialized();const a=this.records.get(i);if(!a){const{message:f}=Zt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(f)}return a}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ni.sync)}async restore(){try{const i=await this.getJsonRpcRecords();if(typeof i>"u"||!i.length)return;if(this.records.size){const{message:a}=Zt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}}registerEventListeners(){this.events.on(Ni.created,i=>{const a=Ni.created;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,record:i}),this.persist()}),this.events.on(Ni.updated,i=>{const a=Ni.updated;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,record:i}),this.persist()}),this.events.on(Ni.deleted,i=>{const a=Ni.deleted;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,record:i}),this.persist()}),this.core.heartbeat.on(cs.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(i=>{re.toMiliseconds(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.delete(i.topic,i.id))})}catch(i){this.logger.warn(i)}}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Zx extends F5{constructor(i,a){super(i,a),this.core=i,this.logger=a,this.expirations=new Map,this.events=new qr.exports.EventEmitter,this.name=Sx,this.version=Ax,this.cached=[],this.initialized=!1,this.storagePrefix=ln,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>this.expirations.set(f.target,f)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=f=>{try{const g=this.formatTarget(f);return typeof this.getExpiration(g)<"u"}catch{return!1}},this.set=(f,g)=>{this.isInitialized();const n=this.formatTarget(f),x={target:n,expiry:g};this.expirations.set(n,x),this.checkExpiry(n,x),this.events.emit(mi.created,{target:n,expiration:x})},this.get=f=>{this.isInitialized();const g=this.formatTarget(f);return this.getExpiration(g)},this.del=f=>{if(this.isInitialized(),this.has(f)){const g=this.formatTarget(f),n=this.getExpiration(g);this.expirations.delete(g),this.events.emit(mi.deleted,{target:g,expiration:n})}},this.on=(f,g)=>{this.events.on(f,g)},this.once=(f,g)=>{this.events.once(f,g)},this.off=(f,g)=>{this.events.off(f,g)},this.removeListener=(f,g)=>{this.events.removeListener(f,g)},this.logger=Te.generateChildLogger(a,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(i){if(typeof i=="string")return d8(i);if(typeof i=="number")return p8(i);const{message:a}=Zt("UNKNOWN_TYPE",`Target type: ${typeof i}`);throw new Error(a)}async setExpirations(i){await this.core.storage.setItem(this.storageKey,i)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(mi.sync)}async restore(){try{const i=await this.getExpirations();if(typeof i>"u"||!i.length)return;if(this.expirations.size){const{message:a}=Zt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(a),new Error(a)}this.cached=i,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(i){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(i)}}getExpiration(i){const a=this.expirations.get(i);if(!a){const{message:f}=Zt("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(f),new Error(f)}return a}checkExpiry(i,a){const{expiry:f}=a;re.toMiliseconds(f)-Date.now()<=0&&this.expire(i,a)}expire(i,a){this.expirations.delete(i),this.events.emit(mi.expired,{target:i,expiration:a})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((i,a)=>this.checkExpiry(a,i))}registerEventListeners(){this.core.heartbeat.on(cs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(mi.created,i=>{const a=mi.created;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),this.persist()}),this.events.on(mi.expired,i=>{const a=mi.expired;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),this.persist()}),this.events.on(mi.deleted,i=>{const a=mi.deleted;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:i}),this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Wx extends $5{constructor(i,a){super(i,a),this.projectId=i,this.logger=a,this.name=J0,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async f=>{if(this.verifyDisabled||Ko()||!oa())return;const g=(f==null?void 0:f.verifyUrl)||Io;this.verifyUrl!==g&&this.removeIframe(),this.verifyUrl=g;try{await this.createIframe()}catch(n){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(n)}if(!this.initialized){this.removeIframe(),this.verifyUrl=hv;try{await this.createIframe()}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n),this.verifyDisabled=!0}}},this.register=async f=>{this.initialized?this.sendPost(f.attestationId):(this.addToQueue(f.attestationId),await this.init())},this.resolve=async f=>{if(this.isDevEnv)return"";const g=(f==null?void 0:f.verifyUrl)||Io;let n="";try{n=await this.fetchAttestation(f.attestationId,g)}catch(x){this.logger.warn(`failed to resolve attestation: ${f.attestationId} from url: ${g}`),this.logger.warn(x),n=await this.fetchAttestation(f.attestationId,hv)}return n},this.fetchAttestation=async(f,g)=>{var n;this.logger.info(`resolving attestation: ${f} from url: ${g}`);const x=this.startAbortTimer(re.ONE_SECOND*2),M=await fetch(`${g}/attestation/${f}`,{signal:this.abortController.signal});return clearTimeout(x),M.status===200?(n=await M.json())==null?void 0:n.origin:""},this.addToQueue=f=>{this.queue.push(f)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(f=>this.sendPost(f)),this.queue=[])},this.sendPost=f=>{var g;try{if(!this.iframe)return;(g=this.iframe.contentWindow)==null||g.postMessage(f,"*"),this.logger.info(`postMessage sent: ${f} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let f;const g=n=>{n.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",g),f())};await Promise.race([new Promise(n=>{if(document.getElementById(J0))return n();window.addEventListener("message",g);const x=document.createElement("iframe");x.id=J0,x.src=`${this.verifyUrl}/${this.projectId}`,x.style.display="none",document.body.append(x),this.iframe=x,f=n}),new Promise((n,x)=>setTimeout(()=>{window.removeEventListener("message",g),x("verify iframe load timeout")},re.toMiliseconds(re.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Te.generateChildLogger(a,this.name),this.verifyUrl=Io,this.abortController=new AbortController,this.isDevEnv=Wu()&&{}.IS_VITEST}get context(){return Te.getLoggerContext(this.logger)}startAbortTimer(i){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),re.toMiliseconds(i))}}var Yx=Object.defineProperty,mv=Object.getOwnPropertySymbols,Jx=Object.prototype.hasOwnProperty,Xx=Object.prototype.propertyIsEnumerable,bv=(l,i,a)=>i in l?Yx(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,yv=(l,i)=>{for(var a in i||(i={}))Jx.call(i,a)&&bv(l,a,i[a]);if(mv)for(var a of mv(i))Xx.call(i,a)&&bv(l,a,i[a]);return l};class ic extends B5{constructor(i){super(i),this.protocol=cm,this.version=Q7,this.name=rc,this.events=new qr.exports.EventEmitter,this.initialized=!1,this.on=(f,g)=>this.events.on(f,g),this.once=(f,g)=>this.events.once(f,g),this.off=(f,g)=>this.events.off(f,g),this.removeListener=(f,g)=>this.events.removeListener(f,g),this.projectId=i==null?void 0:i.projectId,this.relayUrl=(i==null?void 0:i.relayUrl)||dm;const a=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Te.pino(Te.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||tx.logger}));this.logger=Te.generateChildLogger(a,this.name),this.heartbeat=new cs.HeartBeat,this.crypto=new Rx(this,this.logger,i==null?void 0:i.keychain),this.history=new Gx(this,this.logger),this.expirer=new Zx(this,this.logger),this.storage=i!=null&&i.storage?i.storage:new g5(yv(yv({},ex),i==null?void 0:i.storageOptions)),this.relayer=new zx({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Vx(this,this.logger),this.verify=new Wx(this.projectId||"",this.logger)}static async init(i){const a=new ic(i);await a.initialize();const f=await a.crypto.getClientId();return await a.storage.setItem(mx,f),a}get context(){return Te.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(i){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,i),this.logger.error(i.message),i}}}const Qx=ic,pm="wc",vm=2,gm="client",nc=`${pm}@${vm}:${gm}:`,Q0={name:gm,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},wv="WALLETCONNECT_DEEPLINK_CHOICE",tE="proposal",mm="Proposal expired",eE="session",Mo=re.SEVEN_DAYS,rE="engine",js={wc_sessionPropose:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1104},res:{ttl:re.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1106},res:{ttl:re.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1112},res:{ttl:re.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1115}}},tu={min:re.FIVE_MINUTES,max:re.SEVEN_DAYS},Ji={idle:"IDLE",active:"ACTIVE"},iE="request",nE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var sE=Object.defineProperty,aE=Object.defineProperties,oE=Object.getOwnPropertyDescriptors,_v=Object.getOwnPropertySymbols,fE=Object.prototype.hasOwnProperty,hE=Object.prototype.propertyIsEnumerable,Mv=(l,i,a)=>i in l?sE(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,Zr=(l,i)=>{for(var a in i||(i={}))fE.call(i,a)&&Mv(l,a,i[a]);if(_v)for(var a of _v(i))hE.call(i,a)&&Mv(l,a,i[a]);return l},Vs=(l,i)=>aE(l,oE(i));class uE extends H5{constructor(i){super(i),this.name=rE,this.events=new qr.exports,this.initialized=!1,this.ignoredPayloadTypes=[Fn],this.requestQueue={state:Ji.idle,queue:[]},this.sessionRequestQueue={state:Ji.idle,queue:[]},this.requestQueueDelay=re.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(js)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},re.toMiliseconds(this.requestQueueDelay)))},this.connect=async a=>{await this.isInitialized();const f=Vs(Zr({},a),{requiredNamespaces:a.requiredNamespaces||{},optionalNamespaces:a.optionalNamespaces||{}});await this.isValidConnect(f);const{pairingTopic:g,requiredNamespaces:n,optionalNamespaces:x,sessionProperties:M,relays:_}=f;let w=g,b,A=!1;if(w&&(A=this.client.core.pairing.pairings.get(w).active),!w||!A){const{topic:k,uri:N}=await this.client.core.pairing.create();w=k,b=N}const E=await this.client.core.crypto.generateKeyPair(),I=Zr({requiredNamespaces:n,optionalNamespaces:x,relays:_!=null?_:[{protocol:lm}],proposer:{publicKey:E,metadata:this.client.metadata}},M&&{sessionProperties:M}),{reject:R,resolve:T,done:B}=fs(re.FIVE_MINUTES,mm);if(this.events.once(Mr("session_connect"),async({error:k,session:N})=>{if(k)R(k);else if(N){N.self.publicKey=E;const K=Vs(Zr({},N),{requiredNamespaces:N.requiredNamespaces,optionalNamespaces:N.optionalNamespaces});await this.client.session.set(N.topic,K),await this.setExpiry(N.topic,N.expiry),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:N.peer.metadata}),T(K)}}),!w){const{message:k}=Zt("NO_MATCHING_KEY",`connect() pairing topic: ${w}`);throw new Error(k)}const D=await this.sendRequest({topic:w,method:"wc_sessionPropose",params:I}),q=Ii(re.FIVE_MINUTES);return await this.setProposal(D,Zr({id:D,expiry:q},I)),{uri:b,approval:B}},this.pair=async a=>(await this.isInitialized(),await this.client.core.pairing.pair(a)),this.approve=async a=>{await this.isInitialized(),await this.isValidApprove(a);const{id:f,relayProtocol:g,namespaces:n,sessionProperties:x}=a,M=this.client.proposal.get(f);let{pairingTopic:_,proposer:w,requiredNamespaces:b,optionalNamespaces:A}=M;_=_||"",us(b)||(b=P8(n,"approve()"));const E=await this.client.core.crypto.generateKeyPair(),I=w.publicKey,R=await this.client.core.crypto.generateSharedKey(E,I);_&&f&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:w.metadata}),await this.sendResult({id:f,topic:_,result:{relay:{protocol:g!=null?g:"irn"},responderPublicKey:E}}),await this.client.proposal.delete(f,br("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));const T=Zr({relay:{protocol:g!=null?g:"irn"},namespaces:n,requiredNamespaces:b,optionalNamespaces:A,pairingTopic:_,controller:{publicKey:E,metadata:this.client.metadata},expiry:Ii(Mo)},x&&{sessionProperties:x});await this.client.core.relayer.subscribe(R),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0});const B=Vs(Zr({},T),{topic:R,pairingTopic:_,acknowledged:!1,self:T.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:E});return await this.client.session.set(R,B),await this.setExpiry(R,Ii(Mo)),{topic:R,acknowledged:()=>new Promise(D=>setTimeout(()=>D(this.client.session.get(R)),500))}},this.reject=async a=>{await this.isInitialized(),await this.isValidReject(a);const{id:f,reason:g}=a,{pairingTopic:n}=this.client.proposal.get(f);n&&(await this.sendError(f,n,g),await this.client.proposal.delete(f,br("USER_DISCONNECTED")))},this.update=async a=>{await this.isInitialized(),await this.isValidUpdate(a);const{topic:f,namespaces:g}=a,n=await this.sendRequest({topic:f,method:"wc_sessionUpdate",params:{namespaces:g}}),{done:x,resolve:M,reject:_}=fs();return this.events.once(Mr("session_update",n),({error:w})=>{w?_(w):M()}),await this.client.session.update(f,{namespaces:g}),{acknowledged:x}},this.extend=async a=>{await this.isInitialized(),await this.isValidExtend(a);const{topic:f}=a,g=await this.sendRequest({topic:f,method:"wc_sessionExtend",params:{}}),{done:n,resolve:x,reject:M}=fs();return this.events.once(Mr("session_extend",g),({error:_})=>{_?M(_):x()}),await this.setExpiry(f,Ii(Mo)),{acknowledged:n}},this.request=async a=>{await this.isInitialized(),await this.isValidRequest(a);const{chainId:f,request:g,topic:n,expiry:x}=a,M=Qu(),{done:_,resolve:w,reject:b}=fs(x);return this.events.once(Mr("session_request",M),({error:A,result:E})=>{A?b(A):w(E)}),await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:M,topic:n,method:"wc_sessionRequest",params:{request:g,chainId:f},expiry:x,throwOnFailedPublish:!0}).catch(E=>b(E)),this.client.events.emit("session_request_sent",{topic:n,request:g,chainId:f,id:M}),A()}),new Promise(async A=>{const E=await this.client.core.storage.getItem(wv);v8({id:M,topic:n,wcDeepLink:E}),A()}),_()]).then(A=>A[2])},this.respond=async a=>{await this.isInitialized(),await this.isValidRespond(a);const{topic:f,response:g}=a,{id:n}=g;Xi(g)?await this.sendResult({id:n,topic:f,result:g.result,throwOnFailedPublish:!0}):Ri(g)&&await this.sendError(n,f,g.error),this.cleanupAfterResponse(a)},this.ping=async a=>{await this.isInitialized(),await this.isValidPing(a);const{topic:f}=a;if(this.client.session.keys.includes(f)){const g=await this.sendRequest({topic:f,method:"wc_sessionPing",params:{}}),{done:n,resolve:x,reject:M}=fs();this.events.once(Mr("session_ping",g),({error:_})=>{_?M(_):x()}),await n()}else this.client.core.pairing.pairings.keys.includes(f)&&await this.client.core.pairing.ping({topic:f})},this.emit=async a=>{await this.isInitialized(),await this.isValidEmit(a);const{topic:f,event:g,chainId:n}=a;await this.sendRequest({topic:f,method:"wc_sessionEvent",params:{event:g,chainId:n}})},this.disconnect=async a=>{await this.isInitialized(),await this.isValidDisconnect(a);const{topic:f}=a;this.client.session.keys.includes(f)?(await this.sendRequest({topic:f,method:"wc_sessionDelete",params:br("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(f)):await this.client.core.pairing.disconnect({topic:f})},this.find=a=>(this.isInitialized(),this.client.session.getAll().filter(f=>C8(f,a))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async a=>{if(a.pairingTopic)try{const f=this.client.core.pairing.pairings.get(a.pairingTopic),g=this.client.core.pairing.pairings.getAll().filter(n=>{var x,M;return((x=n.peerMetadata)==null?void 0:x.url)&&((M=n.peerMetadata)==null?void 0:M.url)===a.peer.metadata.url&&n.topic&&n.topic!==f.topic});if(g.length===0)return;this.client.logger.info(`Cleaning up ${g.length} duplicate pairing(s)`),await Promise.all(g.map(n=>this.client.core.pairing.disconnect({topic:n.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(f){this.client.logger.error(f)}},this.deleteSession=async(a,f)=>{const{self:g}=this.client.session.get(a);await this.client.core.relayer.unsubscribe(a),this.client.session.delete(a,br("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(g.publicKey)&&await this.client.core.crypto.deleteKeyPair(g.publicKey),this.client.core.crypto.keychain.has(a)&&await this.client.core.crypto.deleteSymKey(a),f||this.client.core.expirer.del(a),this.client.core.storage.removeItem(wv).catch(n=>this.client.logger.warn(n))},this.deleteProposal=async(a,f)=>{await Promise.all([this.client.proposal.delete(a,br("USER_DISCONNECTED")),f?Promise.resolve():this.client.core.expirer.del(a)])},this.deletePendingSessionRequest=async(a,f,g=!1)=>{await Promise.all([this.client.pendingRequest.delete(a,f),g?Promise.resolve():this.client.core.expirer.del(a)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(n=>n.id!==a),g&&(this.sessionRequestQueue.state=Ji.idle)},this.setExpiry=async(a,f)=>{this.client.session.keys.includes(a)&&await this.client.session.update(a,{expiry:f}),this.client.core.expirer.set(a,f)},this.setProposal=async(a,f)=>{await this.client.proposal.set(a,f),this.client.core.expirer.set(a,f.expiry)},this.setPendingSessionRequest=async a=>{const f=js.wc_sessionRequest.req.ttl,{id:g,topic:n,params:x}=a;await this.client.pendingRequest.set(g,{id:g,topic:n,params:x}),f&&this.client.core.expirer.set(g,Ii(f))},this.sendRequest=async a=>{const{topic:f,method:g,params:n,expiry:x,relayRpcId:M,clientRpcId:_,throwOnFailedPublish:w}=a,b=ea(g,n,_);if(oa()&&nE.includes(g)){const I=hs(JSON.stringify(b));this.client.core.verify.register({attestationId:I})}const A=await this.client.core.crypto.encode(f,b),E=js[g].req;return x&&(E.ttl=x),M&&(E.id=M),this.client.core.history.set(f,b),w?(E.internal=Vs(Zr({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(f,A,E)):this.client.core.relayer.publish(f,A,E).catch(I=>this.client.logger.error(I)),b.id},this.sendResult=async a=>{const{id:f,topic:g,result:n,throwOnFailedPublish:x}=a,M=tc(f,n),_=await this.client.core.crypto.encode(g,M),w=await this.client.core.history.get(g,f),b=js[w.request.method].res;x?(b.internal=Vs(Zr({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(g,_,b)):this.client.core.relayer.publish(g,_,b).catch(A=>this.client.logger.error(A)),await this.client.core.history.resolve(M)},this.sendError=async(a,f,g)=>{const n=jo(a,g),x=await this.client.core.crypto.encode(f,n),M=await this.client.core.history.get(f,a),_=js[M.request.method].res;this.client.core.relayer.publish(f,x,_),await this.client.core.history.resolve(n)},this.cleanup=async()=>{const a=[],f=[];this.client.session.getAll().forEach(g=>{cn(g.expiry)&&a.push(g.topic)}),this.client.proposal.getAll().forEach(g=>{cn(g.expiry)&&f.push(g.id)}),await Promise.all([...a.map(g=>this.deleteSession(g)),...f.map(g=>this.deleteProposal(g))])},this.onRelayEventRequest=async a=>{this.requestQueue.queue.push(a),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Ji.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ji.active;const a=this.requestQueue.queue.shift();if(a)try{this.processRequest(a),await new Promise(f=>setTimeout(f,300))}catch(f){this.client.logger.warn(f)}}this.requestQueue.state=Ji.idle},this.processRequest=a=>{const{topic:f,payload:g}=a,n=g.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeRequest(f,g);case"wc_sessionSettle":return this.onSessionSettleRequest(f,g);case"wc_sessionUpdate":return this.onSessionUpdateRequest(f,g);case"wc_sessionExtend":return this.onSessionExtendRequest(f,g);case"wc_sessionPing":return this.onSessionPingRequest(f,g);case"wc_sessionDelete":return this.onSessionDeleteRequest(f,g);case"wc_sessionRequest":return this.onSessionRequest(f,g);case"wc_sessionEvent":return this.onSessionEventRequest(f,g);default:return this.client.logger.info(`Unsupported request method ${n}`)}},this.onRelayEventResponse=async a=>{const{topic:f,payload:g}=a,n=(await this.client.core.history.get(f,g.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(f,g);case"wc_sessionSettle":return this.onSessionSettleResponse(f,g);case"wc_sessionUpdate":return this.onSessionUpdateResponse(f,g);case"wc_sessionExtend":return this.onSessionExtendResponse(f,g);case"wc_sessionPing":return this.onSessionPingResponse(f,g);case"wc_sessionRequest":return this.onSessionRequestResponse(f,g);default:return this.client.logger.info(`Unsupported response method ${n}`)}},this.onRelayEventUnknownPayload=a=>{const{topic:f}=a,{message:g}=Zt("MISSING_OR_INVALID",`Decoded payload on topic ${f} is not identifiable as a JSON-RPC request or a response.`);throw new Error(g)},this.onSessionProposeRequest=async(a,f)=>{const{params:g,id:n}=f;try{this.isValidConnect(Zr({},f.params));const x=Ii(re.FIVE_MINUTES),M=Zr({id:n,pairingTopic:a,expiry:x},g);await this.setProposal(n,M);const _=hs(JSON.stringify(f)),w=await this.getVerifyContext(_,M.proposer.metadata);this.client.events.emit("session_proposal",{id:n,params:M,verifyContext:w})}catch(x){await this.sendError(n,a,x),this.client.logger.error(x)}},this.onSessionProposeResponse=async(a,f)=>{const{id:g}=f;if(Xi(f)){const{result:n}=f;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});const x=this.client.proposal.get(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:x});const M=x.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:M});const _=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const w=await this.client.core.crypto.generateSharedKey(M,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});const b=await this.client.core.relayer.subscribe(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:b}),await this.client.core.pairing.activate({topic:a})}else Ri(f)&&(await this.client.proposal.delete(g,br("USER_DISCONNECTED")),this.events.emit(Mr("session_connect"),{error:f.error}))},this.onSessionSettleRequest=async(a,f)=>{const{id:g,params:n}=f;try{this.isValidSessionSettleRequest(n);const{relay:x,controller:M,expiry:_,namespaces:w,requiredNamespaces:b,optionalNamespaces:A,sessionProperties:E,pairingTopic:I}=f.params,R=Zr({topic:a,relay:x,expiry:_,namespaces:w,acknowledged:!0,pairingTopic:I,requiredNamespaces:b,optionalNamespaces:A,controller:M.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:M.publicKey,metadata:M.metadata}},E&&{sessionProperties:E});await this.sendResult({id:f.id,topic:a,result:!0}),this.events.emit(Mr("session_connect"),{session:R}),this.cleanupDuplicatePairings(R)}catch(x){await this.sendError(g,a,x),this.client.logger.error(x)}},this.onSessionSettleResponse=async(a,f)=>{const{id:g}=f;Xi(f)?(await this.client.session.update(a,{acknowledged:!0}),this.events.emit(Mr("session_approve",g),{})):Ri(f)&&(await this.client.session.delete(a,br("USER_DISCONNECTED")),this.events.emit(Mr("session_approve",g),{error:f.error}))},this.onSessionUpdateRequest=async(a,f)=>{const{params:g,id:n}=f;try{const x=`${a}_session_update`,M=_o.get(x);if(M&&this.isRequestOutOfSync(M,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidUpdate(Zr({topic:a},g)),await this.client.session.update(a,{namespaces:g.namespaces}),await this.sendResult({id:n,topic:a,result:!0}),this.client.events.emit("session_update",{id:n,topic:a,params:g}),_o.set(x,n)}catch(x){await this.sendError(n,a,x),this.client.logger.error(x)}},this.isRequestOutOfSync=(a,f)=>parseInt(f.toString().slice(0,-3))<=parseInt(a.toString().slice(0,-3)),this.onSessionUpdateResponse=(a,f)=>{const{id:g}=f;Xi(f)?this.events.emit(Mr("session_update",g),{}):Ri(f)&&this.events.emit(Mr("session_update",g),{error:f.error})},this.onSessionExtendRequest=async(a,f)=>{const{id:g}=f;try{this.isValidExtend({topic:a}),await this.setExpiry(a,Ii(Mo)),await this.sendResult({id:g,topic:a,result:!0}),this.client.events.emit("session_extend",{id:g,topic:a})}catch(n){await this.sendError(g,a,n),this.client.logger.error(n)}},this.onSessionExtendResponse=(a,f)=>{const{id:g}=f;Xi(f)?this.events.emit(Mr("session_extend",g),{}):Ri(f)&&this.events.emit(Mr("session_extend",g),{error:f.error})},this.onSessionPingRequest=async(a,f)=>{const{id:g}=f;try{this.isValidPing({topic:a}),await this.sendResult({id:g,topic:a,result:!0}),this.client.events.emit("session_ping",{id:g,topic:a})}catch(n){await this.sendError(g,a,n),this.client.logger.error(n)}},this.onSessionPingResponse=(a,f)=>{const{id:g}=f;setTimeout(()=>{Xi(f)?this.events.emit(Mr("session_ping",g),{}):Ri(f)&&this.events.emit(Mr("session_ping",g),{error:f.error})},500)},this.onSessionDeleteRequest=async(a,f)=>{const{id:g}=f;try{this.isValidDisconnect({topic:a,reason:f.params}),await Promise.all([new Promise(n=>{this.client.core.relayer.once(Br.publish,async()=>{n(await this.deleteSession(a))})}),this.sendResult({id:g,topic:a,result:!0})]),this.client.events.emit("session_delete",{id:g,topic:a})}catch(n){this.client.logger.error(n)}},this.onSessionRequest=async(a,f)=>{const{id:g,params:n}=f;try{this.isValidRequest(Zr({topic:a},n)),await this.setPendingSessionRequest({id:g,topic:a,params:n}),this.addSessionRequestToSessionRequestQueue({id:g,topic:a,params:n}),await this.processSessionRequestQueue()}catch(x){await this.sendError(g,a,x),this.client.logger.error(x)}},this.onSessionRequestResponse=(a,f)=>{const{id:g}=f;Xi(f)?this.events.emit(Mr("session_request",g),{result:f.result}):Ri(f)&&this.events.emit(Mr("session_request",g),{error:f.error})},this.onSessionEventRequest=async(a,f)=>{const{id:g,params:n}=f;try{const x=`${a}_session_event_${n.event.name}`,M=_o.get(x);if(M&&this.isRequestOutOfSync(M,g)){this.client.logger.info(`Discarding out of sync request - ${g}`);return}this.isValidEmit(Zr({topic:a},n)),this.client.events.emit("session_event",{id:g,topic:a,params:n}),_o.set(x,g)}catch(x){await this.sendError(g,a,x),this.client.logger.error(x)}},this.addSessionRequestToSessionRequestQueue=a=>{this.sessionRequestQueue.queue.push(a)},this.cleanupAfterResponse=a=>{this.deletePendingSessionRequest(a.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ji.idle,this.processSessionRequestQueue()},re.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===Ji.active){this.client.logger.info("session request queue is already active.");return}const a=this.sessionRequestQueue.queue[0];if(!a){this.client.logger.info("session request queue is empty.");return}try{const{id:f,topic:g,params:n}=a,x=hs(JSON.stringify(ea("wc_sessionRequest",n,f))),M=this.client.session.get(g),_=await this.getVerifyContext(x,M.peer.metadata);this.sessionRequestQueue.state=Ji.active,this.client.events.emit("session_request",{id:f,topic:g,params:n,verifyContext:_})}catch(f){this.client.logger.error(f)}},this.isValidConnect=async a=>{if(!Wr(a)){const{message:_}=Zt("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(a)}`);throw new Error(_)}const{pairingTopic:f,requiredNamespaces:g,optionalNamespaces:n,sessionProperties:x,relays:M}=a;if(Fr(f)||await this.isValidPairingTopic(f),!K8(M,!0)){const{message:_}=Zt("MISSING_OR_INVALID",`connect() relays: ${M}`);throw new Error(_)}!Fr(g)&&us(g)!==0&&this.validateNamespaces(g,"requiredNamespaces"),!Fr(n)&&us(n)!==0&&this.validateNamespaces(n,"optionalNamespaces"),Fr(x)||this.validateSessionProps(x,"sessionProperties")},this.validateNamespaces=(a,f)=>{const g=H8(a,"connect()",f);if(g)throw new Error(g.message)},this.isValidApprove=async a=>{if(!Wr(a))throw new Error(Zt("MISSING_OR_INVALID",`approve() params: ${a}`).message);const{id:f,namespaces:g,relayProtocol:n,sessionProperties:x}=a;await this.isValidProposalId(f);const M=this.client.proposal.get(f),_=Ao(g,"approve()");if(_)throw new Error(_.message);const w=j1(M.requiredNamespaces,g,"approve()");if(w)throw new Error(w.message);if(!Ir(n,!0)){const{message:b}=Zt("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(b)}Fr(x)||this.validateSessionProps(x,"sessionProperties")},this.isValidReject=async a=>{if(!Wr(a)){const{message:n}=Zt("MISSING_OR_INVALID",`reject() params: ${a}`);throw new Error(n)}const{id:f,reason:g}=a;if(await this.isValidProposalId(f),!V8(g)){const{message:n}=Zt("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(g)}`);throw new Error(n)}},this.isValidSessionSettleRequest=a=>{if(!Wr(a)){const{message:w}=Zt("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${a}`);throw new Error(w)}const{relay:f,controller:g,namespaces:n,expiry:x}=a;if(!Vg(f)){const{message:w}=Zt("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(w)}const M=L8(g,"onSessionSettleRequest()");if(M)throw new Error(M.message);const _=Ao(n,"onSessionSettleRequest()");if(_)throw new Error(_.message);if(cn(x)){const{message:w}=Zt("EXPIRED","onSessionSettleRequest()");throw new Error(w)}},this.isValidUpdate=async a=>{if(!Wr(a)){const{message:_}=Zt("MISSING_OR_INVALID",`update() params: ${a}`);throw new Error(_)}const{topic:f,namespaces:g}=a;await this.isValidSessionTopic(f);const n=this.client.session.get(f),x=Ao(g,"update()");if(x)throw new Error(x.message);const M=j1(n.requiredNamespaces,g,"update()");if(M)throw new Error(M.message)},this.isValidExtend=async a=>{if(!Wr(a)){const{message:g}=Zt("MISSING_OR_INVALID",`extend() params: ${a}`);throw new Error(g)}const{topic:f}=a;await this.isValidSessionTopic(f)},this.isValidRequest=async a=>{if(!Wr(a)){const{message:_}=Zt("MISSING_OR_INVALID",`request() params: ${a}`);throw new Error(_)}const{topic:f,request:g,chainId:n,expiry:x}=a;await this.isValidSessionTopic(f);const{namespaces:M}=this.client.session.get(f);if(!K1(M,n)){const{message:_}=Zt("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(_)}if(!G8(g)){const{message:_}=Zt("MISSING_OR_INVALID",`request() ${JSON.stringify(g)}`);throw new Error(_)}if(!Y8(M,n,g.method)){const{message:_}=Zt("MISSING_OR_INVALID",`request() method: ${g.method}`);throw new Error(_)}if(x&&!t9(x,tu)){const{message:_}=Zt("MISSING_OR_INVALID",`request() expiry: ${x}. Expiry must be a number (in seconds) between ${tu.min} and ${tu.max}`);throw new Error(_)}},this.isValidRespond=async a=>{if(!Wr(a)){const{message:n}=Zt("MISSING_OR_INVALID",`respond() params: ${a}`);throw new Error(n)}const{topic:f,response:g}=a;if(await this.isValidSessionTopic(f),!Z8(g)){const{message:n}=Zt("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(g)}`);throw new Error(n)}},this.isValidPing=async a=>{if(!Wr(a)){const{message:g}=Zt("MISSING_OR_INVALID",`ping() params: ${a}`);throw new Error(g)}const{topic:f}=a;await this.isValidSessionOrPairingTopic(f)},this.isValidEmit=async a=>{if(!Wr(a)){const{message:M}=Zt("MISSING_OR_INVALID",`emit() params: ${a}`);throw new Error(M)}const{topic:f,event:g,chainId:n}=a;await this.isValidSessionTopic(f);const{namespaces:x}=this.client.session.get(f);if(!K1(x,n)){const{message:M}=Zt("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(M)}if(!W8(g)){const{message:M}=Zt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(g)}`);throw new Error(M)}if(!J8(x,n,g.name)){const{message:M}=Zt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(g)}`);throw new Error(M)}},this.isValidDisconnect=async a=>{if(!Wr(a)){const{message:g}=Zt("MISSING_OR_INVALID",`disconnect() params: ${a}`);throw new Error(g)}const{topic:f}=a;await this.isValidSessionOrPairingTopic(f)},this.getVerifyContext=async(a,f)=>{const g={verified:{verifyUrl:f.verifyUrl||Io,validation:"UNKNOWN",origin:f.url||""}};try{const n=await this.client.core.verify.resolve({attestationId:a,verifyUrl:f.verifyUrl});n&&(g.verified.origin=n,g.verified.validation=n===new URL(f.url).origin?"VALID":"INVALID")}catch(n){this.client.logger.error(n)}return this.client.logger.info(`Verify context: ${JSON.stringify(g)}`),g},this.validateSessionProps=(a,f)=>{Object.values(a).forEach(g=>{if(!Ir(g,!1)){const{message:n}=Zt("MISSING_OR_INVALID",`${f} must be in Record<string, string> format. Received: ${JSON.stringify(g)}`);throw new Error(n)}})}}async isInitialized(){if(!this.initialized){const{message:i}=Zt("NOT_INITIALIZED",this.name);throw new Error(i)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Br.message,async i=>{const{topic:a,message:f}=i;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(f)))return;const g=await this.client.core.crypto.decode(a,f);try{ec(g)?(this.client.core.history.set(a,g),this.onRelayEventRequest({topic:a,payload:g})):Vo(g)?(await this.client.core.history.resolve(g),await this.onRelayEventResponse({topic:a,payload:g}),this.client.core.history.delete(a,g.id)):this.onRelayEventUnknownPayload({topic:a,payload:g})}catch(n){this.client.logger.error(n)}})}registerExpirerEvents(){this.client.core.expirer.on(mi.expired,async i=>{const{topic:a,id:f}=Kg(i.target);if(f&&this.client.pendingRequest.keys.includes(f))return await this.deletePendingSessionRequest(f,Zt("EXPIRED"),!0);a?this.client.session.keys.includes(a)&&(await this.deleteSession(a,!0),this.client.events.emit("session_expire",{topic:a})):f&&(await this.deleteProposal(f,!0),this.client.events.emit("proposal_expire",{id:f}))})}isValidPairingTopic(i){if(!Ir(i,!1)){const{message:a}=Zt("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(a)}if(!this.client.core.pairing.pairings.keys.includes(i)){const{message:a}=Zt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(a)}if(cn(this.client.core.pairing.pairings.get(i).expiry)){const{message:a}=Zt("EXPIRED",`pairing topic: ${i}`);throw new Error(a)}}async isValidSessionTopic(i){if(!Ir(i,!1)){const{message:a}=Zt("MISSING_OR_INVALID",`session topic should be a string: ${i}`);throw new Error(a)}if(!this.client.session.keys.includes(i)){const{message:a}=Zt("NO_MATCHING_KEY",`session topic doesn't exist: ${i}`);throw new Error(a)}if(cn(this.client.session.get(i).expiry)){await this.deleteSession(i);const{message:a}=Zt("EXPIRED",`session topic: ${i}`);throw new Error(a)}}async isValidSessionOrPairingTopic(i){if(this.client.session.keys.includes(i))await this.isValidSessionTopic(i);else if(this.client.core.pairing.pairings.keys.includes(i))this.isValidPairingTopic(i);else if(Ir(i,!1)){const{message:a}=Zt("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${i}`);throw new Error(a)}else{const{message:a}=Zt("MISSING_OR_INVALID",`session or pairing topic should be a string: ${i}`);throw new Error(a)}}async isValidProposalId(i){if(!j8(i)){const{message:a}=Zt("MISSING_OR_INVALID",`proposal id should be a number: ${i}`);throw new Error(a)}if(!this.client.proposal.keys.includes(i)){const{message:a}=Zt("NO_MATCHING_KEY",`proposal id doesn't exist: ${i}`);throw new Error(a)}if(cn(this.client.proposal.get(i).expiry)){await this.deleteProposal(i);const{message:a}=Zt("EXPIRED",`proposal id: ${i}`);throw new Error(a)}}}class cE extends Zo{constructor(i,a){super(i,a,tE,nc),this.core=i,this.logger=a}}class lE extends Zo{constructor(i,a){super(i,a,eE,nc),this.core=i,this.logger=a}}class dE extends Zo{constructor(i,a){super(i,a,iE,nc,f=>f.id),this.core=i,this.logger=a}}class sc extends z5{constructor(i){super(i),this.protocol=pm,this.version=vm,this.name=Q0.name,this.events=new qr.exports.EventEmitter,this.on=(f,g)=>this.events.on(f,g),this.once=(f,g)=>this.events.once(f,g),this.off=(f,g)=>this.events.off(f,g),this.removeListener=(f,g)=>this.events.removeListener(f,g),this.removeAllListeners=f=>this.events.removeAllListeners(f),this.connect=async f=>{try{return await this.engine.connect(f)}catch(g){throw this.logger.error(g.message),g}},this.pair=async f=>{try{return await this.engine.pair(f)}catch(g){throw this.logger.error(g.message),g}},this.approve=async f=>{try{return await this.engine.approve(f)}catch(g){throw this.logger.error(g.message),g}},this.reject=async f=>{try{return await this.engine.reject(f)}catch(g){throw this.logger.error(g.message),g}},this.update=async f=>{try{return await this.engine.update(f)}catch(g){throw this.logger.error(g.message),g}},this.extend=async f=>{try{return await this.engine.extend(f)}catch(g){throw this.logger.error(g.message),g}},this.request=async f=>{try{return await this.engine.request(f)}catch(g){throw this.logger.error(g.message),g}},this.respond=async f=>{try{return await this.engine.respond(f)}catch(g){throw this.logger.error(g.message),g}},this.ping=async f=>{try{return await this.engine.ping(f)}catch(g){throw this.logger.error(g.message),g}},this.emit=async f=>{try{return await this.engine.emit(f)}catch(g){throw this.logger.error(g.message),g}},this.disconnect=async f=>{try{return await this.engine.disconnect(f)}catch(g){throw this.logger.error(g.message),g}},this.find=f=>{try{return this.engine.find(f)}catch(g){throw this.logger.error(g.message),g}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(f){throw this.logger.error(f.message),f}},this.name=(i==null?void 0:i.name)||Q0.name,this.metadata=(i==null?void 0:i.metadata)||f8();const a=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Te.pino(Te.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||Q0.logger}));this.core=(i==null?void 0:i.core)||new Qx(i),this.logger=Te.generateChildLogger(a,this.name),this.session=new lE(this.core,this.logger),this.proposal=new cE(this.core,this.logger),this.pendingRequest=new dE(this.core,this.logger),this.engine=new uE(this)}static async init(i){const a=new sc(i);return await a.initialize(),a}get context(){return Te.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(i){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(i.message),i}}}const pE={Accept:"application/json","Content-Type":"application/json"},vE="POST",xv={headers:pE,method:vE},Ev=10;class $n{constructor(i,a=!1){if(this.url=i,this.disableProviderPing=a,this.events=new qr.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!J1(i))throw new Error(`Provided URL is not compatible with HTTP connection: ${i}`);this.url=i,this.disableProviderPing=a}get connected(){return this.isAvailable}get connecting(){return this.registering}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}off(i,a){this.events.off(i,a)}removeListener(i,a){this.events.removeListener(i,a)}async open(i=this.url){await this.register(i)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(i,a){this.isAvailable||await this.register();try{const f=Js(i),n=await(await od(this.url,Object.assign(Object.assign({},xv),{body:f}))).json();this.onPayload({data:n})}catch(f){this.onError(i.id,f)}}async register(i=this.url){if(!J1(i))throw new Error(`Provided URL is not compatible with HTTP connection: ${i}`);if(this.registering){const a=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=a||this.events.listenerCount("open")>=a)&&this.events.setMaxListeners(a+1),new Promise((f,g)=>{this.events.once("register_error",n=>{this.resetMaxListeners(),g(n)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return g(new Error("HTTP connection is missing or invalid"));f()})})}this.url=i,this.registering=!0;try{if(!this.disableProviderPing){const a=Js({id:1,jsonrpc:"2.0",method:"test",params:[]});await od(i,Object.assign(Object.assign({},xv),{body:a}))}this.onOpen()}catch(a){const f=this.parseError(a);throw this.events.emit("register_error",f),this.onClose(),f}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(i){if(typeof i.data>"u")return;const a=typeof i.data=="string"?Au(i.data):i.data;this.events.emit("payload",a)}onError(i,a){const f=this.parseError(a),g=f.message||f.toString(),n=jo(i,g);this.events.emit("payload",n)}parseError(i,a=this.url){return Wg(i,a,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Ev&&this.events.setMaxListeners(Ev)}}const Sv="error",gE="wss://relay.walletconnect.com",mE="wc",bE="universal_provider",Av=`${mE}@2:${bE}:`,yE="https://rpc.walletconnect.com/v1",gn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof lr<"u"?lr:typeof self<"u"?self:{},yu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(l,i){(function(){var a,f="4.17.21",g=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",x="Expected a function",M="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",w=500,b="__lodash_placeholder__",A=1,E=2,I=4,R=1,T=2,B=1,D=2,q=4,k=8,N=16,K=32,$=64,P=128,z=256,Y=512,nt=30,v="...",t=800,r=16,s=1,h=2,d=3,m=1/0,y=9007199254740991,u=17976931348623157e292,e=0/0,c=4294967295,F=c-1,L=c>>>1,H=[["ary",P],["bind",B],["bindKey",D],["curry",k],["curryRight",N],["flip",Y],["partial",K],["partialRight",$],["rearg",z]],G="[object Arguments]",tt="[object Array]",Z="[object AsyncFunction]",et="[object Boolean]",j="[object Date]",O="[object DOMException]",Q="[object Error]",rt="[object Function]",st="[object GeneratorFunction]",Jt="[object Map]",gt="[object Number]",mt="[object Null]",ee="[object Object]",_t="[object Promise]",Mt="[object Proxy]",ie="[object RegExp]",ut="[object Set]",pt="[object String]",Xt="[object Symbol]",vt="[object Undefined]",lt="[object WeakMap]",Qt="[object WeakSet]",ht="[object ArrayBuffer]",dt="[object DataView]",ne="[object Float32Array]",ct="[object Float64Array]",bt="[object Int8Array]",se="[object Int16Array]",yt="[object Int32Array]",wt="[object Uint8Array]",ae="[object Uint8ClampedArray]",qt="[object Uint16Array]",Lt="[object Uint32Array]",Fe=/\b__p \+= '';/g,Nt=/\b(__p \+=) '' \+/g,kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ar=/&(?:amp|lt|gt|quot|#39);/g,Ut=/[&<>"']/g,Et=RegExp(ar.source),pe=RegExp(Ut.source),St=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,me=/<%=([\s\S]+?)%>/g,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/,xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Tt=RegExp(It.source),we=/^\s+/,Pt=/\s/,Rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pr=/[()=,{}\[\]\/\s]/,Ft=/\\(\\)?/g,$t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ae=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,Ze=/^(?:0|[1-9]\d*)$/,Ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ne=/($^)/,We=/['\n\r\u2028\u2029\\]/g,De="\\ud800-\\udfff",Ye="\\u0300-\\u036f",Je="\\ufe20-\\ufe2f",Le="\\u20d0-\\u20ff",$e=Ye+Je+Le,ze="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",Xe="\\xac\\xb1\\xd7\\xf7",Qe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tr="\\u2000-\\u206f",Wo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ua="A-Z\\xc0-\\xd6\\xd8-\\xde",ca="\\ufe0e\\ufe0f",mn=Xe+Qe+tr+Wo,gs="['\u2019]",bn="["+De+"]",ms="["+mn+"]",yn="["+$e+"]",la="\\d+",Yo="["+ze+"]",da="["+Re+"]",pa="[^"+De+mn+la+ze+Re+ua+"]",zn="\\ud83c[\\udffb-\\udfff]",Jo="(?:"+yn+"|"+zn+")",va="[^"+De+"]",Hn="(?:\\ud83c[\\udde6-\\uddff]){2}",tn="[\\ud800-\\udbff][\\udc00-\\udfff]",Jr="["+ua+"]",ga="\\u200d",ma="(?:"+da+"|"+pa+")",Pi="(?:"+Jr+"|"+pa+")",ba="(?:"+gs+"(?:d|ll|m|re|s|t|ve))?",ya="(?:"+gs+"(?:D|LL|M|RE|S|T|VE))?",wa=Jo+"?",_a="["+ca+"]?",Xo="(?:"+ga+"(?:"+[va,Hn,tn].join("|")+")"+_a+wa+")*",ki="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ma="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xa=_a+wa+Xo,Kn="(?:"+[Yo,Hn,tn].join("|")+")"+xa,Qo="(?:"+[va+yn+"?",yn,Hn,tn,bn].join("|")+")",bs=RegExp(gs,"g"),tf=RegExp(yn,"g"),jn=RegExp(zn+"(?="+zn+")|"+Qo+xa,"g"),Ea=RegExp([Jr+"?"+da+"+"+ba+"(?="+[ms,Jr,"$"].join("|")+")",Pi+"+"+ya+"(?="+[ms,Jr+ma,"$"].join("|")+")",Jr+"?"+ma+"+"+ba,Jr+"+"+ya,Ma,ki,la,Kn].join("|"),"g"),Sa=RegExp("["+ga+De+$e+ca+"]"),wn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ef=-1,er={};er[ne]=er[ct]=er[bt]=er[se]=er[yt]=er[wt]=er[ae]=er[qt]=er[Lt]=!0,er[G]=er[tt]=er[ht]=er[et]=er[dt]=er[j]=er[Q]=er[rt]=er[Jt]=er[gt]=er[ee]=er[ie]=er[ut]=er[pt]=er[lt]=!1;var He={};He[G]=He[tt]=He[ht]=He[dt]=He[et]=He[j]=He[ne]=He[ct]=He[bt]=He[se]=He[yt]=He[Jt]=He[gt]=He[ee]=He[ie]=He[ut]=He[pt]=He[Xt]=He[wt]=He[ae]=He[qt]=He[Lt]=!0,He[Q]=He[rt]=He[lt]=!1;var J={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,le=parseInt,fr=typeof Gs=="object"&&Gs&&Gs.Object===Object&&Gs,wr=typeof self=="object"&&self&&self.Object===Object&&self,Pe=fr||wr||Function("return this")(),ir=i&&!i.nodeType&&i,vr=ir&&!0&&l&&!l.nodeType&&l,Hr=vr&&vr.exports===ir,_r=Hr&&fr.process,hr=function(){try{var ot=vr&&vr.require&&vr.require("util").types;return ot||_r&&_r.binding&&_r.binding("util")}catch{}}(),Nr=hr&&hr.isArrayBuffer,Mi=hr&&hr.isDate,ai=hr&&hr.isMap,Oi=hr&&hr.isRegExp,ys=hr&&hr.isSet,_n=hr&&hr.isTypedArray;function Sr(ot,zt,Dt){switch(Dt.length){case 0:return ot.call(zt);case 1:return ot.call(zt,Dt[0]);case 2:return ot.call(zt,Dt[0],Dt[1]);case 3:return ot.call(zt,Dt[0],Dt[1],Dt[2])}return ot.apply(zt,Dt)}function wm(ot,zt,Dt,Yt){for(var ce=-1,Be=ot==null?0:ot.length;++ce<Be;){var xr=ot[ce];zt(Yt,xr,Dt(xr),ot)}return Yt}function oi(ot,zt){for(var Dt=-1,Yt=ot==null?0:ot.length;++Dt<Yt&&zt(ot[Dt],Dt,ot)!==!1;);return ot}function _m(ot,zt){for(var Dt=ot==null?0:ot.length;Dt--&&zt(ot[Dt],Dt,ot)!==!1;);return ot}function fc(ot,zt){for(var Dt=-1,Yt=ot==null?0:ot.length;++Dt<Yt;)if(!zt(ot[Dt],Dt,ot))return!1;return!0}function en(ot,zt){for(var Dt=-1,Yt=ot==null?0:ot.length,ce=0,Be=[];++Dt<Yt;){var xr=ot[Dt];zt(xr,Dt,ot)&&(Be[ce++]=xr)}return Be}function Ia(ot,zt){var Dt=ot==null?0:ot.length;return!!Dt&&Vn(ot,zt,0)>-1}function rf(ot,zt,Dt){for(var Yt=-1,ce=ot==null?0:ot.length;++Yt<ce;)if(Dt(zt,ot[Yt]))return!0;return!1}function ur(ot,zt){for(var Dt=-1,Yt=ot==null?0:ot.length,ce=Array(Yt);++Dt<Yt;)ce[Dt]=zt(ot[Dt],Dt,ot);return ce}function rn(ot,zt){for(var Dt=-1,Yt=zt.length,ce=ot.length;++Dt<Yt;)ot[ce+Dt]=zt[Dt];return ot}function nf(ot,zt,Dt,Yt){var ce=-1,Be=ot==null?0:ot.length;for(Yt&&Be&&(Dt=ot[++ce]);++ce<Be;)Dt=zt(Dt,ot[ce],ce,ot);return Dt}function Mm(ot,zt,Dt,Yt){var ce=ot==null?0:ot.length;for(Yt&&ce&&(Dt=ot[--ce]);ce--;)Dt=zt(Dt,ot[ce],ce,ot);return Dt}function sf(ot,zt){for(var Dt=-1,Yt=ot==null?0:ot.length;++Dt<Yt;)if(zt(ot[Dt],Dt,ot))return!0;return!1}var xm=af("length");function Em(ot){return ot.split("")}function Sm(ot){return ot.match(Bt)||[]}function hc(ot,zt,Dt){var Yt;return Dt(ot,function(ce,Be,xr){if(zt(ce,Be,xr))return Yt=Be,!1}),Yt}function Ra(ot,zt,Dt,Yt){for(var ce=ot.length,Be=Dt+(Yt?1:-1);Yt?Be--:++Be<ce;)if(zt(ot[Be],Be,ot))return Be;return-1}function Vn(ot,zt,Dt){return zt===zt?Lm(ot,zt,Dt):Ra(ot,uc,Dt)}function Am(ot,zt,Dt,Yt){for(var ce=Dt-1,Be=ot.length;++ce<Be;)if(Yt(ot[ce],zt))return ce;return-1}function uc(ot){return ot!==ot}function cc(ot,zt){var Dt=ot==null?0:ot.length;return Dt?ff(ot,zt)/Dt:e}function af(ot){return function(zt){return zt==null?a:zt[ot]}}function of(ot){return function(zt){return ot==null?a:ot[zt]}}function lc(ot,zt,Dt,Yt,ce){return ce(ot,function(Be,xr,nr){Dt=Yt?(Yt=!1,Be):zt(Dt,Be,xr,nr)}),Dt}function Im(ot,zt){var Dt=ot.length;for(ot.sort(zt);Dt--;)ot[Dt]=ot[Dt].value;return ot}function ff(ot,zt){for(var Dt,Yt=-1,ce=ot.length;++Yt<ce;){var Be=zt(ot[Yt]);Be!==a&&(Dt=Dt===a?Be:Dt+Be)}return Dt}function hf(ot,zt){for(var Dt=-1,Yt=Array(ot);++Dt<ot;)Yt[Dt]=zt(Dt);return Yt}function Rm(ot,zt){return ur(zt,function(Dt){return[Dt,ot[Dt]]})}function dc(ot){return ot&&ot.slice(0,mc(ot)+1).replace(we,"")}function Xr(ot){return function(zt){return ot(zt)}}function uf(ot,zt){return ur(zt,function(Dt){return ot[Dt]})}function ws(ot,zt){return ot.has(zt)}function pc(ot,zt){for(var Dt=-1,Yt=ot.length;++Dt<Yt&&Vn(zt,ot[Dt],0)>-1;);return Dt}function vc(ot,zt){for(var Dt=ot.length;Dt--&&Vn(zt,ot[Dt],0)>-1;);return Dt}function Pm(ot,zt){for(var Dt=ot.length,Yt=0;Dt--;)ot[Dt]===zt&&++Yt;return Yt}var Om=of(J),Tm=of(at);function Cm(ot){return"\\"+Wt[ot]}function Bm(ot,zt){return ot==null?a:ot[zt]}function Gn(ot){return Sa.test(ot)}function qm(ot){return wn.test(ot)}function Nm(ot){for(var zt,Dt=[];!(zt=ot.next()).done;)Dt.push(zt.value);return Dt}function cf(ot){var zt=-1,Dt=Array(ot.size);return ot.forEach(function(Yt,ce){Dt[++zt]=[ce,Yt]}),Dt}function gc(ot,zt){return function(Dt){return ot(zt(Dt))}}function nn(ot,zt){for(var Dt=-1,Yt=ot.length,ce=0,Be=[];++Dt<Yt;){var xr=ot[Dt];(xr===zt||xr===b)&&(ot[Dt]=b,Be[ce++]=Dt)}return Be}function Pa(ot){var zt=-1,Dt=Array(ot.size);return ot.forEach(function(Yt){Dt[++zt]=Yt}),Dt}function Dm(ot){var zt=-1,Dt=Array(ot.size);return ot.forEach(function(Yt){Dt[++zt]=[Yt,Yt]}),Dt}function Lm(ot,zt,Dt){for(var Yt=Dt-1,ce=ot.length;++Yt<ce;)if(ot[Yt]===zt)return Yt;return-1}function km(ot,zt,Dt){for(var Yt=Dt+1;Yt--;)if(ot[Yt]===zt)return Yt;return Yt}function Zn(ot){return Gn(ot)?Fm(ot):xm(ot)}function xi(ot){return Gn(ot)?$m(ot):Em(ot)}function mc(ot){for(var zt=ot.length;zt--&&Pt.test(ot.charAt(zt)););return zt}var Um=of(jt);function Fm(ot){for(var zt=jn.lastIndex=0;jn.test(ot);)++zt;return zt}function $m(ot){return ot.match(jn)||[]}function zm(ot){return ot.match(Ea)||[]}var Hm=function ot(zt){zt=zt==null?Pe:Wn.defaults(Pe.Object(),zt,Wn.pick(Pe,Aa));var Dt=zt.Array,Yt=zt.Date,ce=zt.Error,Be=zt.Function,xr=zt.Math,nr=zt.Object,lf=zt.RegExp,Km=zt.String,fi=zt.TypeError,Oa=Dt.prototype,jm=Be.prototype,Yn=nr.prototype,Ta=zt["__core-js_shared__"],Ca=jm.toString,Ue=Yn.hasOwnProperty,Vm=0,bc=function(){var o=/[^.]+$/.exec(Ta&&Ta.keys&&Ta.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Ba=Yn.toString,Gm=Ca.call(nr),Zm=Pe._,Wm=lf("^"+Ca.call(Ue).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qa=Hr?zt.Buffer:a,sn=zt.Symbol,Na=zt.Uint8Array,yc=qa?qa.allocUnsafe:a,Da=gc(nr.getPrototypeOf,nr),wc=nr.create,_c=Yn.propertyIsEnumerable,La=Oa.splice,Mc=sn?sn.isConcatSpreadable:a,_s=sn?sn.iterator:a,Mn=sn?sn.toStringTag:a,ka=function(){try{var o=In(nr,"defineProperty");return o({},"",{}),o}catch{}}(),Ym=zt.clearTimeout!==Pe.clearTimeout&&zt.clearTimeout,Jm=Yt&&Yt.now!==Pe.Date.now&&Yt.now,Xm=zt.setTimeout!==Pe.setTimeout&&zt.setTimeout,Ua=xr.ceil,Fa=xr.floor,df=nr.getOwnPropertySymbols,Qm=qa?qa.isBuffer:a,xc=zt.isFinite,tb=Oa.join,eb=gc(nr.keys,nr),Er=xr.max,Or=xr.min,rb=Yt.now,ib=zt.parseInt,Ec=xr.random,nb=Oa.reverse,pf=In(zt,"DataView"),Ms=In(zt,"Map"),vf=In(zt,"Promise"),Jn=In(zt,"Set"),xs=In(zt,"WeakMap"),Es=In(nr,"create"),$a=xs&&new xs,Xn={},sb=Rn(pf),ab=Rn(Ms),ob=Rn(vf),fb=Rn(Jn),hb=Rn(xs),za=sn?sn.prototype:a,Ss=za?za.valueOf:a,Sc=za?za.toString:a;function V(o){if(dr(o)&&!de(o)&&!(o instanceof Ie)){if(o instanceof hi)return o;if(Ue.call(o,"__wrapped__"))return Al(o)}return new hi(o)}var Qn=function(){function o(){}return function(p){if(!cr(p))return{};if(wc)return wc(p);o.prototype=p;var S=new o;return o.prototype=a,S}}();function Ha(){}function hi(o,p){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=a}V.templateSettings={escape:St,evaluate:At,interpolate:me,variable:"",imports:{_:V}},V.prototype=Ha.prototype,V.prototype.constructor=V,hi.prototype=Qn(Ha.prototype),hi.prototype.constructor=hi;function Ie(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function ub(){var o=new Ie(this.__wrapped__);return o.__actions__=Kr(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Kr(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Kr(this.__views__),o}function cb(){if(this.__filtered__){var o=new Ie(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function lb(){var o=this.__wrapped__.value(),p=this.__dir__,S=de(o),C=p<0,U=S?o.length:0,W=Ey(0,U,this.__views__),X=W.start,it=W.end,ft=it-X,Ht=C?it:X-1,Kt=this.__iteratees__,Vt=Kt.length,Gt=0,te=Or(ft,this.__takeCount__);if(!S||!C&&U==ft&&te==ft)return Wc(o,this.__actions__);var fe=[];t:for(;ft--&&Gt<te;){Ht+=p;for(var _e=-1,he=o[Ht];++_e<Vt;){var Se=Kt[_e],Oe=Se.iteratee,ei=Se.type,kr=Oe(he);if(ei==h)he=kr;else if(!kr){if(ei==s)continue t;break t}}fe[Gt++]=he}return fe}Ie.prototype=Qn(Ha.prototype),Ie.prototype.constructor=Ie;function xn(o){var p=-1,S=o==null?0:o.length;for(this.clear();++p<S;){var C=o[p];this.set(C[0],C[1])}}function db(){this.__data__=Es?Es(null):{},this.size=0}function pb(o){var p=this.has(o)&&delete this.__data__[o];return this.size-=p?1:0,p}function vb(o){var p=this.__data__;if(Es){var S=p[o];return S===_?a:S}return Ue.call(p,o)?p[o]:a}function gb(o){var p=this.__data__;return Es?p[o]!==a:Ue.call(p,o)}function mb(o,p){var S=this.__data__;return this.size+=this.has(o)?0:1,S[o]=Es&&p===a?_:p,this}xn.prototype.clear=db,xn.prototype.delete=pb,xn.prototype.get=vb,xn.prototype.has=gb,xn.prototype.set=mb;function Ui(o){var p=-1,S=o==null?0:o.length;for(this.clear();++p<S;){var C=o[p];this.set(C[0],C[1])}}function bb(){this.__data__=[],this.size=0}function yb(o){var p=this.__data__,S=Ka(p,o);if(S<0)return!1;var C=p.length-1;return S==C?p.pop():La.call(p,S,1),--this.size,!0}function wb(o){var p=this.__data__,S=Ka(p,o);return S<0?a:p[S][1]}function _b(o){return Ka(this.__data__,o)>-1}function Mb(o,p){var S=this.__data__,C=Ka(S,o);return C<0?(++this.size,S.push([o,p])):S[C][1]=p,this}Ui.prototype.clear=bb,Ui.prototype.delete=yb,Ui.prototype.get=wb,Ui.prototype.has=_b,Ui.prototype.set=Mb;function Fi(o){var p=-1,S=o==null?0:o.length;for(this.clear();++p<S;){var C=o[p];this.set(C[0],C[1])}}function xb(){this.size=0,this.__data__={hash:new xn,map:new(Ms||Ui),string:new xn}}function Eb(o){var p=ro(this,o).delete(o);return this.size-=p?1:0,p}function Sb(o){return ro(this,o).get(o)}function Ab(o){return ro(this,o).has(o)}function Ib(o,p){var S=ro(this,o),C=S.size;return S.set(o,p),this.size+=S.size==C?0:1,this}Fi.prototype.clear=xb,Fi.prototype.delete=Eb,Fi.prototype.get=Sb,Fi.prototype.has=Ab,Fi.prototype.set=Ib;function En(o){var p=-1,S=o==null?0:o.length;for(this.__data__=new Fi;++p<S;)this.add(o[p])}function Rb(o){return this.__data__.set(o,_),this}function Pb(o){return this.__data__.has(o)}En.prototype.add=En.prototype.push=Rb,En.prototype.has=Pb;function Ei(o){var p=this.__data__=new Ui(o);this.size=p.size}function Ob(){this.__data__=new Ui,this.size=0}function Tb(o){var p=this.__data__,S=p.delete(o);return this.size=p.size,S}function Cb(o){return this.__data__.get(o)}function Bb(o){return this.__data__.has(o)}function qb(o,p){var S=this.__data__;if(S instanceof Ui){var C=S.__data__;if(!Ms||C.length<g-1)return C.push([o,p]),this.size=++S.size,this;S=this.__data__=new Fi(C)}return S.set(o,p),this.size=S.size,this}Ei.prototype.clear=Ob,Ei.prototype.delete=Tb,Ei.prototype.get=Cb,Ei.prototype.has=Bb,Ei.prototype.set=qb;function Ac(o,p){var S=de(o),C=!S&&Pn(o),U=!S&&!C&&un(o),W=!S&&!C&&!U&&is(o),X=S||C||U||W,it=X?hf(o.length,Km):[],ft=it.length;for(var Ht in o)(p||Ue.call(o,Ht))&&!(X&&(Ht=="length"||U&&(Ht=="offset"||Ht=="parent")||W&&(Ht=="buffer"||Ht=="byteLength"||Ht=="byteOffset")||Ki(Ht,ft)))&&it.push(Ht);return it}function Ic(o){var p=o.length;return p?o[Af(0,p-1)]:a}function Nb(o,p){return io(Kr(o),Sn(p,0,o.length))}function Db(o){return io(Kr(o))}function gf(o,p,S){(S!==a&&!Si(o[p],S)||S===a&&!(p in o))&&$i(o,p,S)}function As(o,p,S){var C=o[p];(!(Ue.call(o,p)&&Si(C,S))||S===a&&!(p in o))&&$i(o,p,S)}function Ka(o,p){for(var S=o.length;S--;)if(Si(o[S][0],p))return S;return-1}function Lb(o,p,S,C){return an(o,function(U,W,X){p(C,U,S(U),X)}),C}function Rc(o,p){return o&&Ci(p,Ar(p),o)}function kb(o,p){return o&&Ci(p,Vr(p),o)}function $i(o,p,S){p=="__proto__"&&ka?ka(o,p,{configurable:!0,enumerable:!0,value:S,writable:!0}):o[p]=S}function mf(o,p){for(var S=-1,C=p.length,U=Dt(C),W=o==null;++S<C;)U[S]=W?a:Jf(o,p[S]);return U}function Sn(o,p,S){return o===o&&(S!==a&&(o=o<=S?o:S),p!==a&&(o=o>=p?o:p)),o}function ui(o,p,S,C,U,W){var X,it=p&A,ft=p&E,Ht=p&I;if(S&&(X=U?S(o,C,U,W):S(o)),X!==a)return X;if(!cr(o))return o;var Kt=de(o);if(Kt){if(X=Ay(o),!it)return Kr(o,X)}else{var Vt=Tr(o),Gt=Vt==rt||Vt==st;if(un(o))return Xc(o,it);if(Vt==ee||Vt==G||Gt&&!U){if(X=ft||Gt?{}:ml(o),!it)return ft?vy(o,kb(X,o)):py(o,Rc(X,o))}else{if(!He[Vt])return U?o:{};X=Iy(o,Vt,it)}}W||(W=new Ei);var te=W.get(o);if(te)return te;W.set(o,X),Vl(o)?o.forEach(function(he){X.add(ui(he,p,S,he,o,W))}):Kl(o)&&o.forEach(function(he,Se){X.set(Se,ui(he,p,S,Se,o,W))});var fe=Ht?ft?Lf:Df:ft?Vr:Ar,_e=Kt?a:fe(o);return oi(_e||o,function(he,Se){_e&&(Se=he,he=o[Se]),As(X,Se,ui(he,p,S,Se,o,W))}),X}function Ub(o){var p=Ar(o);return function(S){return Pc(S,o,p)}}function Pc(o,p,S){var C=S.length;if(o==null)return!C;for(o=nr(o);C--;){var U=S[C],W=p[U],X=o[U];if(X===a&&!(U in o)||!W(X))return!1}return!0}function Oc(o,p,S){if(typeof o!="function")throw new fi(x);return Bs(function(){o.apply(a,S)},p)}function Is(o,p,S,C){var U=-1,W=Ia,X=!0,it=o.length,ft=[],Ht=p.length;if(!it)return ft;S&&(p=ur(p,Xr(S))),C?(W=rf,X=!1):p.length>=g&&(W=ws,X=!1,p=new En(p));t:for(;++U<it;){var Kt=o[U],Vt=S==null?Kt:S(Kt);if(Kt=C||Kt!==0?Kt:0,X&&Vt===Vt){for(var Gt=Ht;Gt--;)if(p[Gt]===Vt)continue t;ft.push(Kt)}else W(p,Vt,C)||ft.push(Kt)}return ft}var an=il(Ti),Tc=il(yf,!0);function Fb(o,p){var S=!0;return an(o,function(C,U,W){return S=!!p(C,U,W),S}),S}function ja(o,p,S){for(var C=-1,U=o.length;++C<U;){var W=o[C],X=p(W);if(X!=null&&(it===a?X===X&&!ti(X):S(X,it)))var it=X,ft=W}return ft}function $b(o,p,S,C){var U=o.length;for(S=be(S),S<0&&(S=-S>U?0:U+S),C=C===a||C>U?U:be(C),C<0&&(C+=U),C=S>C?0:Zl(C);S<C;)o[S++]=p;return o}function Cc(o,p){var S=[];return an(o,function(C,U,W){p(C,U,W)&&S.push(C)}),S}function Rr(o,p,S,C,U){var W=-1,X=o.length;for(S||(S=Py),U||(U=[]);++W<X;){var it=o[W];p>0&&S(it)?p>1?Rr(it,p-1,S,C,U):rn(U,it):C||(U[U.length]=it)}return U}var bf=nl(),Bc=nl(!0);function Ti(o,p){return o&&bf(o,p,Ar)}function yf(o,p){return o&&Bc(o,p,Ar)}function Va(o,p){return en(p,function(S){return ji(o[S])})}function An(o,p){p=fn(p,o);for(var S=0,C=p.length;o!=null&&S<C;)o=o[Bi(p[S++])];return S&&S==C?o:a}function qc(o,p,S){var C=p(o);return de(o)?C:rn(C,S(o))}function Dr(o){return o==null?o===a?vt:mt:Mn&&Mn in nr(o)?xy(o):Dy(o)}function wf(o,p){return o>p}function zb(o,p){return o!=null&&Ue.call(o,p)}function Hb(o,p){return o!=null&&p in nr(o)}function Kb(o,p,S){return o>=Or(p,S)&&o<Er(p,S)}function _f(o,p,S){for(var C=S?rf:Ia,U=o[0].length,W=o.length,X=W,it=Dt(W),ft=1/0,Ht=[];X--;){var Kt=o[X];X&&p&&(Kt=ur(Kt,Xr(p))),ft=Or(Kt.length,ft),it[X]=!S&&(p||U>=120&&Kt.length>=120)?new En(X&&Kt):a}Kt=o[0];var Vt=-1,Gt=it[0];t:for(;++Vt<U&&Ht.length<ft;){var te=Kt[Vt],fe=p?p(te):te;if(te=S||te!==0?te:0,!(Gt?ws(Gt,fe):C(Ht,fe,S))){for(X=W;--X;){var _e=it[X];if(!(_e?ws(_e,fe):C(o[X],fe,S)))continue t}Gt&&Gt.push(fe),Ht.push(te)}}return Ht}function jb(o,p,S,C){return Ti(o,function(U,W,X){p(C,S(U),W,X)}),C}function Rs(o,p,S){p=fn(p,o),o=_l(o,p);var C=o==null?o:o[Bi(li(p))];return C==null?a:Sr(C,o,S)}function Nc(o){return dr(o)&&Dr(o)==G}function Vb(o){return dr(o)&&Dr(o)==ht}function Gb(o){return dr(o)&&Dr(o)==j}function Ps(o,p,S,C,U){return o===p?!0:o==null||p==null||!dr(o)&&!dr(p)?o!==o&&p!==p:Zb(o,p,S,C,Ps,U)}function Zb(o,p,S,C,U,W){var X=de(o),it=de(p),ft=X?tt:Tr(o),Ht=it?tt:Tr(p);ft=ft==G?ee:ft,Ht=Ht==G?ee:Ht;var Kt=ft==ee,Vt=Ht==ee,Gt=ft==Ht;if(Gt&&un(o)){if(!un(p))return!1;X=!0,Kt=!1}if(Gt&&!Kt)return W||(W=new Ei),X||is(o)?pl(o,p,S,C,U,W):_y(o,p,ft,S,C,U,W);if(!(S&R)){var te=Kt&&Ue.call(o,"__wrapped__"),fe=Vt&&Ue.call(p,"__wrapped__");if(te||fe){var _e=te?o.value():o,he=fe?p.value():p;return W||(W=new Ei),U(_e,he,S,C,W)}}return Gt?(W||(W=new Ei),My(o,p,S,C,U,W)):!1}function Wb(o){return dr(o)&&Tr(o)==Jt}function Mf(o,p,S,C){var U=S.length,W=U,X=!C;if(o==null)return!W;for(o=nr(o);U--;){var it=S[U];if(X&&it[2]?it[1]!==o[it[0]]:!(it[0]in o))return!1}for(;++U<W;){it=S[U];var ft=it[0],Ht=o[ft],Kt=it[1];if(X&&it[2]){if(Ht===a&&!(ft in o))return!1}else{var Vt=new Ei;if(C)var Gt=C(Ht,Kt,ft,o,p,Vt);if(!(Gt===a?Ps(Kt,Ht,R|T,C,Vt):Gt))return!1}}return!0}function Dc(o){if(!cr(o)||Ty(o))return!1;var p=ji(o)?Wm:Ve;return p.test(Rn(o))}function Yb(o){return dr(o)&&Dr(o)==ie}function Jb(o){return dr(o)&&Tr(o)==ut}function Xb(o){return dr(o)&&ho(o.length)&&!!er[Dr(o)]}function Lc(o){return typeof o=="function"?o:o==null?Gr:typeof o=="object"?de(o)?Fc(o[0],o[1]):Uc(o):sd(o)}function xf(o){if(!Cs(o))return eb(o);var p=[];for(var S in nr(o))Ue.call(o,S)&&S!="constructor"&&p.push(S);return p}function Qb(o){if(!cr(o))return Ny(o);var p=Cs(o),S=[];for(var C in o)C=="constructor"&&(p||!Ue.call(o,C))||S.push(C);return S}function Ef(o,p){return o<p}function kc(o,p){var S=-1,C=jr(o)?Dt(o.length):[];return an(o,function(U,W,X){C[++S]=p(U,W,X)}),C}function Uc(o){var p=Uf(o);return p.length==1&&p[0][2]?yl(p[0][0],p[0][1]):function(S){return S===o||Mf(S,o,p)}}function Fc(o,p){return $f(o)&&bl(p)?yl(Bi(o),p):function(S){var C=Jf(S,o);return C===a&&C===p?Xf(S,o):Ps(p,C,R|T)}}function Ga(o,p,S,C,U){o!==p&&bf(p,function(W,X){if(U||(U=new Ei),cr(W))ty(o,p,X,S,Ga,C,U);else{var it=C?C(Hf(o,X),W,X+"",o,p,U):a;it===a&&(it=W),gf(o,X,it)}},Vr)}function ty(o,p,S,C,U,W,X){var it=Hf(o,S),ft=Hf(p,S),Ht=X.get(ft);if(Ht){gf(o,S,Ht);return}var Kt=W?W(it,ft,S+"",o,p,X):a,Vt=Kt===a;if(Vt){var Gt=de(ft),te=!Gt&&un(ft),fe=!Gt&&!te&&is(ft);Kt=ft,Gt||te||fe?de(it)?Kt=it:gr(it)?Kt=Kr(it):te?(Vt=!1,Kt=Xc(ft,!0)):fe?(Vt=!1,Kt=Qc(ft,!0)):Kt=[]:qs(ft)||Pn(ft)?(Kt=it,Pn(it)?Kt=Wl(it):(!cr(it)||ji(it))&&(Kt=ml(ft))):Vt=!1}Vt&&(X.set(ft,Kt),U(Kt,ft,C,W,X),X.delete(ft)),gf(o,S,Kt)}function $c(o,p){var S=o.length;if(S)return p+=p<0?S:0,Ki(p,S)?o[p]:a}function zc(o,p,S){p.length?p=ur(p,function(W){return de(W)?function(X){return An(X,W.length===1?W[0]:W)}:W}):p=[Gr];var C=-1;p=ur(p,Xr(oe()));var U=kc(o,function(W,X,it){var ft=ur(p,function(Ht){return Ht(W)});return{criteria:ft,index:++C,value:W}});return Im(U,function(W,X){return dy(W,X,S)})}function ey(o,p){return Hc(o,p,function(S,C){return Xf(o,C)})}function Hc(o,p,S){for(var C=-1,U=p.length,W={};++C<U;){var X=p[C],it=An(o,X);S(it,X)&&Os(W,fn(X,o),it)}return W}function ry(o){return function(p){return An(p,o)}}function Sf(o,p,S,C){var U=C?Am:Vn,W=-1,X=p.length,it=o;for(o===p&&(p=Kr(p)),S&&(it=ur(o,Xr(S)));++W<X;)for(var ft=0,Ht=p[W],Kt=S?S(Ht):Ht;(ft=U(it,Kt,ft,C))>-1;)it!==o&&La.call(it,ft,1),La.call(o,ft,1);return o}function Kc(o,p){for(var S=o?p.length:0,C=S-1;S--;){var U=p[S];if(S==C||U!==W){var W=U;Ki(U)?La.call(o,U,1):Pf(o,U)}}return o}function Af(o,p){return o+Fa(Ec()*(p-o+1))}function iy(o,p,S,C){for(var U=-1,W=Er(Ua((p-o)/(S||1)),0),X=Dt(W);W--;)X[C?W:++U]=o,o+=S;return X}function If(o,p){var S="";if(!o||p<1||p>y)return S;do p%2&&(S+=o),p=Fa(p/2),p&&(o+=o);while(p);return S}function Me(o,p){return Kf(wl(o,p,Gr),o+"")}function ny(o){return Ic(ns(o))}function sy(o,p){var S=ns(o);return io(S,Sn(p,0,S.length))}function Os(o,p,S,C){if(!cr(o))return o;p=fn(p,o);for(var U=-1,W=p.length,X=W-1,it=o;it!=null&&++U<W;){var ft=Bi(p[U]),Ht=S;if(ft==="__proto__"||ft==="constructor"||ft==="prototype")return o;if(U!=X){var Kt=it[ft];Ht=C?C(Kt,ft,it):a,Ht===a&&(Ht=cr(Kt)?Kt:Ki(p[U+1])?[]:{})}As(it,ft,Ht),it=it[ft]}return o}var jc=$a?function(o,p){return $a.set(o,p),o}:Gr,ay=ka?function(o,p){return ka(o,"toString",{configurable:!0,enumerable:!1,value:th(p),writable:!0})}:Gr;function oy(o){return io(ns(o))}function ci(o,p,S){var C=-1,U=o.length;p<0&&(p=-p>U?0:U+p),S=S>U?U:S,S<0&&(S+=U),U=p>S?0:S-p>>>0,p>>>=0;for(var W=Dt(U);++C<U;)W[C]=o[C+p];return W}function fy(o,p){var S;return an(o,function(C,U,W){return S=p(C,U,W),!S}),!!S}function Za(o,p,S){var C=0,U=o==null?C:o.length;if(typeof p=="number"&&p===p&&U<=L){for(;C<U;){var W=C+U>>>1,X=o[W];X!==null&&!ti(X)&&(S?X<=p:X<p)?C=W+1:U=W}return U}return Rf(o,p,Gr,S)}function Rf(o,p,S,C){var U=0,W=o==null?0:o.length;if(W===0)return 0;p=S(p);for(var X=p!==p,it=p===null,ft=ti(p),Ht=p===a;U<W;){var Kt=Fa((U+W)/2),Vt=S(o[Kt]),Gt=Vt!==a,te=Vt===null,fe=Vt===Vt,_e=ti(Vt);if(X)var he=C||fe;else Ht?he=fe&&(C||Gt):it?he=fe&&Gt&&(C||!te):ft?he=fe&&Gt&&!te&&(C||!_e):te||_e?he=!1:he=C?Vt<=p:Vt<p;he?U=Kt+1:W=Kt}return Or(W,F)}function Vc(o,p){for(var S=-1,C=o.length,U=0,W=[];++S<C;){var X=o[S],it=p?p(X):X;if(!S||!Si(it,ft)){var ft=it;W[U++]=X===0?0:X}}return W}function Gc(o){return typeof o=="number"?o:ti(o)?e:+o}function Qr(o){if(typeof o=="string")return o;if(de(o))return ur(o,Qr)+"";if(ti(o))return Sc?Sc.call(o):"";var p=o+"";return p=="0"&&1/o==-m?"-0":p}function on(o,p,S){var C=-1,U=Ia,W=o.length,X=!0,it=[],ft=it;if(S)X=!1,U=rf;else if(W>=g){var Ht=p?null:yy(o);if(Ht)return Pa(Ht);X=!1,U=ws,ft=new En}else ft=p?[]:it;t:for(;++C<W;){var Kt=o[C],Vt=p?p(Kt):Kt;if(Kt=S||Kt!==0?Kt:0,X&&Vt===Vt){for(var Gt=ft.length;Gt--;)if(ft[Gt]===Vt)continue t;p&&ft.push(Vt),it.push(Kt)}else U(ft,Vt,S)||(ft!==it&&ft.push(Vt),it.push(Kt))}return it}function Pf(o,p){return p=fn(p,o),o=_l(o,p),o==null||delete o[Bi(li(p))]}function Zc(o,p,S,C){return Os(o,p,S(An(o,p)),C)}function Wa(o,p,S,C){for(var U=o.length,W=C?U:-1;(C?W--:++W<U)&&p(o[W],W,o););return S?ci(o,C?0:W,C?W+1:U):ci(o,C?W+1:0,C?U:W)}function Wc(o,p){var S=o;return S instanceof Ie&&(S=S.value()),nf(p,function(C,U){return U.func.apply(U.thisArg,rn([C],U.args))},S)}function Of(o,p,S){var C=o.length;if(C<2)return C?on(o[0]):[];for(var U=-1,W=Dt(C);++U<C;)for(var X=o[U],it=-1;++it<C;)it!=U&&(W[U]=Is(W[U]||X,o[it],p,S));return on(Rr(W,1),p,S)}function Yc(o,p,S){for(var C=-1,U=o.length,W=p.length,X={};++C<U;){var it=C<W?p[C]:a;S(X,o[C],it)}return X}function Tf(o){return gr(o)?o:[]}function Cf(o){return typeof o=="function"?o:Gr}function fn(o,p){return de(o)?o:$f(o,p)?[o]:Sl(ke(o))}var hy=Me;function hn(o,p,S){var C=o.length;return S=S===a?C:S,!p&&S>=C?o:ci(o,p,S)}var Jc=Ym||function(o){return Pe.clearTimeout(o)};function Xc(o,p){if(p)return o.slice();var S=o.length,C=yc?yc(S):new o.constructor(S);return o.copy(C),C}function Bf(o){var p=new o.constructor(o.byteLength);return new Na(p).set(new Na(o)),p}function uy(o,p){var S=p?Bf(o.buffer):o.buffer;return new o.constructor(S,o.byteOffset,o.byteLength)}function cy(o){var p=new o.constructor(o.source,Ae.exec(o));return p.lastIndex=o.lastIndex,p}function ly(o){return Ss?nr(Ss.call(o)):{}}function Qc(o,p){var S=p?Bf(o.buffer):o.buffer;return new o.constructor(S,o.byteOffset,o.length)}function tl(o,p){if(o!==p){var S=o!==a,C=o===null,U=o===o,W=ti(o),X=p!==a,it=p===null,ft=p===p,Ht=ti(p);if(!it&&!Ht&&!W&&o>p||W&&X&&ft&&!it&&!Ht||C&&X&&ft||!S&&ft||!U)return 1;if(!C&&!W&&!Ht&&o<p||Ht&&S&&U&&!C&&!W||it&&S&&U||!X&&U||!ft)return-1}return 0}function dy(o,p,S){for(var C=-1,U=o.criteria,W=p.criteria,X=U.length,it=S.length;++C<X;){var ft=tl(U[C],W[C]);if(ft){if(C>=it)return ft;var Ht=S[C];return ft*(Ht=="desc"?-1:1)}}return o.index-p.index}function el(o,p,S,C){for(var U=-1,W=o.length,X=S.length,it=-1,ft=p.length,Ht=Er(W-X,0),Kt=Dt(ft+Ht),Vt=!C;++it<ft;)Kt[it]=p[it];for(;++U<X;)(Vt||U<W)&&(Kt[S[U]]=o[U]);for(;Ht--;)Kt[it++]=o[U++];return Kt}function rl(o,p,S,C){for(var U=-1,W=o.length,X=-1,it=S.length,ft=-1,Ht=p.length,Kt=Er(W-it,0),Vt=Dt(Kt+Ht),Gt=!C;++U<Kt;)Vt[U]=o[U];for(var te=U;++ft<Ht;)Vt[te+ft]=p[ft];for(;++X<it;)(Gt||U<W)&&(Vt[te+S[X]]=o[U++]);return Vt}function Kr(o,p){var S=-1,C=o.length;for(p||(p=Dt(C));++S<C;)p[S]=o[S];return p}function Ci(o,p,S,C){var U=!S;S||(S={});for(var W=-1,X=p.length;++W<X;){var it=p[W],ft=C?C(S[it],o[it],it,S,o):a;ft===a&&(ft=o[it]),U?$i(S,it,ft):As(S,it,ft)}return S}function py(o,p){return Ci(o,Ff(o),p)}function vy(o,p){return Ci(o,vl(o),p)}function Ya(o,p){return function(S,C){var U=de(S)?wm:Lb,W=p?p():{};return U(S,o,oe(C,2),W)}}function ts(o){return Me(function(p,S){var C=-1,U=S.length,W=U>1?S[U-1]:a,X=U>2?S[2]:a;for(W=o.length>3&&typeof W=="function"?(U--,W):a,X&&Lr(S[0],S[1],X)&&(W=U<3?a:W,U=1),p=nr(p);++C<U;){var it=S[C];it&&o(p,it,C,W)}return p})}function il(o,p){return function(S,C){if(S==null)return S;if(!jr(S))return o(S,C);for(var U=S.length,W=p?U:-1,X=nr(S);(p?W--:++W<U)&&C(X[W],W,X)!==!1;);return S}}function nl(o){return function(p,S,C){for(var U=-1,W=nr(p),X=C(p),it=X.length;it--;){var ft=X[o?it:++U];if(S(W[ft],ft,W)===!1)break}return p}}function gy(o,p,S){var C=p&B,U=Ts(o);function W(){var X=this&&this!==Pe&&this instanceof W?U:o;return X.apply(C?S:this,arguments)}return W}function sl(o){return function(p){p=ke(p);var S=Gn(p)?xi(p):a,C=S?S[0]:p.charAt(0),U=S?hn(S,1).join(""):p.slice(1);return C[o]()+U}}function es(o){return function(p){return nf(id(rd(p).replace(bs,"")),o,"")}}function Ts(o){return function(){var p=arguments;switch(p.length){case 0:return new o;case 1:return new o(p[0]);case 2:return new o(p[0],p[1]);case 3:return new o(p[0],p[1],p[2]);case 4:return new o(p[0],p[1],p[2],p[3]);case 5:return new o(p[0],p[1],p[2],p[3],p[4]);case 6:return new o(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new o(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var S=Qn(o.prototype),C=o.apply(S,p);return cr(C)?C:S}}function my(o,p,S){var C=Ts(o);function U(){for(var W=arguments.length,X=Dt(W),it=W,ft=rs(U);it--;)X[it]=arguments[it];var Ht=W<3&&X[0]!==ft&&X[W-1]!==ft?[]:nn(X,ft);if(W-=Ht.length,W<S)return ul(o,p,Ja,U.placeholder,a,X,Ht,a,a,S-W);var Kt=this&&this!==Pe&&this instanceof U?C:o;return Sr(Kt,this,X)}return U}function al(o){return function(p,S,C){var U=nr(p);if(!jr(p)){var W=oe(S,3);p=Ar(p),S=function(it){return W(U[it],it,U)}}var X=o(p,S,C);return X>-1?U[W?p[X]:X]:a}}function ol(o){return Hi(function(p){var S=p.length,C=S,U=hi.prototype.thru;for(o&&p.reverse();C--;){var W=p[C];if(typeof W!="function")throw new fi(x);if(U&&!X&&eo(W)=="wrapper")var X=new hi([],!0)}for(C=X?C:S;++C<S;){W=p[C];var it=eo(W),ft=it=="wrapper"?kf(W):a;ft&&zf(ft[0])&&ft[1]==(P|k|K|z)&&!ft[4].length&&ft[9]==1?X=X[eo(ft[0])].apply(X,ft[3]):X=W.length==1&&zf(W)?X[it]():X.thru(W)}return function(){var Ht=arguments,Kt=Ht[0];if(X&&Ht.length==1&&de(Kt))return X.plant(Kt).value();for(var Vt=0,Gt=S?p[Vt].apply(this,Ht):Kt;++Vt<S;)Gt=p[Vt].call(this,Gt);return Gt}})}function Ja(o,p,S,C,U,W,X,it,ft,Ht){var Kt=p&P,Vt=p&B,Gt=p&D,te=p&(k|N),fe=p&Y,_e=Gt?a:Ts(o);function he(){for(var Se=arguments.length,Oe=Dt(Se),ei=Se;ei--;)Oe[ei]=arguments[ei];if(te)var kr=rs(he),ri=Pm(Oe,kr);if(C&&(Oe=el(Oe,C,U,te)),W&&(Oe=rl(Oe,W,X,te)),Se-=ri,te&&Se<Ht){var mr=nn(Oe,kr);return ul(o,p,Ja,he.placeholder,S,Oe,mr,it,ft,Ht-Se)}var Ai=Vt?S:this,Gi=Gt?Ai[o]:o;return Se=Oe.length,it?Oe=Ly(Oe,it):fe&&Se>1&&Oe.reverse(),Kt&&ft<Se&&(Oe.length=ft),this&&this!==Pe&&this instanceof he&&(Gi=_e||Ts(Gi)),Gi.apply(Ai,Oe)}return he}function fl(o,p){return function(S,C){return jb(S,o,p(C),{})}}function Xa(o,p){return function(S,C){var U;if(S===a&&C===a)return p;if(S!==a&&(U=S),C!==a){if(U===a)return C;typeof S=="string"||typeof C=="string"?(S=Qr(S),C=Qr(C)):(S=Gc(S),C=Gc(C)),U=o(S,C)}return U}}function qf(o){return Hi(function(p){return p=ur(p,Xr(oe())),Me(function(S){var C=this;return o(p,function(U){return Sr(U,C,S)})})})}function Qa(o,p){p=p===a?" ":Qr(p);var S=p.length;if(S<2)return S?If(p,o):p;var C=If(p,Ua(o/Zn(p)));return Gn(p)?hn(xi(C),0,o).join(""):C.slice(0,o)}function by(o,p,S,C){var U=p&B,W=Ts(o);function X(){for(var it=-1,ft=arguments.length,Ht=-1,Kt=C.length,Vt=Dt(Kt+ft),Gt=this&&this!==Pe&&this instanceof X?W:o;++Ht<Kt;)Vt[Ht]=C[Ht];for(;ft--;)Vt[Ht++]=arguments[++it];return Sr(Gt,U?S:this,Vt)}return X}function hl(o){return function(p,S,C){return C&&typeof C!="number"&&Lr(p,S,C)&&(S=C=a),p=Vi(p),S===a?(S=p,p=0):S=Vi(S),C=C===a?p<S?1:-1:Vi(C),iy(p,S,C,o)}}function to(o){return function(p,S){return typeof p=="string"&&typeof S=="string"||(p=di(p),S=di(S)),o(p,S)}}function ul(o,p,S,C,U,W,X,it,ft,Ht){var Kt=p&k,Vt=Kt?X:a,Gt=Kt?a:X,te=Kt?W:a,fe=Kt?a:W;p|=Kt?K:$,p&=~(Kt?$:K),p&q||(p&=~(B|D));var _e=[o,p,U,te,Vt,fe,Gt,it,ft,Ht],he=S.apply(a,_e);return zf(o)&&Ml(he,_e),he.placeholder=C,xl(he,o,p)}function Nf(o){var p=xr[o];return function(S,C){if(S=di(S),C=C==null?0:Or(be(C),292),C&&xc(S)){var U=(ke(S)+"e").split("e"),W=p(U[0]+"e"+(+U[1]+C));return U=(ke(W)+"e").split("e"),+(U[0]+"e"+(+U[1]-C))}return p(S)}}var yy=Jn&&1/Pa(new Jn([,-0]))[1]==m?function(o){return new Jn(o)}:ih;function cl(o){return function(p){var S=Tr(p);return S==Jt?cf(p):S==ut?Dm(p):Rm(p,o(p))}}function zi(o,p,S,C,U,W,X,it){var ft=p&D;if(!ft&&typeof o!="function")throw new fi(x);var Ht=C?C.length:0;if(Ht||(p&=~(K|$),C=U=a),X=X===a?X:Er(be(X),0),it=it===a?it:be(it),Ht-=U?U.length:0,p&$){var Kt=C,Vt=U;C=U=a}var Gt=ft?a:kf(o),te=[o,p,S,C,U,Kt,Vt,W,X,it];if(Gt&&qy(te,Gt),o=te[0],p=te[1],S=te[2],C=te[3],U=te[4],it=te[9]=te[9]===a?ft?0:o.length:Er(te[9]-Ht,0),!it&&p&(k|N)&&(p&=~(k|N)),!p||p==B)var fe=gy(o,p,S);else p==k||p==N?fe=my(o,p,it):(p==K||p==(B|K))&&!U.length?fe=by(o,p,S,C):fe=Ja.apply(a,te);var _e=Gt?jc:Ml;return xl(_e(fe,te),o,p)}function ll(o,p,S,C){return o===a||Si(o,Yn[S])&&!Ue.call(C,S)?p:o}function dl(o,p,S,C,U,W){return cr(o)&&cr(p)&&(W.set(p,o),Ga(o,p,a,dl,W),W.delete(p)),o}function wy(o){return qs(o)?a:o}function pl(o,p,S,C,U,W){var X=S&R,it=o.length,ft=p.length;if(it!=ft&&!(X&&ft>it))return!1;var Ht=W.get(o),Kt=W.get(p);if(Ht&&Kt)return Ht==p&&Kt==o;var Vt=-1,Gt=!0,te=S&T?new En:a;for(W.set(o,p),W.set(p,o);++Vt<it;){var fe=o[Vt],_e=p[Vt];if(C)var he=X?C(_e,fe,Vt,p,o,W):C(fe,_e,Vt,o,p,W);if(he!==a){if(he)continue;Gt=!1;break}if(te){if(!sf(p,function(Se,Oe){if(!ws(te,Oe)&&(fe===Se||U(fe,Se,S,C,W)))return te.push(Oe)})){Gt=!1;break}}else if(!(fe===_e||U(fe,_e,S,C,W))){Gt=!1;break}}return W.delete(o),W.delete(p),Gt}function _y(o,p,S,C,U,W,X){switch(S){case dt:if(o.byteLength!=p.byteLength||o.byteOffset!=p.byteOffset)return!1;o=o.buffer,p=p.buffer;case ht:return!(o.byteLength!=p.byteLength||!W(new Na(o),new Na(p)));case et:case j:case gt:return Si(+o,+p);case Q:return o.name==p.name&&o.message==p.message;case ie:case pt:return o==p+"";case Jt:var it=cf;case ut:var ft=C&R;if(it||(it=Pa),o.size!=p.size&&!ft)return!1;var Ht=X.get(o);if(Ht)return Ht==p;C|=T,X.set(o,p);var Kt=pl(it(o),it(p),C,U,W,X);return X.delete(o),Kt;case Xt:if(Ss)return Ss.call(o)==Ss.call(p)}return!1}function My(o,p,S,C,U,W){var X=S&R,it=Df(o),ft=it.length,Ht=Df(p),Kt=Ht.length;if(ft!=Kt&&!X)return!1;for(var Vt=ft;Vt--;){var Gt=it[Vt];if(!(X?Gt in p:Ue.call(p,Gt)))return!1}var te=W.get(o),fe=W.get(p);if(te&&fe)return te==p&&fe==o;var _e=!0;W.set(o,p),W.set(p,o);for(var he=X;++Vt<ft;){Gt=it[Vt];var Se=o[Gt],Oe=p[Gt];if(C)var ei=X?C(Oe,Se,Gt,p,o,W):C(Se,Oe,Gt,o,p,W);if(!(ei===a?Se===Oe||U(Se,Oe,S,C,W):ei)){_e=!1;break}he||(he=Gt=="constructor")}if(_e&&!he){var kr=o.constructor,ri=p.constructor;kr!=ri&&"constructor"in o&&"constructor"in p&&!(typeof kr=="function"&&kr instanceof kr&&typeof ri=="function"&&ri instanceof ri)&&(_e=!1)}return W.delete(o),W.delete(p),_e}function Hi(o){return Kf(wl(o,a,Pl),o+"")}function Df(o){return qc(o,Ar,Ff)}function Lf(o){return qc(o,Vr,vl)}var kf=$a?function(o){return $a.get(o)}:ih;function eo(o){for(var p=o.name+"",S=Xn[p],C=Ue.call(Xn,p)?S.length:0;C--;){var U=S[C],W=U.func;if(W==null||W==o)return U.name}return p}function rs(o){var p=Ue.call(V,"placeholder")?V:o;return p.placeholder}function oe(){var o=V.iteratee||eh;return o=o===eh?Lc:o,arguments.length?o(arguments[0],arguments[1]):o}function ro(o,p){var S=o.__data__;return Oy(p)?S[typeof p=="string"?"string":"hash"]:S.map}function Uf(o){for(var p=Ar(o),S=p.length;S--;){var C=p[S],U=o[C];p[S]=[C,U,bl(U)]}return p}function In(o,p){var S=Bm(o,p);return Dc(S)?S:a}function xy(o){var p=Ue.call(o,Mn),S=o[Mn];try{o[Mn]=a;var C=!0}catch{}var U=Ba.call(o);return C&&(p?o[Mn]=S:delete o[Mn]),U}var Ff=df?function(o){return o==null?[]:(o=nr(o),en(df(o),function(p){return _c.call(o,p)}))}:nh,vl=df?function(o){for(var p=[];o;)rn(p,Ff(o)),o=Da(o);return p}:nh,Tr=Dr;(pf&&Tr(new pf(new ArrayBuffer(1)))!=dt||Ms&&Tr(new Ms)!=Jt||vf&&Tr(vf.resolve())!=_t||Jn&&Tr(new Jn)!=ut||xs&&Tr(new xs)!=lt)&&(Tr=function(o){var p=Dr(o),S=p==ee?o.constructor:a,C=S?Rn(S):"";if(C)switch(C){case sb:return dt;case ab:return Jt;case ob:return _t;case fb:return ut;case hb:return lt}return p});function Ey(o,p,S){for(var C=-1,U=S.length;++C<U;){var W=S[C],X=W.size;switch(W.type){case"drop":o+=X;break;case"dropRight":p-=X;break;case"take":p=Or(p,o+X);break;case"takeRight":o=Er(o,p-X);break}}return{start:o,end:p}}function Sy(o){var p=o.match(ue);return p?p[1].split(Ct):[]}function gl(o,p,S){p=fn(p,o);for(var C=-1,U=p.length,W=!1;++C<U;){var X=Bi(p[C]);if(!(W=o!=null&&S(o,X)))break;o=o[X]}return W||++C!=U?W:(U=o==null?0:o.length,!!U&&ho(U)&&Ki(X,U)&&(de(o)||Pn(o)))}function Ay(o){var p=o.length,S=new o.constructor(p);return p&&typeof o[0]=="string"&&Ue.call(o,"index")&&(S.index=o.index,S.input=o.input),S}function ml(o){return typeof o.constructor=="function"&&!Cs(o)?Qn(Da(o)):{}}function Iy(o,p,S){var C=o.constructor;switch(p){case ht:return Bf(o);case et:case j:return new C(+o);case dt:return uy(o,S);case ne:case ct:case bt:case se:case yt:case wt:case ae:case qt:case Lt:return Qc(o,S);case Jt:return new C;case gt:case pt:return new C(o);case ie:return cy(o);case ut:return new C;case Xt:return ly(o)}}function Ry(o,p){var S=p.length;if(!S)return o;var C=S-1;return p[C]=(S>1?"& ":"")+p[C],p=p.join(S>2?", ":" "),o.replace(Rt,`{
/* [wrapped with `+p+`] */
`)}function Py(o){return de(o)||Pn(o)||!!(Mc&&o&&o[Mc])}function Ki(o,p){var S=typeof o;return p=p!=null?p:y,!!p&&(S=="number"||S!="symbol"&&Ze.test(o))&&o>-1&&o%1==0&&o<p}function Lr(o,p,S){if(!cr(S))return!1;var C=typeof p;return(C=="number"?jr(S)&&Ki(p,S.length):C=="string"&&p in S)?Si(S[p],o):!1}function $f(o,p){if(de(o))return!1;var S=typeof o;return S=="number"||S=="symbol"||S=="boolean"||o==null||ti(o)?!0:Ot.test(o)||!xt.test(o)||p!=null&&o in nr(p)}function Oy(o){var p=typeof o;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?o!=="__proto__":o===null}function zf(o){var p=eo(o),S=V[p];if(typeof S!="function"||!(p in Ie.prototype))return!1;if(o===S)return!0;var C=kf(S);return!!C&&o===C[0]}function Ty(o){return!!bc&&bc in o}var Cy=Ta?ji:sh;function Cs(o){var p=o&&o.constructor,S=typeof p=="function"&&p.prototype||Yn;return o===S}function bl(o){return o===o&&!cr(o)}function yl(o,p){return function(S){return S==null?!1:S[o]===p&&(p!==a||o in nr(S))}}function By(o){var p=oo(o,function(C){return S.size===w&&S.clear(),C}),S=p.cache;return p}function qy(o,p){var S=o[1],C=p[1],U=S|C,W=U<(B|D|P),X=C==P&&S==k||C==P&&S==z&&o[7].length<=p[8]||C==(P|z)&&p[7].length<=p[8]&&S==k;if(!(W||X))return o;C&B&&(o[2]=p[2],U|=S&B?0:q);var it=p[3];if(it){var ft=o[3];o[3]=ft?el(ft,it,p[4]):it,o[4]=ft?nn(o[3],b):p[4]}return it=p[5],it&&(ft=o[5],o[5]=ft?rl(ft,it,p[6]):it,o[6]=ft?nn(o[5],b):p[6]),it=p[7],it&&(o[7]=it),C&P&&(o[8]=o[8]==null?p[8]:Or(o[8],p[8])),o[9]==null&&(o[9]=p[9]),o[0]=p[0],o[1]=U,o}function Ny(o){var p=[];if(o!=null)for(var S in nr(o))p.push(S);return p}function Dy(o){return Ba.call(o)}function wl(o,p,S){return p=Er(p===a?o.length-1:p,0),function(){for(var C=arguments,U=-1,W=Er(C.length-p,0),X=Dt(W);++U<W;)X[U]=C[p+U];U=-1;for(var it=Dt(p+1);++U<p;)it[U]=C[U];return it[p]=S(X),Sr(o,this,it)}}function _l(o,p){return p.length<2?o:An(o,ci(p,0,-1))}function Ly(o,p){for(var S=o.length,C=Or(p.length,S),U=Kr(o);C--;){var W=p[C];o[C]=Ki(W,S)?U[W]:a}return o}function Hf(o,p){if(!(p==="constructor"&&typeof o[p]=="function")&&p!="__proto__")return o[p]}var Ml=El(jc),Bs=Xm||function(o,p){return Pe.setTimeout(o,p)},Kf=El(ay);function xl(o,p,S){var C=p+"";return Kf(o,Ry(C,ky(Sy(C),S)))}function El(o){var p=0,S=0;return function(){var C=rb(),U=r-(C-S);if(S=C,U>0){if(++p>=t)return arguments[0]}else p=0;return o.apply(a,arguments)}}function io(o,p){var S=-1,C=o.length,U=C-1;for(p=p===a?C:p;++S<p;){var W=Af(S,U),X=o[W];o[W]=o[S],o[S]=X}return o.length=p,o}var Sl=By(function(o){var p=[];return o.charCodeAt(0)===46&&p.push(""),o.replace(xe,function(S,C,U,W){p.push(U?W.replace(Ft,"$1"):C||S)}),p});function Bi(o){if(typeof o=="string"||ti(o))return o;var p=o+"";return p=="0"&&1/o==-m?"-0":p}function Rn(o){if(o!=null){try{return Ca.call(o)}catch{}try{return o+""}catch{}}return""}function ky(o,p){return oi(H,function(S){var C="_."+S[0];p&S[1]&&!Ia(o,C)&&o.push(C)}),o.sort()}function Al(o){if(o instanceof Ie)return o.clone();var p=new hi(o.__wrapped__,o.__chain__);return p.__actions__=Kr(o.__actions__),p.__index__=o.__index__,p.__values__=o.__values__,p}function Uy(o,p,S){(S?Lr(o,p,S):p===a)?p=1:p=Er(be(p),0);var C=o==null?0:o.length;if(!C||p<1)return[];for(var U=0,W=0,X=Dt(Ua(C/p));U<C;)X[W++]=ci(o,U,U+=p);return X}function Fy(o){for(var p=-1,S=o==null?0:o.length,C=0,U=[];++p<S;){var W=o[p];W&&(U[C++]=W)}return U}function $y(){var o=arguments.length;if(!o)return[];for(var p=Dt(o-1),S=arguments[0],C=o;C--;)p[C-1]=arguments[C];return rn(de(S)?Kr(S):[S],Rr(p,1))}var zy=Me(function(o,p){return gr(o)?Is(o,Rr(p,1,gr,!0)):[]}),Hy=Me(function(o,p){var S=li(p);return gr(S)&&(S=a),gr(o)?Is(o,Rr(p,1,gr,!0),oe(S,2)):[]}),Ky=Me(function(o,p){var S=li(p);return gr(S)&&(S=a),gr(o)?Is(o,Rr(p,1,gr,!0),a,S):[]});function jy(o,p,S){var C=o==null?0:o.length;return C?(p=S||p===a?1:be(p),ci(o,p<0?0:p,C)):[]}function Vy(o,p,S){var C=o==null?0:o.length;return C?(p=S||p===a?1:be(p),p=C-p,ci(o,0,p<0?0:p)):[]}function Gy(o,p){return o&&o.length?Wa(o,oe(p,3),!0,!0):[]}function Zy(o,p){return o&&o.length?Wa(o,oe(p,3),!0):[]}function Wy(o,p,S,C){var U=o==null?0:o.length;return U?(S&&typeof S!="number"&&Lr(o,p,S)&&(S=0,C=U),$b(o,p,S,C)):[]}function Il(o,p,S){var C=o==null?0:o.length;if(!C)return-1;var U=S==null?0:be(S);return U<0&&(U=Er(C+U,0)),Ra(o,oe(p,3),U)}function Rl(o,p,S){var C=o==null?0:o.length;if(!C)return-1;var U=C-1;return S!==a&&(U=be(S),U=S<0?Er(C+U,0):Or(U,C-1)),Ra(o,oe(p,3),U,!0)}function Pl(o){var p=o==null?0:o.length;return p?Rr(o,1):[]}function Yy(o){var p=o==null?0:o.length;return p?Rr(o,m):[]}function Jy(o,p){var S=o==null?0:o.length;return S?(p=p===a?1:be(p),Rr(o,p)):[]}function Xy(o){for(var p=-1,S=o==null?0:o.length,C={};++p<S;){var U=o[p];C[U[0]]=U[1]}return C}function Ol(o){return o&&o.length?o[0]:a}function Qy(o,p,S){var C=o==null?0:o.length;if(!C)return-1;var U=S==null?0:be(S);return U<0&&(U=Er(C+U,0)),Vn(o,p,U)}function t2(o){var p=o==null?0:o.length;return p?ci(o,0,-1):[]}var e2=Me(function(o){var p=ur(o,Tf);return p.length&&p[0]===o[0]?_f(p):[]}),r2=Me(function(o){var p=li(o),S=ur(o,Tf);return p===li(S)?p=a:S.pop(),S.length&&S[0]===o[0]?_f(S,oe(p,2)):[]}),i2=Me(function(o){var p=li(o),S=ur(o,Tf);return p=typeof p=="function"?p:a,p&&S.pop(),S.length&&S[0]===o[0]?_f(S,a,p):[]});function n2(o,p){return o==null?"":tb.call(o,p)}function li(o){var p=o==null?0:o.length;return p?o[p-1]:a}function s2(o,p,S){var C=o==null?0:o.length;if(!C)return-1;var U=C;return S!==a&&(U=be(S),U=U<0?Er(C+U,0):Or(U,C-1)),p===p?km(o,p,U):Ra(o,uc,U,!0)}function a2(o,p){return o&&o.length?$c(o,be(p)):a}var o2=Me(Tl);function Tl(o,p){return o&&o.length&&p&&p.length?Sf(o,p):o}function f2(o,p,S){return o&&o.length&&p&&p.length?Sf(o,p,oe(S,2)):o}function h2(o,p,S){return o&&o.length&&p&&p.length?Sf(o,p,a,S):o}var u2=Hi(function(o,p){var S=o==null?0:o.length,C=mf(o,p);return Kc(o,ur(p,function(U){return Ki(U,S)?+U:U}).sort(tl)),C});function c2(o,p){var S=[];if(!(o&&o.length))return S;var C=-1,U=[],W=o.length;for(p=oe(p,3);++C<W;){var X=o[C];p(X,C,o)&&(S.push(X),U.push(C))}return Kc(o,U),S}function jf(o){return o==null?o:nb.call(o)}function l2(o,p,S){var C=o==null?0:o.length;return C?(S&&typeof S!="number"&&Lr(o,p,S)?(p=0,S=C):(p=p==null?0:be(p),S=S===a?C:be(S)),ci(o,p,S)):[]}function d2(o,p){return Za(o,p)}function p2(o,p,S){return Rf(o,p,oe(S,2))}function v2(o,p){var S=o==null?0:o.length;if(S){var C=Za(o,p);if(C<S&&Si(o[C],p))return C}return-1}function g2(o,p){return Za(o,p,!0)}function m2(o,p,S){return Rf(o,p,oe(S,2),!0)}function b2(o,p){var S=o==null?0:o.length;if(S){var C=Za(o,p,!0)-1;if(Si(o[C],p))return C}return-1}function y2(o){return o&&o.length?Vc(o):[]}function w2(o,p){return o&&o.length?Vc(o,oe(p,2)):[]}function _2(o){var p=o==null?0:o.length;return p?ci(o,1,p):[]}function M2(o,p,S){return o&&o.length?(p=S||p===a?1:be(p),ci(o,0,p<0?0:p)):[]}function x2(o,p,S){var C=o==null?0:o.length;return C?(p=S||p===a?1:be(p),p=C-p,ci(o,p<0?0:p,C)):[]}function E2(o,p){return o&&o.length?Wa(o,oe(p,3),!1,!0):[]}function S2(o,p){return o&&o.length?Wa(o,oe(p,3)):[]}var A2=Me(function(o){return on(Rr(o,1,gr,!0))}),I2=Me(function(o){var p=li(o);return gr(p)&&(p=a),on(Rr(o,1,gr,!0),oe(p,2))}),R2=Me(function(o){var p=li(o);return p=typeof p=="function"?p:a,on(Rr(o,1,gr,!0),a,p)});function P2(o){return o&&o.length?on(o):[]}function O2(o,p){return o&&o.length?on(o,oe(p,2)):[]}function T2(o,p){return p=typeof p=="function"?p:a,o&&o.length?on(o,a,p):[]}function Vf(o){if(!(o&&o.length))return[];var p=0;return o=en(o,function(S){if(gr(S))return p=Er(S.length,p),!0}),hf(p,function(S){return ur(o,af(S))})}function Cl(o,p){if(!(o&&o.length))return[];var S=Vf(o);return p==null?S:ur(S,function(C){return Sr(p,a,C)})}var C2=Me(function(o,p){return gr(o)?Is(o,p):[]}),B2=Me(function(o){return Of(en(o,gr))}),q2=Me(function(o){var p=li(o);return gr(p)&&(p=a),Of(en(o,gr),oe(p,2))}),N2=Me(function(o){var p=li(o);return p=typeof p=="function"?p:a,Of(en(o,gr),a,p)}),D2=Me(Vf);function L2(o,p){return Yc(o||[],p||[],As)}function k2(o,p){return Yc(o||[],p||[],Os)}var U2=Me(function(o){var p=o.length,S=p>1?o[p-1]:a;return S=typeof S=="function"?(o.pop(),S):a,Cl(o,S)});function Bl(o){var p=V(o);return p.__chain__=!0,p}function F2(o,p){return p(o),o}function no(o,p){return p(o)}var $2=Hi(function(o){var p=o.length,S=p?o[0]:0,C=this.__wrapped__,U=function(W){return mf(W,o)};return p>1||this.__actions__.length||!(C instanceof Ie)||!Ki(S)?this.thru(U):(C=C.slice(S,+S+(p?1:0)),C.__actions__.push({func:no,args:[U],thisArg:a}),new hi(C,this.__chain__).thru(function(W){return p&&!W.length&&W.push(a),W}))});function z2(){return Bl(this)}function H2(){return new hi(this.value(),this.__chain__)}function K2(){this.__values__===a&&(this.__values__=Gl(this.value()));var o=this.__index__>=this.__values__.length,p=o?a:this.__values__[this.__index__++];return{done:o,value:p}}function j2(){return this}function V2(o){for(var p,S=this;S instanceof Ha;){var C=Al(S);C.__index__=0,C.__values__=a,p?U.__wrapped__=C:p=C;var U=C;S=S.__wrapped__}return U.__wrapped__=o,p}function G2(){var o=this.__wrapped__;if(o instanceof Ie){var p=o;return this.__actions__.length&&(p=new Ie(this)),p=p.reverse(),p.__actions__.push({func:no,args:[jf],thisArg:a}),new hi(p,this.__chain__)}return this.thru(jf)}function Z2(){return Wc(this.__wrapped__,this.__actions__)}var W2=Ya(function(o,p,S){Ue.call(o,S)?++o[S]:$i(o,S,1)});function Y2(o,p,S){var C=de(o)?fc:Fb;return S&&Lr(o,p,S)&&(p=a),C(o,oe(p,3))}function J2(o,p){var S=de(o)?en:Cc;return S(o,oe(p,3))}var X2=al(Il),Q2=al(Rl);function t6(o,p){return Rr(so(o,p),1)}function e6(o,p){return Rr(so(o,p),m)}function r6(o,p,S){return S=S===a?1:be(S),Rr(so(o,p),S)}function ql(o,p){var S=de(o)?oi:an;return S(o,oe(p,3))}function Nl(o,p){var S=de(o)?_m:Tc;return S(o,oe(p,3))}var i6=Ya(function(o,p,S){Ue.call(o,S)?o[S].push(p):$i(o,S,[p])});function n6(o,p,S,C){o=jr(o)?o:ns(o),S=S&&!C?be(S):0;var U=o.length;return S<0&&(S=Er(U+S,0)),uo(o)?S<=U&&o.indexOf(p,S)>-1:!!U&&Vn(o,p,S)>-1}var s6=Me(function(o,p,S){var C=-1,U=typeof p=="function",W=jr(o)?Dt(o.length):[];return an(o,function(X){W[++C]=U?Sr(p,X,S):Rs(X,p,S)}),W}),a6=Ya(function(o,p,S){$i(o,S,p)});function so(o,p){var S=de(o)?ur:kc;return S(o,oe(p,3))}function o6(o,p,S,C){return o==null?[]:(de(p)||(p=p==null?[]:[p]),S=C?a:S,de(S)||(S=S==null?[]:[S]),zc(o,p,S))}var f6=Ya(function(o,p,S){o[S?0:1].push(p)},function(){return[[],[]]});function h6(o,p,S){var C=de(o)?nf:lc,U=arguments.length<3;return C(o,oe(p,4),S,U,an)}function u6(o,p,S){var C=de(o)?Mm:lc,U=arguments.length<3;return C(o,oe(p,4),S,U,Tc)}function c6(o,p){var S=de(o)?en:Cc;return S(o,fo(oe(p,3)))}function l6(o){var p=de(o)?Ic:ny;return p(o)}function d6(o,p,S){(S?Lr(o,p,S):p===a)?p=1:p=be(p);var C=de(o)?Nb:sy;return C(o,p)}function p6(o){var p=de(o)?Db:oy;return p(o)}function v6(o){if(o==null)return 0;if(jr(o))return uo(o)?Zn(o):o.length;var p=Tr(o);return p==Jt||p==ut?o.size:xf(o).length}function g6(o,p,S){var C=de(o)?sf:fy;return S&&Lr(o,p,S)&&(p=a),C(o,oe(p,3))}var m6=Me(function(o,p){if(o==null)return[];var S=p.length;return S>1&&Lr(o,p[0],p[1])?p=[]:S>2&&Lr(p[0],p[1],p[2])&&(p=[p[0]]),zc(o,Rr(p,1),[])}),ao=Jm||function(){return Pe.Date.now()};function b6(o,p){if(typeof p!="function")throw new fi(x);return o=be(o),function(){if(--o<1)return p.apply(this,arguments)}}function Dl(o,p,S){return p=S?a:p,p=o&&p==null?o.length:p,zi(o,P,a,a,a,a,p)}function Ll(o,p){var S;if(typeof p!="function")throw new fi(x);return o=be(o),function(){return--o>0&&(S=p.apply(this,arguments)),o<=1&&(p=a),S}}var Gf=Me(function(o,p,S){var C=B;if(S.length){var U=nn(S,rs(Gf));C|=K}return zi(o,C,p,S,U)}),kl=Me(function(o,p,S){var C=B|D;if(S.length){var U=nn(S,rs(kl));C|=K}return zi(p,C,o,S,U)});function Ul(o,p,S){p=S?a:p;var C=zi(o,k,a,a,a,a,a,p);return C.placeholder=Ul.placeholder,C}function Fl(o,p,S){p=S?a:p;var C=zi(o,N,a,a,a,a,a,p);return C.placeholder=Fl.placeholder,C}function $l(o,p,S){var C,U,W,X,it,ft,Ht=0,Kt=!1,Vt=!1,Gt=!0;if(typeof o!="function")throw new fi(x);p=di(p)||0,cr(S)&&(Kt=!!S.leading,Vt="maxWait"in S,W=Vt?Er(di(S.maxWait)||0,p):W,Gt="trailing"in S?!!S.trailing:Gt);function te(mr){var Ai=C,Gi=U;return C=U=a,Ht=mr,X=o.apply(Gi,Ai),X}function fe(mr){return Ht=mr,it=Bs(Se,p),Kt?te(mr):X}function _e(mr){var Ai=mr-ft,Gi=mr-Ht,ad=p-Ai;return Vt?Or(ad,W-Gi):ad}function he(mr){var Ai=mr-ft,Gi=mr-Ht;return ft===a||Ai>=p||Ai<0||Vt&&Gi>=W}function Se(){var mr=ao();if(he(mr))return Oe(mr);it=Bs(Se,_e(mr))}function Oe(mr){return it=a,Gt&&C?te(mr):(C=U=a,X)}function ei(){it!==a&&Jc(it),Ht=0,C=ft=U=it=a}function kr(){return it===a?X:Oe(ao())}function ri(){var mr=ao(),Ai=he(mr);if(C=arguments,U=this,ft=mr,Ai){if(it===a)return fe(ft);if(Vt)return Jc(it),it=Bs(Se,p),te(ft)}return it===a&&(it=Bs(Se,p)),X}return ri.cancel=ei,ri.flush=kr,ri}var y6=Me(function(o,p){return Oc(o,1,p)}),w6=Me(function(o,p,S){return Oc(o,di(p)||0,S)});function _6(o){return zi(o,Y)}function oo(o,p){if(typeof o!="function"||p!=null&&typeof p!="function")throw new fi(x);var S=function(){var C=arguments,U=p?p.apply(this,C):C[0],W=S.cache;if(W.has(U))return W.get(U);var X=o.apply(this,C);return S.cache=W.set(U,X)||W,X};return S.cache=new(oo.Cache||Fi),S}oo.Cache=Fi;function fo(o){if(typeof o!="function")throw new fi(x);return function(){var p=arguments;switch(p.length){case 0:return!o.call(this);case 1:return!o.call(this,p[0]);case 2:return!o.call(this,p[0],p[1]);case 3:return!o.call(this,p[0],p[1],p[2])}return!o.apply(this,p)}}function M6(o){return Ll(2,o)}var x6=hy(function(o,p){p=p.length==1&&de(p[0])?ur(p[0],Xr(oe())):ur(Rr(p,1),Xr(oe()));var S=p.length;return Me(function(C){for(var U=-1,W=Or(C.length,S);++U<W;)C[U]=p[U].call(this,C[U]);return Sr(o,this,C)})}),Zf=Me(function(o,p){var S=nn(p,rs(Zf));return zi(o,K,a,p,S)}),zl=Me(function(o,p){var S=nn(p,rs(zl));return zi(o,$,a,p,S)}),E6=Hi(function(o,p){return zi(o,z,a,a,a,p)});function S6(o,p){if(typeof o!="function")throw new fi(x);return p=p===a?p:be(p),Me(o,p)}function A6(o,p){if(typeof o!="function")throw new fi(x);return p=p==null?0:Er(be(p),0),Me(function(S){var C=S[p],U=hn(S,0,p);return C&&rn(U,C),Sr(o,this,U)})}function I6(o,p,S){var C=!0,U=!0;if(typeof o!="function")throw new fi(x);return cr(S)&&(C="leading"in S?!!S.leading:C,U="trailing"in S?!!S.trailing:U),$l(o,p,{leading:C,maxWait:p,trailing:U})}function R6(o){return Dl(o,1)}function P6(o,p){return Zf(Cf(p),o)}function O6(){if(!arguments.length)return[];var o=arguments[0];return de(o)?o:[o]}function T6(o){return ui(o,I)}function C6(o,p){return p=typeof p=="function"?p:a,ui(o,I,p)}function B6(o){return ui(o,A|I)}function q6(o,p){return p=typeof p=="function"?p:a,ui(o,A|I,p)}function N6(o,p){return p==null||Pc(o,p,Ar(p))}function Si(o,p){return o===p||o!==o&&p!==p}var D6=to(wf),L6=to(function(o,p){return o>=p}),Pn=Nc(function(){return arguments}())?Nc:function(o){return dr(o)&&Ue.call(o,"callee")&&!_c.call(o,"callee")},de=Dt.isArray,k6=Nr?Xr(Nr):Vb;function jr(o){return o!=null&&ho(o.length)&&!ji(o)}function gr(o){return dr(o)&&jr(o)}function U6(o){return o===!0||o===!1||dr(o)&&Dr(o)==et}var un=Qm||sh,F6=Mi?Xr(Mi):Gb;function $6(o){return dr(o)&&o.nodeType===1&&!qs(o)}function z6(o){if(o==null)return!0;if(jr(o)&&(de(o)||typeof o=="string"||typeof o.splice=="function"||un(o)||is(o)||Pn(o)))return!o.length;var p=Tr(o);if(p==Jt||p==ut)return!o.size;if(Cs(o))return!xf(o).length;for(var S in o)if(Ue.call(o,S))return!1;return!0}function H6(o,p){return Ps(o,p)}function K6(o,p,S){S=typeof S=="function"?S:a;var C=S?S(o,p):a;return C===a?Ps(o,p,a,S):!!C}function Wf(o){if(!dr(o))return!1;var p=Dr(o);return p==Q||p==O||typeof o.message=="string"&&typeof o.name=="string"&&!qs(o)}function j6(o){return typeof o=="number"&&xc(o)}function ji(o){if(!cr(o))return!1;var p=Dr(o);return p==rt||p==st||p==Z||p==Mt}function Hl(o){return typeof o=="number"&&o==be(o)}function ho(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=y}function cr(o){var p=typeof o;return o!=null&&(p=="object"||p=="function")}function dr(o){return o!=null&&typeof o=="object"}var Kl=ai?Xr(ai):Wb;function V6(o,p){return o===p||Mf(o,p,Uf(p))}function G6(o,p,S){return S=typeof S=="function"?S:a,Mf(o,p,Uf(p),S)}function Z6(o){return jl(o)&&o!=+o}function W6(o){if(Cy(o))throw new ce(n);return Dc(o)}function Y6(o){return o===null}function J6(o){return o==null}function jl(o){return typeof o=="number"||dr(o)&&Dr(o)==gt}function qs(o){if(!dr(o)||Dr(o)!=ee)return!1;var p=Da(o);if(p===null)return!0;var S=Ue.call(p,"constructor")&&p.constructor;return typeof S=="function"&&S instanceof S&&Ca.call(S)==Gm}var Yf=Oi?Xr(Oi):Yb;function X6(o){return Hl(o)&&o>=-y&&o<=y}var Vl=ys?Xr(ys):Jb;function uo(o){return typeof o=="string"||!de(o)&&dr(o)&&Dr(o)==pt}function ti(o){return typeof o=="symbol"||dr(o)&&Dr(o)==Xt}var is=_n?Xr(_n):Xb;function Q6(o){return o===a}function t3(o){return dr(o)&&Tr(o)==lt}function e3(o){return dr(o)&&Dr(o)==Qt}var r3=to(Ef),i3=to(function(o,p){return o<=p});function Gl(o){if(!o)return[];if(jr(o))return uo(o)?xi(o):Kr(o);if(_s&&o[_s])return Nm(o[_s]());var p=Tr(o),S=p==Jt?cf:p==ut?Pa:ns;return S(o)}function Vi(o){if(!o)return o===0?o:0;if(o=di(o),o===m||o===-m){var p=o<0?-1:1;return p*u}return o===o?o:0}function be(o){var p=Vi(o),S=p%1;return p===p?S?p-S:p:0}function Zl(o){return o?Sn(be(o),0,c):0}function di(o){if(typeof o=="number")return o;if(ti(o))return e;if(cr(o)){var p=typeof o.valueOf=="function"?o.valueOf():o;o=cr(p)?p+"":p}if(typeof o!="string")return o===0?o:+o;o=dc(o);var S=je.test(o);return S||Ge.test(o)?le(o.slice(2),S?2:8):Ke.test(o)?e:+o}function Wl(o){return Ci(o,Vr(o))}function n3(o){return o?Sn(be(o),-y,y):o===0?o:0}function ke(o){return o==null?"":Qr(o)}var s3=ts(function(o,p){if(Cs(p)||jr(p)){Ci(p,Ar(p),o);return}for(var S in p)Ue.call(p,S)&&As(o,S,p[S])}),Yl=ts(function(o,p){Ci(p,Vr(p),o)}),co=ts(function(o,p,S,C){Ci(p,Vr(p),o,C)}),a3=ts(function(o,p,S,C){Ci(p,Ar(p),o,C)}),o3=Hi(mf);function f3(o,p){var S=Qn(o);return p==null?S:Rc(S,p)}var h3=Me(function(o,p){o=nr(o);var S=-1,C=p.length,U=C>2?p[2]:a;for(U&&Lr(p[0],p[1],U)&&(C=1);++S<C;)for(var W=p[S],X=Vr(W),it=-1,ft=X.length;++it<ft;){var Ht=X[it],Kt=o[Ht];(Kt===a||Si(Kt,Yn[Ht])&&!Ue.call(o,Ht))&&(o[Ht]=W[Ht])}return o}),u3=Me(function(o){return o.push(a,dl),Sr(Jl,a,o)});function c3(o,p){return hc(o,oe(p,3),Ti)}function l3(o,p){return hc(o,oe(p,3),yf)}function d3(o,p){return o==null?o:bf(o,oe(p,3),Vr)}function p3(o,p){return o==null?o:Bc(o,oe(p,3),Vr)}function v3(o,p){return o&&Ti(o,oe(p,3))}function g3(o,p){return o&&yf(o,oe(p,3))}function m3(o){return o==null?[]:Va(o,Ar(o))}function b3(o){return o==null?[]:Va(o,Vr(o))}function Jf(o,p,S){var C=o==null?a:An(o,p);return C===a?S:C}function y3(o,p){return o!=null&&gl(o,p,zb)}function Xf(o,p){return o!=null&&gl(o,p,Hb)}var w3=fl(function(o,p,S){p!=null&&typeof p.toString!="function"&&(p=Ba.call(p)),o[p]=S},th(Gr)),_3=fl(function(o,p,S){p!=null&&typeof p.toString!="function"&&(p=Ba.call(p)),Ue.call(o,p)?o[p].push(S):o[p]=[S]},oe),M3=Me(Rs);function Ar(o){return jr(o)?Ac(o):xf(o)}function Vr(o){return jr(o)?Ac(o,!0):Qb(o)}function x3(o,p){var S={};return p=oe(p,3),Ti(o,function(C,U,W){$i(S,p(C,U,W),C)}),S}function E3(o,p){var S={};return p=oe(p,3),Ti(o,function(C,U,W){$i(S,U,p(C,U,W))}),S}var S3=ts(function(o,p,S){Ga(o,p,S)}),Jl=ts(function(o,p,S,C){Ga(o,p,S,C)}),A3=Hi(function(o,p){var S={};if(o==null)return S;var C=!1;p=ur(p,function(W){return W=fn(W,o),C||(C=W.length>1),W}),Ci(o,Lf(o),S),C&&(S=ui(S,A|E|I,wy));for(var U=p.length;U--;)Pf(S,p[U]);return S});function I3(o,p){return Xl(o,fo(oe(p)))}var R3=Hi(function(o,p){return o==null?{}:ey(o,p)});function Xl(o,p){if(o==null)return{};var S=ur(Lf(o),function(C){return[C]});return p=oe(p),Hc(o,S,function(C,U){return p(C,U[0])})}function P3(o,p,S){p=fn(p,o);var C=-1,U=p.length;for(U||(U=1,o=a);++C<U;){var W=o==null?a:o[Bi(p[C])];W===a&&(C=U,W=S),o=ji(W)?W.call(o):W}return o}function O3(o,p,S){return o==null?o:Os(o,p,S)}function T3(o,p,S,C){return C=typeof C=="function"?C:a,o==null?o:Os(o,p,S,C)}var Ql=cl(Ar),td=cl(Vr);function C3(o,p,S){var C=de(o),U=C||un(o)||is(o);if(p=oe(p,4),S==null){var W=o&&o.constructor;U?S=C?new W:[]:cr(o)?S=ji(W)?Qn(Da(o)):{}:S={}}return(U?oi:Ti)(o,function(X,it,ft){return p(S,X,it,ft)}),S}function B3(o,p){return o==null?!0:Pf(o,p)}function q3(o,p,S){return o==null?o:Zc(o,p,Cf(S))}function N3(o,p,S,C){return C=typeof C=="function"?C:a,o==null?o:Zc(o,p,Cf(S),C)}function ns(o){return o==null?[]:uf(o,Ar(o))}function D3(o){return o==null?[]:uf(o,Vr(o))}function L3(o,p,S){return S===a&&(S=p,p=a),S!==a&&(S=di(S),S=S===S?S:0),p!==a&&(p=di(p),p=p===p?p:0),Sn(di(o),p,S)}function k3(o,p,S){return p=Vi(p),S===a?(S=p,p=0):S=Vi(S),o=di(o),Kb(o,p,S)}function U3(o,p,S){if(S&&typeof S!="boolean"&&Lr(o,p,S)&&(p=S=a),S===a&&(typeof p=="boolean"?(S=p,p=a):typeof o=="boolean"&&(S=o,o=a)),o===a&&p===a?(o=0,p=1):(o=Vi(o),p===a?(p=o,o=0):p=Vi(p)),o>p){var C=o;o=p,p=C}if(S||o%1||p%1){var U=Ec();return Or(o+U*(p-o+rr("1e-"+((U+"").length-1))),p)}return Af(o,p)}var F3=es(function(o,p,S){return p=p.toLowerCase(),o+(S?ed(p):p)});function ed(o){return Qf(ke(o).toLowerCase())}function rd(o){return o=ke(o),o&&o.replace(Ce,Om).replace(tf,"")}function $3(o,p,S){o=ke(o),p=Qr(p);var C=o.length;S=S===a?C:Sn(be(S),0,C);var U=S;return S-=p.length,S>=0&&o.slice(S,U)==p}function z3(o){return o=ke(o),o&&pe.test(o)?o.replace(Ut,Tm):o}function H3(o){return o=ke(o),o&&Tt.test(o)?o.replace(It,"\\$&"):o}var K3=es(function(o,p,S){return o+(S?"-":"")+p.toLowerCase()}),j3=es(function(o,p,S){return o+(S?" ":"")+p.toLowerCase()}),V3=sl("toLowerCase");function G3(o,p,S){o=ke(o),p=be(p);var C=p?Zn(o):0;if(!p||C>=p)return o;var U=(p-C)/2;return Qa(Fa(U),S)+o+Qa(Ua(U),S)}function Z3(o,p,S){o=ke(o),p=be(p);var C=p?Zn(o):0;return p&&C<p?o+Qa(p-C,S):o}function W3(o,p,S){o=ke(o),p=be(p);var C=p?Zn(o):0;return p&&C<p?Qa(p-C,S)+o:o}function Y3(o,p,S){return S||p==null?p=0:p&&(p=+p),ib(ke(o).replace(we,""),p||0)}function J3(o,p,S){return(S?Lr(o,p,S):p===a)?p=1:p=be(p),If(ke(o),p)}function X3(){var o=arguments,p=ke(o[0]);return o.length<3?p:p.replace(o[1],o[2])}var Q3=es(function(o,p,S){return o+(S?"_":"")+p.toLowerCase()});function tw(o,p,S){return S&&typeof S!="number"&&Lr(o,p,S)&&(p=S=a),S=S===a?c:S>>>0,S?(o=ke(o),o&&(typeof p=="string"||p!=null&&!Yf(p))&&(p=Qr(p),!p&&Gn(o))?hn(xi(o),0,S):o.split(p,S)):[]}var ew=es(function(o,p,S){return o+(S?" ":"")+Qf(p)});function rw(o,p,S){return o=ke(o),S=S==null?0:Sn(be(S),0,o.length),p=Qr(p),o.slice(S,S+p.length)==p}function iw(o,p,S){var C=V.templateSettings;S&&Lr(o,p,S)&&(p=a),o=ke(o),p=co({},p,C,ll);var U=co({},p.imports,C.imports,ll),W=Ar(U),X=uf(U,W),it,ft,Ht=0,Kt=p.interpolate||Ne,Vt="__p += '",Gt=lf((p.escape||Ne).source+"|"+Kt.source+"|"+(Kt===me?$t:Ne).source+"|"+(p.evaluate||Ne).source+"|$","g"),te="//# sourceURL="+(Ue.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ef+"]")+`
`;o.replace(Gt,function(he,Se,Oe,ei,kr,ri){return Oe||(Oe=ei),Vt+=o.slice(Ht,ri).replace(We,Cm),Se&&(it=!0,Vt+=`' +
__e(`+Se+`) +
'`),kr&&(ft=!0,Vt+=`';
`+kr+`;
__p += '`),Oe&&(Vt+=`' +
((__t = (`+Oe+`)) == null ? '' : __t) +
'`),Ht=ri+he.length,he}),Vt+=`';
`;var fe=Ue.call(p,"variable")&&p.variable;if(!fe)Vt=`with (obj) {
`+Vt+`
}
`;else if(pr.test(fe))throw new ce(M);Vt=(ft?Vt.replace(Fe,""):Vt).replace(Nt,"$1").replace(kt,"$1;"),Vt="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(it?", __e = _.escape":"")+(ft?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Vt+`return __p
}`;var _e=nd(function(){return Be(W,te+"return "+Vt).apply(a,X)});if(_e.source=Vt,Wf(_e))throw _e;return _e}function nw(o){return ke(o).toLowerCase()}function sw(o){return ke(o).toUpperCase()}function aw(o,p,S){if(o=ke(o),o&&(S||p===a))return dc(o);if(!o||!(p=Qr(p)))return o;var C=xi(o),U=xi(p),W=pc(C,U),X=vc(C,U)+1;return hn(C,W,X).join("")}function ow(o,p,S){if(o=ke(o),o&&(S||p===a))return o.slice(0,mc(o)+1);if(!o||!(p=Qr(p)))return o;var C=xi(o),U=vc(C,xi(p))+1;return hn(C,0,U).join("")}function fw(o,p,S){if(o=ke(o),o&&(S||p===a))return o.replace(we,"");if(!o||!(p=Qr(p)))return o;var C=xi(o),U=pc(C,xi(p));return hn(C,U).join("")}function hw(o,p){var S=nt,C=v;if(cr(p)){var U="separator"in p?p.separator:U;S="length"in p?be(p.length):S,C="omission"in p?Qr(p.omission):C}o=ke(o);var W=o.length;if(Gn(o)){var X=xi(o);W=X.length}if(S>=W)return o;var it=S-Zn(C);if(it<1)return C;var ft=X?hn(X,0,it).join(""):o.slice(0,it);if(U===a)return ft+C;if(X&&(it+=ft.length-it),Yf(U)){if(o.slice(it).search(U)){var Ht,Kt=ft;for(U.global||(U=lf(U.source,ke(Ae.exec(U))+"g")),U.lastIndex=0;Ht=U.exec(Kt);)var Vt=Ht.index;ft=ft.slice(0,Vt===a?it:Vt)}}else if(o.indexOf(Qr(U),it)!=it){var Gt=ft.lastIndexOf(U);Gt>-1&&(ft=ft.slice(0,Gt))}return ft+C}function uw(o){return o=ke(o),o&&Et.test(o)?o.replace(ar,Um):o}var cw=es(function(o,p,S){return o+(S?" ":"")+p.toUpperCase()}),Qf=sl("toUpperCase");function id(o,p,S){return o=ke(o),p=S?a:p,p===a?qm(o)?zm(o):Sm(o):o.match(p)||[]}var nd=Me(function(o,p){try{return Sr(o,a,p)}catch(S){return Wf(S)?S:new ce(S)}}),lw=Hi(function(o,p){return oi(p,function(S){S=Bi(S),$i(o,S,Gf(o[S],o))}),o});function dw(o){var p=o==null?0:o.length,S=oe();return o=p?ur(o,function(C){if(typeof C[1]!="function")throw new fi(x);return[S(C[0]),C[1]]}):[],Me(function(C){for(var U=-1;++U<p;){var W=o[U];if(Sr(W[0],this,C))return Sr(W[1],this,C)}})}function pw(o){return Ub(ui(o,A))}function th(o){return function(){return o}}function vw(o,p){return o==null||o!==o?p:o}var gw=ol(),mw=ol(!0);function Gr(o){return o}function eh(o){return Lc(typeof o=="function"?o:ui(o,A))}function bw(o){return Uc(ui(o,A))}function yw(o,p){return Fc(o,ui(p,A))}var ww=Me(function(o,p){return function(S){return Rs(S,o,p)}}),_w=Me(function(o,p){return function(S){return Rs(o,S,p)}});function rh(o,p,S){var C=Ar(p),U=Va(p,C);S==null&&!(cr(p)&&(U.length||!C.length))&&(S=p,p=o,o=this,U=Va(p,Ar(p)));var W=!(cr(S)&&"chain"in S)||!!S.chain,X=ji(o);return oi(U,function(it){var ft=p[it];o[it]=ft,X&&(o.prototype[it]=function(){var Ht=this.__chain__;if(W||Ht){var Kt=o(this.__wrapped__),Vt=Kt.__actions__=Kr(this.__actions__);return Vt.push({func:ft,args:arguments,thisArg:o}),Kt.__chain__=Ht,Kt}return ft.apply(o,rn([this.value()],arguments))})}),o}function Mw(){return Pe._===this&&(Pe._=Zm),this}function ih(){}function xw(o){return o=be(o),Me(function(p){return $c(p,o)})}var Ew=qf(ur),Sw=qf(fc),Aw=qf(sf);function sd(o){return $f(o)?af(Bi(o)):ry(o)}function Iw(o){return function(p){return o==null?a:An(o,p)}}var Rw=hl(),Pw=hl(!0);function nh(){return[]}function sh(){return!1}function Ow(){return{}}function Tw(){return""}function Cw(){return!0}function Bw(o,p){if(o=be(o),o<1||o>y)return[];var S=c,C=Or(o,c);p=oe(p),o-=c;for(var U=hf(C,p);++S<o;)p(S);return U}function qw(o){return de(o)?ur(o,Bi):ti(o)?[o]:Kr(Sl(ke(o)))}function Nw(o){var p=++Vm;return ke(o)+p}var Dw=Xa(function(o,p){return o+p},0),Lw=Nf("ceil"),kw=Xa(function(o,p){return o/p},1),Uw=Nf("floor");function Fw(o){return o&&o.length?ja(o,Gr,wf):a}function $w(o,p){return o&&o.length?ja(o,oe(p,2),wf):a}function zw(o){return cc(o,Gr)}function Hw(o,p){return cc(o,oe(p,2))}function Kw(o){return o&&o.length?ja(o,Gr,Ef):a}function jw(o,p){return o&&o.length?ja(o,oe(p,2),Ef):a}var Vw=Xa(function(o,p){return o*p},1),Gw=Nf("round"),Zw=Xa(function(o,p){return o-p},0);function Ww(o){return o&&o.length?ff(o,Gr):0}function Yw(o,p){return o&&o.length?ff(o,oe(p,2)):0}return V.after=b6,V.ary=Dl,V.assign=s3,V.assignIn=Yl,V.assignInWith=co,V.assignWith=a3,V.at=o3,V.before=Ll,V.bind=Gf,V.bindAll=lw,V.bindKey=kl,V.castArray=O6,V.chain=Bl,V.chunk=Uy,V.compact=Fy,V.concat=$y,V.cond=dw,V.conforms=pw,V.constant=th,V.countBy=W2,V.create=f3,V.curry=Ul,V.curryRight=Fl,V.debounce=$l,V.defaults=h3,V.defaultsDeep=u3,V.defer=y6,V.delay=w6,V.difference=zy,V.differenceBy=Hy,V.differenceWith=Ky,V.drop=jy,V.dropRight=Vy,V.dropRightWhile=Gy,V.dropWhile=Zy,V.fill=Wy,V.filter=J2,V.flatMap=t6,V.flatMapDeep=e6,V.flatMapDepth=r6,V.flatten=Pl,V.flattenDeep=Yy,V.flattenDepth=Jy,V.flip=_6,V.flow=gw,V.flowRight=mw,V.fromPairs=Xy,V.functions=m3,V.functionsIn=b3,V.groupBy=i6,V.initial=t2,V.intersection=e2,V.intersectionBy=r2,V.intersectionWith=i2,V.invert=w3,V.invertBy=_3,V.invokeMap=s6,V.iteratee=eh,V.keyBy=a6,V.keys=Ar,V.keysIn=Vr,V.map=so,V.mapKeys=x3,V.mapValues=E3,V.matches=bw,V.matchesProperty=yw,V.memoize=oo,V.merge=S3,V.mergeWith=Jl,V.method=ww,V.methodOf=_w,V.mixin=rh,V.negate=fo,V.nthArg=xw,V.omit=A3,V.omitBy=I3,V.once=M6,V.orderBy=o6,V.over=Ew,V.overArgs=x6,V.overEvery=Sw,V.overSome=Aw,V.partial=Zf,V.partialRight=zl,V.partition=f6,V.pick=R3,V.pickBy=Xl,V.property=sd,V.propertyOf=Iw,V.pull=o2,V.pullAll=Tl,V.pullAllBy=f2,V.pullAllWith=h2,V.pullAt=u2,V.range=Rw,V.rangeRight=Pw,V.rearg=E6,V.reject=c6,V.remove=c2,V.rest=S6,V.reverse=jf,V.sampleSize=d6,V.set=O3,V.setWith=T3,V.shuffle=p6,V.slice=l2,V.sortBy=m6,V.sortedUniq=y2,V.sortedUniqBy=w2,V.split=tw,V.spread=A6,V.tail=_2,V.take=M2,V.takeRight=x2,V.takeRightWhile=E2,V.takeWhile=S2,V.tap=F2,V.throttle=I6,V.thru=no,V.toArray=Gl,V.toPairs=Ql,V.toPairsIn=td,V.toPath=qw,V.toPlainObject=Wl,V.transform=C3,V.unary=R6,V.union=A2,V.unionBy=I2,V.unionWith=R2,V.uniq=P2,V.uniqBy=O2,V.uniqWith=T2,V.unset=B3,V.unzip=Vf,V.unzipWith=Cl,V.update=q3,V.updateWith=N3,V.values=ns,V.valuesIn=D3,V.without=C2,V.words=id,V.wrap=P6,V.xor=B2,V.xorBy=q2,V.xorWith=N2,V.zip=D2,V.zipObject=L2,V.zipObjectDeep=k2,V.zipWith=U2,V.entries=Ql,V.entriesIn=td,V.extend=Yl,V.extendWith=co,rh(V,V),V.add=Dw,V.attempt=nd,V.camelCase=F3,V.capitalize=ed,V.ceil=Lw,V.clamp=L3,V.clone=T6,V.cloneDeep=B6,V.cloneDeepWith=q6,V.cloneWith=C6,V.conformsTo=N6,V.deburr=rd,V.defaultTo=vw,V.divide=kw,V.endsWith=$3,V.eq=Si,V.escape=z3,V.escapeRegExp=H3,V.every=Y2,V.find=X2,V.findIndex=Il,V.findKey=c3,V.findLast=Q2,V.findLastIndex=Rl,V.findLastKey=l3,V.floor=Uw,V.forEach=ql,V.forEachRight=Nl,V.forIn=d3,V.forInRight=p3,V.forOwn=v3,V.forOwnRight=g3,V.get=Jf,V.gt=D6,V.gte=L6,V.has=y3,V.hasIn=Xf,V.head=Ol,V.identity=Gr,V.includes=n6,V.indexOf=Qy,V.inRange=k3,V.invoke=M3,V.isArguments=Pn,V.isArray=de,V.isArrayBuffer=k6,V.isArrayLike=jr,V.isArrayLikeObject=gr,V.isBoolean=U6,V.isBuffer=un,V.isDate=F6,V.isElement=$6,V.isEmpty=z6,V.isEqual=H6,V.isEqualWith=K6,V.isError=Wf,V.isFinite=j6,V.isFunction=ji,V.isInteger=Hl,V.isLength=ho,V.isMap=Kl,V.isMatch=V6,V.isMatchWith=G6,V.isNaN=Z6,V.isNative=W6,V.isNil=J6,V.isNull=Y6,V.isNumber=jl,V.isObject=cr,V.isObjectLike=dr,V.isPlainObject=qs,V.isRegExp=Yf,V.isSafeInteger=X6,V.isSet=Vl,V.isString=uo,V.isSymbol=ti,V.isTypedArray=is,V.isUndefined=Q6,V.isWeakMap=t3,V.isWeakSet=e3,V.join=n2,V.kebabCase=K3,V.last=li,V.lastIndexOf=s2,V.lowerCase=j3,V.lowerFirst=V3,V.lt=r3,V.lte=i3,V.max=Fw,V.maxBy=$w,V.mean=zw,V.meanBy=Hw,V.min=Kw,V.minBy=jw,V.stubArray=nh,V.stubFalse=sh,V.stubObject=Ow,V.stubString=Tw,V.stubTrue=Cw,V.multiply=Vw,V.nth=a2,V.noConflict=Mw,V.noop=ih,V.now=ao,V.pad=G3,V.padEnd=Z3,V.padStart=W3,V.parseInt=Y3,V.random=U3,V.reduce=h6,V.reduceRight=u6,V.repeat=J3,V.replace=X3,V.result=P3,V.round=Gw,V.runInContext=ot,V.sample=l6,V.size=v6,V.snakeCase=Q3,V.some=g6,V.sortedIndex=d2,V.sortedIndexBy=p2,V.sortedIndexOf=v2,V.sortedLastIndex=g2,V.sortedLastIndexBy=m2,V.sortedLastIndexOf=b2,V.startCase=ew,V.startsWith=rw,V.subtract=Zw,V.sum=Ww,V.sumBy=Yw,V.template=iw,V.times=Bw,V.toFinite=Vi,V.toInteger=be,V.toLength=Zl,V.toLower=nw,V.toNumber=di,V.toSafeInteger=n3,V.toString=ke,V.toUpper=sw,V.trim=aw,V.trimEnd=ow,V.trimStart=fw,V.truncate=hw,V.unescape=uw,V.uniqueId=Nw,V.upperCase=cw,V.upperFirst=Qf,V.each=ql,V.eachRight=Nl,V.first=Ol,rh(V,function(){var o={};return Ti(V,function(p,S){Ue.call(V.prototype,S)||(o[S]=p)}),o}(),{chain:!1}),V.VERSION=f,oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){V[o].placeholder=V}),oi(["drop","take"],function(o,p){Ie.prototype[o]=function(S){S=S===a?1:Er(be(S),0);var C=this.__filtered__&&!p?new Ie(this):this.clone();return C.__filtered__?C.__takeCount__=Or(S,C.__takeCount__):C.__views__.push({size:Or(S,c),type:o+(C.__dir__<0?"Right":"")}),C},Ie.prototype[o+"Right"]=function(S){return this.reverse()[o](S).reverse()}}),oi(["filter","map","takeWhile"],function(o,p){var S=p+1,C=S==s||S==d;Ie.prototype[o]=function(U){var W=this.clone();return W.__iteratees__.push({iteratee:oe(U,3),type:S}),W.__filtered__=W.__filtered__||C,W}}),oi(["head","last"],function(o,p){var S="take"+(p?"Right":"");Ie.prototype[o]=function(){return this[S](1).value()[0]}}),oi(["initial","tail"],function(o,p){var S="drop"+(p?"":"Right");Ie.prototype[o]=function(){return this.__filtered__?new Ie(this):this[S](1)}}),Ie.prototype.compact=function(){return this.filter(Gr)},Ie.prototype.find=function(o){return this.filter(o).head()},Ie.prototype.findLast=function(o){return this.reverse().find(o)},Ie.prototype.invokeMap=Me(function(o,p){return typeof o=="function"?new Ie(this):this.map(function(S){return Rs(S,o,p)})}),Ie.prototype.reject=function(o){return this.filter(fo(oe(o)))},Ie.prototype.slice=function(o,p){o=be(o);var S=this;return S.__filtered__&&(o>0||p<0)?new Ie(S):(o<0?S=S.takeRight(-o):o&&(S=S.drop(o)),p!==a&&(p=be(p),S=p<0?S.dropRight(-p):S.take(p-o)),S)},Ie.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Ie.prototype.toArray=function(){return this.take(c)},Ti(Ie.prototype,function(o,p){var S=/^(?:filter|find|map|reject)|While$/.test(p),C=/^(?:head|last)$/.test(p),U=V[C?"take"+(p=="last"?"Right":""):p],W=C||/^find/.test(p);U&&(V.prototype[p]=function(){var X=this.__wrapped__,it=C?[1]:arguments,ft=X instanceof Ie,Ht=it[0],Kt=ft||de(X),Vt=function(Se){var Oe=U.apply(V,rn([Se],it));return C&&Gt?Oe[0]:Oe};Kt&&S&&typeof Ht=="function"&&Ht.length!=1&&(ft=Kt=!1);var Gt=this.__chain__,te=!!this.__actions__.length,fe=W&&!Gt,_e=ft&&!te;if(!W&&Kt){X=_e?X:new Ie(this);var he=o.apply(X,it);return he.__actions__.push({func:no,args:[Vt],thisArg:a}),new hi(he,Gt)}return fe&&_e?o.apply(this,it):(he=this.thru(Vt),fe?C?he.value()[0]:he.value():he)})}),oi(["pop","push","shift","sort","splice","unshift"],function(o){var p=Oa[o],S=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",C=/^(?:pop|shift)$/.test(o);V.prototype[o]=function(){var U=arguments;if(C&&!this.__chain__){var W=this.value();return p.apply(de(W)?W:[],U)}return this[S](function(X){return p.apply(de(X)?X:[],U)})}}),Ti(Ie.prototype,function(o,p){var S=V[p];if(S){var C=S.name+"";Ue.call(Xn,C)||(Xn[C]=[]),Xn[C].push({name:p,func:S})}}),Xn[Ja(a,D).name]=[{name:"wrapper",func:a}],Ie.prototype.clone=ub,Ie.prototype.reverse=cb,Ie.prototype.value=lb,V.prototype.at=$2,V.prototype.chain=z2,V.prototype.commit=H2,V.prototype.next=K2,V.prototype.plant=V2,V.prototype.reverse=G2,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=Z2,V.prototype.first=V.prototype.head,_s&&(V.prototype[_s]=j2),V},Wn=Hm();vr?((vr.exports=Wn)._=Wn,ir._=Wn):Pe._=Wn}).call(Gs)})(yu,yu.exports);var wE=Object.defineProperty,_E=Object.defineProperties,ME=Object.getOwnPropertyDescriptors,Iv=Object.getOwnPropertySymbols,xE=Object.prototype.hasOwnProperty,EE=Object.prototype.propertyIsEnumerable,Rv=(l,i,a)=>i in l?wE(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,xo=(l,i)=>{for(var a in i||(i={}))xE.call(i,a)&&Rv(l,a,i[a]);if(Iv)for(var a of Iv(i))EE.call(i,a)&&Rv(l,a,i[a]);return l},SE=(l,i)=>_E(l,ME(i));function yi(l,i,a){let f;const g=wu(l);return i.rpcMap&&(f=i.rpcMap[g]),f||(f=`${yE}?chainId=eip155:${g}&projectId=${a}`),f}function wu(l){return l.includes("eip155")?Number(l.split(":")[1]):Number(l)}function bm(l){return l.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)}function AE(l,i){const a=Object.keys(i.namespaces).filter(g=>g.includes(l));if(!a.length)return[];const f=[];return a.forEach(g=>{const n=i.namespaces[g].accounts;f.push(...n)}),f}function IE(l={},i={}){const a=Pv(l),f=Pv(i);return yu.exports.merge(a,f)}function Pv(l){var i,a,f,g;const n={};if(!us(l))return n;for(const[x,M]of Object.entries(l)){const _=Yu(x)?[x]:M.chains,w=M.methods||[],b=M.events||[],A=M.rpcMap||{},E=Zs(x);n[E]=SE(xo(xo({},n[E]),M),{chains:Z0(_,(i=n[E])==null?void 0:i.chains),methods:Z0(w,(a=n[E])==null?void 0:a.methods),events:Z0(b,(f=n[E])==null?void 0:f.events),rpcMap:xo(xo({},A),(g=n[E])==null?void 0:g.rpcMap)})}return n}function RE(l){return l.includes(":")?l.split(":")[2]:l}function PE(l){const i={};for(const[a,f]of Object.entries(l)){const g=f.methods||[],n=f.events||[],x=f.accounts||[],M=Yu(a)?[a]:f.chains?f.chains:bm(f.accounts);i[a]={chains:M,methods:g,events:n,accounts:x}}return i}function eu(l){return typeof l=="number"?l:l.includes("0x")?parseInt(l,16):l.includes(":")?Number(l.split(":")[1]):Number(l)}const ym={},yr=l=>ym[l],ru=(l,i)=>{ym[l]=i};class OE{constructor(i){this.name="polkadot",this.namespace=i.namespace,this.events=yr("events"),this.client=yr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(this.chainId=i,!this.httpProviders[i]){const f=a||yi(`${this.name}:${i}`,this.namespace);if(!f)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,f)}this.events.emit(gn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2])||[]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var f;i[a]=this.createHttpProvider(a,(f=this.namespace.rpcMap)==null?void 0:f[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const f=this.createHttpProvider(i,a);f&&(this.httpProviders[i]=f)}createHttpProvider(i,a){const f=a||yi(i,this.namespace);return typeof f>"u"?void 0:new vn(new $n(f,yr("disableProviderPing")))}}class TE{constructor(i){this.name="eip155",this.namespace=i.namespace,this.events=yr("events"),this.client=yr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(i){switch(i.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(i);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(i.request.method)?await this.client.request(i):this.getHttpProvider().request(i.request)}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}setDefaultChain(i,a){const f=wu(i);if(!this.httpProviders[f]){const g=a||yi(`${this.name}:${f}`,this.namespace,this.client.core.projectId);if(!g)throw new Error(`No RPC url provided for chainId: ${f}`);this.setHttpProvider(f,g)}this.chainId=f,this.events.emit(gn.DEFAULT_CHAIN_CHANGED,`${this.name}:${f}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}createHttpProvider(i,a){const f=a||yi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);return typeof f>"u"?void 0:new vn(new $n(f,yr("disableProviderPing")))}setHttpProvider(i,a){const f=this.createHttpProvider(i,a);f&&(this.httpProviders[i]=f)}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var f;const g=wu(a);i[g]=this.createHttpProvider(g,(f=this.namespace.rpcMap)==null?void 0:f[a])}),i}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}getHttpProvider(){const i=this.chainId,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}async handleSwitchChain(i){var a,f;let g=i.request.params?(a=i.request.params[0])==null?void 0:a.chainId:"0x0";g=g.startsWith("0x")?g:`0x${g}`;const n=parseInt(g,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:i.topic,request:{method:i.request.method,params:[{chainId:g}]},chainId:(f=this.namespace.chains)==null?void 0:f[0]}),this.setDefaultChain(`${n}`);else throw new Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(i){return this.namespace.chains.includes(`${this.name}:${i}`)}}class CE{constructor(i){this.name="solana",this.namespace=i.namespace,this.events=yr("events"),this.client=yr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(!this.httpProviders[i]){const f=a||yi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!f)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,f)}this.chainId=i,this.events.emit(gn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var f;i[a]=this.createHttpProvider(a,(f=this.namespace.rpcMap)==null?void 0:f[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const f=this.createHttpProvider(i,a);f&&(this.httpProviders[i]=f)}createHttpProvider(i,a){const f=a||yi(i,this.namespace,this.client.core.projectId);return typeof f>"u"?void 0:new vn(new $n(f,yr("disableProviderPing")))}}class BE{constructor(i){this.name="cosmos",this.namespace=i.namespace,this.events=yr("events"),this.client=yr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(this.chainId=i,!this.httpProviders[i]){const f=a||yi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!f)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,f)}this.events.emit(gn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var f;i[a]=this.createHttpProvider(a,(f=this.namespace.rpcMap)==null?void 0:f[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const f=this.createHttpProvider(i,a);f&&(this.httpProviders[i]=f)}createHttpProvider(i,a){const f=a||yi(i,this.namespace,this.client.core.projectId);return typeof f>"u"?void 0:new vn(new $n(f,yr("disableProviderPing")))}}class qE{constructor(i){this.name="cip34",this.namespace=i.namespace,this.events=yr("events"),this.client=yr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(this.chainId=i,!this.httpProviders[i]){const f=a||this.getCardanoRPCUrl(i);if(!f)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,f)}this.events.emit(gn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{const f=this.getCardanoRPCUrl(a);i[a]=this.createHttpProvider(a,f)}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}getCardanoRPCUrl(i){const a=this.namespace.rpcMap;if(a)return a[i]}setHttpProvider(i,a){const f=this.createHttpProvider(i,a);f&&(this.httpProviders[i]=f)}createHttpProvider(i,a){const f=a||this.getCardanoRPCUrl(i);return typeof f>"u"?void 0:new vn(new $n(f,yr("disableProviderPing")))}}class NE{constructor(i){this.name="elrond",this.namespace=i.namespace,this.events=yr("events"),this.client=yr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(!this.httpProviders[i]){const f=a||yi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!f)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,f)}this.chainId=i,this.events.emit(gn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var f;i[a]=this.createHttpProvider(a,(f=this.namespace.rpcMap)==null?void 0:f[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const f=this.createHttpProvider(i,a);f&&(this.httpProviders[i]=f)}createHttpProvider(i,a){const f=a||yi(i,this.namespace,this.client.core.projectId);return typeof f>"u"?void 0:new vn(new $n(f,yr("disableProviderPing")))}}class DE{constructor(i){this.name="multiversx",this.namespace=i.namespace,this.events=yr("events"),this.client=yr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,a){if(!this.httpProviders[i]){const f=a||yi(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!f)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,f)}this.chainId=i,this.events.emit(gn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(a=>a.split(":")[1]===this.chainId.toString()).map(a=>a.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(a=>{var f;i[a]=this.createHttpProvider(a,(f=this.namespace.rpcMap)==null?void 0:f[a])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,a=this.httpProviders[i];if(typeof a>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return a}setHttpProvider(i,a){const f=this.createHttpProvider(i,a);f&&(this.httpProviders[i]=f)}createHttpProvider(i,a){const f=a||yi(i,this.namespace,this.client.core.projectId);return typeof f>"u"?void 0:new vn(new $n(f,yr("disableProviderPing")))}}var LE=Object.defineProperty,kE=Object.defineProperties,UE=Object.getOwnPropertyDescriptors,Ov=Object.getOwnPropertySymbols,FE=Object.prototype.hasOwnProperty,$E=Object.prototype.propertyIsEnumerable,Tv=(l,i,a)=>i in l?LE(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,Eo=(l,i)=>{for(var a in i||(i={}))FE.call(i,a)&&Tv(l,a,i[a]);if(Ov)for(var a of Ov(i))$E.call(i,a)&&Tv(l,a,i[a]);return l},iu=(l,i)=>kE(l,UE(i));class ac{constructor(i){this.events=new qr.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=i,this.logger=typeof(i==null?void 0:i.logger)<"u"&&typeof(i==null?void 0:i.logger)!="string"?i.logger:Te.pino(Te.getDefaultLoggerOptions({level:(i==null?void 0:i.logger)||Sv})),this.disableProviderPing=(i==null?void 0:i.disableProviderPing)||!1}static async init(i){const a=new ac(i);return await a.initialize(),a}async request(i,a){const[f,g]=this.validateChain(a);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(f).request({request:Eo({},i),chainId:`${f}:${g}`,topic:this.session.topic})}sendAsync(i,a,f){this.request(i,f).then(g=>a(null,g)).catch(g=>a(g,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var i;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(i=this.session)==null?void 0:i.topic,reason:br("USER_DISCONNECTED")}),await this.cleanup()}async connect(i){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(i),await this.cleanupPendingPairings(),!i.skipPairing)return await this.pair(i.pairingTopic)}on(i,a){this.events.on(i,a)}once(i,a){this.events.once(i,a)}removeListener(i,a){this.events.removeListener(i,a)}off(i,a){this.events.off(i,a)}get isWalletConnect(){return!0}async pair(i){this.shouldAbortPairingAttempt=!1;let a=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(a>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:f,approval:g}=await this.client.connect({pairingTopic:i,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});f&&(this.uri=f,this.events.emit("display_uri",f)),await g().then(n=>{this.session=n,this.namespaces||(this.namespaces=PE(n.namespaces),this.persist("namespaces",this.namespaces))}).catch(n=>{if(n.message!==mm)throw n;a++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(i,a){try{if(!this.session)return;const[f,g]=this.validateChain(i);this.getProvider(f).setDefaultChain(g,a)}catch(f){if(!/Please call connect/.test(f.message))throw f}}async cleanupPendingPairings(i={}){this.logger.info("Cleaning up inactive pairings...");const a=this.client.pairing.getAll();if(Li(a)){for(const f of a)i.deletePairings?this.client.core.expirer.set(f.topic,0):await this.client.core.relayer.subscriber.unsubscribe(f.topic);this.logger.info(`Inactive pairings cleared: ${a.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const i=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[i]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await sc.init({logger:this.providerOpts.logger||Sv,relayUrl:this.providerOpts.relayUrl||gE,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const i=[...new Set(Object.keys(this.session.namespaces).map(a=>Zs(a)))];ru("client",this.client),ru("events",this.events),ru("disableProviderPing",this.disableProviderPing),i.forEach(a=>{if(!this.session)return;const f=AE(a,this.session),g=bm(f),n=IE(this.namespaces,this.optionalNamespaces),x=iu(Eo({},n[a]),{accounts:f,chains:g});switch(a){case"eip155":this.rpcProviders[a]=new TE({namespace:x});break;case"solana":this.rpcProviders[a]=new CE({namespace:x});break;case"cosmos":this.rpcProviders[a]=new BE({namespace:x});break;case"polkadot":this.rpcProviders[a]=new OE({namespace:x});break;case"cip34":this.rpcProviders[a]=new qE({namespace:x});break;case"elrond":this.rpcProviders[a]=new NE({namespace:x});break;case"multiversx":this.rpcProviders[a]=new DE({namespace:x});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",i=>{this.events.emit("session_ping",i)}),this.client.on("session_event",i=>{const{params:a}=i,{event:f}=a;if(f.name==="accountsChanged"){const g=f.data;g&&Li(g)&&this.events.emit("accountsChanged",g.map(RE))}else if(f.name==="chainChanged"){const g=a.chainId,n=a.event.data,x=Zs(g),M=eu(g)!==eu(n)?`${x}:${eu(n)}`:g;this.onChainChanged(M)}else this.events.emit(f.name,f.data);this.events.emit("session_event",i)}),this.client.on("session_update",({topic:i,params:a})=>{var f;const{namespaces:g}=a,n=(f=this.client)==null?void 0:f.session.get(i);this.session=iu(Eo({},n),{namespaces:g}),this.onSessionUpdate(),this.events.emit("session_update",{topic:i,params:a})}),this.client.on("session_delete",async i=>{await this.cleanup(),this.events.emit("session_delete",i),this.events.emit("disconnect",iu(Eo({},br("USER_DISCONNECTED")),{data:i.topic}))}),this.on(gn.DEFAULT_CHAIN_CHANGED,i=>{this.onChainChanged(i,!0)})}getProvider(i){if(!this.rpcProviders[i])throw new Error(`Provider not found: ${i}`);return this.rpcProviders[i]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(i=>{var a;this.getProvider(i).updateNamespace((a=this.session)==null?void 0:a.namespaces[i])})}setNamespaces(i){const{namespaces:a,optionalNamespaces:f,sessionProperties:g}=i;a&&Object.keys(a).length&&(this.namespaces=a),f&&Object.keys(f).length&&(this.optionalNamespaces=f),this.sessionProperties=g,this.persist("namespaces",a),this.persist("optionalNamespaces",f)}validateChain(i){const[a,f]=(i==null?void 0:i.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[a,f];if(a&&!Object.keys(this.namespaces||{}).map(x=>Zs(x)).includes(a))throw new Error(`Namespace '${a}' is not configured. Please call connect() first with namespace config.`);if(a&&f)return[a,f];const g=Zs(Object.keys(this.namespaces)[0]),n=this.rpcProviders[g].getDefaultChain();return[g,n]}async requestAccounts(){const[i]=this.validateChain();return await this.getProvider(i).requestAccounts()}onChainChanged(i,a=!1){var f;if(!this.namespaces)return;const[g,n]=this.validateChain(i);a||this.getProvider(g).setDefaultChain(n),((f=this.namespaces[g])!=null?f:this.namespaces[`${g}:${n}`]).defaultChain=n,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(i,a){this.client.core.storage.setItem(`${Av}/${i}`,a)}async getFromStore(i){return await this.client.core.storage.getItem(`${Av}/${i}`)}}const zE=ac,HE="wc",KE="ethereum_provider",jE=`${HE}@2:${KE}:`,VE="https://rpc.walletconnect.com/v1/",_u=["eth_sendTransaction","personal_sign"],GE=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Mu=["chainChanged","accountsChanged"],ZE=["message","disconnect","connect"];var WE=Object.defineProperty,YE=Object.defineProperties,JE=Object.getOwnPropertyDescriptors,Cv=Object.getOwnPropertySymbols,XE=Object.prototype.hasOwnProperty,QE=Object.prototype.propertyIsEnumerable,Bv=(l,i,a)=>i in l?WE(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,Ws=(l,i)=>{for(var a in i||(i={}))XE.call(i,a)&&Bv(l,a,i[a]);if(Cv)for(var a of Cv(i))QE.call(i,a)&&Bv(l,a,i[a]);return l},qv=(l,i)=>YE(l,JE(i));function Bo(l){return Number(l[0].split(":")[1])}function nu(l){return`0x${l.toString(16)}`}function tS(l){const{chains:i,optionalChains:a,methods:f,optionalMethods:g,events:n,optionalEvents:x,rpcMap:M}=l;if(!Li(i))throw new Error("Invalid chains");const _={chains:i,methods:f||_u,events:n||Mu,rpcMap:Ws({},i.length?{[Bo(i)]:M[Bo(i)]}:{})},w=n==null?void 0:n.filter(I=>!Mu.includes(I)),b=f==null?void 0:f.filter(I=>!_u.includes(I));if(!a&&!x&&!g&&!(w!=null&&w.length)&&!(b!=null&&b.length))return{required:i.length?_:void 0};const A=(w==null?void 0:w.length)&&(b==null?void 0:b.length)||!a,E={chains:[...new Set(A?_.chains.concat(a||[]):a)],methods:[...new Set(_.methods.concat(g!=null&&g.length?g:GE))],events:[...new Set(_.events.concat(x||ZE))],rpcMap:M};return{required:i.length?_:void 0,optional:a.length?E:void 0}}class oc{constructor(){this.events=new qr.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=jE,this.on=(i,a)=>(this.events.on(i,a),this),this.once=(i,a)=>(this.events.once(i,a),this),this.removeListener=(i,a)=>(this.events.removeListener(i,a),this),this.off=(i,a)=>(this.events.off(i,a),this),this.parseAccount=i=>this.isCompatibleChainId(i)?this.parseAccountId(i).address:i,this.signer={},this.rpc={}}static async init(i){const a=new oc;return await a.initialize(i),a}async request(i){return await this.signer.request(i,this.formatChainId(this.chainId))}sendAsync(i,a){this.signer.sendAsync(i,a,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(i){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(i);const{required:a,optional:f}=tS(this.rpc);try{const g=await new Promise(async(x,M)=>{var _;this.rpc.showQrModal&&((_=this.modal)==null||_.subscribeModal(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),M(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(qv(Ws({namespaces:Ws({},a&&{[this.namespace]:a})},f&&{optionalNamespaces:{[this.namespace]:f}}),{pairingTopic:i==null?void 0:i.pairingTopic})).then(w=>{x(w)}).catch(w=>{M(new Error(w.message))})});if(!g)return;const n=VM(g.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:n),this.setAccounts(n),this.events.emit("connect",{chainId:nu(this.chainId)})}catch(g){throw this.signer.logger.error(g),g}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",i=>{const{params:a}=i,{event:f}=a;f.name==="accountsChanged"?(this.accounts=this.parseAccounts(f.data),this.events.emit("accountsChanged",this.accounts)):f.name==="chainChanged"?this.setChainId(this.formatChainId(f.data)):this.events.emit(f.name,f.data),this.events.emit("session_event",i)}),this.signer.on("chainChanged",i=>{const a=parseInt(i);this.chainId=a,this.events.emit("chainChanged",nu(this.chainId)),this.persist()}),this.signer.on("session_update",i=>{this.events.emit("session_update",i)}),this.signer.on("session_delete",i=>{this.reset(),this.events.emit("session_delete",i),this.events.emit("disconnect",qv(Ws({},br("USER_DISCONNECTED")),{data:i.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",i=>{var a,f;this.rpc.showQrModal&&((a=this.modal)==null||a.closeModal(),(f=this.modal)==null||f.openModal({uri:i})),this.events.emit("display_uri",i)})}switchEthereumChain(i){this.request({method:"wallet_switchEthereumChain",params:[{chainId:i.toString(16)}]})}isCompatibleChainId(i){return typeof i=="string"?i.startsWith(`${this.namespace}:`):!1}formatChainId(i){return`${this.namespace}:${i}`}parseChainId(i){return Number(i.split(":")[1])}setChainIds(i){const a=i.filter(f=>this.isCompatibleChainId(f)).map(f=>this.parseChainId(f));a.length&&(this.chainId=a[0],this.events.emit("chainChanged",nu(this.chainId)),this.persist())}setChainId(i){if(this.isCompatibleChainId(i)){const a=this.parseChainId(i);this.chainId=a,this.switchEthereumChain(a)}}parseAccountId(i){const[a,f,g]=i.split(":");return{chainId:`${a}:${f}`,address:g}}setAccounts(i){this.accounts=i.filter(a=>this.parseChainId(this.parseAccountId(a).chainId)===this.chainId).map(a=>this.parseAccountId(a).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(i){var a,f;const g=(a=i==null?void 0:i.chains)!=null?a:[],n=(f=i==null?void 0:i.optionalChains)!=null?f:[],x=g.concat(n);if(!x.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const M=g.length?(i==null?void 0:i.methods)||_u:[],_=g.length?(i==null?void 0:i.events)||Mu:[],w=(i==null?void 0:i.optionalMethods)||[],b=(i==null?void 0:i.optionalEvents)||[],A=(i==null?void 0:i.rpcMap)||this.buildRpcMap(x,i.projectId),E=(i==null?void 0:i.qrModalOptions)||void 0;return{chains:g==null?void 0:g.map(I=>this.formatChainId(I)),optionalChains:n.map(I=>this.formatChainId(I)),methods:M,events:_,optionalMethods:w,optionalEvents:b,rpcMap:A,showQrModal:!!(i!=null&&i.showQrModal),qrModalOptions:E,projectId:i.projectId,metadata:i.metadata}}buildRpcMap(i,a){const f={};return i.forEach(g=>{f[g]=this.getRpcUrl(g,a)}),f}async initialize(i){if(this.rpc=this.getRpcConfig(i),this.chainId=this.rpc.chains.length?Bo(this.rpc.chains):Bo(this.rpc.optionalChains),this.signer=await zE.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:i.disableProviderPing,relayUrl:i.relayUrl,storageOptions:i.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let a;try{const{WalletConnectModal:f}=await Qw(()=>import("./index.c5dc03a5.js").then(g=>g.i),["assets/index.c5dc03a5.js","assets/index.4868755f.js","assets/index.09a325bf.css"]);a=f}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(a)try{this.modal=new a(Ws({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(f){throw this.signer.logger.error(f),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(i){if(!i)return;const{chains:a,optionalChains:f,rpcMap:g}=i;a&&Li(a)&&(this.rpc.chains=a.map(n=>this.formatChainId(n)),a.forEach(n=>{this.rpc.rpcMap[n]=(g==null?void 0:g[n])||this.getRpcUrl(n)})),f&&Li(f)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=f==null?void 0:f.map(n=>this.formatChainId(n)),f.forEach(n=>{this.rpc.rpcMap[n]=(g==null?void 0:g[n])||this.getRpcUrl(n)}))}getRpcUrl(i,a){var f;return((f=this.rpc.rpcMap)==null?void 0:f[i])||`${VE}?chainId=eip155:${i}&projectId=${a||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const i=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),a=this.session.namespaces[`${this.namespace}:${i}`]?this.session.namespaces[`${this.namespace}:${i}`]:this.session.namespaces[this.namespace];this.setChainIds(i?[this.formatChainId(i)]:a==null?void 0:a.accounts),this.setAccounts(a==null?void 0:a.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(i){return typeof i=="string"||i instanceof String?[this.parseAccount(i)]:i.map(a=>this.parseAccount(a))}}const iS=oc;export{iS as EthereumProvider,ZE as OPTIONAL_EVENTS,GE as OPTIONAL_METHODS,Mu as REQUIRED_EVENTS,_u as REQUIRED_METHODS,oc as default};
